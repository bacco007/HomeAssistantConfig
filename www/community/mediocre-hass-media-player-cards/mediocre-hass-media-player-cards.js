(function(nt){typeof define=="function"&&define.amd?define(nt):nt()})(function(){"use strict";var nt,Y,Jn,ct,Qn,Zn,eo,to,zr,Br,Fr,ro,$t={},no=[],Ga=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Mt=Array.isArray;function Ue(e,t){for(var r in t)e[r]=t[r];return e}function jr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function be(e,t,r){var n,o,i,a={};for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?nt.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return Ot(e,a,n,o,null)}function Ot(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Jn,__i:-1,__u:0};return o==null&&Y.vnode!=null&&Y.vnode(i),i}function oo(){return{current:null}}function ge(e){return e.children}function ze(e,t){this.props=e,this.context=t}function bt(e,t){if(t==null)return e.__?bt(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?bt(e):null}function io(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return io(e)}}function Ur(e){(!e.__d&&(e.__d=!0)&&ct.push(e)&&!nr.__r++||Qn!==Y.debounceRendering)&&((Qn=Y.debounceRendering)||Zn)(nr)}function nr(){for(var e,t,r,n,o,i,a,s=1;ct.length;)ct.length>s&&ct.sort(eo),e=ct.shift(),s=ct.length,e.__d&&(r=void 0,o=(n=(t=e).__v).__e,i=[],a=[],t.__P&&((r=Ue({},n)).__v=n.__v+1,Y.vnode&&Y.vnode(r),Wr(t.__P,r,n,t.__n,t.__P.namespaceURI,32&n.__u?[o]:null,i,o??bt(n),!!(32&n.__u),a),r.__v=n.__v,r.__.__k[r.__i]=r,uo(i,r,a),r.__e!=o&&io(r)));nr.__r=0}function ao(e,t,r,n,o,i,a,s,c,u,d){var l,p,h,m,_,y,g=n&&n.__k||no,x=t.length;for(c=Ya(r,t,g,c,x),l=0;l<x;l++)(h=r.__k[l])!=null&&(p=h.__i===-1?$t:g[h.__i]||$t,h.__i=l,y=Wr(e,h,p,o,i,a,s,c,u,d),m=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&Hr(p.ref,null,h),d.push(h.ref,h.__c||m,h)),_==null&&m!=null&&(_=m),4&h.__u||p.__k===h.__k?c=so(h,c,e):typeof h.type=="function"&&y!==void 0?c=y:m&&(c=m.nextSibling),h.__u&=-7);return r.__e=_,c}function Ya(e,t,r,n,o){var i,a,s,c,u,d=r.length,l=d,p=0;for(e.__k=new Array(o),i=0;i<o;i++)(a=t[i])!=null&&typeof a!="boolean"&&typeof a!="function"?(c=i+p,(a=e.__k[i]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Ot(null,a,null,null,null):Mt(a)?Ot(ge,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?Ot(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,s=null,(u=a.__i=Ka(a,r,c,l))!==-1&&(l--,(s=r[u])&&(s.__u|=2)),s==null||s.__v===null?(u==-1&&(o>d?p--:o<d&&p++),typeof a.type!="function"&&(a.__u|=4)):u!=c&&(u==c-1?p--:u==c+1?p++:(u>c?p--:p++,a.__u|=4))):e.__k[i]=null;if(l)for(i=0;i<d;i++)(s=r[i])!=null&&(2&s.__u)==0&&(s.__e==n&&(n=bt(s)),po(s,s));return n}function so(e,t,r){var n,o;if(typeof e.type=="function"){for(n=e.__k,o=0;n&&o<n.length;o++)n[o]&&(n[o].__=e,t=so(n[o],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=bt(e)),r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Ke(e,t){return t=t||[],e==null||typeof e=="boolean"||(Mt(e)?e.some(function(r){Ke(r,t)}):t.push(e)),t}function Ka(e,t,r,n){var o,i,a=e.key,s=e.type,c=t[r];if(c===null&&e.key==null||c&&a==c.key&&s===c.type&&(2&c.__u)==0)return r;if(n>(c!=null&&(2&c.__u)==0?1:0))for(o=r-1,i=r+1;o>=0||i<t.length;){if(o>=0){if((c=t[o])&&(2&c.__u)==0&&a==c.key&&s===c.type)return o;o--}if(i<t.length){if((c=t[i])&&(2&c.__u)==0&&a==c.key&&s===c.type)return i;i++}}return-1}function co(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||Ga.test(t)?r:r+"px"}function or(e,t,r,n,o){var i;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||co(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||co(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(to,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n?r.t=n.t:(r.t=zr,e.addEventListener(t,i?Fr:Br,i)):e.removeEventListener(t,i?Fr:Br,i);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function lo(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.u==null)t.u=zr++;else if(t.u<r.t)return;return r(Y.event?Y.event(t):t)}}}function Wr(e,t,r,n,o,i,a,s,c,u){var d,l,p,h,m,_,y,g,x,C,S,b,k,P,T,O,R,D=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(c=!!(32&r.__u),i=[s=t.__e=r.__e]),(d=Y.__b)&&d(t);e:if(typeof D=="function")try{if(g=t.props,x="prototype"in D&&D.prototype.render,C=(d=D.contextType)&&n[d.__c],S=d?C?C.props.value:d.__:n,r.__c?y=(l=t.__c=r.__c).__=l.__E:(x?t.__c=l=new D(g,S):(t.__c=l=new ze(g,S),l.constructor=D,l.render=Ja),C&&C.sub(l),l.props=g,l.state||(l.state={}),l.context=S,l.__n=n,p=l.__d=!0,l.__h=[],l._sb=[]),x&&l.__s==null&&(l.__s=l.state),x&&D.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Ue({},l.__s)),Ue(l.__s,D.getDerivedStateFromProps(g,l.__s))),h=l.props,m=l.state,l.__v=t,p)x&&D.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),x&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(x&&D.getDerivedStateFromProps==null&&g!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(g,S),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(g,l.__s,S)===!1||t.__v==r.__v)){for(t.__v!=r.__v&&(l.props=g,l.state=l.__s,l.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(F){F&&(F.__=t)}),b=0;b<l._sb.length;b++)l.__h.push(l._sb[b]);l._sb=[],l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(g,l.__s,S),x&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,m,_)})}if(l.context=S,l.props=g,l.__P=e,l.__e=!1,k=Y.__r,P=0,x){for(l.state=l.__s,l.__d=!1,k&&k(t),d=l.render(l.props,l.state,l.context),T=0;T<l._sb.length;T++)l.__h.push(l._sb[T]);l._sb=[]}else do l.__d=!1,k&&k(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++P<25);l.state=l.__s,l.getChildContext!=null&&(n=Ue(Ue({},n),l.getChildContext())),x&&!p&&l.getSnapshotBeforeUpdate!=null&&(_=l.getSnapshotBeforeUpdate(h,m)),O=d,d!=null&&d.type===ge&&d.key==null&&(O=fo(d.props.children)),s=ao(e,Mt(O)?O:[O],t,r,n,o,i,a,s,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&a.push(l),y&&(l.__E=l.__=null)}catch(F){if(t.__v=null,c||i!=null)if(F.then){for(t.__u|=c?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;i[i.indexOf(s)]=null,t.__e=s}else for(R=i.length;R--;)jr(i[R]);else t.__e=r.__e,t.__k=r.__k;Y.__e(F,t,r)}else i==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):s=t.__e=Xa(r.__e,t,r,n,o,i,a,c,u);return(d=Y.diffed)&&d(t),128&t.__u?void 0:s}function uo(e,t,r){for(var n=0;n<r.length;n++)Hr(r[n],r[++n],r[++n]);Y.__c&&Y.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){Y.__e(i,o.__v)}})}function fo(e){return typeof e!="object"||e==null?e:Mt(e)?e.map(fo):Ue({},e)}function Xa(e,t,r,n,o,i,a,s,c){var u,d,l,p,h,m,_,y=r.props,g=t.props,x=t.type;if(x=="svg"?o="http://www.w3.org/2000/svg":x=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(u=0;u<i.length;u++)if((h=i[u])&&"setAttribute"in h==!!x&&(x?h.localName==x:h.nodeType==3)){e=h,i[u]=null;break}}if(e==null){if(x==null)return document.createTextNode(g);e=document.createElementNS(o,x,g.is&&g),s&&(Y.__m&&Y.__m(t,i),s=!1),i=null}if(x===null)y===g||s&&e.data===g||(e.data=g);else{if(i=i&&nt.call(e.childNodes),y=r.props||$t,!s&&i!=null)for(y={},u=0;u<e.attributes.length;u++)y[(h=e.attributes[u]).name]=h.value;for(u in y)if(h=y[u],u!="children"){if(u=="dangerouslySetInnerHTML")l=h;else if(!(u in g)){if(u=="value"&&"defaultValue"in g||u=="checked"&&"defaultChecked"in g)continue;or(e,u,null,h,o)}}for(u in g)h=g[u],u=="children"?p=h:u=="dangerouslySetInnerHTML"?d=h:u=="value"?m=h:u=="checked"?_=h:s&&typeof h!="function"||y[u]===h||or(e,u,h,y[u],o);if(d)s||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),ao(t.type==="template"?e.content:e,Mt(p)?p:[p],t,r,n,x=="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,a,i?i[0]:r.__k&&bt(r,0),s,c),i!=null)for(u=i.length;u--;)jr(i[u]);s||(u="value",x=="progress"&&m==null?e.removeAttribute("value"):m!==void 0&&(m!==e[u]||x=="progress"&&!m||x=="option"&&m!==y[u])&&or(e,u,m,y[u],o),u="checked",_!==void 0&&_!==e[u]&&or(e,u,_,y[u],o))}return e}function Hr(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(o){Y.__e(o,r)}}function po(e,t,r){var n,o;if(Y.unmount&&Y.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||Hr(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){Y.__e(i,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&po(n[o],t,r||typeof e.type!="function");r||jr(e.__e),e.__c=e.__=e.__e=void 0}function Ja(e,t,r){return this.constructor(e,r)}function lt(e,t,r){var n,o,i,a;t==document&&(t=document.documentElement),Y.__&&Y.__(e,t),o=(n=typeof r=="function")?null:r&&r.__k||t.__k,i=[],a=[],Wr(t,e=(!n&&r||t).__k=be(ge,null,[e]),o||$t,$t,t.namespaceURI,!n&&r?[r]:o?null:t.firstChild?nt.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n,a),uo(i,e,a)}function ho(e,t){lt(e,t,ho)}function Qa(e,t,r){var n,o,i,a,s=Ue({},e.props);for(i in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)i=="key"?n=t[i]:i=="ref"?o=t[i]:s[i]=t[i]===void 0&&a!==void 0?a[i]:t[i];return arguments.length>2&&(s.children=arguments.length>3?nt.call(arguments,2):r),Ot(e.type,s,n||e.key,o||e.ref,null)}function Oe(e){function t(r){var n,o;return this.getChildContext||(n=new Set,(o={})[t.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(i){this.props.value!==i.value&&n.forEach(function(a){a.__e=!0,Ur(a)})},this.sub=function(i){n.add(i);var a=i.componentWillUnmount;i.componentWillUnmount=function(){n&&n.delete(i),a&&a.call(i)}}),r.children}return t.__c="__cC"+ro++,t.__=e,t.Provider=t.__l=(t.Consumer=function(r,n){return r.children(n)}).contextType=t,t}nt=no.slice,Y={__e:function(e,t,r,n){for(var o,i,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,n||{}),a=o.__d),a)return o.__E=o}catch(s){e=s}throw e}},Jn=0,ze.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ue({},this.state),typeof e=="function"&&(e=e(Ue({},r),this.props)),e&&Ue(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ur(this))},ze.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ur(this))},ze.prototype.render=ge,ct=[],Zn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,eo=function(e,t){return e.__v.__b-t.__v.__b},nr.__r=0,to=/(PointerCapture)$|Capture$/i,zr=0,Br=lo(!1),Fr=lo(!0),ro=0;var Xe,se,qr,mo,xt=0,_o=[],fe=Y,go=fe.__b,yo=fe.__r,vo=fe.diffed,bo=fe.__c,xo=fe.unmount,wo=fe.__;function ut(e,t){fe.__h&&fe.__h(se,e,xt||t),xt=0;var r=se.__H||(se.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function N(e){return xt=1,ir(So,e)}function ir(e,t,r){var n=ut(Xe++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):So(void 0,t),function(s){var c=n.__N?n.__N[0]:n.__[0],u=n.t(c,s);c!==u&&(n.__N=[u,n.__[1]],n.__c.setState({}))}],n.__c=se,!se.__f)){var o=function(s,c,u){if(!n.__c.__H)return!0;var d=n.__c.__H.__.filter(function(p){return!!p.__c});if(d.every(function(p){return!p.__N}))return!i||i.call(this,s,c,u);var l=n.__c.props!==s;return d.forEach(function(p){if(p.__N){var h=p.__[0];p.__=p.__N,p.__N=void 0,h!==p.__[0]&&(l=!0)}}),i&&i.call(this,s,c,u)||l};se.__f=!0;var i=se.shouldComponentUpdate,a=se.componentWillUpdate;se.componentWillUpdate=function(s,c,u){if(this.__e){var d=i;i=void 0,o(s,c,u),i=d}a&&a.call(this,s,c,u)},se.shouldComponentUpdate=o}return n.__N||n.__}function pe(e,t){var r=ut(Xe++,3);!fe.__s&&Jr(r.__H,t)&&(r.__=e,r.u=t,se.__H.__h.push(r))}function dt(e,t){var r=ut(Xe++,4);!fe.__s&&Jr(r.__H,t)&&(r.__=e,r.u=t,se.__h.push(r))}function te(e){return xt=5,H(function(){return{current:e}},[])}function Gr(e,t,r){xt=6,dt(function(){if(typeof e=="function"){var n=e(t());return function(){e(null),n&&typeof n=="function"&&n()}}if(e)return e.current=t(),function(){return e.current=null}},r==null?r:r.concat(e))}function H(e,t){var r=ut(Xe++,7);return Jr(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function $(e,t){return xt=8,H(function(){return e},t)}function ae(e){var t=se.context[e.__c],r=ut(Xe++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(se)),t.props.value):e.__}function Yr(e,t){fe.useDebugValue&&fe.useDebugValue(t?t(e):e)}function Za(e){var t=ut(Xe++,10),r=N();return t.__=e,se.componentDidCatch||(se.componentDidCatch=function(n,o){t.__&&t.__(n,o),r[1](n)}),[r[0],function(){r[1](void 0)}]}function Kr(){var e=ut(Xe++,11);if(!e.__){for(var t=se.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function es(){for(var e;e=_o.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ar),e.__H.__h.forEach(Xr),e.__H.__h=[]}catch(t){e.__H.__h=[],fe.__e(t,e.__v)}}fe.__b=function(e){se=null,go&&go(e)},fe.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),wo&&wo(e,t)},fe.__r=function(e){yo&&yo(e),Xe=0;var t=(se=e.__c).__H;t&&(qr===se?(t.__h=[],se.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(ar),t.__h.forEach(Xr),t.__h=[],Xe=0)),qr=se},fe.diffed=function(e){vo&&vo(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(_o.push(t)!==1&&mo===fe.requestAnimationFrame||((mo=fe.requestAnimationFrame)||ts)(es)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),qr=se=null},fe.__c=function(e,t){t.some(function(r){try{r.__h.forEach(ar),r.__h=r.__h.filter(function(n){return!n.__||Xr(n)})}catch(n){t.some(function(o){o.__h&&(o.__h=[])}),t=[],fe.__e(n,r.__v)}}),bo&&bo(e,t)},fe.unmount=function(e){xo&&xo(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{ar(n)}catch(o){t=o}}),r.__H=void 0,t&&fe.__e(t,r.__v))};var Co=typeof requestAnimationFrame=="function";function ts(e){var t,r=function(){clearTimeout(n),Co&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);Co&&(t=requestAnimationFrame(r))}function ar(e){var t=se,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),se=t}function Xr(e){var t=se;e.__c=e.__(),se=t}function Jr(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function So(e,t){return typeof t=="function"?t(e):t}function ko(e,t){for(var r in t)e[r]=t[r];return e}function Qr(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function Zr(e,t){var r=t(),n=N({t:{__:r,u:t}}),o=n[0].t,i=n[1];return dt(function(){o.__=r,o.u=t,en(o)&&i({t:o})},[e,r,t]),pe(function(){return en(o)&&i({t:o}),e(function(){en(o)&&i({t:o})})},[e]),r}function en(e){var t,r,n=e.u,o=e.__;try{var i=n();return!((t=o)===(r=i)&&(t!==0||1/t==1/r)||t!=t&&r!=r)}catch{return!0}}function tn(e){e()}function rn(e){return e}function nn(){return[!1,tn]}var on=dt;function sr(e,t){this.props=e,this.context=t}function Eo(e,t){function r(o){var i=this.props.ref,a=i==o.ref;return!a&&i&&(i.call?i(null):i.current=null),t?!t(this.props,o)||!a:Qr(this.props,o)}function n(o){return this.shouldComponentUpdate=r,be(e,o)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(sr.prototype=new ze).isPureReactComponent=!0,sr.prototype.shouldComponentUpdate=function(e,t){return Qr(this.props,e)||Qr(this.state,t)};var Po=Y.__b;Y.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Po&&Po(e)};var rs=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ie(e){function t(r){var n=ko({},r);return delete n.ref,e(n,r.ref||null)}return t.$$typeof=rs,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var To=function(e,t){return e==null?null:Ke(Ke(e).map(t))},Ro={map:To,forEach:To,count:function(e){return e?Ke(e).length:0},only:function(e){var t=Ke(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:Ke},ns=Y.__e;Y.__e=function(e,t,r,n){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),o.__c(e,t)}ns(e,t,r,n)};var Io=Y.unmount;function $o(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=ko({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return $o(n,t,r)})),e}function Mo(e,t,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Mo(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=r)),e}function Dt(){this.__u=0,this.o=null,this.__b=null}function Oo(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Do(e){var t,r,n;function o(i){if(t||(t=e()).then(function(a){r=a.default||a},function(a){n=a}),n)throw n;if(!r)throw t;return be(r,i)}return o.displayName="Lazy",o.__f=!0,o}function wt(){this.i=null,this.l=null}Y.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Io&&Io(e)},(Dt.prototype=new ze).__c=function(e,t){var r=t.__c,n=this;n.o==null&&(n.o=[]),n.o.push(r);var o=Oo(n.__v),i=!1,a=function(){i||(i=!0,r.__R=null,o?o(s):s())};r.__R=a;var s=function(){if(!--n.__u){if(n.state.__a){var c=n.state.__a;n.__v.__k[0]=Mo(c,c.__c.__P,c.__c.__O)}var u;for(n.setState({__a:n.__b=null});u=n.o.pop();)u.forceUpdate()}};n.__u++||32&t.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(a,a)},Dt.prototype.componentWillUnmount=function(){this.o=[]},Dt.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=$o(this.__b,r,n.__O=n.__P)}this.__b=null}var o=t.__a&&be(ge,null,e.fallback);return o&&(o.__u&=-33),[be(ge,null,t.__a?null:e.children),o]};var Vo=function(e,t,r){if(++r[1]===r[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(r=e.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.i=r=r[2]}};function os(e){return this.getChildContext=function(){return e.context},e.children}function is(e){var t=this,r=e.h;t.componentWillUnmount=function(){lt(null,t.v),t.v=null,t.h=null},t.h&&t.h!==r&&t.componentWillUnmount(),t.v||(t.h=r,t.v={nodeType:1,parentNode:r,childNodes:[],contains:function(){return!0},appendChild:function(n){this.childNodes.push(n),t.h.appendChild(n)},insertBefore:function(n,o){this.childNodes.push(n),t.h.insertBefore(n,o)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.h.removeChild(n)}}),lt(be(os,{context:t.context},e.__v),t.v)}function No(e,t){var r=be(is,{__v:e,h:t});return r.containerInfo=t,r}(wt.prototype=new ze).__a=function(e){var t=this,r=Oo(t.__v),n=t.l.get(e);return n[0]++,function(o){var i=function(){t.props.revealOrder?(n.push(o),Vo(t,e,n)):o()};r?r(i):i()}},wt.prototype.render=function(e){this.i=null,this.l=new Map;var t=Ke(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.l.set(t[r],this.i=[1,0,this.i]);return e.children},wt.prototype.componentDidUpdate=wt.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,r){Vo(e,r,t)})};var Ao=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,as=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ss=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,cs=/[A-Z0-9]/g,ls=typeof document<"u",us=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Lo(e,t,r){return t.__k==null&&(t.textContent=""),lt(e,t),typeof r=="function"&&r(),e?e.__c:null}function zo(e,t,r){return ho(e,t),typeof r=="function"&&r(),e?e.__c:null}ze.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(ze.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Bo=Y.event;function ds(){}function fs(){return this.cancelBubble}function ps(){return this.defaultPrevented}Y.event=function(e){return Bo&&(e=Bo(e)),e.persist=ds,e.isPropagationStopped=fs,e.isDefaultPrevented=ps,e.nativeEvent=e};var an,hs={enumerable:!1,configurable:!0,get:function(){return this.class}},Fo=Y.vnode;Y.vnode=function(e){typeof e.type=="string"&&function(t){var r=t.props,n=t.type,o={},i=n.indexOf("-")===-1;for(var a in r){var s=r[a];if(!(a==="value"&&"defaultValue"in r&&s==null||ls&&a==="children"&&n==="noscript"||a==="class"||a==="className")){var c=a.toLowerCase();a==="defaultValue"&&"value"in r&&r.value==null?a="value":a==="download"&&s===!0?s="":c==="translate"&&s==="no"?s=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?a="ondblclick":c!=="onchange"||n!=="input"&&n!=="textarea"||us(r.type)?c==="onfocus"?a="onfocusin":c==="onblur"?a="onfocusout":ss.test(a)&&(a=c):c=a="oninput":i&&as.test(a)?a=a.replace(cs,"-$&").toLowerCase():s===null&&(s=void 0),c==="oninput"&&o[a=c]&&(a="oninputCapture"),o[a]=s}}n=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=Ke(r.children).forEach(function(u){u.props.selected=o.value.indexOf(u.props.value)!=-1})),n=="select"&&o.defaultValue!=null&&(o.value=Ke(r.children).forEach(function(u){u.props.selected=o.multiple?o.defaultValue.indexOf(u.props.value)!=-1:o.defaultValue==u.props.value})),r.class&&!r.className?(o.class=r.class,Object.defineProperty(o,"className",hs)):(r.className&&!r.class||r.class&&r.className)&&(o.class=o.className=r.className),t.props=o}(e),e.$$typeof=Ao,Fo&&Fo(e)};var jo=Y.__r;Y.__r=function(e){jo&&jo(e),an=e.__c};var Uo=Y.diffed;Y.diffed=function(e){Uo&&Uo(e);var t=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in t&&t.value!==r.value&&(r.value=t.value==null?"":t.value),an=null};var Wo={ReactCurrentDispatcher:{current:{readContext:function(e){return an.__n[e.__c].props.value},useCallback:$,useContext:ae,useDebugValue:Yr,useDeferredValue:rn,useEffect:pe,useId:Kr,useImperativeHandle:Gr,useInsertionEffect:on,useLayoutEffect:dt,useMemo:H,useReducer:ir,useRef:te,useState:N,useSyncExternalStore:Zr,useTransition:nn}}},Ho="18.3.1";function qo(e){return be.bind(null,e)}function Vt(e){return!!e&&e.$$typeof===Ao}function Go(e){return Vt(e)&&e.type===ge}function Yo(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function cr(e){return Vt(e)?Qa.apply(null,arguments):e}function Ko(e){return!!e.__k&&(lt(null,e),!0)}function Xo(e){return e&&(e.base||e.nodeType===1&&e)||null}var Jo=function(e,t){return e(t)},sn=function(e,t){return e(t)},Qo=ge,Zo=Vt,ms={useState:N,useId:Kr,useReducer:ir,useEffect:pe,useLayoutEffect:dt,useInsertionEffect:on,useTransition:nn,useDeferredValue:rn,useSyncExternalStore:Zr,startTransition:tn,useRef:te,useImperativeHandle:Gr,useMemo:H,useCallback:$,useContext:ae,useDebugValue:Yr,version:"18.3.1",Children:Ro,render:Lo,hydrate:zo,unmountComponentAtNode:Ko,createPortal:No,createElement:be,createContext:Oe,createFactory:qo,cloneElement:cr,createRef:oo,Fragment:ge,isValidElement:Vt,isElement:Zo,isFragment:Go,isMemo:Yo,findDOMNode:Xo,Component:ze,PureComponent:sr,memo:Eo,forwardRef:Ie,flushSync:sn,unstable_batchedUpdates:Jo,StrictMode:Qo,Suspense:Dt,SuspenseList:wt,lazy:Do,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Wo};const cn=Object.freeze(Object.defineProperty({__proto__:null,Children:Ro,Component:ze,Fragment:ge,PureComponent:sr,StrictMode:Qo,Suspense:Dt,SuspenseList:wt,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Wo,cloneElement:cr,createContext:Oe,createElement:be,createFactory:qo,createPortal:No,createRef:oo,default:ms,findDOMNode:Xo,flushSync:sn,forwardRef:Ie,hydrate:zo,isElement:Zo,isFragment:Go,isMemo:Yo,isValidElement:Vt,lazy:Do,memo:Eo,render:Lo,startTransition:tn,unmountComponentAtNode:Ko,unstable_batchedUpdates:Jo,useCallback:$,useContext:ae,useDebugValue:Yr,useDeferredValue:rn,useEffect:pe,useErrorBoundary:Za,useId:Kr,useImperativeHandle:Gr,useInsertionEffect:on,useLayoutEffect:dt,useMemo:H,useReducer:ir,useRef:te,useState:N,useSyncExternalStore:Zr,useTransition:nn,version:Ho},Symbol.toStringTag,{value:"Module"}));var _s=0;function Se(e,t,r,n,o,i){t||(t={});var a,s,c=t;if("ref"in c)for(s in c={},t)s=="ref"?a=t[s]:c[s]=t[s];var u={type:e,props:c,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--_s,__i:-1,__u:0,__source:o,__self:i};if(typeof e=="function"&&(a=e.defaultProps))for(s in a)c[s]===void 0&&(c[s]=a[s]);return Y.vnode&&Y.vnode(u),u}function gs(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function ys(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var vs=function(){function e(r){var n=this;this._insertTag=function(o){var i;n.tags.length===0?n.insertionPoint?i=n.insertionPoint.nextSibling:n.prepend?i=n.container.firstChild:i=n.before:i=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(o,i),n.tags.push(o)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ys(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var i=gs(o);try{i.insertRule(n,i.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var o;return(o=n.parentNode)==null?void 0:o.removeChild(n)}),this.tags=[],this.ctr=0},e}(),ke="-ms-",lr="-moz-",re="-webkit-",ei="comm",ln="rule",un="decl",bs="@import",ti="@keyframes",xs="@layer",ws=Math.abs,ur=String.fromCharCode,Cs=Object.assign;function Ss(e,t){return xe(e,0)^45?(((t<<2^xe(e,0))<<2^xe(e,1))<<2^xe(e,2))<<2^xe(e,3):0}function ri(e){return e.trim()}function ks(e,t){return(e=t.exec(e))?e[0]:e}function ne(e,t,r){return e.replace(t,r)}function dn(e,t){return e.indexOf(t)}function xe(e,t){return e.charCodeAt(t)|0}function Nt(e,t,r){return e.slice(t,r)}function We(e){return e.length}function fn(e){return e.length}function dr(e,t){return t.push(e),e}function Es(e,t){return e.map(t).join("")}var fr=1,Ct=1,ni=0,$e=0,me=0,St="";function pr(e,t,r,n,o,i,a){return{value:e,root:t,parent:r,type:n,props:o,children:i,line:fr,column:Ct,length:a,return:""}}function At(e,t){return Cs(pr("",null,null,"",null,null,0),e,{length:-e.length},t)}function Ps(){return me}function Ts(){return me=$e>0?xe(St,--$e):0,Ct--,me===10&&(Ct=1,fr--),me}function De(){return me=$e<ni?xe(St,$e++):0,Ct++,me===10&&(Ct=1,fr++),me}function He(){return xe(St,$e)}function hr(){return $e}function Lt(e,t){return Nt(St,e,t)}function zt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function oi(e){return fr=Ct=1,ni=We(St=e),$e=0,[]}function ii(e){return St="",e}function mr(e){return ri(Lt($e-1,pn(e===91?e+2:e===40?e+1:e)))}function Rs(e){for(;(me=He())&&me<33;)De();return zt(e)>2||zt(me)>3?"":" "}function Is(e,t){for(;--t&&De()&&!(me<48||me>102||me>57&&me<65||me>70&&me<97););return Lt(e,hr()+(t<6&&He()==32&&De()==32))}function pn(e){for(;De();)switch(me){case e:return $e;case 34:case 39:e!==34&&e!==39&&pn(me);break;case 40:e===41&&pn(e);break;case 92:De();break}return $e}function $s(e,t){for(;De()&&e+me!==57;)if(e+me===84&&He()===47)break;return"/*"+Lt(t,$e-1)+"*"+ur(e===47?e:De())}function Ms(e){for(;!zt(He());)De();return Lt(e,$e)}function Os(e){return ii(_r("",null,null,null,[""],e=oi(e),0,[0],e))}function _r(e,t,r,n,o,i,a,s,c){for(var u=0,d=0,l=a,p=0,h=0,m=0,_=1,y=1,g=1,x=0,C="",S=o,b=i,k=n,P=C;y;)switch(m=x,x=De()){case 40:if(m!=108&&xe(P,l-1)==58){dn(P+=ne(mr(x),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:P+=mr(x);break;case 9:case 10:case 13:case 32:P+=Rs(m);break;case 92:P+=Is(hr()-1,7);continue;case 47:switch(He()){case 42:case 47:dr(Ds($s(De(),hr()),t,r),c);break;default:P+="/"}break;case 123*_:s[u++]=We(P)*g;case 125*_:case 59:case 0:switch(x){case 0:case 125:y=0;case 59+d:g==-1&&(P=ne(P,/\f/g,"")),h>0&&We(P)-l&&dr(h>32?si(P+";",n,r,l-1):si(ne(P," ","")+";",n,r,l-2),c);break;case 59:P+=";";default:if(dr(k=ai(P,t,r,u,d,o,s,C,S=[],b=[],l),i),x===123)if(d===0)_r(P,t,k,k,S,i,l,s,b);else switch(p===99&&xe(P,3)===110?100:p){case 100:case 108:case 109:case 115:_r(e,k,k,n&&dr(ai(e,k,k,0,0,o,s,C,o,S=[],l),b),o,b,l,s,n?S:b);break;default:_r(P,k,k,k,[""],b,0,s,b)}}u=d=h=0,_=g=1,C=P="",l=a;break;case 58:l=1+We(P),h=m;default:if(_<1){if(x==123)--_;else if(x==125&&_++==0&&Ts()==125)continue}switch(P+=ur(x),x*_){case 38:g=d>0?1:(P+="\f",-1);break;case 44:s[u++]=(We(P)-1)*g,g=1;break;case 64:He()===45&&(P+=mr(De())),p=He(),d=l=We(C=P+=Ms(hr())),x++;break;case 45:m===45&&We(P)==2&&(_=0)}}return i}function ai(e,t,r,n,o,i,a,s,c,u,d){for(var l=o-1,p=o===0?i:[""],h=fn(p),m=0,_=0,y=0;m<n;++m)for(var g=0,x=Nt(e,l+1,l=ws(_=a[m])),C=e;g<h;++g)(C=ri(_>0?p[g]+" "+x:ne(x,/&\f/g,p[g])))&&(c[y++]=C);return pr(e,t,r,o===0?ln:s,c,u,d)}function Ds(e,t,r){return pr(e,t,r,ei,ur(Ps()),Nt(e,2,-2),0)}function si(e,t,r,n){return pr(e,t,r,un,Nt(e,0,n),Nt(e,n+1,-1),n)}function kt(e,t){for(var r="",n=fn(e),o=0;o<n;o++)r+=t(e[o],o,e,t)||"";return r}function Vs(e,t,r,n){switch(e.type){case xs:if(e.children.length)break;case bs:case un:return e.return=e.return||e.value;case ei:return"";case ti:return e.return=e.value+"{"+kt(e.children,n)+"}";case ln:e.value=e.props.join(",")}return We(r=kt(e.children,n))?e.return=e.value+"{"+r+"}":""}function Ns(e){var t=fn(e);return function(r,n,o,i){for(var a="",s=0;s<t;s++)a+=e[s](r,n,o,i)||"";return a}}function As(e){return function(t){t.root||(t=t.return)&&e(t)}}function Ls(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var zs=function(t,r,n){for(var o=0,i=0;o=i,i=He(),o===38&&i===12&&(r[n]=1),!zt(i);)De();return Lt(t,$e)},Bs=function(t,r){var n=-1,o=44;do switch(zt(o)){case 0:o===38&&He()===12&&(r[n]=1),t[n]+=zs($e-1,r,n);break;case 2:t[n]+=mr(o);break;case 4:if(o===44){t[++n]=He()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=ur(o)}while(o=De());return t},Fs=function(t,r){return ii(Bs(oi(t),r))},ci=new WeakMap,js=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,o=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!ci.get(n))&&!o){ci.set(t,!0);for(var i=[],a=Fs(r,i),s=n.props,c=0,u=0;c<a.length;c++)for(var d=0;d<s.length;d++,u++)t.props[u]=i[c]?a[c].replace(/&\f/g,s[d]):s[d]+" "+a[c]}}},Us=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function li(e,t){switch(Ss(e,t)){case 5103:return re+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return re+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return re+e+lr+e+ke+e+e;case 6828:case 4268:return re+e+ke+e+e;case 6165:return re+e+ke+"flex-"+e+e;case 5187:return re+e+ne(e,/(\w+).+(:[^]+)/,re+"box-$1$2"+ke+"flex-$1$2")+e;case 5443:return re+e+ke+"flex-item-"+ne(e,/flex-|-self/,"")+e;case 4675:return re+e+ke+"flex-line-pack"+ne(e,/align-content|flex-|-self/,"")+e;case 5548:return re+e+ke+ne(e,"shrink","negative")+e;case 5292:return re+e+ke+ne(e,"basis","preferred-size")+e;case 6060:return re+"box-"+ne(e,"-grow","")+re+e+ke+ne(e,"grow","positive")+e;case 4554:return re+ne(e,/([^-])(transform)/g,"$1"+re+"$2")+e;case 6187:return ne(ne(ne(e,/(zoom-|grab)/,re+"$1"),/(image-set)/,re+"$1"),e,"")+e;case 5495:case 3959:return ne(e,/(image-set\([^]*)/,re+"$1$`$1");case 4968:return ne(ne(e,/(.+:)(flex-)?(.*)/,re+"box-pack:$3"+ke+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+re+e+e;case 4095:case 3583:case 4068:case 2532:return ne(e,/(.+)-inline(.+)/,re+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(We(e)-1-t>6)switch(xe(e,t+1)){case 109:if(xe(e,t+4)!==45)break;case 102:return ne(e,/(.+:)(.+)-([^]+)/,"$1"+re+"$2-$3$1"+lr+(xe(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~dn(e,"stretch")?li(ne(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(xe(e,t+1)!==115)break;case 6444:switch(xe(e,We(e)-3-(~dn(e,"!important")&&10))){case 107:return ne(e,":",":"+re)+e;case 101:return ne(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+re+(xe(e,14)===45?"inline-":"")+"box$3$1"+re+"$2$3$1"+ke+"$2box$3")+e}break;case 5936:switch(xe(e,t+11)){case 114:return re+e+ke+ne(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return re+e+ke+ne(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return re+e+ke+ne(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return re+e+ke+e+e}return e}var Ws=function(t,r,n,o){if(t.length>-1&&!t.return)switch(t.type){case un:t.return=li(t.value,t.length);break;case ti:return kt([At(t,{value:ne(t.value,"@","@"+re)})],o);case ln:if(t.length)return Es(t.props,function(i){switch(ks(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return kt([At(t,{props:[ne(i,/:(read-\w+)/,":"+lr+"$1")]})],o);case"::placeholder":return kt([At(t,{props:[ne(i,/:(plac\w+)/,":"+re+"input-$1")]}),At(t,{props:[ne(i,/:(plac\w+)/,":"+lr+"$1")]}),At(t,{props:[ne(i,/:(plac\w+)/,ke+"input-$1")]})],o)}return""})}},Hs=[Ws],ui=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(_){var y=_.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(_),_.setAttribute("data-s",""))})}var o=t.stylisPlugins||Hs,i={},a,s=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(_){for(var y=_.getAttribute("data-emotion").split(" "),g=1;g<y.length;g++)i[y[g]]=!0;s.push(_)});var c,u=[js,Us];{var d,l=[Vs,As(function(_){d.insert(_)})],p=Ns(u.concat(o,l)),h=function(y){return kt(Os(y),p)};c=function(y,g,x,C){d=x,h(y?y+"{"+g.styles+"}":g.styles),C&&(m.inserted[g.name]=!0)}}var m={key:r,sheet:new vs({key:r,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return m.sheet.hydrate(s),m};function qs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gr={exports:{}},oe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var di;function Gs(){if(di)return oe;di=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,l=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,m=e?Symbol.for("react.lazy"):60116,_=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,x=e?Symbol.for("react.scope"):60119;function C(b){if(typeof b=="object"&&b!==null){var k=b.$$typeof;switch(k){case t:switch(b=b.type,b){case c:case u:case n:case i:case o:case l:return b;default:switch(b=b&&b.$$typeof,b){case s:case d:case m:case h:case a:return b;default:return k}}case r:return k}}}function S(b){return C(b)===u}return oe.AsyncMode=c,oe.ConcurrentMode=u,oe.ContextConsumer=s,oe.ContextProvider=a,oe.Element=t,oe.ForwardRef=d,oe.Fragment=n,oe.Lazy=m,oe.Memo=h,oe.Portal=r,oe.Profiler=i,oe.StrictMode=o,oe.Suspense=l,oe.isAsyncMode=function(b){return S(b)||C(b)===c},oe.isConcurrentMode=S,oe.isContextConsumer=function(b){return C(b)===s},oe.isContextProvider=function(b){return C(b)===a},oe.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},oe.isForwardRef=function(b){return C(b)===d},oe.isFragment=function(b){return C(b)===n},oe.isLazy=function(b){return C(b)===m},oe.isMemo=function(b){return C(b)===h},oe.isPortal=function(b){return C(b)===r},oe.isProfiler=function(b){return C(b)===i},oe.isStrictMode=function(b){return C(b)===o},oe.isSuspense=function(b){return C(b)===l},oe.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===u||b===i||b===o||b===l||b===p||typeof b=="object"&&b!==null&&(b.$$typeof===m||b.$$typeof===h||b.$$typeof===a||b.$$typeof===s||b.$$typeof===d||b.$$typeof===y||b.$$typeof===g||b.$$typeof===x||b.$$typeof===_)},oe.typeOf=C,oe}var ie={},fi;function Ys(){if(fi)return ie;fi=1;var e={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return e.NODE_ENV!=="production"&&function(){var t=typeof Symbol=="function"&&Symbol.for,r=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,o=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,s=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,l=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,m=t?Symbol.for("react.memo"):60115,_=t?Symbol.for("react.lazy"):60116,y=t?Symbol.for("react.block"):60121,g=t?Symbol.for("react.fundamental"):60117,x=t?Symbol.for("react.responder"):60118,C=t?Symbol.for("react.scope"):60119;function S(V){return typeof V=="string"||typeof V=="function"||V===o||V===d||V===a||V===i||V===p||V===h||typeof V=="object"&&V!==null&&(V.$$typeof===_||V.$$typeof===m||V.$$typeof===s||V.$$typeof===c||V.$$typeof===l||V.$$typeof===g||V.$$typeof===x||V.$$typeof===C||V.$$typeof===y)}function b(V){if(typeof V=="object"&&V!==null){var Ae=V.$$typeof;switch(Ae){case r:var X=V.type;switch(X){case u:case d:case o:case a:case i:case p:return X;default:var ve=X&&X.$$typeof;switch(ve){case c:case l:case _:case m:case s:return ve;default:return Ae}}case n:return Ae}}}var k=u,P=d,T=c,O=s,R=r,D=l,F=o,q=_,K=m,he=n,ye=a,de=i,_e=p,Q=!1;function Re(V){return Q||(Q=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),E(V)||b(V)===u}function E(V){return b(V)===d}function M(V){return b(V)===c}function A(V){return b(V)===s}function j(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function U(V){return b(V)===l}function W(V){return b(V)===o}function z(V){return b(V)===_}function B(V){return b(V)===m}function L(V){return b(V)===n}function Z(V){return b(V)===a}function G(V){return b(V)===i}function Ce(V){return b(V)===p}ie.AsyncMode=k,ie.ConcurrentMode=P,ie.ContextConsumer=T,ie.ContextProvider=O,ie.Element=R,ie.ForwardRef=D,ie.Fragment=F,ie.Lazy=q,ie.Memo=K,ie.Portal=he,ie.Profiler=ye,ie.StrictMode=de,ie.Suspense=_e,ie.isAsyncMode=Re,ie.isConcurrentMode=E,ie.isContextConsumer=M,ie.isContextProvider=A,ie.isElement=j,ie.isForwardRef=U,ie.isFragment=W,ie.isLazy=z,ie.isMemo=B,ie.isPortal=L,ie.isProfiler=Z,ie.isStrictMode=G,ie.isSuspense=Ce,ie.isValidElementType=S,ie.typeOf=b}(),ie}var pi;function hn(){if(pi)return gr.exports;pi=1;var e={};return e.NODE_ENV==="production"?gr.exports=Gs():gr.exports=Ys(),gr.exports}var mn,hi;function Ks(){if(hi)return mn;hi=1;var e=hn(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=n,i[e.Memo]=o;function a(m){return e.isMemo(m)?o:i[m.$$typeof]||t}var s=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,p=Object.prototype;function h(m,_,y){if(typeof _!="string"){if(p){var g=l(_);g&&g!==p&&h(m,g,y)}var x=c(_);u&&(x=x.concat(u(_)));for(var C=a(m),S=a(_),b=0;b<x.length;++b){var k=x[b];if(!r[k]&&!(y&&y[k])&&!(S&&S[k])&&!(C&&C[k])){var P=d(_,k);try{s(m,k,P)}catch{}}}}return m}return mn=h,mn}Ks();var Xs=!0;function Js(e,t,r){var n="";return r.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]+";"):o&&(n+=o+" ")}),n}var mi=function(t,r,n){var o=t.key+"-"+r.name;(n===!1||Xs===!1)&&t.registered[o]===void 0&&(t.registered[o]=r.styles)},Qs=function(t,r,n){mi(t,r,n);var o=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var i=r;do t.insert(r===i?"."+o:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function Zs(e){for(var t=0,r,n=0,o=e.length;o>=4;++n,o-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var ec={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},tc=/[A-Z]|^ms/g,rc=/_EMO_([^_]+?)_([^]*?)_EMO_/g,_i=function(t){return t.charCodeAt(1)===45},gi=function(t){return t!=null&&typeof t!="boolean"},_n=Ls(function(e){return _i(e)?e:e.replace(tc,"-$&").toLowerCase()}),yi=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(rc,function(n,o,i){return qe={name:o,styles:i,next:qe},o})}return ec[t]!==1&&!_i(t)&&typeof r=="number"&&r!==0?r+"px":r};function Bt(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var o=r;if(o.anim===1)return qe={name:o.name,styles:o.styles,next:qe},o.name;var i=r;if(i.styles!==void 0){var a=i.next;if(a!==void 0)for(;a!==void 0;)qe={name:a.name,styles:a.styles,next:qe},a=a.next;var s=i.styles+";";return s}return nc(e,t,r)}case"function":{if(e!==void 0){var c=qe,u=r(e);return qe=c,Bt(e,t,u)}break}}var d=r;return d}function nc(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=Bt(e,t,r[o])+";";else for(var i in r){var a=r[i];if(typeof a!="object"){var s=a;gi(s)&&(n+=_n(i)+":"+yi(i,s)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&t==null)for(var c=0;c<a.length;c++)gi(a[c])&&(n+=_n(i)+":"+yi(i,a[c])+";");else{var u=Bt(e,t,a);switch(i){case"animation":case"animationName":{n+=_n(i)+":"+u+";";break}default:n+=i+"{"+u+"}"}}}return n}var vi=/label:\s*([^\s;{]+)\s*(;|$)/g,qe;function bi(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,o="";qe=void 0;var i=e[0];if(i==null||i.raw===void 0)n=!1,o+=Bt(r,t,i);else{var a=i;o+=a[0]}for(var s=1;s<e.length;s++)if(o+=Bt(r,t,e[s]),n){var c=i;o+=c[s]}vi.lastIndex=0;for(var u="",d;(d=vi.exec(o))!==null;)u+="-"+d[1];var l=Zs(o)+u;return{name:l,styles:o,next:qe}}var oc=function(t){return t()},ic=cn.useInsertionEffect?cn.useInsertionEffect:!1,ac=ic||oc,xi=Oe(typeof HTMLElement<"u"?ui({key:"css"}):null),sc=xi.Provider,cc=function(t){return Ie(function(r,n){var o=ae(xi);return t(r,o,n)})},lc=Oe({}),Ft={}.hasOwnProperty,gn="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",yn=function(t,r){var n={};for(var o in r)Ft.call(r,o)&&(n[o]=r[o]);return n[gn]=t,n},uc=function(t){var r=t.cache,n=t.serialized,o=t.isStringTag;return mi(r,n,o),ac(function(){return Qs(r,n,o)}),null},dc=cc(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var o=e[gn],i=[n],a="";typeof e.className=="string"?a=Js(t.registered,i,e.className):e.className!=null&&(a=e.className+" ");var s=bi(i,void 0,ae(lc));a+=t.key+"-"+s.name;var c={};for(var u in e)Ft.call(e,u)&&u!=="css"&&u!==gn&&(c[u]=e[u]);return c.className=a,r&&(c.ref=r),be(ge,null,be(uc,{cache:t,serialized:s,isStringTag:typeof o=="string"}),be(o,c))}),vn=dc,f=function(t,r,n){return Ft.call(r,"css")?Se(vn,yn(t,r),n):Se(t,r,n)},I=function(t,r,n){return Ft.call(r,"css")?Se(vn,yn(t,r),n):Se(t,r,n)},wi=function(t,r){var n=arguments;if(r==null||!Ft.call(r,"css"))return be.apply(void 0,n);var o=n.length,i=new Array(o);i[0]=vn,i[1]=yn(t,r);for(var a=2;a<o;a++)i[a]=n[a];return be.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(wi||(wi={}));function w(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return bi(t)}function jt(){var e=w.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const fc=({hass:e,action:t,target:r,data:n})=>{const o=t.split(".")[0],i=t.split(".")[1],a={...n,...r};return e.callService(o,i,a)},bn=async(e,t,r,n)=>{const o=t[r+"_action"];if(o.action==="perform-action")return fc({hass:n,action:o.perform_action,target:o.target,data:o.data});const i=new CustomEvent("hass-action",{bubbles:!0,composed:!0,detail:{config:{...t,entity_id:t==null?void 0:t.entity},action:r}});return e.dispatchEvent(i),Promise.resolve()},xn=({icon:e,deviceClass:t})=>{if(e)return e;switch(t){case"speaker":return"mdi:speaker";case"receiver":return"mdi:audio-video";default:return"mdi:speaker"}},ft=(e,t,r)=>{const n=r?["state","attributes.volume_level","attributes.is_volume_muted","attributes.group_members"]:["state","attributes.media_duration","attributes.media_title","attributes.media_artist","attributes.media_album_name","attributes.icon","attributes.friendly_name","attributes.entity_picture","attributes.volume_level","attributes.is_volume_muted","attributes.source","attributes.shuffle","attributes.repeat","attributes.supported_features","attributes.group_members"],o=(a,s)=>s.split(".").reduce((u,d)=>u&&u[d]!==void 0?u[d]:void 0,a),i=(a,s)=>{if(a.length!==s.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==s[c])return!1;return!0};for(const a of n){const s=o(e,a),c=o(t,a);if(Array.isArray(s)&&Array.isArray(c)){if(!i(s,c))return!0}else if(s!==c)return!0}return!1};function le(){return document.querySelector("home-assistant").hass}const Ut=(e,t)=>e===0||t?"mdi:volume-off":e<.5?"mdi:volume-medium":"mdi:volume-high",pc=(e,t,r=!1)=>{var i;const n=le(),o=n.states[e];if(o&&(n.callService("media_player","volume_set",{entity_id:e,volume_level:t}),r&&((i=o.attributes.group_members)==null?void 0:i.length)>0)){const a=o.attributes.volume_level||0,s=a>0?t/a:1;o.attributes.group_members.slice(1).forEach(c=>{const u=n.states[c];if(!u)return;const d=u.attributes.volume_level||0,l=Math.min(Math.max(d*s,0),1);n.callService("media_player","volume_set",{entity_id:c,volume_level:l})})}},yr={root:w({background:"none",border:"none",cursor:"pointer",padding:"0px",margin:"0px",position:"relative",overflow:"hidden",width:"var(--mmpc-art-width)",height:"var(--mmpc-art-height)","&::after":{content:'""',display:"block",paddingBottom:"100%"}}),contentContainer:w({position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"}),image:w({height:"100%",aspectRatio:"1 / 1",objectFit:"cover",borderRadius:"var(--mmpc-art-border-radius, 4px)"}),iconContainer:w({display:"flex",justifyContent:"center",alignItems:"center","--icon-primary-color":"var(--card-background-color)",backgroundColor:"var(--primary-text-color)",opacity:.5,borderRadius:"var(--mmpc-art-border-radius, 4px)",height:"100%",aspectRatio:"1 / 1"})},Ci=({size:e,borderRadius:t=4,iconSize:r,renderLongPressIndicator:n,...o})=>{const i=Te(),{media_title:a,media_artist:s,entity_picture:c,icon:u,device_class:d,source:l}=i.attributes,p=i.state,[h,m]=N(!1);return pe(()=>{m(!1)},[c]),I("button",{css:yr.root,style:{"--mmpc-art-border-radius":`${t}px`,"--mmpc-art-width":e?typeof e=="string"?e:`${e}px`:"100%","--mmpc-art-height":e?typeof e=="string"?e:`${e}px`:"unset",...typeof e=="number"?{flexShrink:0}:{}},...o,children:[f("div",{css:yr.contentContainer,children:c&&p!=="off"&&!h?f("img",{css:yr.image,src:c,alt:a&&s?`${a} by ${s}`:`Source: ${l}`,onError:()=>m(!0)}):f("div",{css:yr.iconContainer,children:f(Je,{icon:p==="off"?xn({icon:u,deviceClass:d}):hc({source:l}),size:r})})}),n&&n()]})},hc=({source:e})=>{switch(e==null?void 0:e.toLowerCase()){case"spotify":return"mdi:spotify";case"airplay":return"mdi:airplay";case"bluetooth":return"mdi:bluetooth";case"net radio":return"mdi:radio";case"server":return"mdi:server";case"usb":return"mdi:usb";case"aux":return"mdi:audio-input-rca";case"hdmi":return"mdi:hdmi-port";case"tv":return"mdi:television";case"tuner":return"mdi:radio-tower";case"optical":return"mdi:audio-input-stereo-minijack";default:return"mdi:music"}},we=Oe({rootElement:null,config:null}),Si=({rootElement:e,config:t,children:r})=>{const n=H(()=>({rootElement:e,config:t}),[e,t]);return f(we.Provider,{value:n,children:r})},ki={root:w({position:"relative",background:"none",border:"none",display:"flex",flex:0,flexDirection:"row",height:"32px",fontSize:"13px",fontWeight:500,lineHeight:"32px",padding:"0 12px",borderRadius:"16px",color:"var(--mmpc-chip-foreground, var(--card-background-color))",backgroundColor:"var(--mmpc-chip-background, var(--primary-text-color))","--icon-primary-color":"var(--mmpc-chip-foreground, var(--card-background-color))",marginRight:"5px",alignItems:"center",gap:"4px",textWrap:"nowrap",cursor:"pointer","&:hover":{opacity:.8},opacity:1,"& ha-icon":{pointerEvents:"none"}}),rootLoading:w({opacity:.8})},pt=({loading:e,icon:t,iconPosition:r="left",children:n,...o})=>{const i=()=>{if(e)return f(Sn,{size:"x-small"});if(t)return f(Je,{size:"x-small",icon:t})};return I("button",{css:[ki.root,e&&ki.rootLoading],...o,children:[r==="left"&&i(),n,r==="right"&&i()]})},Ei=({rootElement:e,children:t})=>{const[r]=N(()=>ui({key:"mmpc",container:e,speedy:!1}));return f(sc,{value:r,children:t})},mc=()=>[{name:"tap_action",label:"Tap Action",selector:{ui_action:{}}},{name:"hold_action",label:"Hold Action",selector:{ui_action:{}}},{name:"double_tap_action",label:"Double Tap Action",selector:{ui_action:{}}}],_c=({hass:e,value:t,onChange:r,disabled:n=!1})=>{const o=te(null),i=H(()=>t?{...t}:{action:"none"},[t]),a=$(s=>{const u=s.detail.value;r(u)},[r]);return pe(()=>{const s=o.current;return s&&s.addEventListener("value-changed",a),()=>{s&&s.removeEventListener("value-changed",a)}},[o.current,a]),f("ha-form",{ref:o,hass:e,data:i,schema:mc(),computeLabel:s=>s.label||s.name,disabled:n})},Ge=e=>{const{hass:t,value:r,onChange:n,label:o,domains:i,required:a=!1,disabled:s=!1,allowCustomEntity:c=!1}=e,u=te(null),d=$(l=>{const h=l.detail.value;n(h)},[n]);return pe(()=>{const l=u.current;return l&&l.addEventListener("value-changed",d),()=>{l&&l.removeEventListener("value-changed",d)}},[u.current,d]),f("ha-entity-picker",{ref:u,hass:t,value:r,label:o||"Entity",includeDomains:i,disabled:s,required:a,"allow-custom-entity":c})},gc={root:w({display:"flex",flexDirection:"column",gap:"8px"})},Pi=({hass:e,value:t,onChange:r,label:n,domains:o,disabled:i=!1,allowCustomEntity:a=!1})=>{const s=(t==null?void 0:t.filter(Boolean))||[],c=$((u,d)=>{const l=[...s];!u&&d<s.length?l.splice(d,1):d<s.length?l[d]=u||"":u&&l.push(u),r(l.filter(Boolean))},[s,r]);return I("div",{css:gc.root,className:"entities-picker",children:[n&&f("label",{children:n}),s.map((u,d)=>f(Ge,{hass:e,value:u,onChange:l=>c(l,d),domains:o,disabled:i,required:!1,allowCustomEntity:a},`entity-${d}`)),f(Ge,{hass:e,value:"",onChange:u=>c(u,s.length),domains:o,disabled:i,required:!1,allowCustomEntity:a},"entity-new")]})},vr=({hass:e,value:t={},onChange:r})=>f(_c,{hass:e,value:t,onChange:r}),yc=({options:e,onSelected:t,selected:r})=>f("select",{value:r,onChange:n=>t(n.target.value),children:e.map(n=>f("option",{value:n.value,children:n.name},n.value))}),Ye={formGroup:w({marginBottom:"16px"}),label:w({display:"block",marginBottom:"16px",fontWeight:500}),buttonsContainer:w({display:"flex",flexDirection:"column"}),button:w({padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",backgroundColor:"var(--primary-color, #03a9f4)",color:"white",fontWeight:500,"&:hover":{backgroundColor:"var(--primary-color-dark, #007ac1)"},alignSelf:"flex-start"}),deleteButton:w({backgroundColor:"var(--error-color, #ff5252)","&:hover":{backgroundColor:"var(--error-color-dark, #c50b0b)"}}),inputGroup:w({display:"flex",flexDirection:"column",marginBottom:"16px"}),toggleContainer:w({display:"flex",alignItems:"center",marginBottom:"16px"}),toggleLabel:w({marginLeft:"8px",fontWeight:"normal"}),toggle:w({cursor:"pointer"})},ue=e=>f("div",{css:Ye.formGroup,...e}),Ti=e=>f("label",{css:Ye.label,...e}),Ri=e=>f("div",{css:Ye.buttonsContainer,...e}),Ii=e=>f("button",{css:Ye.button,...e}),$i=e=>f("button",{css:[Ye.button,Ye.deleteButton],...e}),br=e=>f("div",{css:Ye.inputGroup,...e}),Wt=e=>f("div",{css:Ye.toggleContainer,...e}),Ht=e=>f("label",{css:Ye.toggleLabel,...e}),qt=e=>f("input",{css:Ye.toggle,...e}),xr=({hass:e,value:t,onChange:r,label:n,required:o=!1,disabled:i=!1,isIconInput:a=!1})=>{const s=$(c=>{r(c.detail.value)},[r]);return a?f("ha-icon-picker",{label:n||"Icon",hass:e,value:t,disabled:i,required:o,"onvalue-changed":s}):f("ha-textfield",{label:n||"Text",value:t,disabled:i,required:o,onchange:c=>r(c.target.value)})},vc=({children:e})=>{const[t,r]=N(!1);return pe(()=>{customElements.get("hui-glance-card").getConfigElement().then(()=>{r(!0)})},[]),t?e:null},Mi={root:w({display:"flex",flexDirection:"row",gap:"2px",justifyContent:"flex-start",overflowX:"auto",scrollbarWidth:"none","-ms-overflow-style":"none","&::-webkit-scrollbar":{display:"none"}}),speakerChip:w({"&:first-child":{marginLeft:"var(--mmpc-chip-horizontal-margin, 0px)"},"&:last-child":{marginRight:"var(--mmpc-chip-horizontal-margin, 0px)"}})},wn=({config:e,showGrouped:t,layout:r})=>{const n=Et(),{entity_id:o,speaker_group:i}=e,[a,s]=N([]),c=(i==null?void 0:i.entity_id)||o,u=n.states[c],d=H(()=>{var p;return(p=i==null?void 0:i.entities)!=null&&p.length?i.entities.filter(h=>h!==c).filter(h=>n.states[h]).map(h=>{var m,_;return{entity_id:h,name:n.states[h].attributes.friendly_name,volume:n.states[h].attributes.volume_level||0,muted:n.states[h].attributes.is_volume_muted||!1,isGrouped:((_=(m=u==null?void 0:u.attributes)==null?void 0:m.group_members)==null?void 0:_.includes(h))||!1}}).filter(h=>t?!0:!h.isGrouped).sort((h,m)=>h.entity_id===c?-1:m.entity_id===c?1:h.name.localeCompare(m.name)).sort((h,m)=>h.isGrouped&&!m.isGrouped?-1:!h.isGrouped&&m.isGrouped?1:0):[]},[n.states,i,t]),l=$(async(p,h)=>{if(!a.includes(p)){s(m=>[...m,p]);try{const m=n.states[p];h?await n.callService("media_player","unjoin",{entity_id:p}):(m.state==="off"&&await n.callService("media_player","turn_on",{entity_id:p}),await n.callService("media_player","join",{entity_id:c,group_members:[p]}))}catch(m){console.error(m)}s(m=>m.filter(_=>_!==p))}},[c,a]);return f("div",{css:Mi.root,children:d.map(p=>f(pt,{css:Mi.speakerChip,loading:a.includes(p.entity_id),onClick:()=>l(p.entity_id,p.isGrouped),icon:p.isGrouped?"mdi:close":"mdi:plus",iconPosition:"right",style:{"--mmpc-chip-horizontal-margin":`${(r==null?void 0:r.horizontalMargin)??0}px`},children:p.name},p.entity_id))})},ot={speakersTable:w({width:"100%",borderCollapse:"collapse",tableLayout:"fixed"}),speakerRow:w({width:"100%",height:"32px"}),nameCell:w({paddingRight:"8px",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),nameCellMainSpeaker:w({fontWeight:500}),controlsCell:w({padding:"0px 4px"}),buttonCell:w({width:"28px",whiteSpace:"nowrap"}),controlsContainer:w({display:"flex",alignItems:"center",width:"100%"})},Oi=({config:{speaker_group:e,entity_id:t},syncMainSpeaker:r})=>{const n=Et(),[o,i]=N([]),a=(e==null?void 0:e.entity_id)||t,s=n.states[a],c=H(()=>{var m;if(!((m=e==null?void 0:e.entities)!=null&&m.length)&&!s)return[];const h=[...(e==null?void 0:e.entities)||[]];return s&&!h.includes(a)&&h.push(a),h.filter(_=>n.states[_]).map(_=>{var y,g,x,C;return{entity_id:_,name:n.states[_].attributes.friendly_name,volume:n.states[_].attributes.volume_level||0,muted:n.states[_].attributes.is_volume_muted||!1,isGrouped:((g=(y=s==null?void 0:s.attributes)==null?void 0:y.group_members)==null?void 0:g.includes(_))||!1,isMainSpeaker:((C=(x=s==null?void 0:s.attributes)==null?void 0:x.group_members)==null?void 0:C[0])===_||!1}}).sort((_,y)=>_.entity_id===a?-1:y.entity_id===a?1:_.name.localeCompare(y.name))},[n.states,e,a,s]),u=$(async(h,m)=>{if(!o.includes(h)){i(_=>[..._,h]);try{const _=n.states[h];m?await n.callService("media_player","unjoin",{entity_id:h}):(_.state==="off"&&await n.callService("media_player","turn_on",{entity_id:h}),await n.callService("media_player","join",{entity_id:a,group_members:[h]}))}catch(_){console.error(_)}i(_=>_.filter(y=>y!==h))}},[a,o]),d=$((h,m)=>{le().callService("media_player","volume_mute",{entity_id:h,is_volume_muted:!m})},[]),l=$((h,m,_)=>{pc(h,m,_&&r)},[r]),p=(h,m,_)=>{const{entity_id:y,name:g,volume:x,muted:C,isGrouped:S,isMainSpeaker:b}=h,P=o.includes(y)||b&&!S;return I("tr",{css:ot.speakerRow,children:[f("td",{css:[ot.nameCell,b&&ot.nameCellMainSpeaker],children:g}),f("td",{css:ot.buttonCell,children:f(ee,{size:"x-small",onClick:()=>d(y,C),icon:Ut(x,C)})}),f("td",{css:ot.controlsCell,children:f("div",{css:ot.controlsContainer,children:f(Gn,{min:0,max:1,step:.01,value:x,sliderSize:"small",onChange:T=>l(y,T,b)})})}),f("td",{css:ot.buttonCell,children:f(ee,{size:"x-small",onClick:()=>u(y,S),icon:S?"mdi:close":"mdi:plus",disabled:P})})]},y)};return f("div",{children:f("table",{css:ot.speakersTable,children:f("tbody",{children:c.filter(h=>h.isGrouped).map((h,m,_)=>p(h))})})})};function Di(e,t){const[r,n]=N(e);return pe(()=>{const o=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(o)}},[e,t]),r}const bc={root:w({background:"none",border:"none",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"var(--mmpc-icon-size)",aspectRatio:"1","& > ha-icon":{"--mdc-icon-size":"var(--mmpc-icon-size)",width:"var(--mmpc-icon-size)",height:"var(--mmpc-icon-size)",display:"flex"}})},Je=({icon:e,size:t="medium",className:r})=>f("div",{css:bc.root,style:{"--mmpc-icon-size":`${Cn(t)}px`},className:r,children:f("ha-icon",{icon:e})}),Cn=e=>{switch(e){case"xx-small":return 12;case"x-small":return 18;case"small":return 24;case"medium":return 32;case"large":return 48;case"x-large":return 80}},xc=jt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,wc={spinner:w({animation:`${xc} 1s linear infinite`,"--mdc-icon-size":"var(--mmpc-spinner-size)",width:"var(--mmpc-spinner-size)",display:"flex",pointerEvents:"none"})},Sn=e=>f(Je,{icon:"mdi:loading",css:wc.spinner,...e}),Cc=jt({"0%":{opacity:1,transform:"translateY(0px)"},"85%":{opacity:1,transform:"translateY(0px)"},"100%":{opacity:0,transform:"translateY(-20px)"}}),wr={root:w({width:"100%",aspectRatio:"1",borderRadius:"4px",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:"var(--mmpc-media-image-background)","--icon-primary-color":"var(--card-background-color)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),icon:w({position:"absolute","--icon-primary-color":"var(--primary-text-color, #333)",backgroundColor:"var(--card-background-color)",borderRadius:"50%",padding:"2px",width:Cn("x-small")+4,height:Cn("x-small")+4}),done:w({animation:`${Cc} 3s forwards`})},Vi=({imageUrl:e,loading:t,done:r,className:n})=>I("div",{css:wr.root,style:{"--mmpc-media-image-background":e?`url(${e})`:"var(--primary-text-color)"},className:n,children:[!e&&f(Je,{icon:"mdi:image-broken-variant",size:"small"}),t&&f(Sn,{css:wr.icon,size:"x-small"}),!t&&r&&f(Je,{icon:"mdi:check",size:"x-small",css:[wr.icon,wr.done]})]}),Cr={root:w({display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",transition:"transform 0.2s",borderRadius:"8px",padding:"8px",background:"rgba(255, 255, 255, 0.05)","@media (prefers-color-scheme: light)":{background:"rgba(0, 0, 0, 0.05)"},"&:hover":{transform:"translateY(-4px)"}}),name:w({fontSize:"14px",fontWeight:500,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",width:"100%",color:"var(--primary-text-color)"}),artist:w({fontSize:"12px",color:"var(--secondary-text-color)",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",width:"100%"}),mediaImage:w({marginBottom:8})},Ni=({imageUrl:e,name:t,artist:r,onClick:n})=>{const[o,i]=N(!1),[a,s]=N(!1),c=$(async()=>{s(!1),i(!0);try{await n(),s(!0)}catch(u){console.error("Error in MediaItem onClick:",u)}i(!1)},[n]);return I("div",{css:Cr.root,onClick:c,children:[f(Vi,{css:Cr.mediaImage,imageUrl:e,loading:o,done:a}),f("div",{css:Cr.name,children:t}),f("div",{css:Cr.artist,children:r})]})},Ai={root:w({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",margin:"0 4px",padding:"0px var(--mmpc-search-padding, 0px)","&:first-child":{marginTop:-12}}),title:w({fontSize:"16px",fontWeight:500,color:"var(--primary-text-color)"})},Li=({children:e,onClick:t})=>I("div",{css:Ai.root,onClick:t,children:[f("h3",{css:Ai.title,children:e}),f(Je,{icon:"mdi:chevron-right",size:"small"})]}),Gt={root:w({display:"grid",gridTemplateColumns:"50px 1fr auto",alignItems:"center",gap:"12px",padding:"8px 12px",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",cursor:"pointer","&:hover":{background:"rgba(255, 255, 255, 0.1)"},"@media (prefers-color-scheme: light)":{background:"rgba(0, 0, 0, 0.05)","&:hover":{background:"rgba(0, 0, 0, 0.01)"}}}),trackInfo:w({display:"flex",flexDirection:"column",overflow:"hidden"}),trackName:w({fontSize:"14px",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"var(--primary-text-color)"}),trackArtist:w({fontSize:"12px",color:"var(--secondary-text-color)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),mediaImage:w({width:50,height:50})},zi=({imageUrl:e,title:t,artist:r,onClick:n})=>{const[o,i]=N(!1),[a,s]=N(!1),c=$(async()=>{s(!1),i(!0);try{await n(),s(!0)}catch(u){console.error("Error in MediaItem onClick:",u)}i(!1)},[n]);return I("div",{css:Gt.root,onClick:c,children:[f(Vi,{css:Gt.mediaImage,imageUrl:e,loading:o,done:a}),I("div",{css:Gt.trackInfo,children:[f("div",{css:Gt.trackName,children:t}),f("div",{css:Gt.trackArtist,children:r})]})]})},ce={root:w({display:"flex",flexDirection:"column",gap:"12px","--mmpc-search-padding":"var(--mmpc-search-padding, 0px)"}),rootSearchBarBottom:w({overflow:"hidden"}),searchBarContainer:w({display:"flex",flexDirection:"column",gap:12}),searchInput:w({padding:"1px var(--mmpc-search-padding, 0px)"}),filterContainer:w({display:"flex",flexDirection:"row",gap:"2px",justifyContent:"flex-start",overflowX:"auto",scrollbarWidth:"none","-ms-overflow-style":"none","&::-webkit-scrollbar":{display:"none"}}),chip:w({"&:first-child":{marginLeft:"var(--mmpc-chip-horizontal-margin, 0px)"},"&:last-child":{marginRight:"var(--mmpc-chip-horizontal-margin, 0px)"}}),verticalChipSeperator:w({height:"28px",alignSelf:"center",borderRight:"1px solid var(--divider-color)",marginRight:"6px"}),mediaGrid:w({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gridGap:"16px",padding:"0px var(--mmpc-search-padding, 0px)"}),trackListContainer:w({display:"flex",flexDirection:"column",gap:"8px",padding:"0px var(--mmpc-search-padding, 0px)"}),mediaEmptyText:w({padding:"0px var(--mmpc-search-padding, 0px)"}),resultsContainerSearchBarBottom:w({overflowY:"auto"})},Sc=(e,t,r)=>{const[n,o]=N(null),[i,a]=N(!1),[s,c]=N(null);pe(()=>{if(e==="")return;const d={type:"call_service",domain:"media_player",service:"search_media",service_data:{search_query:e,entity_id:r,media_filter_classes:t==="all"?void 0:[t]},return_response:!0},l=le();a(!0),l.connection.sendMessagePromise(d).then(p=>{p.response[r]&&(a(!1),o(p.response[r]),c(null))}).catch(p=>{console.error("Error fetching search results:",p),a(!1),c("Error fetching search results: "+p.message),o(null)})},[e,r,t]);const u=$(async(d,l,p)=>le().callService("media_player","play_media",{entity_id:l,media_content_type:d.media_content_type,media_content_id:d.media_content_id,enqueue:p}),[]);return H(()=>({results:n,loading:i,playItem:u,error:s}),[n,i,s])},kc=[{type:"all",label:"All",icon:"mdi:all-inclusive"},{type:"artist",label:"Artists",icon:"mdi:account-music"},{type:"album",label:"Albums",icon:"mdi:album"},{type:"track",label:"Tracks",icon:"mdi:music-note"},{type:"playlist",label:"Playlists",icon:"mdi:playlist-music"},{type:"podcast",label:"Podcasts",icon:"mdi:podcast"}],Ec={artists:"artist",albums:"album",tracks:"track",playlists:"playlist",podcasts:"podcast"},Pc={artist:"Artists",music:"Music",album:"Albums",track:"Tracks",playlist:"Playlists",podcast:"Podcasts"},Bi=({entityId:e,horizontalPadding:t,searchBarPosition:r="top"})=>{const[n,o]=N(""),[i,a]=N("play"),s=Di(n,300),[c,u]=N("all"),d=$(()=>{const C=["play","replace","next","add"],b=(C.indexOf(i)+1)%C.length;a(C[b])},[i]),{results:l,loading:p,error:h,playItem:m}=Sc(s,c,e),_=()=>I("div",{css:ce.searchBarContainer,children:[f(fa,{placeholder:"Search..",onChange:o,value:n,loading:p,css:ce.searchInput}),I("div",{css:ce.filterContainer,children:[f(pt,{css:ce.chip,style:{"--mmpc-chip-horizontal-margin":`${t}px`},icon:Tc(i),onClick:d,children:Rc(i)}),f("div",{css:ce.verticalChipSeperator}),y()]})]}),y=()=>kc.map(C=>f(pt,{css:ce.chip,style:{"--mmpc-chip-horizontal-margin":`${t}px`,opacity:c===C.type?1:.6,fontWeight:c===C.type?"bold":"normal"},onClick:()=>u(C.type),icon:C.icon,children:C.label},C.type)),g=(C,S)=>!C||c!=="all"&&c!==S||C.length===0&&c==="all"?null:I(ge,{children:[c==="all"&&f(Li,{onClick:()=>u(S),children:Pc[S]}),S==="track"?f("div",{css:ce.trackListContainer,children:(c==="all"?C.slice(0,5):C).map(b=>f(zi,{imageUrl:b.thumbnail,title:b.title,onClick:()=>m(b,e,i)},b.media_content_id))}):f("div",{css:ce.mediaGrid,children:(c==="all"?C.slice(0,6):C).map(b=>f(Ni,{imageUrl:b.thumbnail,name:b.title,onClick:()=>m(b,e,i)},b.media_content_id))}),C.length===0&&f("p",{css:ce.mediaEmptyText,children:p?"Searching...":"No results found."})]},S),x=H(()=>l?{artists:l.result.filter(S=>S.media_class==="artist"),albums:l.result.filter(S=>S.media_class==="album"),tracks:l.result.filter(S=>S.media_class==="track"),playlists:l.result.filter(S=>S.media_class==="playlist"),podcasts:l.result.filter(S=>S.media_class==="podcast")}:null,[l]);return I("div",{css:[ce.root,r==="bottom"&&ce.rootSearchBarBottom],style:{"--mmpc-search-padding":`${t}px`},children:[r==="top"&&_(),l&&f("div",{css:r==="bottom"?ce.resultsContainerSearchBarBottom:{},children:Object.entries(x).map(([C,S])=>g(S,Ec[C]))}),h&&f("div",{css:r==="bottom"?ce.resultsContainerSearchBarBottom:{},children:f("p",{css:ce.mediaEmptyText,children:h})}),r==="bottom"&&_()]})},Tc=e=>{switch(e){case"play":return"mdi:play-circle";case"replace":return"mdi:playlist-remove";case"next":return"mdi:playlist-play";case"add":return"mdi:playlist-plus";default:return"mdi:play-circle"}},Rc=e=>{switch(e){case"play":return"Play now";case"replace":return"Replace queue";case"next":return"Add next";case"add":return"Add to queue";default:return"Play"}},Fi=Oe({hass:null}),Ic=({hass:e,children:t})=>f(Fi.Provider,{value:{hass:e},children:t}),Et=()=>{const e=ae(Fi);if(!e)throw new Error("useHass must be used within a HassContextProvider");return e.hass},kn={root:w({position:"relative",background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"background-color 0.2s",padding:4,minWidth:"var(--mmpc-icon-button-size)",aspectRatio:"1",color:"var(--primary-text-color, #333)",touchAction:"manipulation","-webkit-tap-highlight-color":"transparent","&:hover":{backgroundColor:"var(--secondary-background-color, rgba(0, 0, 0, 0.05))"},"&:active":{backgroundColor:"var(--divider-color, rgba(0, 0, 0, 0.1))"},"@media (hover: none)":{"&:hover":{backgroundColor:"transparent"},"&:active":{backgroundColor:"var(--divider-color, rgba(0, 0, 0, 0.1))"}},"> ha-icon":{"--mdc-icon-size":"var(--mmpc-icon-button-size)",width:"var(--mmpc-icon-button-size)",display:"flex",pointerEvents:"none"}}),rootDisabled:w({color:"var(--disabled-text-color, #999)"}),rootXxsmall:w({padding:0})},ee=({icon:e,size:t="medium",disabled:r=!1,loading:n=!1,className:o,renderLongPressIndicator:i,...a})=>I("button",{disabled:r,css:[kn.root,r&&kn.rootDisabled,t==="xx-small"&&kn.rootXxsmall],style:{"--mmpc-icon-button-size":`${$c(t)}px`},className:o,...a,children:[n?f(Sn,{size:t}):f("ha-icon",{icon:e}),i&&i()]}),$c=e=>{switch(e){case"xx-small":return 12;case"x-small":return 18;case"small":return 24;case"medium":return 32;case"large":return 48;case"x-large":return 80;case"xx-large":return 120}};var Sr={exports:{}};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var En,ji;function Mc(){if(ji)return En;ji=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function o(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var a={},s=0;s<10;s++)a["_"+String.fromCharCode(s)]=s;var c=Object.getOwnPropertyNames(a).map(function(d){return a[d]});if(c.join("")!=="0123456789")return!1;var u={};return"abcdefghijklmnopqrst".split("").forEach(function(d){u[d]=d}),Object.keys(Object.assign({},u)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return En=o()?Object.assign:function(i,a){for(var s,c=n(i),u,d=1;d<arguments.length;d++){s=Object(arguments[d]);for(var l in s)t.call(s,l)&&(c[l]=s[l]);if(e){u=e(s);for(var p=0;p<u.length;p++)r.call(s,u[p])&&(c[u[p]]=s[u[p]])}}return c},En}var Pn,Ui;function Tn(){if(Ui)return Pn;Ui=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Pn=e,Pn}var Rn,Wi;function Hi(){return Wi||(Wi=1,Rn=Function.call.bind(Object.prototype.hasOwnProperty)),Rn}var In,qi;function Oc(){if(qi)return In;qi=1;var e={},t=function(){};if(e.NODE_ENV!=="production"){var r=Tn(),n={},o=Hi();t=function(a){var s="Warning: "+a;typeof console<"u"&&console.error(s);try{throw new Error(s)}catch{}}}function i(a,s,c,u,d){if(e.NODE_ENV!=="production"){for(var l in a)if(o(a,l)){var p;try{if(typeof a[l]!="function"){var h=Error((u||"React class")+": "+c+" type `"+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[l]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw h.name="Invariant Violation",h}p=a[l](s,l,u,c,null,r)}catch(_){p=_}if(p&&!(p instanceof Error)&&t((u||"React class")+": type specification of "+c+" `"+l+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof p+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),p instanceof Error&&!(p.message in n)){n[p.message]=!0;var m=d?d():"";t("Failed "+c+" type: "+p.message+(m??""))}}}}return i.resetWarningCache=function(){e.NODE_ENV!=="production"&&(n={})},In=i,In}var $n,Gi;function Dc(){if(Gi)return $n;Gi=1;var e={},t=hn(),r=Mc(),n=Tn(),o=Hi(),i=Oc(),a=function(){};e.NODE_ENV!=="production"&&(a=function(c){var u="Warning: "+c;typeof console<"u"&&console.error(u);try{throw new Error(u)}catch{}});function s(){return null}return $n=function(c,u){var d=typeof Symbol=="function"&&Symbol.iterator,l="@@iterator";function p(E){var M=E&&(d&&E[d]||E[l]);if(typeof M=="function")return M}var h="<<anonymous>>",m={array:x("array"),bigint:x("bigint"),bool:x("boolean"),func:x("function"),number:x("number"),object:x("object"),string:x("string"),symbol:x("symbol"),any:C(),arrayOf:S,element:b(),elementType:k(),instanceOf:P,node:D(),objectOf:O,oneOf:T,oneOfType:R,shape:q,exact:K};function _(E,M){return E===M?E!==0||1/E===1/M:E!==E&&M!==M}function y(E,M){this.message=E,this.data=M&&typeof M=="object"?M:{},this.stack=""}y.prototype=Error.prototype;function g(E){if(e.NODE_ENV!=="production")var M={},A=0;function j(W,z,B,L,Z,G,Ce){if(L=L||h,G=G||B,Ce!==n){if(u){var V=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw V.name="Invariant Violation",V}else if(e.NODE_ENV!=="production"&&typeof console<"u"){var Ae=L+":"+B;!M[Ae]&&A<3&&(a("You are manually calling a React.PropTypes validation function for the `"+G+"` prop on `"+L+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),M[Ae]=!0,A++)}}return z[B]==null?W?z[B]===null?new y("The "+Z+" `"+G+"` is marked as required "+("in `"+L+"`, but its value is `null`.")):new y("The "+Z+" `"+G+"` is marked as required in "+("`"+L+"`, but its value is `undefined`.")):null:E(z,B,L,Z,G)}var U=j.bind(null,!1);return U.isRequired=j.bind(null,!0),U}function x(E){function M(A,j,U,W,z,B){var L=A[j],Z=de(L);if(Z!==E){var G=_e(L);return new y("Invalid "+W+" `"+z+"` of type "+("`"+G+"` supplied to `"+U+"`, expected ")+("`"+E+"`."),{expectedType:E})}return null}return g(M)}function C(){return g(s)}function S(E){function M(A,j,U,W,z){if(typeof E!="function")return new y("Property `"+z+"` of component `"+U+"` has invalid PropType notation inside arrayOf.");var B=A[j];if(!Array.isArray(B)){var L=de(B);return new y("Invalid "+W+" `"+z+"` of type "+("`"+L+"` supplied to `"+U+"`, expected an array."))}for(var Z=0;Z<B.length;Z++){var G=E(B,Z,U,W,z+"["+Z+"]",n);if(G instanceof Error)return G}return null}return g(M)}function b(){function E(M,A,j,U,W){var z=M[A];if(!c(z)){var B=de(z);return new y("Invalid "+U+" `"+W+"` of type "+("`"+B+"` supplied to `"+j+"`, expected a single ReactElement."))}return null}return g(E)}function k(){function E(M,A,j,U,W){var z=M[A];if(!t.isValidElementType(z)){var B=de(z);return new y("Invalid "+U+" `"+W+"` of type "+("`"+B+"` supplied to `"+j+"`, expected a single ReactElement type."))}return null}return g(E)}function P(E){function M(A,j,U,W,z){if(!(A[j]instanceof E)){var B=E.name||h,L=Re(A[j]);return new y("Invalid "+W+" `"+z+"` of type "+("`"+L+"` supplied to `"+U+"`, expected ")+("instance of `"+B+"`."))}return null}return g(M)}function T(E){if(!Array.isArray(E))return e.NODE_ENV!=="production"&&(arguments.length>1?a("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):a("Invalid argument supplied to oneOf, expected an array.")),s;function M(A,j,U,W,z){for(var B=A[j],L=0;L<E.length;L++)if(_(B,E[L]))return null;var Z=JSON.stringify(E,function(Ce,V){var Ae=_e(V);return Ae==="symbol"?String(V):V});return new y("Invalid "+W+" `"+z+"` of value `"+String(B)+"` "+("supplied to `"+U+"`, expected one of "+Z+"."))}return g(M)}function O(E){function M(A,j,U,W,z){if(typeof E!="function")return new y("Property `"+z+"` of component `"+U+"` has invalid PropType notation inside objectOf.");var B=A[j],L=de(B);if(L!=="object")return new y("Invalid "+W+" `"+z+"` of type "+("`"+L+"` supplied to `"+U+"`, expected an object."));for(var Z in B)if(o(B,Z)){var G=E(B,Z,U,W,z+"."+Z,n);if(G instanceof Error)return G}return null}return g(M)}function R(E){if(!Array.isArray(E))return e.NODE_ENV!=="production"&&a("Invalid argument supplied to oneOfType, expected an instance of array."),s;for(var M=0;M<E.length;M++){var A=E[M];if(typeof A!="function")return a("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+Q(A)+" at index "+M+"."),s}function j(U,W,z,B,L){for(var Z=[],G=0;G<E.length;G++){var Ce=E[G],V=Ce(U,W,z,B,L,n);if(V==null)return null;V.data&&o(V.data,"expectedType")&&Z.push(V.data.expectedType)}var Ae=Z.length>0?", expected one of type ["+Z.join(", ")+"]":"";return new y("Invalid "+B+" `"+L+"` supplied to "+("`"+z+"`"+Ae+"."))}return g(j)}function D(){function E(M,A,j,U,W){return he(M[A])?null:new y("Invalid "+U+" `"+W+"` supplied to "+("`"+j+"`, expected a ReactNode."))}return g(E)}function F(E,M,A,j,U){return new y((E||"React class")+": "+M+" type `"+A+"."+j+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+U+"`.")}function q(E){function M(A,j,U,W,z){var B=A[j],L=de(B);if(L!=="object")return new y("Invalid "+W+" `"+z+"` of type `"+L+"` "+("supplied to `"+U+"`, expected `object`."));for(var Z in E){var G=E[Z];if(typeof G!="function")return F(U,W,z,Z,_e(G));var Ce=G(B,Z,U,W,z+"."+Z,n);if(Ce)return Ce}return null}return g(M)}function K(E){function M(A,j,U,W,z){var B=A[j],L=de(B);if(L!=="object")return new y("Invalid "+W+" `"+z+"` of type `"+L+"` "+("supplied to `"+U+"`, expected `object`."));var Z=r({},A[j],E);for(var G in Z){var Ce=E[G];if(o(E,G)&&typeof Ce!="function")return F(U,W,z,G,_e(Ce));if(!Ce)return new y("Invalid "+W+" `"+z+"` key `"+G+"` supplied to `"+U+"`.\nBad object: "+JSON.stringify(A[j],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(E),null,"  "));var V=Ce(B,G,U,W,z+"."+G,n);if(V)return V}return null}return g(M)}function he(E){switch(typeof E){case"number":case"string":case"undefined":return!0;case"boolean":return!E;case"object":if(Array.isArray(E))return E.every(he);if(E===null||c(E))return!0;var M=p(E);if(M){var A=M.call(E),j;if(M!==E.entries){for(;!(j=A.next()).done;)if(!he(j.value))return!1}else for(;!(j=A.next()).done;){var U=j.value;if(U&&!he(U[1]))return!1}}else return!1;return!0;default:return!1}}function ye(E,M){return E==="symbol"?!0:M?M["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&M instanceof Symbol:!1}function de(E){var M=typeof E;return Array.isArray(E)?"array":E instanceof RegExp?"object":ye(M,E)?"symbol":M}function _e(E){if(typeof E>"u"||E===null)return""+E;var M=de(E);if(M==="object"){if(E instanceof Date)return"date";if(E instanceof RegExp)return"regexp"}return M}function Q(E){var M=_e(E);switch(M){case"array":case"object":return"an "+M;case"boolean":case"date":case"regexp":return"a "+M;default:return M}}function Re(E){return!E.constructor||!E.constructor.name?h:E.constructor.name}return m.checkPropTypes=i,m.resetWarningCache=i.resetWarningCache,m.PropTypes=m,m},$n}var Mn,Yi;function Vc(){if(Yi)return Mn;Yi=1;var e=Tn();function t(){}function r(){}return r.resetWarningCache=t,Mn=function(){function n(a,s,c,u,d,l){if(l!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}n.isRequired=n;function o(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:o,element:n,elementType:n,instanceOf:o,node:n,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},Mn}var Ki;function Nc(){if(Ki)return Sr.exports;Ki=1;var e={};if(e.NODE_ENV!=="production"){var t=hn(),r=!0;Sr.exports=Dc()(t.isElement,r)}else Sr.exports=Vc()();return Sr.exports}var Ac=Nc();const v=qs(Ac);function Xi(e,t){let r={};return Object.entries(e).forEach(([n,o])=>{if(t!=null&&t.hasOwnProperty(n)){const i=t[n](o);i!=null&&(r={...r,...i});return}o===!0?r[`data-${n.toLowerCase()}`]="":o&&(r[`data-${n.toLowerCase()}`]=o.toString())}),r}function Ji(e,t){return typeof e=="function"?e(t):e}function Me(...e){if(e.length===0)return{};if(e.length===1)return Qi(e[0],{});let t=Qi(e[0],{});for(let r=1;r<e.length;r+=1){const n=e[r];n&&(Zi(n)?t=n(t):t=Lc(t,n))}return t??{}}function Qi(e,t){return Zi(e)?e(t):e??{}}function Lc(e,t){return t?e?Object.entries(t).reduce((r,[n,o])=>(zc(n,o)?r[n]=Bc(e[n],o):n==="style"?r[n]=jc(e.style,o):n==="className"?r[n]=Uc(e.className,o):r[n]=o,r),{...e}):t:e||{}}function zc(e,t){const r=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&r>=65&&r<=90&&typeof t=="function"}function Zi(e){return typeof e=="function"}function Bc(e,t){return r=>{if(Wc(r)){const o=r;Fc(o);const i=t(o);return o.baseUIHandlerPrevented||e==null||e(o),i}const n=t(r);return e==null||e(r),n}}function Fc(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function jc(e,t){if(t||e)return{...e,...t}}function Uc(e,t){return t?e?t+" "+e:t:e}function Wc(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function Hc(e,t,r){return typeof e=="function"?e(t,r):cr(e,{...Me(t,e.props),ref:t.ref})}function Pt(...e){const t=te(void 0),r=$(n=>{const o=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const a=i,s=a(n);return typeof s=="function"?s:()=>{a(null)}}return i.current=n,()=>{i.current=null}});return()=>{o.forEach(i=>i==null?void 0:i())}},e);return H(()=>e.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=r(n))},e)}const qc=parseInt(Ho,10);function ea(e){return qc>=e}function Gc(e,...t){let r;return typeof e!="function"?r=ea(19)?e.props.ref:e.ref:r=null,Pt(r,...t)}function Yc(e){return function(r){return e==="button"?Se("button",{type:"button",...r}):e==="img"?Se("img",{alt:"",...r}):Se(e,{...r})}}const ta={};function Kc(e,t,r={}){const{className:n,render:o}=t,{propGetter:i=g=>g,state:a=ta,ref:s,props:c,customStyleHookMapping:u,styleHooks:d=!0}=r,l=o||(typeof e=="string"?Yc(e):e),p=Ji(n,a),h=H(()=>d?Xi(a,u):ta,[a,u,d]),m=i({...h,...Array.isArray(c)?Me(...c):c});let _=[];s!==void 0&&(_=Array.isArray(s)?s:[s]);const y={...m,ref:Gc(l,m.ref,..._)};return p!==void 0&&(y.className=p),()=>Hc(l,y,a)}function Qe(e){const t=typeof e.render=="string"?e.render:void 0,r=typeof e.render=="string"?void 0:e.render;return{renderElement:Kc(t,{className:e.className,render:r},{...e,props:e.extraProps})}}let ra=function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});const On={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},Yt={valid(e){return e===null?null:e?{[ra.valid]:""}:{[ra.invalid]:""}}};var Xc={};const Ze=()=>{},Dn=Oe({invalid:void 0,controlId:void 0,setControlId:Ze,labelId:void 0,setLabelId:Ze,messageIds:[],setMessageIds:Ze,name:void 0,validityData:{state:On,errors:[],error:"",value:"",initialValue:null},setValidityData:Ze,disabled:void 0,touched:!1,setTouched:Ze,dirty:!1,setDirty:Ze,filled:!1,setFilled:Ze,focused:!1,setFocused:Ze,validate:()=>null,validationMode:"onBlur",validationDebounceTime:0,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1}});Xc.NODE_ENV!=="production"&&(Dn.displayName="FieldRootContext");function Ve(e=!0){const t=ae(Dn);if(t.setControlId===Ze&&!e)throw new Error("Base UI: FieldRootContext is missing. Field parts must be placed within <Field.Root>.");return t}var Jc={};const na=Oe({legendId:void 0,setLegendId:()=>{},disabled:void 0});Jc.NODE_ENV!=="production"&&(na.displayName="FieldsetRootContext");function Qc(){return ae(na)}const Pe=typeof window<"u"?dt:pe;function Be(e){const t=te(e);return Pe(()=>{t.current=e}),$((...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var Zc={};const oa=Oe({formRef:{current:{fields:new Map}},errors:{},onClearErrors:()=>{}});Zc.NODE_ENV!=="production"&&(oa.displayName="FormContext");function Kt(){return ae(oa)}var el={};const tl=Ie(function(t,r){const{render:n,className:o,validate:i,validationDebounceTime:a=0,validationMode:s="onBlur",name:c,disabled:u=!1,invalid:d,...l}=t,{disabled:p}=Qc(),{errors:h}=Kt(),m=Be(i||(()=>null)),_=p||u,[y,g]=N(void 0),[x,C]=N(void 0),[S,b]=N([]),[k,P]=N(!1),[T,O]=N(!1),[R,D]=N(!1),[F,q]=N(!1),K=te(!1),he=$(A=>{A&&(K.current=!0),O(A)},[]),ye=!!(d||c&&{}.hasOwnProperty.call(h,c)),[de,_e]=N({state:On,error:"",errors:[],value:null,initialValue:null}),Q=!ye&&de.state.valid,Re=H(()=>({disabled:_,touched:k,dirty:T,valid:Q,filled:R,focused:F}),[_,k,T,Q,R,F]),E=H(()=>({invalid:ye,controlId:y,setControlId:g,labelId:x,setLabelId:C,messageIds:S,setMessageIds:b,name:c,validityData:de,setValidityData:_e,disabled:_,touched:k,setTouched:P,dirty:T,setDirty:he,filled:R,setFilled:D,focused:F,setFocused:q,validate:m,validationMode:s,validationDebounceTime:a,state:Re,markedDirtyRef:K}),[ye,y,x,S,c,de,_,k,T,he,R,D,F,q,m,s,a,Re]),{renderElement:M}=Qe({render:n??"div",ref:r,className:o,state:Re,extraProps:l,customStyleHookMapping:Yt});return Se(Dn.Provider,{value:E,children:M()})});el.NODE_ENV!=="production"&&(tl.propTypes={children:v.node,className:v.oneOfType([v.func,v.string]),disabled:v.bool,invalid:v.bool,name:v.string,render:v.oneOfType([v.element,v.func]),validate:v.func,validationDebounceTime:v.number,validationMode:v.oneOf(["onBlur","onChange"])});function rl(){const{controlId:e,labelId:t}=Ve(),r=$((n={})=>Me({id:t,htmlFor:e,onMouseDown(o){var a;const i=window.getSelection();i&&!((a=i.anchorNode)!=null&&a.contains(o.currentTarget))&&i.empty(),o.preventDefault()}},n),[e,t]);return H(()=>({getLabelProps:r}),[r])}let ia=0;function nl(e,t="mui"){const[r,n]=N(e),o=e||r;return pe(()=>{r==null&&(ia+=1,n(`${t}-${ia}`))},[r,t]),o}const aa={...cn}.useId;function ol(e,t){if(aa!==void 0){const r=aa();return e??`${t}-${r}`}return nl(e,t)}function ht(e){return ol(e,"base-ui")}var il={};const al=Ie(function(t,r){const{render:n,className:o,id:i,...a}=t,{setLabelId:s,state:c}=Ve(!1),u=ht(i);Pe(()=>(s(u),()=>{s(void 0)}),[u,s]);const{getLabelProps:d}=rl(),{renderElement:l}=Qe({propGetter:d,render:n??"label",ref:r,className:o,state:c,extraProps:a,customStyleHookMapping:Yt});return l()});il.NODE_ENV!=="production"&&(al.propTypes={children:v.node,className:v.oneOfType([v.func,v.string]),id:v.string,render:v.oneOfType([v.element,v.func])});function sl(e){const{id:t,rendered:r,formError:n}=e,{setMessageIds:o,validityData:i}=Ve(),a=ht(t);Pe(()=>{if(!(!r||!a))return o(c=>c.concat(a)),()=>{o(c=>c.filter(u=>u!==a))}},[r,a,o]);const s=$((c={})=>Me({id:a,children:n||(i.errors.length>1?be("ul",{},i.errors.map(u=>be("li",{key:u},u))):i.error)},c),[a,n,i]);return H(()=>({getErrorProps:s}),[s])}var cl={};const ll=Ie(function(t,r){const{render:n,id:o,className:i,match:a,forceShow:s,...c}=t,{validityData:u,state:d,name:l}=Ve(!1),{errors:p}=Kt(),h=l?p[l]:null;let m=!1;h||s?m=!0:a?m=!!u.state[a]:s==null&&(m=u.state.valid===!1);const{getErrorProps:_}=sl({id:o,rendered:m,formError:h}),{renderElement:y}=Qe({propGetter:_,render:n??"div",ref:r,className:i,state:d,extraProps:c,customStyleHookMapping:Yt});return m?y():null});cl.NODE_ENV!=="production"&&(ll.propTypes={children:v.node,className:v.oneOfType([v.func,v.string]),forceShow:v.bool,id:v.string,match:v.oneOf(["badInput","customError","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valid","valueMissing"]),render:v.oneOfType([v.element,v.func])});function ul(e){const{id:t}=e,{setMessageIds:r}=Ve(),n=ht(t);Pe(()=>{if(n)return r(i=>i.concat(n)),()=>{r(i=>i.filter(a=>a!==n))}},[n,r]);const o=$((i={})=>Me({id:n},i),[n]);return H(()=>({getDescriptionProps:o}),[o])}var dl={};const fl=Ie(function(t,r){const{render:n,id:o,className:i,...a}=t,{state:s}=Ve(!1),{getDescriptionProps:c}=ul({id:o}),{renderElement:u}=Qe({propGetter:c,render:n??"p",ref:r,className:i,state:s,extraProps:a,customStyleHookMapping:Yt});return u()});dl.NODE_ENV!=="production"&&(fl.propTypes={children:v.node,className:v.oneOfType([v.func,v.string]),id:v.string,render:v.oneOfType([v.element,v.func])});function sa(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const pl=Object.keys(On);function kr(){const{setValidityData:e,validate:t,messageIds:r,validityData:n,validationMode:o,validationDebounceTime:i,invalid:a,markedDirtyRef:s,controlId:c,state:u}=Ve(),{formRef:d}=Kt(),l=te(-1),p=te(null);pe(()=>()=>{window.clearTimeout(l.current)},[]);const h=Be(async y=>{const g=p.current;if(!g)return;function x(O){return pl.reduce((R,D)=>(R[D]=O.validity[D],!O.validity.customError&&!s.current&&(R[D]=D==="valid"),R),{})}window.clearTimeout(l.current);const C=t(y);let S=null;typeof C=="object"&&C!==null&&"then"in C?S=await C:S=C;let b="";S!==null&&(b=Array.isArray(S)?S.join(`
`):S),g.setCustomValidity(b);const k=x(g);let P=[];Array.isArray(S)?P=S:S?P=[S]:g.validationMessage&&(P=[g.validationMessage]);const T={value:y,state:k,error:Array.isArray(S)?S[0]:S??g.validationMessage,errors:P,initialValue:n.initialValue};if(c){const O=d.current.fields.get(c);O&&d.current.fields.set(c,{...O,...sa(T,a)})}e(T)}),m=$((y={})=>Me({...r.length&&{"aria-describedby":r.join(" ")},...u.valid===!1&&{"aria-invalid":!0}},y),[r,u.valid]),_=$((y={})=>Me({onChange(g){if(g.nativeEvent.defaultPrevented||a||o!=="onChange")return;const x=g.currentTarget;if(x.value===""){h(x.value);return}window.clearTimeout(l.current),i?l.current=window.setTimeout(()=>{h(x.value)},i):h(x.value)}},m(y)),[m,a,o,i,h]);return H(()=>({getValidationProps:m,getInputValidationProps:_,inputRef:p,commitValidation:h}),[m,_,h])}function hl(e){const t=te(e);return Pe(()=>{t.current=e}),t}function ca(e){const{formRef:t}=Kt(),{invalid:r,markedDirtyRef:n,validityData:o,setValidityData:i}=Ve(),{value:a,id:s,controlRef:c,commitValidation:u}=e,d=hl(e.getValue);Pe(()=>{var p;let l=a;l===void 0&&(l=(p=d.current)==null?void 0:p.call(d)),o.initialValue===null&&l!==o.initialValue&&i(h=>({...h,initialValue:l}))},[i,a,o.initialValue,d]),Pe(()=>{s&&t.current.fields.set(s,{controlRef:c,validityData:sa(o,r),validate(){var p;let l=a;l===void 0&&(l=(p=d.current)==null?void 0:p.call(d)),n.current=!0,sn(()=>u(l))}})},[u,c,t,d,s,r,n,o,a])}var ml={};function la({controlled:e,default:t,name:r,state:n="value"}){const{current:o}=te(e!==void 0),[i,a]=N(t),s=o?e:i;if(ml.NODE_ENV!=="production"){pe(()=>{o!==(e!==void 0)&&console.error([`Base UI: A component is changing the ${o?"":"un"}controlled ${n} state of ${r} to be ${o?"un":""}controlled.`,"Elements should not switch from uncontrolled to controlled (or vice versa).",`Decide between using a controlled or uncontrolled ${r} element for the lifetime of the component.`,"The nature of the state is determined during the first render. It's considered controlled if the value is not `undefined`.","More info: https://fb.me/react-controlled-components"].join(`
`))},[n,r,e]);const{current:u}=te(t);pe(()=>{!o&&!Object.is(u,t)&&console.error([`Base UI: A component is changing the default ${n} state of an uncontrolled ${r} after being initialized. To suppress this warning opt to use a controlled ${r}.`].join(`
`))},[JSON.stringify(t)])}const c=$(u=>{o||a(u)},[]);return[s,c]}function _l(e){const{id:t,name:r,value:n,defaultValue:o,onValueChange:i,disabled:a}=e,{setControlId:s,labelId:c,setTouched:u,setDirty:d,validityData:l,setFocused:p,setFilled:h,validationMode:m}=Ve(),{errors:_,onClearErrors:y}=Kt(),{getValidationProps:g,getInputValidationProps:x,commitValidation:C,inputRef:S}=kr(),b=ht(t);Pe(()=>(s(b),()=>{s(void 0)}),[b,s]),Pe(()=>{var D;const R=n!=null;(D=S.current)!=null&&D.value||R&&n!==""?h(!0):R&&n===""&&h(!1)},[S,h,n]);const[k,P]=la({controlled:n,default:o,name:"FieldControl",state:"value"}),T=Be((R,D)=>{P(R),i==null||i(R,D)});ca({id:b,commitValidation:C,value:k,getValue:()=>{var R;return(R=S.current)==null?void 0:R.value},controlRef:S});const O=$((R={})=>Me({id:b,disabled:a,name:r,ref:S,"aria-labelledby":c,value:k,onChange(D){if(k!=null&&T(D.currentTarget.value,D.nativeEvent),d(D.currentTarget.value!==l.initialValue),h(D.currentTarget.value!==""),r&&{}.hasOwnProperty.call(_,r)){const F={..._};delete F[r],y(F)}},onFocus(){p(!0)},onBlur(D){u(!0),p(!1),m==="onBlur"&&C(D.currentTarget.value)},onKeyDown(D){D.currentTarget.tagName==="INPUT"&&D.key==="Enter"&&(u(!0),C(D.currentTarget.value))}},g(x(R))),[g,x,b,a,r,S,c,k,d,l.initialValue,h,_,T,y,p,u,m,C]);return H(()=>({getControlProps:O}),[O])}var gl={};const ua=Ie(function(t,r){const{render:n,className:o,id:i,name:a,value:s,disabled:c=!1,onValueChange:u,defaultValue:d,...l}=t,{state:p,name:h,disabled:m}=Ve(),_=m||c,y=h??a,g=H(()=>({...p,disabled:_}),[p,_]),{getControlProps:x}=_l({id:i,name:y,disabled:_,value:s,defaultValue:d,onValueChange:u}),{renderElement:C}=Qe({propGetter:x,render:n??"input",ref:r,className:o,state:g,extraProps:l,customStyleHookMapping:Yt});return C()});gl.NODE_ENV!=="production"&&(ua.propTypes={children:v.node,className:v.oneOfType([v.func,v.string]),defaultValue:v.oneOfType([v.arrayOf(v.string),v.number,v.string]),disabled:v.bool,id:v.string,name:v.string,onValueChange:v.func,render:v.oneOfType([v.element,v.func]),value:v.oneOfType([v.arrayOf(v.string),v.number,v.string])});var yl={};yl.NODE_ENV!=="production"&&v.func.isRequired;var vl={};const da=Ie(function(t,r){const{render:n,className:o,...i}=t;return Se(ua,{ref:r,render:n,className:o,...i})});vl.NODE_ENV!=="production"&&(da.propTypes={children:v.node,className:v.oneOfType([v.func,v.string]),render:v.oneOfType([v.element,v.func])});const bl=jt({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Er={root:w({display:"flex",position:"relative"}),label:w({display:"block",marginBottom:"8px",color:"var(--primary-text-color)",fontSize:"14px",fontWeight:500}),input:w({"--input-text-color":"var(--primary-text-color)","--input-bg-color":"var(--secondary-background-color)","--input-border-color":"var(--divider-color)","--input-focus-border-color":"var(--secondary-text-color)","--input-disabled-bg-color":"var(--disabled-color)","--input-disabled-text-color":"var(--disabled-text-color)",width:"100%",padding:"8px",color:"var(--input-text-color)",backgroundColor:"var(--input-bg-color)",border:"none",boxShadow:"0 0 1px 1px var(--input-border-color)",borderRadius:"6px",fontSize:"14px","&:focus":{outline:"none",boxShadow:"0 0 1px 1px var(--input-focus-border-color)"},"&:disabled":{backgroundColor:"var(--input-disabled-bg-color)",color:"var(--input-disabled-text-color)",cursor:"not-allowed"}}),icon:w({position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)","& ha-icon":{pointerEvents:"none",animation:`${bl} 1s linear infinite`}})},fa=({value:e="",placeholder:t,onChange:r,disabled:n,type:o="text",label:i,name:a,loading:s=!1,className:c})=>{const u=d=>{r==null||r(d.target.value)};return I("div",{css:Er.root,className:c,children:[i&&f("label",{css:Er.label,children:i}),f(da,{css:Er.input,value:e,placeholder:t,onChange:u,disabled:n,type:o,name:a}),s&&f(Je,{size:"x-small",icon:"mdi:loading",css:Er.icon})]})},xl=(e,t)=>{const[r,n]=N(null),[o,i]=N(null),[a,s]=N(!1);pe(()=>{le().callApi("GET","config/config_entries/entry").then(d=>{const p=d.filter(h=>h.domain==="music_assistant").find(h=>h.state==="loaded");p&&n(p.entry_id)})},[]),pe(()=>{if(e===""||!r)return;const u={type:"call_service",domain:"music_assistant",service:"search",service_data:{name:e,config_entry_id:r,media_type:t==="all"?void 0:t,limit:t==="all"?8:100},return_response:!0},d=le();s(!0),d.connection.sendMessagePromise(u).then(l=>{l.response&&(s(!1),i(l.response))})},[e,r,t]);const c=$(async(u,d,l)=>le().callService("music_assistant","play_media",{entity_id:d,media_type:u.media_type,media_id:u.uri,enqueue:l}),[]);return H(()=>({results:o,loading:a,playItem:c}),[o,a])},wl=[{type:"all",label:"All",icon:"mdi:all-inclusive"},{type:"artist",label:"Artists",icon:"mdi:account-music"},{type:"album",label:"Albums",icon:"mdi:album"},{type:"track",label:"Tracks",icon:"mdi:music-note"},{type:"playlist",label:"Playlists",icon:"mdi:playlist-music"},{type:"radio",label:"Radio",icon:"mdi:radio"},{type:"audiobook",label:"Audiobooks",icon:"mdi:book"},{type:"podcast",label:"Podcasts",icon:"mdi:podcast"}],Cl={artists:"artist",albums:"album",tracks:"track",playlists:"playlist",radio:"radio",audiobooks:"audiobook",podcasts:"podcast"},Sl={artist:"Artists",album:"Albums",track:"Tracks",playlist:"Playlists",radio:"Radio",audiobook:"Audiobooks",podcast:"Podcasts"},pa=({maEntityId:e,horizontalPadding:t,searchBarPosition:r="top"})=>{const[n,o]=N(""),[i,a]=N("play"),s=Di(n,300),[c,u]=N("all"),d=$(()=>{const g=["play","replace","next","replace_next","add"],C=(g.indexOf(i)+1)%g.length;a(g[C])},[i]),{results:l,loading:p,playItem:h}=xl(s,c),m=()=>I("div",{css:ce.searchBarContainer,children:[f(fa,{placeholder:"Search..",onChange:o,value:n,loading:p,css:ce.searchInput}),I("div",{css:ce.filterContainer,children:[f(pt,{css:ce.chip,style:{"--mmpc-chip-horizontal-margin":`${t}px`},icon:kl(i),onClick:d,children:El(i)}),f("div",{css:ce.verticalChipSeperator}),_()]})]}),_=()=>wl.map(g=>f(pt,{css:ce.chip,style:{"--mmpc-chip-horizontal-margin":`${t}px`,opacity:c===g.type?1:.6,fontWeight:c===g.type?"bold":"normal"},onClick:()=>u(g.type),icon:g.icon,children:g.label},g.type)),y=(g,x)=>!g||c!=="all"&&c!==x||g.length===0&&c==="all"?null:I(ge,{children:[c==="all"&&f(Li,{onClick:()=>u(x),children:Sl[x]}),x==="track"?f("div",{css:ce.trackListContainer,children:(c==="all"?g.slice(0,5):g).map(C=>{var S;return f(zi,{imageUrl:C.image||((S=C.album)==null?void 0:S.image),title:C.name,artist:C.artists.map(b=>b.name).join(", "),onClick:()=>h(C,e,i)},C.uri)})}):f("div",{css:ce.mediaGrid,children:(c==="all"?g.slice(0,6):g).map(C=>{var S;return f(Ni,{imageUrl:C.image,name:C.name,artist:(S=C.artists)==null?void 0:S.map(b=>b.name).join(", "),onClick:()=>h(C,e,i)},C.uri)})}),g.length===0&&f("p",{css:ce.mediaEmptyText,children:p?"Searching...":"No results found."})]},x);return I("div",{css:[ce.root,r==="bottom"&&ce.rootSearchBarBottom],style:{"--mmpc-search-padding":`${t}px`},children:[r==="top"&&m(),l&&f("div",{css:r==="bottom"?ce.resultsContainerSearchBarBottom:{},children:Object.entries(l).map(([g,x])=>y(x,Cl[g]))}),r==="bottom"&&m()]})},kl=e=>{switch(e){case"play":return"mdi:play-circle";case"replace":return"mdi:playlist-remove";case"next":return"mdi:playlist-play";case"replace_next":return"mdi:playlist-edit";case"add":return"mdi:playlist-plus";default:return"mdi:play-circle"}},El=e=>{switch(e){case"play":return"Play now";case"replace":return"Replace queue";case"next":return"Add next";case"replace_next":return"Replace next";case"add":return"Add to queue";default:return"Play"}},Pl={root:w({display:"contents","--mmpc-chip-background":"var(--card-background-color)","--mmpc-chip-foreground":"var(--primary-text-color)"})},Tl=()=>{const{config:e}=ae(we);return f("div",{css:Pl.root,children:f(wn,{config:{entity_id:e.entity_id,speaker_group:{entities:e.entities}},showGrouped:!0})})};function Xt({actionConfig:e,rootElement:t,overrideCallback:r}){const n=H(()=>({onTap:e!=null&&e.tap_action?()=>bn(t,e,"tap",le()):void 0,onLongPress:e!=null&&e.hold_action?()=>bn(t,e,"hold",le()):void 0,onDoubleTap:e!=null&&e.double_tap_action?()=>bn(t,e,"double_tap",le()):void 0,...r??{}}),[e,r]),o=Zl(n);return H(()=>o,[o])}class Rl{constructor(t,r){this.pixels=t,this.opts=r;const{sigBits:n}=r,o=(S,b,k)=>(S<<2*n)+(b<<n)+k;this.getColorIndex=o;const i=8-n,a=1<<3*n,s=new Uint32Array(a);let c,u,d,l,p,h,m,_,y,g;c=d=p=0,u=l=h=Number.MAX_VALUE;const x=t.length/4;let C=0;for(;C<x;){const S=C*4;if(C++,m=t[S+0],_=t[S+1],y=t[S+2],g=t[S+3],g===0)continue;m=m>>i,_=_>>i,y=y>>i;const b=o(m,_,y);s[b]===void 0&&(s[b]=0),s[b]+=1,m>c&&(c=m),m<u&&(u=m),_>d&&(d=_),_<l&&(l=_),y>p&&(p=y),y<h&&(h=y)}this._colorCount=s.reduce((S,b)=>b>0?S+1:S,0),this.hist=s,this.rmax=c,this.rmin=u,this.gmax=d,this.gmin=l,this.bmax=p,this.bmin=h}get colorCount(){return this._colorCount}}class Il{scaleDown(t){const r=this.getWidth(),n=this.getHeight();let o=1;if(t.maxDimension>0){const i=Math.max(r,n);i>t.maxDimension&&(o=t.maxDimension/i)}else o=1/t.quality;o<1&&this.resize(r*o,n*o,o)}}function $l(e,t){var r;if(t.length>0){const n=e.data,o=n.length/4;let i,a,s,c,u;for(let d=0;d<o;d++){i=d*4,a=n[i+0],s=n[i+1],c=n[i+2],u=n[i+3];for(let l=0;l<t.length;l++)if(!((r=t[l])!=null&&r.call(t,a,s,c,u))){n[i+3]=0;break}}}return e}function Ml(e){const t=new URL(e,location.href);return t.protocol===location.protocol&&t.host===location.host&&t.port===location.port}function Ol(e,t){const r=new URL(e),n=new URL(t);return r.protocol===n.protocol&&r.hostname===n.hostname&&r.port===n.port}class Dl extends Il{_getCanvas(){if(!this._canvas)throw new Error("Canvas is not initialized");return this._canvas}_getContext(){if(!this._context)throw new Error("Context is not initialized");return this._context}_getWidth(){if(!this._width)throw new Error("Width is not initialized");return this._width}_getHeight(){if(!this._height)throw new Error("Height is not initialized");return this._height}_initCanvas(){const t=this.image;if(!t)throw new Error("Image is not initialized");const r=this._canvas=document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new ReferenceError("Failed to create canvas context");this._context=n,r.className="@vibrant/canvas",r.style.display="none",this._width=r.width=t.width,this._height=r.height=t.height,n.drawImage(t,0,0),document.body.appendChild(r)}load(t){let r,n;if(typeof t=="string")r=document.createElement("img"),n=t,!Ml(n)&&!Ol(window.location.href,n)&&(r.crossOrigin="anonymous"),r.src=n;else if(t instanceof HTMLImageElement)r=t,n=t.src;else return Promise.reject(new Error("Cannot load buffer as an image in browser"));return this.image=r,new Promise((o,i)=>{const a=()=>{this._initCanvas(),o(this)};r.complete?a():(r.onload=a,r.onerror=s=>i(new Error(`Fail to load image: ${n}`)))})}clear(){this._getContext().clearRect(0,0,this._getWidth(),this._getHeight())}update(t){this._getContext().putImageData(t,0,0)}getWidth(){return this._getWidth()}getHeight(){return this._getHeight()}resize(t,r,n){if(!this.image)throw new Error("Image is not initialized");this._width=this._getCanvas().width=t,this._height=this._getCanvas().height=r,this._getContext().scale(n,n),this._getContext().drawImage(this.image,0,0)}getPixelCount(){return this._getWidth()*this._getHeight()}getImageData(){return this._getContext().getImageData(0,0,this._getWidth(),this._getHeight())}remove(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)}}function Jt(e,...t){return t.forEach(r=>{if(r){for(const n in r)if(r.hasOwnProperty(n)){const o=r[n];Array.isArray(o)?e[n]=o.slice(0):typeof o=="object"?(e[n]||(e[n]={}),Jt(e[n],o)):e[n]=o}}}),e}function Vl(e,t){const{colorCount:r,quantizer:n,generators:o,filters:i}=e,a={colorCount:r},s=typeof n=="string"?{name:n,options:{}}:n;return s.options=Jt({},a,s.options),Jt({},{quantizer:s,generators:o,filters:i},t)}class Nl{constructor(t,r={}){this._src=t,this._opts=Jt({},it.DefaultOpts,r)}maxColorCount(t){return this._opts.colorCount=t,this}maxDimension(t){return this._opts.maxDimension=t,this}addFilter(t){return this._opts.filters?this._opts.filters.push(t):this._opts.filters=[t],this}removeFilter(t){if(this._opts.filters){const r=this._opts.filters.indexOf(t);r>0&&this._opts.filters.splice(r)}return this}clearFilters(){return this._opts.filters=[],this}quality(t){return this._opts.quality=t,this}useImageClass(t){return this._opts.ImageClass=t,this}useGenerator(t,r){return this._opts.generators||(this._opts.generators=[]),this._opts.generators.push(r?{name:t,options:r}:t),this}useQuantizer(t,r){return this._opts.quantizer=r?{name:t,options:r}:t,this}build(){return new it(this._src,this._opts)}getPalette(){return this.build().getPalette()}}class Vn{constructor(t){this.pipeline=t,this._map={}}names(){return Object.keys(this._map)}has(t){return!!this._map[t]}get(t){return this._map[t]}register(t,r){return this._map[t]=r,this.pipeline}}class Al{constructor(){this.filter=new Vn(this),this.quantizer=new Vn(this),this.generator=new Vn(this)}_buildProcessTasks({filters:t,quantizer:r,generators:n}){return n.length===1&&n[0]==="*"&&(n=this.generator.names()),{filters:t.map(i=>o(this.filter,i)),quantizer:o(this.quantizer,r),generators:n.map(i=>o(this.generator,i))};function o(i,a){let s,c;return typeof a=="string"?s=a:(s=a.name,c=a.options),{name:s,fn:i.get(s),options:c}}}async process(t,r){const{filters:n,quantizer:o,generators:i}=this._buildProcessTasks(r),a=await this._filterColors(n,t),s=await this._generateColors(o,a),c=await this._generatePalettes(i,s);return{colors:s,palettes:c}}_filterColors(t,r){return Promise.resolve($l(r,t.map(({fn:n})=>n)))}_generateColors(t,r){return Promise.resolve(t.fn(r.data,t.options))}async _generatePalettes(t,r){const n=await Promise.all(t.map(({fn:o,options:i})=>Promise.resolve(o(r,i))));return Promise.resolve(n.reduce((o,i,a)=>(o[t[a].name]=i,o),{}))}}function Ll(e,t,r){return"#"+((1<<24)+(e<<16)+(t<<8)+r).toString(16).slice(1,7)}function zl(e,t,r){e/=255,t/=255,r/=255;const n=Math.max(e,t,r),o=Math.min(e,t,r);let i=0,a=0;const s=(n+o)/2;if(n!==o){const c=n-o;switch(a=s>.5?c/(2-n-o):c/(n+o),n){case e:i=(t-r)/c+(t<r?6:0);break;case t:i=(r-e)/c+2;break;case r:i=(e-t)/c+4;break}i/=6}return[i,a,s]}function et(e,t,r){let n,o,i;function a(s,c,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?s+(c-s)*6*u:u<1/2?c:u<2/3?s+(c-s)*(2/3-u)*6:s}if(t===0)n=o=i=r;else{const s=r<.5?r*(1+t):r+t-r*t,c=2*r-s;n=a(c,s,e+1/3),o=a(c,s,e),i=a(c,s,e-1/3)}return[n*255,o*255,i*255]}class Le{static applyFilters(t,r){return r.length>0?t.filter(({r:n,g:o,b:i})=>{var a;for(let s=0;s<r.length;s++)if(!((a=r[s])!=null&&a.call(r,n,o,i,255)))return!1;return!0}):t}static clone(t){return new Le(t._rgb,t._population)}get r(){return this._rgb[0]}get g(){return this._rgb[1]}get b(){return this._rgb[2]}get rgb(){return this._rgb}get hsl(){if(!this._hsl){const[t,r,n]=this._rgb;this._hsl=zl(t,r,n)}return this._hsl}get hex(){if(!this._hex){const[t,r,n]=this._rgb;this._hex=Ll(t,r,n)}return this._hex}get population(){return this._population}toJSON(){return{rgb:this.rgb,population:this.population}}getYiq(){if(!this._yiq){const t=this._rgb;this._yiq=(t[0]*299+t[1]*587+t[2]*114)/1e3}return this._yiq}get titleTextColor(){return this._titleTextColor||(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor}get bodyTextColor(){return this._bodyTextColor||(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor}constructor(t,r){this._rgb=t,this._population=r}}const ha=class Xn{constructor(t,r){this._src=t,this.opts=Jt({},Xn.DefaultOpts,r)}static use(t){this._pipeline=t}static from(t){return new Nl(t)}get result(){return this._result}_process(t,r){t.scaleDown(this.opts);const n=Vl(this.opts,r);return Xn._pipeline.process(t.getImageData(),n)}async getPalette(){const t=new this.opts.ImageClass;try{const r=await t.load(this._src),n=await this._process(r,{generators:["default"]});this._result=n;const o=n.palettes.default;if(!o)throw new Error("Something went wrong and a palette was not found, please file a bug against our GitHub repo: https://github.com/vibrant-Colors/node-vibrant/");return t.remove(),o}catch(r){return t.remove(),Promise.reject(r)}}async getPalettes(){const t=new this.opts.ImageClass;try{const r=await t.load(this._src),n=await this._process(r,{generators:["*"]});this._result=n;const o=n.palettes;return t.remove(),o}catch(r){return t.remove(),Promise.reject(r)}}};ha.DefaultOpts={colorCount:64,quality:5,filters:[]};let it=ha;it.DefaultOpts.quantizer="mmcq",it.DefaultOpts.generators=["default"],it.DefaultOpts.filters=["default"],it.DefaultOpts.ImageClass=Dl;const Nn=5,An=8-Nn;class Pr{constructor(t,r,n,o,i,a,s){this.histogram=s,this._volume=-1,this._avg=null,this._count=-1,this.dimension={r1:t,r2:r,g1:n,g2:o,b1:i,b2:a}}static build(t){const r=new Rl(t,{sigBits:Nn}),{rmin:n,rmax:o,gmin:i,gmax:a,bmin:s,bmax:c}=r;return new Pr(n,o,i,a,s,c,r)}invalidate(){this._volume=this._count=-1,this._avg=null}volume(){if(this._volume<0){const{r1:t,r2:r,g1:n,g2:o,b1:i,b2:a}=this.dimension;this._volume=(r-t+1)*(o-n+1)*(a-i+1)}return this._volume}count(){if(this._count<0){const{hist:t,getColorIndex:r}=this.histogram,{r1:n,r2:o,g1:i,g2:a,b1:s,b2:c}=this.dimension;let u=0;for(let d=n;d<=o;d++)for(let l=i;l<=a;l++)for(let p=s;p<=c;p++){const h=r(d,l,p);t[h]&&(u+=t[h])}this._count=u}return this._count}clone(){const{histogram:t}=this,{r1:r,r2:n,g1:o,g2:i,b1:a,b2:s}=this.dimension;return new Pr(r,n,o,i,a,s,t)}avg(){if(!this._avg){const{hist:t,getColorIndex:r}=this.histogram,{r1:n,r2:o,g1:i,g2:a,b1:s,b2:c}=this.dimension;let u=0;const d=1<<8-Nn;let l,p,h;l=p=h=0;for(let m=n;m<=o;m++)for(let _=i;_<=a;_++)for(let y=s;y<=c;y++){const g=r(m,_,y),x=t[g];x&&(u+=x,l+=x*(m+.5)*d,p+=x*(_+.5)*d,h+=x*(y+.5)*d)}u?this._avg=[~~(l/u),~~(p/u),~~(h/u)]:this._avg=[~~(d*(n+o+1)/2),~~(d*(i+a+1)/2),~~(d*(s+c+1)/2)]}return this._avg}contains(t){let[r,n,o]=t;const{r1:i,r2:a,g1:s,g2:c,b1:u,b2:d}=this.dimension;return r>>=An,n>>=An,o>>=An,r>=i&&r<=a&&n>=s&&n<=c&&o>=u&&o<=d}split(){const{hist:t,getColorIndex:r}=this.histogram,{r1:n,r2:o,g1:i,g2:a,b1:s,b2:c}=this.dimension,u=this.count();if(!u)return[];if(u===1)return[this.clone()];const d=o-n+1,l=a-i+1,p=c-s+1,h=Math.max(d,l,p);let m=null,_,y;_=y=0;let g=null;if(h===d){g="r",m=new Uint32Array(o+1);for(let k=n;k<=o;k++){_=0;for(let P=i;P<=a;P++)for(let T=s;T<=c;T++){const O=r(k,P,T);t[O]&&(_+=t[O])}y+=_,m[k]=y}}else if(h===l){g="g",m=new Uint32Array(a+1);for(let k=i;k<=a;k++){_=0;for(let P=n;P<=o;P++)for(let T=s;T<=c;T++){const O=r(P,k,T);t[O]&&(_+=t[O])}y+=_,m[k]=y}}else{g="b",m=new Uint32Array(c+1);for(let k=s;k<=c;k++){_=0;for(let P=n;P<=o;P++)for(let T=i;T<=a;T++){const O=r(P,T,k);t[O]&&(_+=t[O])}y+=_,m[k]=y}}let x=-1;const C=new Uint32Array(m.length);for(let k=0;k<m.length;k++){const P=m[k];P&&(x<0&&P>y/2&&(x=k),C[k]=y-P)}const S=this;function b(k){const P=k+"1",T=k+"2",O=S.dimension[P];let R=S.dimension[T];const D=S.clone(),F=S.clone(),q=x-O,K=R-x;for(q<=K?(R=Math.min(R-1,~~(x+K/2)),R=Math.max(0,R)):(R=Math.max(O,~~(x-1-q/2)),R=Math.min(S.dimension[T],R));!m[R];)R++;let he=C[R];for(;!he&&m[R-1];)he=C[--R];return D.dimension[T]=R,F.dimension[P]=R+1,[D,F]}return b(g)}}class ma{_sort(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)}constructor(t){this._comparator=t,this.contents=[],this._sorted=!1}push(t){this.contents.push(t),this._sorted=!1}peek(t){return this._sort(),t=typeof t=="number"?t:this.contents.length-1,this.contents[t]}pop(){return this._sort(),this.contents.pop()}size(){return this.contents.length}map(t){return this._sort(),this.contents.map(t)}}const Bl=.75;function _a(e,t){let r=e.size();for(;e.size()<t;){const n=e.pop();if(n&&n.count()>0){const[o,i]=n.split();if(!o||(e.push(o),i&&i.count()>0&&e.push(i),e.size()===r))break;r=e.size()}else break}}const Fl=(e,t)=>{if(e.length===0||t.colorCount<2||t.colorCount>256)throw new Error("Wrong MMCQ parameters");const r=Pr.build(e);r.histogram.colorCount;const n=new ma((i,a)=>i.count()-a.count());n.push(r),_a(n,Bl*t.colorCount);const o=new ma((i,a)=>i.count()*i.volume()-a.count()*a.volume());return o.contents=n.contents,_a(o,t.colorCount-o.size()),jl(o)};function jl(e){const t=[];for(;e.size();){const r=e.pop(),n=r.avg();t.push(new Le(n,r.count()))}return t}const Ul={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function Wl(e){let t=0;return e.forEach(r=>{t=Math.max(t,r.population)}),t}function Hl(e,t){return e.Vibrant===t||e.DarkVibrant===t||e.LightVibrant===t||e.Muted===t||e.DarkMuted===t||e.LightMuted===t}function ql(e,t,r,n,o,i,a){function s(...u){let d=0,l=0;for(let p=0;p<u.length;p+=2){const h=u[p],m=u[p+1];!h||!m||(d+=h*m,l+=m)}return d/l}function c(u,d){return 1-Math.abs(u-d)}return s(c(e,t),a.weightSaturation,c(r,n),a.weightLuma,o/i,a.weightPopulation)}function Tt(e,t,r,n,o,i,a,s,c,u){let d=null,l=0;return t.forEach(p=>{const[,h,m]=p.hsl;if(h>=s&&h<=c&&m>=o&&m<=i&&!Hl(e,p)){const _=ql(h,a,m,n,p.population,r,u);(d===null||_>l)&&(d=p,l=_)}}),d}function Gl(e,t,r){const n={Vibrant:null,DarkVibrant:null,LightVibrant:null,Muted:null,DarkMuted:null,LightMuted:null};return n.Vibrant=Tt(n,e,t,r.targetNormalLuma,r.minNormalLuma,r.maxNormalLuma,r.targetVibrantSaturation,r.minVibrantSaturation,1,r),n.LightVibrant=Tt(n,e,t,r.targetLightLuma,r.minLightLuma,1,r.targetVibrantSaturation,r.minVibrantSaturation,1,r),n.DarkVibrant=Tt(n,e,t,r.targetDarkLuma,0,r.maxDarkLuma,r.targetVibrantSaturation,r.minVibrantSaturation,1,r),n.Muted=Tt(n,e,t,r.targetNormalLuma,r.minNormalLuma,r.maxNormalLuma,r.targetMutesSaturation,0,r.maxMutesSaturation,r),n.LightMuted=Tt(n,e,t,r.targetLightLuma,r.minLightLuma,1,r.targetMutesSaturation,0,r.maxMutesSaturation,r),n.DarkMuted=Tt(n,e,t,r.targetDarkLuma,0,r.maxDarkLuma,r.targetMutesSaturation,0,r.maxMutesSaturation,r),n}function Yl(e,t,r){if(!e.Vibrant&&!e.DarkVibrant&&!e.LightVibrant){if(!e.DarkVibrant&&e.DarkMuted){let[n,o,i]=e.DarkMuted.hsl;i=r.targetDarkLuma,e.DarkVibrant=new Le(et(n,o,i),0)}if(!e.LightVibrant&&e.LightMuted){let[n,o,i]=e.LightMuted.hsl;i=r.targetDarkLuma,e.DarkVibrant=new Le(et(n,o,i),0)}}if(!e.Vibrant&&e.DarkVibrant){let[n,o,i]=e.DarkVibrant.hsl;i=r.targetNormalLuma,e.Vibrant=new Le(et(n,o,i),0)}else if(!e.Vibrant&&e.LightVibrant){let[n,o,i]=e.LightVibrant.hsl;i=r.targetNormalLuma,e.Vibrant=new Le(et(n,o,i),0)}if(!e.DarkVibrant&&e.Vibrant){let[n,o,i]=e.Vibrant.hsl;i=r.targetDarkLuma,e.DarkVibrant=new Le(et(n,o,i),0)}if(!e.LightVibrant&&e.Vibrant){let[n,o,i]=e.Vibrant.hsl;i=r.targetLightLuma,e.LightVibrant=new Le(et(n,o,i),0)}if(!e.Muted&&e.Vibrant){let[n,o,i]=e.Vibrant.hsl;i=r.targetMutesSaturation,e.Muted=new Le(et(n,o,i),0)}if(!e.DarkMuted&&e.DarkVibrant){let[n,o,i]=e.DarkVibrant.hsl;i=r.targetMutesSaturation,e.DarkMuted=new Le(et(n,o,i),0)}if(!e.LightMuted&&e.LightVibrant){let[n,o,i]=e.LightVibrant.hsl;i=r.targetMutesSaturation,e.LightMuted=new Le(et(n,o,i),0)}}const Kl=(e,t)=>{t=Object.assign({},Ul,t);const r=Wl(e),n=Gl(e,r,t);return Yl(n,r,t),n},Xl=new Al().filter.register("default",(e,t,r,n)=>n>=125&&!(e>250&&t>250&&r>250)).quantizer.register("mmcq",Fl).generator.register("default",Kl);it.use(Xl);const Ln=()=>window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;function ga(){const{attributes:{entity_picture:e}}=Te(),[t,r]=N(null),[n,o]=N(Ln()),i=$(()=>{e&&it.from(e).getPalette().then(r).catch(c=>{console.error("Error getting color with Vibrant:",c)})},[e]);pe(()=>{r(null),e&&i()},[e]),pe(()=>{const c=window.matchMedia("(prefers-color-scheme: dark)"),u=()=>o(Ln());if(o(Ln()),c.addEventListener)return c.addEventListener("change",u),()=>c.removeEventListener("change",u)},[]);const a=H(()=>{if(n||!t)return null;const c=t.Vibrant??t.Muted;if(!c)return null;const u={...Tr(c.hsl),l:50},d=at(u),l={...u,s:4.35,l:95.49},p={...at(l),l:15.29},h={...l,l:l.l*.98},m=at(h),_={...l,l:l.l*1.1},y=at(_);return{artVars:{"--art-color":`${J(Tr(c.hsl))}`,"--art-on-art-color":`${c.titleTextColor}`,"--art-primary-color":`${J(u)}`,"--art-on-primary-color":`${J(d)}`,"--art-surface-color":`${J(l)}`,"--art-on-surface-color":`${J(p)}`,"--art-surface-higher-color":`${J(h)}`,"--art-on-surface-higher-color":`${J(m)}`,"--art-surface-lower-color":`${J(_)}`,"--art-on-surface-lower-color":`${J(y)}`},haVars:{"--primary-color":`${J(u)}`,"--ha-card-background":`${J(l)}`,"--card-background-color":`${J(h)}`,"--primary-text-color":`${J(p)}`,"--secondary-text-color":`${J({...p,l:p.l*1.1})}`,"--icon-primary-color":`${J(p)}`,"--divider-color":`${J({...l,l:88})}`,"--clear-background-color":`${J({...l,l:100})}`,"--secondary-background-color":`${J({...p,l:95})}`}}},[t,n]),s=H(()=>{if(!n||!t)return null;const c=t.Vibrant??t.Muted;if(!c)return null;const u={...Tr(c.hsl),l:50},d=at(u),l={...u,s:2.91,l:20.2},p={...at(l),l:86.47},h={...l,l:l.l*1.02},m=at(h),_={...l,l:l.l*.98},y=at(_);return{artVars:{"--art-color":`${J(Tr(c.hsl))}`,"--art-on-art-color":`${c.titleTextColor}`,"--art-primary-color":`${J(u)}`,"--art-on-primary-color":`${J(d)}`,"--art-surface-color":`${J(l)}`,"--art-on-surface-color":`${J(p)}`,"--art-surface-higher-color":`${J(h)}`,"--art-on-surface-higher-color":`${J(m)}`,"--art-surface-lower-color":`${J(_)}`,"--art-on-surface-lower-color":`${J(y)}`},haVars:{"--primary-color":`${J(u)}`,"--ha-card-background":`${J(l)}`,"--card-background-color":`${J(h)}`,"--primary-text-color":`${J(p)}`,"--secondary-text-color":`${J({...p,l:p.l*.9})}`,"--icon-primary-color":`${J(p)}`,"--divider-color":`${J({...l,l:25})}`,"--clear-background-color":`${J({...l,l:0})}`,"--secondary-background-color":`${J({...p,l:19})}`}}},[t,n]);return H(()=>({artVars:n?s==null?void 0:s.artVars:a==null?void 0:a.artVars,haVars:n?s==null?void 0:s.haVars:a==null?void 0:a.haVars}),[s,a])}const Tr=e=>{const t=Math.round(e[0]*360),r=Math.round(e[1]*100),n=Math.round(e[2]*100);return{h:t,s:r,l:n}},at=({h:e,s:t,l:r})=>({h:(e+180)%360,s:t,l:r}),J=({h:e,s:t,l:r,a:n})=>`hsla(${e}deg, ${t}%, ${r}%, ${n||1})`,Jl="ontouchstart"in window,Ql={longPressIndicator:w({position:"fixed",width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"var(--primary-color, rgba(7, 114, 244))",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:9,animation:"pulse 1s infinite",transform:"translate(-50%, -50%)","@keyframes pulse":{"0%":{transform:"translate(-50%, -50%) scale(0.95)",opacity:.6},"50%":{transform:"translate(-50%, -50%) scale(1)",opacity:.8},"100%":{transform:"translate(-50%, -50%) scale(0.95)",opacity:.6}}})};function Zl({onTap:e,onLongPress:t,onDoubleTap:r}){const n=te(null),o=te(0),i=te(null),a=te(null),[s,c]=N(!1),[u,d]=N(!1),[l,p]=N({x:0,y:0}),h=$(()=>{i.current&&clearTimeout(i.current),a.current&&clearTimeout(a.current),d(!1),n.current=null,o.current=0},[]),m=()=>u?f("div",{css:Ql.longPressIndicator,style:{left:`${l.x}px`,top:`${l.y}px`}}):null,_=$(()=>{const T=Date.now();return!!(n.current&&T-n.current>=500)},[]),y=$((T,O)=>{p({x:T,y:O})},[]),g=$((T,O)=>{n.current=Date.now(),y(T,O),a.current=setTimeout(()=>{d(!0)},500)},[y]),x=$((T,O)=>{u&&y(T,O)},[u,y]),C=$(()=>{i.current&&clearTimeout(i.current),a.current&&(clearTimeout(a.current),d(!1)),o.current+=1,i.current=setTimeout(async()=>{c(!0);try{o.current>1?await(r==null?void 0:r()):_()?await(t==null?void 0:t()):await(e==null?void 0:e())}catch(T){console.error("Error in button callback:",T)}c(!1),n.current=null,o.current=0},250)},[_,r,t,e]),S=$(T=>{g(T.clientX,T.clientY)},[g]),b=$(T=>{x(T.clientX,T.clientY)},[x]),k=$(T=>{if(T.touches.length>0){const O=T.touches[0];g(O.clientX,O.clientY)}},[g]),P=$(T=>{if(T.touches.length>0){const O=T.touches[0];x(O.clientX,O.clientY)}},[x]);return H(()=>({...Jl?{onTouchStart:k,onTouchMove:P,onTouchEnd:C,onTouchCancel:h,loading:s}:{onMouseDown:S,onMouseMove:b,onMouseUp:C,onMouseOut:h,loading:s},renderLongPressIndicator:m}),[S,b,C,h,k,P,m])}function zn(){const{attributes:{shuffle:e,repeat:t,source:r,supported_features:n},state:o}=Te(),i=o==="off",a=!i&&(n|16)===n,s=!i&&(n|32)===n,c=!i&&e!==void 0&&!["optical","aux"].includes(r==null?void 0:r.toLowerCase()),u=!i&&t!==void 0&&!["optical","aux"].includes(r==null?void 0:r.toLowerCase()),d=!i&&((n&4096)===4096||(n&16384)===16384);return H(()=>({supportPreviousTrack:a,supportNextTrack:s,supportsShuffle:c,supportsRepeat:u,supportsTogglePlayPause:d}),[a,s,c,u,d])}const ya={root:w({display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:"2px",overflowX:"auto",scrollbarWidth:"none","-ms-overflow-style":"none","&::-webkit-scrollbar":{display:"none"}}),chip:w({"&:first-child":{marginLeft:"16px"},"&:last-child":{marginRight:"16px"}})},eu=()=>{const{config:e}=ae(we),{custom_buttons:t}=e;return f("div",{css:ya.root,children:t.map((r,n)=>f(tu,{button:r},n))})},tu=({button:e})=>{const{rootElement:t,config:r}=ae(we),{icon:n,name:o,...i}=e,a=Xt({rootElement:t,actionConfig:{...i,entity:r.entity_id}});return I(pt,{css:ya.chip,icon:n,...a,children:[!!o&&f("span",{children:o}),a.renderLongPressIndicator()]})},ru={root:w({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-around",width:"100%",paddingLeft:"var(--mmpc-extra-horizontal-padding, 0px)",paddingRight:"var(--mmpc-extra-horizontal-padding, 0px)"})},nu=()=>{const{config:e}=ae(we),{attributes:{shuffle:t,repeat:r},state:n}=Te(),o=n==="playing",{supportPreviousTrack:i,supportNextTrack:a,supportsShuffle:s,supportsRepeat:c,supportsTogglePlayPause:u}=zn(),d=$(()=>{le().callService("media_player","media_play_pause",{entity_id:e.entity_id})},[]),l=$(()=>{le().callService("media_player","media_next_track",{entity_id:e.entity_id})},[]),p=$(()=>{le().callService("media_player","media_previous_track",{entity_id:e.entity_id})},[]),h=$(()=>{le().callService("media_player","shuffle_set",{entity_id:e.entity_id,shuffle:!t})},[t]),m=$(()=>{const _=r==="off"?"one":r==="one"?"all":"off";le().callService("media_player","repeat_set",{entity_id:e.entity_id,repeat:_})},[r]);return I("div",{css:ru.root,children:[s&&f(ee,{size:"small",onClick:h,icon:t?"mdi:shuffle-variant":"mdi:shuffle-disabled"}),i&&f(ee,{size:"large",onClick:p,icon:"mdi:skip-previous"}),u&&f(ee,{size:"x-large",onClick:d,icon:o?"mdi:pause-circle":"mdi:play-circle"}),a&&f(ee,{size:"large",onClick:l,icon:"mdi:skip-next"}),c&&f(ee,{size:"small",onClick:m,icon:r==="one"?"mdi:repeat-once":r==="all"?"mdi:repeat":"mdi:repeat-off"})]})},va={root:w({display:"flex",alignItems:"center",flex:1,maxHeight:"36px",marginTop:"auto",gap:"8px"}),buttonMuted:w({opacity:.8})},ou=()=>{var s,c;const e=Te(),t=e.entity_id,r=((s=e.attributes)==null?void 0:s.volume_level)??0,n=((c=e.attributes)==null?void 0:c.is_volume_muted)??!1,o=$(u=>{le().callService("media_player","volume_set",{entity_id:t,volume_level:u})},[]),i=$(()=>{le().callService("media_player","volume_mute",{entity_id:t,is_volume_muted:!n})},[n]),a=H(()=>Ut(r,n),[r,n]);return I("div",{css:va.root,children:[f(ee,{css:n?va.buttonMuted:{},size:"small",onClick:i,icon:a}),f(Gn,{min:0,max:1,step:.01,value:r,sliderSize:"large",onChange:o})]})},iu=({onClick:e})=>{var i,a;const t=Te(),r=((i=t.attributes)==null?void 0:i.volume_level)??0,n=((a=t.attributes)==null?void 0:a.is_volume_muted)??!1,o=Ut(r,n);return f(ee,{size:"small",onClick:e,icon:o})},Rr={root:w({display:"flex",flexDirection:"column",gap:"18px"}),speakerList:w({display:"flex",flexDirection:"column",gap:"8px",marginLeft:"16px",marginRight:"16px"}),syncContainer:w({display:"flex",flexDirection:"row",alignItems:"center",marginLeft:"auto",gap:"4px",opacity:.8,position:"absolute",right:"56px",top:"12px"}),syncText:w({fontSize:"12px"})},au=()=>{var c,u;const e=Et(),{config:t}=ae(we),{entity_id:r,speaker_group:n}=t,[o,i]=N(!0),a=(n==null?void 0:n.entity_id)||r,s=e.states[a];return I("div",{css:Rr.root,children:[((u=(c=s==null?void 0:s.attributes)==null?void 0:c.group_members)==null?void 0:u.length)>1&&I("div",{children:[I("div",{css:Rr.syncContainer,children:[f("span",{css:Rr.syncText,onClick:()=>i(!o),children:"Link Volume"}),f(ee,{icon:o?"mdi:check-circle":"mdi:circle-outline",size:"x-small",onClick:()=>i(!o)})]}),f("div",{css:Rr.speakerList,children:f(Oi,{config:{entity_id:r,speaker_group:n},syncMainSpeaker:o})})]}),f(wn,{config:{entity_id:r,speaker_group:n},showGrouped:!1,layout:{horizontalMargin:16}})]})},su=jt`
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
`,Ir={root:w({backgroundColor:"var(--mmpc-surface-higher)",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderRadius:"12px",padding:"12px",width:"100%",position:"relative",boxSizing:"border-box",boxShadow:"0 15px 100px var(--clear-background-color)"}),modalRoot:w({position:"absolute",bottom:"calc(100% + 12px)",left:0,width:"100%",backgroundColor:"var(--mmpc-surface-higher)",borderRadius:"12px",boxSizing:"border-box",animation:`${su} 0.3s ease forwards`,boxShadow:"0 0px 80px var(--clear-background-color)"}),modalHeader:w({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"8px 16px",color:"var(--primary-text-color, #fff)",borderBottom:"0.5px solid var(--divider-color, rgba(0, 0, 0, 0.12))","> h4":{margin:0}}),modalContent:w({display:"flex",flexDirection:"column",gap:"12px",maxHeight:"400px",overflowY:"auto",padding:"var(--mmpc-modal-padding, 16px)"})},cu=()=>{const{config:e}=ae(we),{custom_buttons:t,speaker_group:r,ma_entity_id:n,search:o}=e,a=n&&n.length>0||(o==null?void 0:o.enabled),[s,c]=N(),u=$(d=>{c(s===d?void 0:d)},[s]);return I("div",{css:Ir.root,children:[f($r,{title:"Volume",isOpen:s==="volume",onClose:()=>c(void 0),children:f(ou,{})}),f($r,{title:"Speaker Grouping",isOpen:s==="speaker-grouping",onClose:()=>c(void 0),padding:"16px 0px 16px 0px",children:f(au,{})}),f($r,{title:"Search",isOpen:s==="search",onClose:()=>c(void 0),padding:"16px 0px 16px 0px",children:n?f(pa,{maEntityId:n,horizontalPadding:16,searchBarPosition:"bottom"}):f(Bi,{entityId:(o==null?void 0:o.entity_id)??e.entity_id,horizontalPadding:16,searchBarPosition:"bottom"})}),!!r&&f(ee,{size:"small",icon:"mdi:speaker-multiple",onClick:()=>u("speaker-grouping")}),t==null?void 0:t.slice(0,1).map((d,l)=>f(lu,{button:d},l)),(t==null?void 0:t.length)>2&&I(ge,{children:[f(ee,{size:"small",icon:"mdi:dots-horizontal",onClick:()=>u("custom-buttons")}),f($r,{title:"Shortcuts",isOpen:s==="custom-buttons",onClose:()=>c(void 0),padding:"16px 0px 16px 0px",children:f(eu,{})})]}),a&&f(ee,{size:"small",icon:"mdi:magnify",onClick:()=>c("search")}),f(iu,{onClick:()=>u("volume")})]})},$r=({children:e,title:t,isOpen:r,padding:n,onClose:o})=>r?I("div",{css:Ir.modalRoot,children:[I("div",{css:Ir.modalHeader,children:[f("h4",{children:t}),f(ee,{type:"button",size:"small",icon:"mdi:close",onClick:o})]}),f("div",{css:Ir.modalContent,style:{"--mmpc-modal-padding":n??"16px"},children:e})]}):null,lu=({button:e})=>{const{rootElement:t,config:r}=ae(we),{icon:n,name:o,...i}=e,a=Xt({rootElement:t,actionConfig:{...i,entity:r.entity_id}});return f(ee,{icon:e.icon??"mdi:dots-vertical",size:"small",...a})},Bn={root:w({display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",textAlign:"center",color:"var(--primary-text-color, #fff)",paddingLeft:"var(--mmpc-extra-horizontal-padding, 0px)",paddingRight:"var(--mmpc-extra-horizontal-padding, 0px)","> h2, > h3":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"}}),titleH2:w({margin:0}),titleH3:w({margin:0,fontWeight:"normal",color:"var(--secondary-text-color, #fff)"})},uu=()=>{const{title:e,subtitle:t}=Te();return I("div",{css:Bn.root,children:[!!e&&f("h2",{css:Bn.titleH2,children:e}),!!t&&f("h3",{css:Bn.titleH3,children:t})]})},ba={root:w({paddingLeft:"var(--mmpc-extra-horizontal-padding, 0px)",paddingRight:"var(--mmpc-extra-horizontal-padding, 0px)"}),timeWrap:w({display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:"4px",color:"var(--secondary-text-color, #888)",height:"20px",marginBottom:"-20px"})},du=()=>{const e=Te(),[t,r]=N(0),n=e.state==="playing";pe(()=>{if(!n)return;const i=setInterval(()=>{r(a=>a+1)},1e3);return()=>clearInterval(i)},[n]);const o=H(()=>{var h,m,_;const i=((h=e.attributes)==null?void 0:h.media_position)??null,a=((m=e.attributes)==null?void 0:m.media_position_updated_at)??null,s=((_=e.attributes)==null?void 0:_.media_duration)??null;if(i===null||i<0||s===null||a===null)return null;const c=new Date,u=new Date(a),l=(c.getTime()-u.getTime())/1e3+i,p=y=>{const g=Math.floor(y/60).toString().padStart(2,"0"),x=Math.round(y-Number(g)*60).toString().padStart(2,"0");return`${g}:${x}`};return{currentPosition:l,mediaDuration:s,prettyNow:p(l),prettyEnd:p(s)}},[e,t]);return o?I("div",{css:ba.root,children:[f(Tu,{value:o.currentPosition,min:0,max:o.mediaDuration}),I("div",{css:ba.timeWrap,children:[f("span",{children:o.prettyNow}),f("span",{children:o.prettyEnd})]})]}):null},st={root:w({display:"flex",justifyContent:"center",alignItems:"center","--mmpc-extra-horizontal-padding":"0px",boxSizing:"border-box","*":{boxSizing:"border-box"},"--mmpc-surface-higher":"var(--card-background-color)"}),rootPanelMode:w({width:"100%",height:"100%",background:"linear-gradient(var(--app-header-background-color), rgba(255, 255, 255, 0))",maxHeight:"calc(100vh - var(--header-height, 16px))"}),rootPopupMode:w({"--mmpc-extra-horizontal-padding":"12px"}),wrap:w({display:"flex",flex:1,flexDirection:"column",gap:"16px",justifyContent:"space-around",alignItems:"center",paddingTop:"16px",paddingBottom:"16px",height:"100%"}),wrapPanelMode:w({width:"90%",maxWidth:"400px",padding:"16px"}),wrapPopupMode:w({maxWidth:"100%",padding:"16px",paddingBottom:"max(calc(env(safe-area-inset-bottom) + 8px), 16px)"}),wrapCardMode:w({width:"100%",padding:"16px"}),controlsWrapper:w({display:"flex",flexDirection:"column",maxHeight:"300px",minHeight:"280px",width:"100%",height:"100%",justifyContent:"space-between"})},xa=({className:e})=>{const{config:t}=ae(we),{mode:r,use_art_colors:n}=t,{artVars:o,haVars:i}=ga(),a=()=>f("div",{className:e,css:[st.root,r==="panel"&&st.rootPanelMode,r==="popup"&&st.rootPopupMode],style:{...o??{},...i&&n?i:{}},children:I("div",{css:[st.wrap,r==="panel"&&st.wrapPanelMode,r==="card"&&st.wrapCardMode,r==="popup"&&st.wrapPopupMode],children:[f(Ci,{iconSize:"x-large",borderRadius:8}),I("div",{css:st.controlsWrapper,children:[f(uu,{}),f(du,{}),f(nu,{}),f(cu,{})]})]})});return r==="card"?f("ha-card",{children:a()}):a()},fu=({config:e,rootElement:t,hass:r})=>{(!e||!r||!t)&&console.error("No config or hass");const n=$(d=>{const l=new Event("config-changed",{bubbles:!0,composed:!0});l.detail={config:d},t.dispatchEvent(l)},[t]),o=$((d,l)=>{if(!e)return;const p=d.split("."),h={...e};let m=h;for(let _=0;_<p.length-1;_++)m[p[_]]||(m[p[_]]={}),m=m[p[_]];m[p[p.length-1]]=l,n(h)},[e,n]),i=$(()=>{const d=[...e.custom_buttons||[],{icon:"mdi:paper-roll",name:"New Button",tap_action:{action:"toggle"}}];n({...e,custom_buttons:d})},[e,n]),a=$(d=>{const l=[...e.custom_buttons||[]];l.splice(d,1),n({...e,custom_buttons:l})},[e,n]),s=$((d,l,p)=>{const h=[...e.custom_buttons||[]];h[d]={...h[d],[l]:p},n({...e,custom_buttons:h})},[e,n]),c=$((d,l)=>{const p=[...e.custom_buttons||[]];p[d]={...p[d],...l},n({...e,custom_buttons:p})},[e,n]);if(!e||!r)return null;const u={...e,use_art_colors:e.use_art_colors??!1,speaker_group:e.speaker_group||{entity_id:"",entities:[]},custom_buttons:e.custom_buttons||[],search:e.search||{enabled:!1}};return I("form",{children:[f(ue,{children:f(Ge,{hass:r,value:u.entity_id,onChange:d=>o("entity_id",d),label:"Media Player Entity",domains:["media_player"],required:!0})}),f(ue,{children:I(Wt,{children:[f(qt,{type:"checkbox",id:"use_art_colors",checked:u.use_art_colors,onChange:d=>o("use_art_colors",d.target.checked)}),f(Ht,{htmlFor:"use_art_colors",children:"Use album art colors"})]})}),f(Ne,{title:"Display Mode",children:f(yc,{options:[{name:"Panel",value:"panel"},{name:"Card",value:"card"},{name:"In Card",value:"in-card"}],onSelected:d=>o("mode",d),selected:e.mode||"panel"})}),f(ue,{children:f(Ne,{title:"Interactions",children:f(vr,{hass:r,value:u.action||{},onChange:d=>o("action",d)})})}),f(ue,{children:I(Ne,{title:"Speaker Group Configuration (optional)",children:[f(ue,{children:f(Ge,{hass:r,value:u.speaker_group.entity_id,onChange:d=>o("speaker_group.entity_id",d),label:"Main Speaker Entity ID (Optional)",domains:["media_player"]})}),f(ue,{children:f(Pi,{hass:r,value:u.speaker_group.entities,onChange:d=>o("speaker_group.entities",d),label:"Select Speakers (including main speaker)",domains:["media_player"]})})]})}),f(ue,{children:f(Ne,{title:"Search (optional)",children:I(ue,{children:[I(Wt,{children:[f(qt,{type:"checkbox",id:"search.enabled",checked:u.search.enabled,onChange:d=>o("search.enabled",d.target.checked)}),f(Ht,{htmlFor:"search.enabled",children:"Enable Search"})]}),f(Ge,{hass:r,value:u.search.entity_id,onChange:d=>o("search.entity_id",d),label:"Search target (Optional, if not set, will use the main entity_id)",domains:["media_player"]})]})})}),f(ue,{children:f(Ne,{title:"Music Assistant Configuration (optional)",children:f(ue,{children:f(Ge,{hass:r,value:u.ma_entity_id,onChange:d=>o("ma_entity_id",d),label:"Music Assistant Entity ID (Optional)",domains:["media_player"]})})})}),f(ue,{children:f(Ne,{title:"Custom Buttons (optional)",children:I(Ri,{children:[u.custom_buttons.map((d,l)=>{const{name:p,icon:h,...m}=d;return I(Ne,{title:`Button ${l} - ${d.name}`,children:[I(ue,{children:[f(br,{children:f(xr,{value:p||"",onChange:_=>s(l,"name",_),hass:r,label:"Name"})}),f(br,{children:f(xr,{value:h||"",onChange:_=>s(l,"icon",_),hass:r,isIconInput:!0,label:"Icon"})}),f(Ti,{children:"Interactions"}),f(vr,{hass:r,value:m,onChange:_=>c(l,_)})]}),f($i,{type:"button",onClick:()=>a(l),children:"Remove Button"})]},l)}),f(Ii,{type:"button",onClick:i,children:"Add Custom Button"})]})})})]})},wa={root:w({display:"flex",flexDirection:"row",justifyContent:"flex-start",overflowX:"auto",scrollbarWidth:"none","-ms-overflow-style":"none","&::-webkit-scrollbar":{display:"none"},paddingTop:"16px",paddingBottom:"16px",borderTop:"0.5px solid var(--divider-color, rgba(0, 0, 0, 0.12))",gap:"2px"}),chip:w({"&:first-child":{marginLeft:16},"&:last-child":{marginRight:16}})},pu=()=>{const{config:e}=ae(we),{custom_buttons:t}=e;return f("div",{css:wa.root,children:t.map((r,n)=>f(Ca,{button:r},n))})},Ca=({button:e,type:t="chip"})=>{const{rootElement:r,config:n}=ae(we),{icon:o,name:i,...a}=e,s=Xt({rootElement:r,actionConfig:{...a,entity:n.entity_id}});return t==="icon-button"?f(ee,{icon:e.icon??"mdi:dots-vertical",size:"x-small",...s}):I(pt,{css:wa.chip,icon:o,...s,children:[!!i&&f("span",{children:i}),s.renderLongPressIndicator()]})},hu=jt`
  from {
    transform: translateY(15%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
`,Sa=58,mt={overlay:w({position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:8,transition:"opacity 0.3s ease-in-out",display:"flex",justifyContent:"center",alignItems:"flex-end","@media screen and (min-height: 832px)":{alignItems:"center"}}),clickableBackground:w({position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0}),popUpContainer:w({animation:`${hu} 0.55s cubic-bezier(0.25, 1, 0.5, 1) forwards`,maxHeight:"98vh",height:"fit-content",width:"424px",maxWidth:"98vw",backgroundColor:"var(--ha-card-background, var(--card-background-color))",overflow:"hidden",boxShadow:"0px 10px 20px var(--clear-background-color)",borderTopLeftRadius:"var(--ha-dialog-border-radius, 28px)",borderTopRightRadius:"var(--ha-dialog-border-radius, 28px)","@media screen and (min-height: 832px)":{borderRadius:"var(--ha-dialog-border-radius, 28px)",boxShadow:"0px 0px 20px var(--clear-background-color)"},"@media (prefers-color-scheme: light)":{boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.2)"}}),popUpContent:w({display:"grid",height:"100%"}),popUpHeader:w({display:"flex",height:Sa,justifyContent:"flex-start",alignItems:"center",padding:"0px 16px",borderBottom:"1px solid var(--divider-color, rgba(0, 0, 0, 0.12))",gap:"8px"}),title:w({margin:0,fontSize:"18px",fontWeight:500,color:"var(--primary-text-color, #212121)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginRight:"auto"}),massiveCard:w({maxHeight:`calc(98vh - ${Sa}px)`,maxWidth:"98vw",width:"100%",height:"100%",overflow:"hidden"})},mu=({visible:e,setVisible:t})=>{var m,_;const r=Et(),{config:n,rootElement:o}=ae(we),{entity_id:i,speaker_group:a}=n,{attributes:{friendly_name:s,icon:c,device_class:u}}=Te(),d=(_=(m=r.states[(a==null?void 0:a.entity_id)??i])==null?void 0:m.attributes)==null?void 0:_.group_members,l=xn({icon:c,deviceClass:u}),p=H(()=>{const{tap_opens_popup:y,...g}=n;return{...g,mode:"popup"}},[n]),h=Xt({rootElement:o,actionConfig:{tap_action:{action:"more-info"},entity:i}});return e?I("div",{css:mt.overlay,children:[f("div",{css:mt.clickableBackground,onClick:()=>t(!1)}),I("div",{css:mt.popUpContainer,children:[I("div",{css:mt.popUpHeader,children:[f(Je,{size:"small",icon:l}),I("h2",{css:mt.title,children:[s,(d==null?void 0:d.length)>1&&I("span",{children:[" +",d.length-1]})]}),f(ee,{size:"small",...h,icon:"mdi:dots-vertical"}),f(ee,{icon:"mdi:close",size:"small",onClick:()=>t(!1)})]}),f("div",{css:mt.popUpContent,children:f(Si,{rootElement:o,config:p,children:f(xa,{css:mt.massiveCard})})})]})]}):null},ka=Oe({player:null}),_u=({hass:e,children:t,entityId:r})=>{const n=H(()=>{const o=e.states[r];if(!o)return{player:null};const{attributes:{media_title:i,media_artist:a,media_album_name:s,source:c,friendly_name:u},state:d}=o;if(d==="off")return{player:{...o,title:u,subtitle:void 0}};if(d==="unavailable")return{player:{...o,title:"Unavailable",subtitle:`${r} unavailable`}};let l=i;(!l||l==="")&&(c&&typeof c=="string"&&!c.startsWith("media_player.")?l=c:l=u);const p=s||a?`${s&&s!==l?`${s} - `:""}${a??""}`:void 0;return{player:{...o,title:l,subtitle:p}}},[e.states,r]);return f(ka.Provider,{value:n,children:t})},Te=()=>{const e=ae(ka);if(!e)throw new Error("useHass must be used within a HassContextProvider");return e.player},Ea={titleText:w({margin:0,fontSize:"16px",fontWeight:600,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"var(--primary-text-color, #333)"}),artistText:w({margin:0,fontSize:"14px",color:"var(--secondary-text-color, #666)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"})},gu=()=>{const{title:e,subtitle:t}=Te();return I(ge,{children:[!!e&&f("h3",{css:Ea.titleText,children:e}),!!t&&f("p",{css:Ea.artistText,children:t})]})},Qt={root:w({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",marginTop:"auto",height:"36px",marginLeft:"-4px"}),buttonMuted:w({opacity:.8}),shuffleButton:w({"@container (max-width: 150px)":{display:"none"}}),repeatButton:w({"@container (max-width: 130px)":{display:"none"}})},yu=()=>{const{config:e}=ae(we),{attributes:{shuffle:t,repeat:r},state:n}=Te(),o=n==="playing",{supportPreviousTrack:i,supportNextTrack:a,supportsShuffle:s,supportsRepeat:c,supportsTogglePlayPause:u}=zn(),d=$(()=>{le().callService("media_player","media_play_pause",{entity_id:e.entity_id})},[]),l=$(()=>{le().callService("media_player","media_next_track",{entity_id:e.entity_id})},[]),p=$(()=>{le().callService("media_player","media_previous_track",{entity_id:e.entity_id})},[]),h=$(()=>{le().callService("media_player","shuffle_set",{entity_id:e.entity_id,shuffle:!t})},[t]),m=$(()=>{const _=r==="off"?"one":r==="one"?"all":"off";le().callService("media_player","repeat_set",{entity_id:e.entity_id,repeat:_})},[r]);return I("div",{css:Qt.root,children:[!!s&&f(ee,{css:[Qt.shuffleButton,...t?[]:[Qt.buttonMuted]],size:"x-small",onClick:h,icon:t?"mdi:shuffle-variant":"mdi:shuffle-disabled"}),!!i&&f(ee,{size:"small",onClick:p,icon:"mdi:skip-previous"}),u&&f(ee,{size:"medium",onClick:d,icon:o?"mdi:pause-circle":"mdi:play-circle"}),!!a&&f(ee,{size:"small",onClick:l,icon:"mdi:skip-next"}),!!c&&f(ee,{css:[Qt.repeatButton,...r==="off"?[Qt.buttonMuted]:[]],size:"x-small",onClick:m,icon:r==="one"?"mdi:repeat-once":r==="all"?"mdi:repeat":"mdi:repeat-off"})]})},Fn={root:w({display:"flex",flexDirection:"row",alignItems:"center",gap:"4px"}),friendlyName:w({fontSize:"11px",color:"var(--secondary-text-color, #888)",opacity:.8,fontStyle:"italic"})},vu=()=>{var d,l;const e=Et(),{config:t}=ae(we),{entity_id:r,speaker_group:n}=t,{attributes:{friendly_name:o,icon:i,device_class:a},state:s}=Te(),c=(l=(d=e.states[(n==null?void 0:n.entity_id)??r])==null?void 0:d.attributes)==null?void 0:l.group_members,u=xn({icon:i,deviceClass:a});return s==="off"?null:I("div",{css:Fn.root,children:[f(Je,{icon:u,size:"xx-small"}),f("span",{css:Fn.friendlyName,children:o}),c&&c.length>1&&I("span",{css:Fn.friendlyName,children:["+",c.length-1]})]})},bu={root:w({maxHeight:300,paddingTop:12,paddingBottom:12,borderTop:"0.5px solid var(--divider-color, rgba(0, 0, 0, 0.12))",overflowY:"auto"})},xu=()=>{const{config:e}=ae(we),{ma_entity_id:t,search:r,entity_id:n}=e,o=()=>t?f(pa,{maEntityId:t,horizontalPadding:12}):r!=null&&r.enabled?f(Bi,{entityId:r.entity_id??n,horizontalPadding:12}):null;return f("div",{css:bu.root,children:o()})},_t={speakerGroupContainer:w({display:"flex",flexDirection:"column",paddingTop:"12px",paddingBottom:"16px",borderTop:"0.5px solid var(--divider-color, rgba(0, 0, 0, 0.12))",gap:"12px"}),groupTitle:w({fontSize:"16px",fontWeight:500,color:"var(--primary-text-color)",margin:"0px 16px"}),syncContainer:w({display:"flex",flexDirection:"row",alignItems:"center",marginLeft:"auto",gap:"4px",marginRight:"19px"}),syncText:w({fontSize:"12px",color:"var(--secondary-text-color)"}),groupedSpeakers:w({display:"flex",flexDirection:"column",gap:"8px",marginLeft:"16px",marginRight:"16px"}),titleRow:w({display:"flex",alignItems:"center"})},wu=()=>{var c,u;const e=Et(),{config:t}=ae(we),{entity_id:r,speaker_group:n}=t,[o,i]=N(!0),a=(n==null?void 0:n.entity_id)||r,s=e.states[a];return I("div",{css:_t.speakerGroupContainer,children:[((u=(c=s==null?void 0:s.attributes)==null?void 0:c.group_members)==null?void 0:u.length)>1&&I(ge,{children:[I("div",{css:_t.titleRow,children:[f("h3",{css:_t.groupTitle,children:"Grouped Speakers"}),I("div",{css:_t.syncContainer,children:[f("span",{css:_t.syncText,onClick:()=>i(!o),children:"Link Volume"}),f(ee,{icon:o?"mdi:check-circle":"mdi:circle-outline",size:"x-small",onClick:()=>i(!o)})]})]}),f("div",{css:_t.groupedSpeakers,children:f(Oi,{config:{entity_id:r,speaker_group:n},syncMainSpeaker:o})})]}),f("h3",{css:_t.groupTitle,children:"Add speakers to group"}),f(wn,{config:{entity_id:r,speaker_group:n},showGrouped:!1,layout:{horizontalMargin:16}})]})},Cu={root:w({display:"flex",alignItems:"center",transition:"all 0.3s ease",width:"100%",gap:"4px"})},Su=()=>{var s,c;const e=Te(),t=e.entity_id,r=((s=e.attributes)==null?void 0:s.volume_level)??0,n=((c=e.attributes)==null?void 0:c.is_volume_muted)??!1,o=$(u=>{le().callService("media_player","volume_set",{entity_id:t,volume_level:u})},[]),i=$(()=>{le().callService("media_player","volume_mute",{entity_id:t,is_volume_muted:!n})},[n]),a=H(()=>Ut(r,n),[r,n]);return I("div",{css:Cu.root,children:[f(ee,{size:"x-small",onClick:i,icon:a}),f(Gn,{min:0,max:1,step:.01,value:r,sliderSize:"small",onChange:o})]})},ku=({sliderVisible:e,setSliderVisible:t})=>{var a,s;const r=Te(),n=((a=r.attributes)==null?void 0:a.volume_level)??0,o=((s=r.attributes)==null?void 0:s.is_volume_muted)??!1,i=Ut(n,o);return f(ge,{children:e?f(ee,{size:"x-small",onClick:()=>t(!1),icon:"mdi:chevron-left"}):f(ee,{size:"x-small",onClick:()=>t(!0),icon:i})})},Fe={card:w({borderRadius:"var(--ha-card-border-radius, 12px)",overflow:"hidden"}),cardArtBackground:w({background:`
      radial-gradient( circle at bottom right, var(--art-color, transparent) -500%, transparent 40% ),
      radial-gradient( circle at top center, var(--art-color, transparent) -500%, transparent 40% ),
      radial-gradient( circle at bottom center, var(--art-color, transparent) -500%, transparent 40% ),
      radial-gradient( circle at top left, var(--art-color, transparent) -500%, transparent 40% )`}),cardContent:w({display:"flex",gap:"14px",padding:"12px",opacity:1,transition:"opacity 0.3s ease",position:"relative"}),cardRowRight:w({display:"grid",gridTemplateColumns:"repeat(2, auto)",gap:"4px",minWidth:"max-content"}),cardRow:w({display:"flex",flexDirection:"row",gap:"8px",alignItems:"center",justifyContent:"space-between"}),alignStart:w({alignItems:"start"}),cardColumn:w({display:"flex",flexDirection:"column",flex:1}),grid:w({display:"grid"}),controlsContainer:w({display:"flex",flexGrow:1,containerType:"inline-size"})},Eu=()=>{const{rootElement:e,config:t}=ae(we),{entity_id:r,custom_buttons:n,action:o,tap_opens_popup:i,use_art_colors:a,ma_entity_id:s,search:c}=t,u=n&&n.length>0,l=s&&s.length>0||(c==null?void 0:c.enabled),[p,h]=N(!1),[m,_]=N(!1),[y,g]=N(!1),[x,C]=N(!1),{artVars:S,haVars:b}=ga(),{state:k,subtitle:P}=Te(),T=zn(),O=!T.supportsTogglePlayPause&&!T.supportNextTrack&&!T.supportPreviousTrack&&!T.supportsShuffle&&!T.supportsRepeat,R=k!=="off"&&k!=="unavailable",D=t.speaker_group&&t.speaker_group.entities&&t.speaker_group.entities.length>0,F=()=>{h(!p)},[q,K]=N(!1),he=k==="off"||!P&&O?68:100,de=Xt({rootElement:e,actionConfig:{...o??{tap_action:{action:"more-info"}},entity:t.entity_id},overrideCallback:i?{onTap:()=>{K(!0)}}:{}}),_e=$(()=>{le().callService("media_player","toggle",{entity_id:r})},[r]);return f("ha-card",{children:I("div",{css:[Fe.card,a&&Fe.cardArtBackground],style:{...S??{},...b&&a?b:{}},children:[I("div",{css:Fe.cardContent,style:{opacity:R?1:.7},children:[f(Ci,{size:he,iconSize:"large",...de}),I("div",{css:Fe.cardColumn,children:[I("div",{css:[Fe.cardRow,Fe.alignStart],children:[I("div",{css:Fe.grid,children:[f(gu,{}),f(vu,{})]}),I("div",{css:Fe.cardRowRight,children:[u&&f(ge,{children:n.length===1?f(Ca,{button:n[0],type:"icon-button"}):f(ee,{size:"x-small",onClick:()=>_(!m),icon:"mdi:dots-vertical"})}),l&&f(ee,{size:"x-small",onClick:()=>C(!x),icon:"mdi:magnify"})]})]}),I("div",{css:Fe.cardRow,style:{marginTop:"auto",minHeight:O?"unset":"36px"},children:[f("div",{css:Fe.controlsContainer,children:y||O?f(Su,{}):f(yu,{})}),I("div",{css:Fe.cardRowRight,children:[!!R&&!O&&f(ku,{sliderVisible:y,setSliderVisible:g}),!!R&&D&&f(ee,{size:"x-small",onClick:F,icon:"mdi:speaker-multiple"}),(!R||O)&&f(ee,{size:"x-small",onClick:_e,icon:"mdi:power"})]})]})]})]}),p&&D&&f(wu,{}),m&&f(pu,{}),x&&f(xu,{}),q&&f(mu,{visible:q,setVisible:K})]})})},Pu=({config:e,rootElement:t,hass:r})=>{(!e||!r||!t)&&console.error("No config or hass");const n=$(d=>{const l=new Event("config-changed",{bubbles:!0,composed:!0});l.detail={config:d},t.dispatchEvent(l)},[t]),o=$((d,l)=>{if(!e)return;const p=d.split("."),h={...e};let m=h;for(let _=0;_<p.length-1;_++)m[p[_]]||(m[p[_]]={}),m=m[p[_]];m[p[p.length-1]]=l,n(h)},[e,n]),i=$(()=>{const d=[...e.custom_buttons||[],{icon:"mdi:paper-roll",name:"New Button",tap_action:{action:"toggle"}}];n({...e,custom_buttons:d})},[e,n]),a=$(d=>{const l=[...e.custom_buttons||[]];l.splice(d,1),n({...e,custom_buttons:l})},[e,n]),s=$((d,l,p)=>{const h=[...e.custom_buttons||[]];h[d]={...h[d],[l]:p},n({...e,custom_buttons:h})},[e,n]),c=$((d,l)=>{const p=[...e.custom_buttons||[]];p[d]={...p[d],...l},n({...e,custom_buttons:p})},[e,n]);if(!e||!r)return null;const u={...e,use_art_colors:e.use_art_colors??!1,speaker_group:e.speaker_group||{entity_id:"",entities:[]},custom_buttons:e.custom_buttons||[],search:e.search||{enabled:!1}};return I("form",{children:[f(ue,{children:f(Ge,{hass:r,value:u.entity_id,onChange:d=>o("entity_id",d),label:"Media Player Entity",domains:["media_player"],required:!0})}),f(ue,{children:I(Wt,{children:[f(qt,{type:"checkbox",id:"use_art_colors",checked:u.use_art_colors,onChange:d=>o("use_art_colors",d.target.checked)}),f(Ht,{htmlFor:"use_art_colors",children:"Use album art colors"})]})}),f(ue,{children:I(Ne,{title:"Interactions",children:[I(Wt,{children:[f(qt,{type:"checkbox",id:"tap_opens_popup",checked:u.tap_opens_popup||!1,onChange:d=>o("tap_opens_popup",d.target.checked)}),f(Ht,{htmlFor:"tap_opens_popup",children:"Tap opens popup (this will override any setting under tap in action)"})]}),f(vr,{hass:r,value:u.action||{},onChange:d=>o("action",d)})]})}),f(ue,{children:I(Ne,{title:"Speaker Group Configuration (optional)",children:[f(ue,{children:f(Ge,{hass:r,value:u.speaker_group.entity_id,onChange:d=>o("speaker_group.entity_id",d),label:"Main Speaker Entity ID (Optional)",domains:["media_player"]})}),f(ue,{children:f(Pi,{hass:r,value:u.speaker_group.entities,onChange:d=>o("speaker_group.entities",d),label:"Select Speakers (including main speaker)",domains:["media_player"]})})]})}),f(ue,{children:f(Ne,{title:"Search (optional)",children:I(ue,{children:[I(Wt,{children:[f(qt,{type:"checkbox",id:"search.enabled",checked:u.search.enabled,onChange:d=>o("search.enabled",d.target.checked)}),f(Ht,{htmlFor:"search.enabled",children:"Enable Search"})]}),f(Ge,{hass:r,value:u.search.entity_id,onChange:d=>o("search.entity_id",d),label:"Search target (Optional, if not set, will use the main entity_id)",domains:["media_player"]})]})})}),f(ue,{children:f(Ne,{title:"Music Assistant Configuration (optional)",children:f(ue,{children:f(Ge,{hass:r,value:u.ma_entity_id,onChange:d=>o("ma_entity_id",d),label:"Music Assistant Entity ID (Optional)",domains:["media_player"]})})})}),f(ue,{children:f(Ne,{title:"Custom Buttons (optional)",children:I(Ri,{children:[u.custom_buttons.map((d,l)=>{const{name:p,icon:h,...m}=d;return I(Ne,{title:`Button ${l} - ${d.name}`,children:[I(ue,{children:[f(br,{children:f(xr,{value:p||"",onChange:_=>s(l,"name",_),hass:r,label:"Name"})}),f(br,{children:f(xr,{value:h||"",onChange:_=>s(l,"icon",_),hass:r,isIconInput:!0,label:"Icon"})}),f(Ti,{children:"Interactions"}),f(vr,{hass:r,value:m,onChange:_=>c(l,_)})]}),f($i,{type:"button",onClick:()=>a(l),children:"Remove Button"})]},l)}),f(Ii,{type:"button",onClick:i,children:"Add Custom Button"})]})})})]})},Pa={root:w({display:"flex",flexDirection:"row",height:"4px",width:"100%",backgroundColor:"var(--divider-color)",borderRadius:"2px",overflow:"hidden"}),progress:w({height:"100%",backgroundColor:"var(--secondary-text-color)",width:"0%",transition:"width 1s linear"})},Tu=({min:e,max:t,value:r})=>{const n=(r-e)/(t-e)*100;return f("div",{css:Pa.root,children:f("div",{css:Pa.progress,style:{width:`${n}%`}})})},Ta=()=>{};var Ru={};const jn=Oe({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});Ru.NODE_ENV!=="production"&&(jn.displayName="CompositeListContext");function Iu(){return ae(jn)}var $u={};function Mu(e,t){const r=e.compareDocumentPosition(t);return r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS?1:0}function Ra(e){const{children:t,elementsRef:r,labelsRef:n,onMapChange:o}=e,[i,a]=N(()=>new Map),s=$((l,p)=>{a(h=>new Map(h).set(l,p??null))},[]),c=$(l=>{a(p=>{const h=new Map(p);return h.delete(l),h})},[]),u=H(()=>{const l=new Map;return Array.from(i.keys()).sort(Mu).forEach((h,m)=>{const _=i.get(h)??{};l.set(h,{..._,index:m})}),l},[i]);Pe(()=>{o==null||o(u)},[u,o]);const d=H(()=>({register:s,unregister:c,map:u,elementsRef:r,labelsRef:n}),[s,c,u,r,n]);return Se(jn.Provider,{value:d,children:t})}$u.NODE_ENV!=="production"&&(Ra.propTypes={children:v.node,elementsRef:v.any,labelsRef:v.shape({current:v.arrayOf(v.string).isRequired}),onMapChange:v.func});const Mr={activeThumbIndex:()=>null,max:()=>null,min:()=>null,minStepsBetweenValues:()=>null,step:()=>null,values:()=>null};function Ia(e){let t=e.activeElement;for(;((r=t)==null||(r=r.shadowRoot)==null?void 0:r.activeElement)!=null;){var r;t=t.shadowRoot.activeElement}return t}function Un(e,t,r=(n,o)=>n===o){return e.length===t.length&&e.every((n,o)=>r(n,t[o]))}function tt(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function Zt(e){return e&&e.ownerDocument||document}function er(e,t,r){return(e-t)*100/(r-t)}var $a={};let Wn;$a.NODE_ENV!=="production"&&(Wn=new Set);function Ou(...e){if($a.NODE_ENV!=="production"){const t=e.join(" ");Wn.has(t)||(Wn.add(t),console.warn(`Base UI: ${t}`))}}var Du={};const Ma=Oe(void 0);Du.NODE_ENV!=="production"&&(Ma.displayName="DirectionContext");function Oa(e=!0){const t=ae(Ma);if(t===void 0&&!e)throw new Error("Base UI: DirectionContext is missing.");return(t==null?void 0:t.direction)??"ltr"}function Da(e,t){return e-t}function Or(e,t,r){const n=e.slice();return n[t]=r,n.sort(Da)}function Va(e,t,r,n,o,i){let a=e;return a=tt(a,r,n),o&&(a=Or(i,t,tt(a,i[t-1]||-1/0,i[t+1]||1/0))),a}function Vu(e){if(Math.abs(e)<1){const r=e.toExponential().split("e-"),n=r[0].split(".")[1];return(n?n.length:0)+parseInt(r[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function Na(e,t,r){const n=Math.round((e-r)/t)*t+r;return Number(n.toFixed(Vu(t)))}let Dr=function(e){return e.index="data-index",e.dragging="data-dragging",e.orientation="data-orientation",e.disabled="data-disabled",e.readonly="data-readonly",e.required="data-required",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.focused="data-focused",e}({});function Nu(e,t){return typeof e=="number"&&typeof t=="number"?e===t:Array.isArray(e)&&Array.isArray(t)?Un(e,t):!1}function Au(e,t,r){let n,o;for(let i=0;i<e.length;i+=1){const a=Math.abs(t-e[i]);(o===void 0||(e[i]===r?a<o:a<=o))&&(n=i,o=a)}return n}function Hn(e,t,r){const n=[];for(let o=0;o<e.length;o+=1)n.push(tt(er(e[o],t,r),0,100));return n}function Vr(e,t,r){if(!t.current)return;const n=Ia(Zt(t.current));(n==null||!t.current.contains(n)||Number(n.getAttribute(Dr.index))!==e)&&t.current.querySelector(`[type="range"][${Dr.index}="${e}"]`).focus(),r&&r(e)}function Aa(e,t,r){if(!Array.isArray(e))return!0;const n=e.reduce((o,i,a,s)=>(a===s.length-1||o.push(Math.abs(i-s[a+1])),o),[]);return Math.min(...n)>=t*r}function Lu(e,t){if(!e)return{start:0,end:0};const r=t==="horizontal"?"InlineStart":"Top",n=t==="horizontal"?"InlineEnd":"Bottom";return{start:parseFloat(e[`border${r}Width`])+parseFloat(e[`padding${r}`]),end:parseFloat(e[`border${n}Width`])+parseFloat(e[`padding${n}`])}}function zu(e){const{"aria-labelledby":t,defaultValue:r,disabled:n=!1,id:o,largeStep:i=10,max:a=100,min:s=0,minStepsBetweenValues:c=0,name:u,onValueChange:d,onValueCommitted:l,orientation:p="horizontal",rootRef:h,step:m=1,value:_}=e,y=Oa(),{setControlId:g,setTouched:x,setDirty:C,validityData:S,validationMode:b}=Ve(),{getValidationProps:k,inputRef:P,commitValidation:T}=kr(),[O,R]=la({controlled:_,default:r??s,name:"Slider"}),D=te(null),F=te(null),q=te([]),K=te(null),[he,ye]=N(()=>new Map);Pe(()=>(g(o),()=>{g(void 0)}),[o,g]),ca({id:o,commitValidation:T,value:O,controlRef:F});const[de,_e]=N(-1),[Q,Re]=N(!1),E=te(null),M=$(X=>{X&&(F.current=X,E.current==null&&(E.current=getComputedStyle(X)),P.current=X.querySelector('input[type="range"]'))},[P]),A=Array.isArray(O),j=H(()=>A?O.slice().sort(Da):[tt(O,s,a)],[a,s,A,O]);function U(){return Hn(j,s,a)}const[W,z]=N(U),B=Be((X,ve,je,Ee)=>{if(Number.isNaN(X)||Nu(X,O))return;R(X),z(ve);const rr=new Ee.constructor(Ee.type,Ee);Object.defineProperty(rr,"target",{writable:!0,value:{value:X,name:u}}),K.current=X,d(X,rr,je)}),L=Be((X,ve)=>{if(Array.isArray(X)){const je=Hn(X,s,a);Un(je,W)||z(je)}else typeof X=="number"&&z([er(X,s,a)]);l(X,ve)}),Z=Pt(h,D),G=Be((X,ve,je)=>{const Ee=Va(X,ve,s,a,A,j);A&&Vr(ve,D),Aa(Ee,m,c)&&(Array.isArray(Ee)?B(Ee,Or(W,ve,er(Ee[ve],s,a)),ve,je.nativeEvent):B(Ee,[er(Ee,s,a)],ve,je.nativeEvent),C(Ee!==S.initialValue),x(!0),l(K.current??Ee,je.nativeEvent),b==="onChange"&&T(K.current??Ee))}),Ce=te(null),V=Be((X,ve=!1,je=0)=>{if(X==null)return null;const Ee=F.current;if(!Ee)return null;const rr=y==="rtl",pd=p==="vertical",{width:hd,height:md,bottom:_d,left:gd,right:yd}=Ee.getBoundingClientRect(),gt=Lu(E.current,p);let yt=pd?(_d-gt.end-X.y)/(md-gt.start-gt.end)+je:(rr?yd-gt.start-X.x:X.x-gd-gt.start)/(hd-gt.start-gt.end)+je*(rr?-1:1);yt=tt(yt,0,1);let rt=(a-s)*yt+s;if(rt=Na(rt,m,s),rt=tt(rt,s,a),!A)return{value:rt,valueRescaled:yt,percentageValues:[yt*100],thumbIndex:0};ve&&(Ce.current=Au(j,rt,a)??0);const vt=Ce.current??0,Kn=c*m,qa=Kn*100/(a-s);rt=tt(rt,j[vt-1]+Kn||-1/0,j[vt+1]-Kn||1/0);const vd=tt(yt*100,W[vt-1]+qa||-1/0,W[vt+1]-qa||1/0);return{value:Or(j,vt,rt),valueRescaled:yt,percentageValues:Or(W,vt,vd),thumbIndex:vt}});Pe(()=>{if(!(_===void 0||Q)){if(s>=a&&Ou("Slider `max` must be greater than `min`"),typeof O=="number"){const X=tt(er(O,s,a),0,100);X!==W[0]&&!Number.isNaN(X)&&z([X])}else if(Array.isArray(O)){const X=Hn(O,s,a);Un(X,W)||z(X)}}},[Q,s,a,W,z,_,O]),Pe(()=>{var ve;const X=Ia(Zt(D.current));n&&((ve=D.current)!=null&&ve.contains(X))&&X.blur()},[n]),n&&de!==-1&&_e(-1);const Ae=$((X={})=>Me({"aria-labelledby":t,id:o,ref:Z,role:"group"},k(X)),[t,k,Z,o]);return H(()=>({"aria-labelledby":t,active:de,commitValue:L,disabled:n,dragging:Q,getFingerState:V,getRootProps:Ae,handleInputChange:G,largeStep:i,lastChangedValueRef:K,max:a,min:s,minStepsBetweenValues:c,name:u,onValueCommitted:l,orientation:p,percentageValues:W,range:A,registerSliderControl:M,setActive:_e,setDragging:Re,setThumbMap:ye,setValue:B,step:m,thumbMap:he,thumbRefs:q,values:j}),[de,t,L,n,Q,V,Ae,G,i,K,a,s,c,u,l,p,W,A,M,_e,Re,ye,B,m,he,q,j])}var Bu={};const qn=Oe(void 0);Bu.NODE_ENV!=="production"&&(qn.displayName="SliderRootContext");function Nr(){const e=ae(qn);if(e===void 0)throw new Error("Base UI: SliderRootContext is missing. Slider parts must be placed within <Slider.Root>.");return e}var Fu={};const La=Ie(function(t,r){const{className:n,defaultValue:o,disabled:i=!1,id:a,format:s,largeStep:c=10,render:u,max:d=100,min:l=0,minStepsBetweenValues:p=0,name:h,onValueChange:m,onValueCommitted:_,orientation:y="horizontal",step:g=1,tabIndex:x,value:C,...S}=t,b=ht(a),{labelId:k,state:P,disabled:T,name:O}=Ve(),R=T||i,D=O??h??"",{getRootProps:F,...q}=zu({"aria-labelledby":t["aria-labelledby"]??k,defaultValue:o,disabled:R,id:b??"",largeStep:c,max:d,min:l,minStepsBetweenValues:p,name:D,onValueChange:m??Ta,onValueCommitted:_??Ta,orientation:y,rootRef:r,step:g,value:C}),K=H(()=>({...P,activeThumbIndex:q.active,disabled:R,dragging:q.dragging,orientation:y,max:q.max,min:q.min,minStepsBetweenValues:q.minStepsBetweenValues,step:q.step,values:q.values}),[P,R,y,q.active,q.dragging,q.max,q.min,q.minStepsBetweenValues,q.step,q.values]),he=H(()=>({...q,format:s,state:K,tabIndex:x??null}),[q,s,K,x]),{renderElement:ye}=Qe({propGetter:F,render:u??"div",state:K,className:n,extraProps:S,customStyleHookMapping:Mr});return Se(qn.Provider,{value:he,children:Se(Ra,{elementsRef:q.thumbRefs,onMapChange:q.setThumbMap,children:ye()})})});Fu.NODE_ENV!=="production"&&(La.propTypes={children:v.node,className:v.oneOfType([v.func,v.string]),defaultValue:v.oneOfType([v.arrayOf(v.number),v.number]),disabled:v.bool,format:v.shape({compactDisplay:v.oneOf(["long","short"]),currency:v.string,currencyDisplay:v.oneOf(["code","name","narrowSymbol","symbol"]),currencySign:v.oneOf(["accounting","standard"]),localeMatcher:v.oneOf(["best fit","lookup"]),maximumFractionDigits:v.number,maximumSignificantDigits:v.number,minimumFractionDigits:v.number,minimumIntegerDigits:v.number,minimumSignificantDigits:v.number,notation:v.oneOf(["compact","engineering","scientific","standard"]),numberingSystem:v.string,signDisplay:v.oneOf(["always","auto","exceptZero","never"]),style:v.oneOf(["currency","decimal","percent","unit"]),unit:v.string,unitDisplay:v.oneOf(["long","narrow","short"]),useGrouping:v.bool}),id:v.string,largeStep:v.number,max:v.number,min:v.number,minStepsBetweenValues:v.number,name:v.string,onValueChange:v.func,onValueCommitted:v.func,orientation:v.oneOf(["horizontal","vertical"]),render:v.oneOfType([v.element,v.func]),step:v.number,tabIndex:v.number,value:v.oneOfType([v.arrayOf(v.number),v.number])});const za=new Map;function ju(e,t){const r=JSON.stringify({locale:e,options:t}),n=za.get(r);if(n)return n;const o=new Intl.NumberFormat(e,t);return za.set(r,o),o}function Ar(e,t,r){return e==null?"":ju(t,r).format(e)}const Uu=2;function Lr(e,t){if(t.current!==void 0&&e.changedTouches){const r=e;for(let n=0;n<r.changedTouches.length;n+=1){const o=r.changedTouches[n];if(o.identifier===t.current)return{x:o.clientX,y:o.clientY}}return null}return{x:e.clientX,y:e.clientY}}function Wu(e){const{disabled:t,dragging:r,getFingerState:n,lastChangedValueRef:o,minStepsBetweenValues:i,commitValue:a,percentageValues:s,registerSliderControl:c,rootRef:u,setActive:d,setDragging:l,setValue:p,step:h,thumbRefs:m}=e,{commitValidation:_}=kr(),y=te(null),g=Pt(u,c,y),x=te(null),C=te(0),S=te(0),b=Be(R=>{const D=Lr(R,x);if(D==null)return;if(C.current+=1,R.type==="pointermove"&&R.buttons===0){k(R);return}const F=n(D,!1,S.current);F!=null&&(Vr(F.thumbIndex,y,d),Aa(F.value,h,i)&&(!r&&C.current>Uu&&l(!0),p(F.value,F.percentageValues,F.thumbIndex,R)))}),k=Be(R=>{const D=Lr(R,x);if(l(!1),D==null)return;const F=n(D,!1);F!=null&&(d(-1),_(o.current??F.value),a(o.current??F.value,R),x.current=null,T())}),P=Be(R=>{if(t)return;const D=R.changedTouches[0];D!=null&&(x.current=D.identifier);const F=Lr(R,x);if(F!=null){const K=n(F,!0);if(K==null)return;Vr(K.thumbIndex,y,d),p(K.value,K.percentageValues,K.thumbIndex,R)}C.current=0;const q=Zt(y.current);q.addEventListener("touchmove",b,{passive:!0}),q.addEventListener("touchend",k,{passive:!0})}),T=Be(()=>{S.current=0;const R=Zt(y.current);R.removeEventListener("pointermove",b),R.removeEventListener("pointerup",k),R.removeEventListener("touchmove",b),R.removeEventListener("touchend",k)});pe(()=>{const{current:R}=y;return R?(R.addEventListener("touchstart",P,{passive:!0}),()=>{R.removeEventListener("touchstart",P),T()}):()=>T()},[T,P,y]),pe(()=>{t&&T()},[t,T]);const O=$((R={})=>Me({onPointerDown(D){if(t||D.defaultPrevented||D.button!==0)return;D.preventDefault();const F=Lr(D,x);if(F!=null){const K=n(F,!0);if(K==null)return;Vr(K.thumbIndex,y,d),m.current.includes(D.target)?S.current=s[K.thumbIndex]/100-K.valueRescaled:p(K.value,K.percentageValues,K.thumbIndex,D.nativeEvent)}C.current=0;const q=Zt(y.current);q.addEventListener("pointermove",b,{passive:!0}),q.addEventListener("pointerup",k)},ref:g},R),[t,n,g,b,k,p,s,d,m]);return H(()=>({getRootProps:O}),[O])}var Hu={};const Ba=Ie(function(t,r){const{render:n,className:o,...i}=t,{commitValue:a,disabled:s,dragging:c,getFingerState:u,lastChangedValueRef:d,minStepsBetweenValues:l,percentageValues:p,registerSliderControl:h,setActive:m,setDragging:_,setValue:y,state:g,step:x,thumbRefs:C}=Nr(),{getRootProps:S}=Wu({commitValue:a,disabled:s,dragging:c,getFingerState:u,lastChangedValueRef:d,minStepsBetweenValues:l,percentageValues:p,registerSliderControl:h,rootRef:r,setActive:m,setDragging:_,setValue:y,step:x,thumbRefs:C}),{renderElement:b}=Qe({propGetter:S,render:n??"div",state:g,className:o,extraProps:i,customStyleHookMapping:Mr});return b()});Hu.NODE_ENV!=="production"&&(Ba.propTypes={children:v.node,className:v.oneOfType([v.func,v.string]),render:v.oneOfType([v.element,v.func])});var qu={};const Fa=Ie(function(t,r){const{render:n,className:o,...i}=t,{state:a}=Nr(),{renderElement:s}=Qe({render:n??"div",state:a,className:o,ref:r,extraProps:{...i,style:{position:"relative",...i.style}},customStyleHookMapping:Mr});return s()});qu.NODE_ENV!=="production"&&(Fa.propTypes={children:v.node,className:v.oneOfType([v.func,v.string]),render:v.oneOfType([v.element,v.func]),style:v.object});const ja={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1},Gu="ArrowUp",Yu="ArrowDown",Ku="ArrowLeft",Xu="ArrowRight",Ju="Home",Qu="End";function Zu(e={}){const{label:t,metadata:r}=e,{register:n,unregister:o,map:i,elementsRef:a,labelsRef:s}=Iu(),[c,u]=N(null),d=te(null),l=$(p=>{if(d.current=p,c!==null&&(a.current[c]=p,s)){const h=t!==void 0;s.current[c]=h?t:(p==null?void 0:p.textContent)??null}},[c,a,s,t]);return Pe(()=>{const p=d.current;if(p)return n(p,r),()=>{o(p)}},[n,o,r]),Pe(()=>{var h;const p=d.current?(h=i.get(d.current))==null?void 0:h.index:null;p!=null&&u(p)},[i]),H(()=>({ref:l,index:c??-1}),[c,l])}function Rt(e,t,r,n,o){return r===1?Math.min(e+t,o):Math.max(e-t,n)}function ed(e,t,r){if(!(t<0))return e.length===2?t===0?`${Ar(e[t],[],r)} start range`:`${Ar(e[t],[],r)} end range`:r?Ar(e[t],[],r):void 0}function td(e){const{active:t,"aria-label":r,"aria-labelledby":n,"aria-valuetext":o,handleInputChange:i,disabled:a,format:s,getAriaLabel:c=null,getAriaValueText:u=null,id:d,inputId:l,largeStep:p,max:h,min:m,minStepsBetweenValues:_,name:y,orientation:g,percentageValues:x,rootRef:C,step:S,tabIndex:b,values:k}=e,P=Oa(),{setTouched:T,setFocused:O,validationMode:R}=Ve(),{getInputValidationProps:D,inputRef:F,commitValidation:q}=kr(),K=te(null),he=te(null),ye=Pt(he,F),de=H(()=>({inputId:l}),[l]),{ref:_e,index:Q}=Zu({metadata:de}),Re=Pt(C,_e,K),E=k[Q],M=x.length===1?x[0]:x[Q],A=P==="rtl",j=$(()=>{const z=g==="vertical";return Number.isFinite(M)?{position:"absolute",[{horizontal:"insetInlineStart",vertical:"bottom"}[g]]:`${M}%`,[z?"left":"top"]:"50%",transform:`translate(${(z||!A?-1:1)*50}%, ${(z?1:-1)*50}%)`,zIndex:t===Q?1:void 0}:ja},[t,A,g,M,Q]),U=$((z={})=>Me({[Dr.index]:Q,id:d,onFocus(){O(!0)},onBlur(){K.current&&(T(!0),O(!1),R==="onBlur"&&q(Va(E,Q,m,h,k.length>1,k)))},onKeyDown(B){let L=null;const Z=k.length>1,G=Na(E,S,m);switch(B.key){case Gu:L=Rt(G,B.shiftKey?p:S,1,m,h);break;case Xu:L=Rt(G,B.shiftKey?p:S,A?-1:1,m,h);break;case Yu:L=Rt(G,B.shiftKey?p:S,-1,m,h);break;case Ku:L=Rt(G,B.shiftKey?p:S,A?1:-1,m,h);break;case"PageUp":L=Rt(G,p,1,m,h);break;case"PageDown":L=Rt(G,p,-1,m,h);break;case Qu:L=h,Z&&(L=Number.isFinite(k[Q+1])?k[Q+1]-S*_:h);break;case Ju:L=m,Z&&(L=Number.isFinite(k[Q-1])?k[Q-1]+S*_:m);break}L!==null&&(i(L,Q,B),B.preventDefault())},ref:Re,style:j(),tabIndex:b??(a?void 0:0)},z),[q,a,b,j,i,Q,A,p,h,Re,m,_,O,T,k,S,d,E,R]),W=$((z={})=>{let B;return g==="vertical"&&(B=A?"vertical-rl":"vertical-lr"),Me({"aria-label":c!=null?c(Q):r,"aria-labelledby":n,"aria-orientation":g,"aria-valuemax":h,"aria-valuemin":m,"aria-valuenow":E,"aria-valuetext":u!=null?u(Ar(E,[],s??void 0),E,Q):o||ed(k,Q,s??void 0),[Dr.index]:Q,disabled:a,id:l,max:h,min:m,name:y,onChange(L){i(L.target.valueAsNumber,Q,L)},ref:ye,step:S,style:{...ja,width:"100%",height:"100%",writingMode:B},tabIndex:-1,type:"range",value:E??""},D(z))},[r,n,o,i,a,s,c,u,D,Q,A,h,ye,m,y,g,k,S,l,E]);return H(()=>({getRootProps:U,getThumbInputProps:W,disabled:a,index:Q}),[U,W,a,Q])}var rd={};function nd(e,t){const{children:r,...n}=e;return Se("div",{...n,children:[r,Se("input",{...t})]})}const Ua=Ie(function(t,r){const{render:n,className:o,disabled:i=!1,getAriaLabel:a,getAriaValueText:s,id:c,inputId:u,onBlur:d,onFocus:l,onKeyDown:p,tabIndex:h,...m}=t,_=ht(c),y=ht(u),g=n??nd,{active:x,"aria-labelledby":C,handleInputChange:S,disabled:b,format:k=null,largeStep:P,max:T,min:O,minStepsBetweenValues:R,name:D,orientation:F,state:q,percentageValues:K,step:he,tabIndex:ye,values:de}=Nr();let _e=null;typeof g!="function"&&(_e=ea(19)?g.props.ref:g.ref);const Q=Pt(_e,r),{getRootProps:Re,getThumbInputProps:E,disabled:M,index:A}=td({active:x,"aria-label":t["aria-label"],"aria-labelledby":C,"aria-valuetext":t["aria-valuetext"],handleInputChange:S,disabled:i||b,format:k,getAriaLabel:a??null,getAriaValueText:s??null,id:_,inputId:y,largeStep:P,max:T,min:O,minStepsBetweenValues:R,name:D,orientation:F,percentageValues:K,rootRef:Q,step:he,tabIndex:h??ye,values:de}),j=H(()=>Xi({disabled:M,dragging:A!==-1&&x===A}),[x,M,A]),U=Re({...j,...m,className:Ji(o,q)}),W=E({disabled:M});if(typeof g=="function")return g(U,W,q);const{children:z,...B}=g.props,L=U.children??z;return cr(g,{...Me({...U,children:Se(ge,{children:[typeof L=="function"?L():L,Se("input",{...W})]})},B),ref:U.ref})});rd.NODE_ENV!=="production"&&(Ua.propTypes={children:v.node,className:v.oneOfType([v.func,v.string]),disabled:v.bool,getAriaLabel:v.func,getAriaValueText:v.func,id:v.string,inputId:v.string,onBlur:v.func,onFocus:v.func,onKeyDown:v.func,onPointerLeave:v.func,onPointerOver:v.func,render:v.oneOfType([v.func,v.node]),tabIndex:v.number});function od(e,t,r){return e==="vertical"?{position:"absolute",bottom:`${t}%`,height:`${r}%`,width:"inherit"}:{position:"relative",insetInlineStart:`${t}%`,width:`${r}%`,height:"inherit"}}function id(e){const{orientation:t,percentageValues:r}=e;let n;if(r.length>1){const i=r[0],a=r[r.length-1]-i;n=od(t,i,a)}else t==="vertical"?n={position:"absolute",bottom:0,height:`${r[0]}%`,width:"inherit"}:n={position:"relative",insetInlineStart:0,width:`${r[0]}%`,height:"inherit"};const o=$((i={})=>Me({style:n},i),[n]);return H(()=>({getRootProps:o}),[o])}var ad={};const Wa=Ie(function(t,r){const{render:n,className:o,...i}=t,{disabled:a,orientation:s,state:c,percentageValues:u}=Nr(),{getRootProps:d}=id({orientation:s,percentageValues:u}),{renderElement:l}=Qe({propGetter:d,render:n??"div",state:c,className:o,ref:r,extraProps:i,customStyleHookMapping:Mr});return l()});ad.NODE_ENV!=="production"&&(Wa.propTypes={children:v.node,className:v.oneOfType([v.func,v.string]),render:v.oneOfType([v.element,v.func])});const tr={root:w({width:"100%","--unselected-color":"var(--divider-color)",margin:"0"}),control:w({position:"relative",cursor:"pointer"}),track:w({background:"var(--unselected-color)",height:"var(--mmpc-slider-height)",borderRadius:"6px",overflow:"hidden"}),indicator:w({background:"var(--primary-color)",height:"100%",borderRadius:"4px"}),thumb:w({width:"6px",height:"64%",backgroundColor:"var(--text-primary-color)","@media (prefers-color-scheme: light)":{backgroundColor:"var(--art-surface-color, rgba(255, 255, 255, 0.8))"},cursor:"pointer",borderRadius:"2px",marginLeft:"-8px"})},Gn=({min:e,max:t,step:r,value:n,sliderSize:o="medium",onChange:i})=>{const[a,s]=N(n),c=te(),u=$(d=>{s(d),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{i(d)},200)},[i]);return pe(()=>{n!==a&&s(n)},[n]),f(La,{css:tr.root,value:a,onValueChange:u,min:e,max:t,step:r,children:f(Ba,{css:tr.control,children:I(Fa,{css:tr.track,style:{"--mmpc-slider-height":sd(o)},children:[f(Wa,{css:tr.indicator}),f(Ua,{css:tr.thumb})]})})})},sd=e=>{switch(e){case"xsmall":return"16px";case"small":return"22px";case"medium":return"28px";case"large":return"32px"}},It={root:w({border:"1px solid var(--divider-color, #e0e0e0)",borderRadius:"8px",position:"relative",marginBottom:"16px",backgroundColor:"var(--card-background-color, #fff)"}),header:w({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"none"}),headerExpanded:w({borderBottom:"1px solid var(--divider-color, #e0e0e0)"}),title:w({margin:0,fontSize:"16px",fontWeight:500}),content:w({padding:16,display:"none"}),contentExpanded:w({display:"block"})},Ne=({title:e,children:t,initiallyExpanded:r=!1})=>{const[n,o]=N(r);return I("div",{css:It.root,children:[I("div",{css:[It.header,n&&It.headerExpanded],children:[f("h3",{css:It.title,children:e}),f(ee,{onClick:()=>o(!n),icon:n?"mdi:chevron-up":"mdi:chevron-down",type:"button",size:"small"})]}),f("div",{css:[It.content,n&&It.contentExpanded],children:t})]})};class Ha extends HTMLElement{constructor(){super(...arguments),this._config=null,this.Card=null,this.extraProps={},this._hass=null}set hass(t){this._hass=t}setConfig(t){this._config=t,lt(f(Ei,{rootElement:this,children:f(vc,{children:f(this.Card,{config:this._config,hass:this._hass,rootElement:this,...this.extraProps})})}),this)}}class Yn extends HTMLElement{constructor(){super(...arguments),this.Card=null,this.config=null,this.shouldUpdate=null,this._previousHass=null}set hass(t){if(!this.Card)throw new Error("Preact Card is not defined");const r=this.config.entity_id;this.shouldUpdate(this._previousHass,t)?(this._previousHass=t,lt(f(Ei,{rootElement:this,children:f(Si,{rootElement:this,config:this.config,children:f(Ic,{hass:t,children:f(_u,{hass:t,entityId:r,children:f(this.Card,{})})})})}),this)):this._previousHass=t}getCardSize(){return 1}}class cd extends Yn{constructor(){super(...arguments),this.Card=Tl,this.shouldUpdate=(t,r)=>!t&&r?!0:ft(t.states[this.config.entity_id],r.states[this.config.entity_id])}setConfig(t){if(!t.entity_id)throw new Error("You need to define an entity_id");if(!t.entities)throw new Error("You need to define entities");this.config=t}getCardSize(){return 1}getLayoutOptions(){return{grid_rows:1,grid_columns:6,grid_min_rows:1,grid_max_rows:1}}}customElements.define("mediocre-chip-media-player-group-card",cd);class ld extends Ha{constructor(){super(...arguments),this.Card=fu,this.extraProps={isMassive:!0,className:void 0}}}customElements.define("mediocre-massive-media-player-card-editor",ld);class ud extends Yn{constructor(){super(...arguments),this.Card=xa,this.shouldUpdate=(t,r)=>{var n,o;if(!t&&r||ft(t.states[this.config.entity_id],r.states[this.config.entity_id])||(n=this.config.speaker_group)!=null&&n.entity_id&&ft(t.states[this.config.speaker_group.entity_id],r.states[this.config.speaker_group.entity_id]))return!0;if((o=this.config.speaker_group)!=null&&o.entities){for(const i of this.config.speaker_group.entities)if(ft(t.states[i],r.states[i],!0))return!0}return!1}}setConfig(t){if(!t.entity_id)throw new Error("You need to define an entity_id");this.config=t}static getConfigElement(){return document.createElement("mediocre-massive-media-player-card-editor")}static getStubConfig(t){return{entity_id:Object.keys(t.states).filter(o=>o.substr(0,o.indexOf("."))==="media_player")[0]??"",mode:"card"}}}customElements.define("mediocre-massive-media-player-card",ud),window.customCards=window.customCards||[],window.customCards.push({type:"mediocre-massive-media-player-card",name:"Mediocre Massive Media Player Card",preview:!0,description:"A media player card with player grouping support.",documentationURL:"https://github.com/antontanderup/mediocre-hass-media-player-cards"});class dd extends Ha{constructor(){super(...arguments),this.Card=Pu}}customElements.define("mediocre-media-player-card-editor",dd);class fd extends Yn{constructor(){super(...arguments),this.Card=Eu,this.shouldUpdate=(t,r)=>{var n,o;if(!t&&r||ft(t.states[this.config.entity_id],r.states[this.config.entity_id])||(n=this.config.speaker_group)!=null&&n.entity_id&&ft(t.states[this.config.speaker_group.entity_id],r.states[this.config.speaker_group.entity_id]))return!0;if((o=this.config.speaker_group)!=null&&o.entities){for(const i of this.config.speaker_group.entities)if(ft(t.states[i],r.states[i],!0))return!0}return!1}}setConfig(t){if(!t.entity_id)throw new Error("You need to define an entity_id");this.config=t}static getConfigElement(){return document.createElement("mediocre-media-player-card-editor")}static getStubConfig(t){return{entity_id:Object.keys(t.states).filter(o=>o.substr(0,o.indexOf("."))==="media_player")[0]??""}}getCardSize(){return 2}getGridOptions(){return{columns:12,min_columns:8}}}customElements.define("mediocre-media-player-card",fd),window.customCards=window.customCards||[],window.customCards.push({type:"mediocre-media-player-card",name:"Mediocre Media Player Card",preview:!0,description:"A media player card with player grouping support.",documentationURL:"https://github.com/antontanderup/mediocre-hass-media-player-cards"})});
