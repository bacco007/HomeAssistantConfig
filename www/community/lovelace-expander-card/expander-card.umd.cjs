(function(M,H){typeof exports=="object"&&typeof module<"u"?module.exports=H():typeof define=="function"&&define.amd?define(H):(M=typeof globalThis<"u"?globalThis:M||self,M.ExpanderCard=H())})(this,(function(){"use strict";var yu=Object.defineProperty;var io=M=>{throw TypeError(M)};var bu=(M,H,V)=>H in M?yu(M,H,{enumerable:!0,configurable:!0,writable:!0,value:V}):M[H]=V;var G=(M,H,V)=>bu(M,typeof H!="symbol"?H+"":H,V),Ui=(M,H,V)=>H.has(M)||io("Cannot "+V);var p=(M,H,V)=>(Ui(M,H,"read from private field"),V?V.call(M):H.get(M)),I=(M,H,V)=>H.has(M)?io("Cannot add the same private member more than once"):H instanceof WeakSet?H.add(M):H.set(M,V),N=(M,H,V,Rt)=>(Ui(M,H,"write to private field"),Rt?Rt.call(M,V):H.set(M,V),V),Y=(M,H,V)=>(Ui(M,H,"access private method"),V);var Va,wn,En,Kt,Qt,Kn,$n,An,Oe,Gi,zi,so,ao,ve,Qn,ze,Xt,Be,Se,ue,Ve,at,Tt,Zt,ot,en,On,Sn,Nt,Hr,B,oo,lo,Bi,Ur,Gr,Vi,He,We,_e,tn,Xn,Zn,jr,lt,xe,Wa;typeof window<"u"&&((Va=window.__svelte??(window.__svelte={})).v??(Va.v=new Set)).add("5");const H={icon:"","arrow-color":"","icon-rotate-degree":"","header-color":"","button-background":"","min-width-expanded":0,"max-width-expanded":0,"storage-id":"","expander-card-id":"","show-button-users":[],"start-expanded-users":[],"expander-card-background":"","expander-card-background-expanded":"","expander-card-display":"",gap:"",padding:"","expanded-gap":"","child-padding":"","child-margin-top":"","overlay-margin":"","title-card-padding":"",style:""},V=["expanded","icon","arrow-color","title","style"];var Rt=(t=>(t.CSS="css",t.Object="object",t))(Rt||{});const co={name:"style",label:"CSS text",selector:{text:{multiline:!0}}},uo={name:"style",label:"CSS structured object",selector:{object:{}}},fo={icon:{}},ho={text:{}},po={boolean:{}},vo=t=>({number:{unit_of_measurement:t}}),_o=(t,e)=>({name:t,label:e,selector:fo}),K=(t,e)=>({name:t,label:e,selector:ho}),sn=(t,e)=>({name:t,label:e,selector:po}),Wi=(t,e,n)=>({name:t,label:e,selector:vo(n)}),go=[{type:"expandable",label:"Expander Card Settings",icon:"mdi:arrow-down-bold-box-outline",schema:[{...K("title","Title")},{..._o("icon","Icon")},{type:"expandable",label:"Expander control",icon:"mdi:cog-outline",schema:[{type:"grid",schema:[{...sn("expanded","Start expanded")},{...sn("animation","Enable animation")},{name:"haptic",label:"Haptic feedback",selector:{select:{mode:"dropdown",options:[{value:"light",label:"Light"},{value:"medium",label:"Medium"},{value:"heavy",label:"Heavy"},{value:"success",label:"Success"},{value:"warning",label:"Warning"},{value:"failure",label:"Failure"},{value:"selection",label:"Selection"},{value:"none",label:"None"}]}}},{...Wi("min-width-expanded","Min width expanded","px")},{...Wi("max-width-expanded","Max width expanded","px")},{...K("storage-id","Storage ID")},{...K("expander-card-id","Expander card ID")}]}]},{type:"expandable",label:"Expander styling",icon:"mdi:palette-swatch",schema:[{type:"grid",schema:[{...K("arrow-color","Icon color")},{...K("icon-rotate-degree","Icon rotate degree")},{...K("header-color","Header color")},{...K("button-background","Button background color")},{...K("expander-card-background","Background")},{...K("expander-card-background-expanded","Background when expanded")},{...K("expander-card-display","Expander card display")},{...sn("clear","Clear border and background")},{...K("gap","Gap")},{...K("padding","Padding")}]}]},{type:"expandable",label:"Card styling",icon:"mdi:palette-swatch-outline",schema:[{type:"grid",schema:[{...K("expanded-gap","Card gap")},{...K("child-padding","Card padding")},{...K("child-margin-top","Card margin top")},{...sn("clear-children","Clear card border and background")}]}]},{type:"expandable",label:"Title card",icon:"mdi:subtitles-outline",schema:[{name:"title-card",label:"Title card",selector:{object:{label_field:"type",fields:{type:{label:"Card type",required:!0,selector:{text:{}}},expander_card_title_card_marker:{required:!1,selector:{text:{}}}}}}},{type:"grid",schema:[{...sn("title-card-clickable","Make title card clickable to expand/collapse")},{...sn("title-card-button-overlay","Overlay expand button on title card")},{...K("overlay-margin","Overlay margin")},{...K("title-card-padding","Title card padding")}]}]},{type:"expandable",label:"User settings",icon:"mdi:account-multiple-outline",schema:[{type:"grid",schema:[{name:"show-button-users",label:"Show button users",selector:{select:{multiple:!0,mode:"dropdown",custom:!0,options:["[[users]]"]}}},{name:"start-expanded-users",label:"Start expanded users",selector:{select:{multiple:!0,mode:"dropdown",custom:!0,options:["[[users]]"]}}}]}]},{type:"expandable",label:"Advanced styling",icon:"mdi:brush-outline",schema:["[[style]]"]},{type:"expandable",label:"Advanced templates",icon:"mdi:code-brackets",schema:[{type:"expandable",label:"Variables",icon:"mdi:variable",schema:[{name:"variables",label:"Variables",selector:{object:{label_field:"variable",multiple:!0,fields:{variable:{label:"Variable name",required:!0,selector:{text:{}}},value_template:{label:"Value template",required:!0,selector:{text:{multiline:!0}}}}}}}]},{type:"expandable",label:"Templates",icon:"mdi:code-brackets",schema:[{name:"templates",label:"Templates",selector:{object:{label_field:"template",multiple:!0,fields:{template:{label:"Config item",required:!0,selector:{select:{mode:"dropdown",custom_value:!0,sort:!0,options:["[[templates]]"]}}},value_template:{label:"Value template",required:!0,selector:{template:{}}}}}}}]}]}]}],mo=(t,e)=>new Promise(n=>{const i=e.cancel,r=e.submit;t.dispatchEvent(new CustomEvent("show-dialog",{detail:{dialogTag:"expander-card-title-card-edit-form",dialogImport:()=>customElements.whenDefined("expander-card-title-card-edit-form"),dialogParams:{...e,cancel:()=>{n(null),i&&i()},submit:s=>{n(s),r&&r(s)}}},bubbles:!0,composed:!0}))}),Nn=window;let sr=Nn.cardHelpers;const yo=new Promise(t=>{sr&&t(),Nn.loadCardHelpers&&Nn.loadCardHelpers().then(e=>{sr=e,Nn.cardHelpers=sr,t()})});async function bo(){const t=document.querySelector("home-assistant"),e=t==null?void 0:t.hass;return e?(await e.callWS({type:"config/auth/list"})).filter(i=>!i.system_generated).map(i=>i.name):void 0}const wo=async()=>{const t=await yo.then(()=>sr.createCardElement({type:"vertical-stack",cards:[]})),e=await customElements.whenDefined("hui-vertical-stack-card").then(()=>t.constructor.getConfigElement()),n=await bo();return class extends e.constructor{constructor(){super(),this.showDialogCallback=r=>{var a,o,l,u;((l=(o=(a=r.detail)==null?void 0:a.dialogParams)==null?void 0:o.schema)==null?void 0:l.find(c=>c.name==="expander_card_title_card_marker"))&&(r.stopPropagation(),(u=r.detail)!=null&&u.dialogImport&&r.detail.dialogImport().then(async()=>{var f,_,w,b,O,d,v,m;const c={title:"Title card",config:this._config["title-card"]||{},submit:(_=(f=r.detail)==null?void 0:f.dialogParams)==null?void 0:_.submit,cancel:(b=(w=r.detail)==null?void 0:w.dialogParams)==null?void 0:b.cancel,submitText:(d=(O=r.detail)==null?void 0:O.dialogParams)==null?void 0:d.submitText,cancelText:(m=(v=r.detail)==null?void 0:v.dialogParams)==null?void 0:m.cancelText,lovelace:this.lovelace};await mo(this,c)}))},this._computeLabelCallback=r=>r.label??r.name??"",this._valueChanged=r=>{const s=r.detail.value,a=Object.entries(H);for(const[o,l]of a){if(typeof l=="object"&&Array.isArray(l)&&Array.isArray(s[o])){JSON.stringify(s[o])===JSON.stringify(l)&&delete s[o];continue}s[o]===l&&delete s[o]}this._config=s,this.dispatchEvent(new CustomEvent("config-changed",{detail:{config:this._config}}))},this._users=n}setConfig(r){this._config=r}get _schema(){const s=JSON.stringify(go),a=this._users.map(f=>f.replace(/\\/g,"\\\\").replace(/"/g,'\\"')).join('","');let o=s.replace(/\[\[users\]\]/g,a);o=o.replace(/\[\[templates\]\]/g,V.filter(f=>{var _;return!((_=this._config.templates)!=null&&_.some(w=>w.template===f))}).join('","'));const u=(this._config.style&&typeof this._config.style=="object"?Rt.Object:Rt.CSS)===Rt.CSS?JSON.stringify(co):JSON.stringify(uo);return o=o.replace(/"\[\[style\]\]"/g,u),JSON.parse(o)}set _schema(r){}connectedCallback(){super.connectedCallback(),this.addEventListener("show-dialog",this.showDialogCallback.bind(this),!0)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("show-dialog",this.showDialogCallback.bind(this),!0)}}},Eo=(async()=>{for(;customElements.get("home-assistant")===void 0;)await new Promise(t=>Nn.setTimeout(t,100));if(!customElements.get("expander-card-editor")){const t=await wo();customElements.define("expander-card-editor",t)}}),$o=1,Ao=2,Oo=16,So=1,xo=2,Yi="[",ar="[!",zr="]",It={},Q=Symbol(),To="http://www.w3.org/1999/xhtml",Br=!1;var Ji=Array.isArray,No=Array.prototype.indexOf,or=Array.from,lr=Object.keys,cr=Object.defineProperty,an=Object.getOwnPropertyDescriptor,Co=Object.getOwnPropertyDescriptors,Ro=Object.prototype,Io=Array.prototype,Ki=Object.getPrototypeOf,Qi=Object.isExtensible;function Lo(t){for(var e=0;e<t.length;e++)t[e]()}function Xi(){var t,e,n=new Promise((i,r)=>{t=i,e=r});return{promise:n,resolve:t,reject:e}}const X=2,ur=4,dr=8,Zi=1<<24,Je=16,Ke=32,ct=64,Vr=128,ge=512,te=1024,ie=2048,Qe=4096,de=8192,Xe=16384,fr=32768,on=65536,es=1<<17,ts=1<<18,Lt=1<<19,ko=1<<20,ut=1<<25,kt=32768,Wr=1<<21,Yr=1<<22,dt=1<<23,hr=Symbol("$state"),Po=Symbol("legacy props"),Do=Symbol(""),ln=new class extends Error{constructor(){super(...arguments);G(this,"name","StaleReactionError");G(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}},Jr=3,Pt=8;function Mo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ho(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function jo(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Fo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function qo(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Uo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Go(){throw new Error("https://svelte.dev/e/hydration_failed")}function zo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Bo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Vo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Wo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Cn(t){console.warn("https://svelte.dev/e/hydration_mismatch")}function Yo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let L=!1;function Te(t){L=t}let R;function se(t){if(t===null)throw Cn(),It;return R=t}function cn(){return se(Re(R))}function Ze(t){if(L){if(Re(R)!==null)throw Cn(),It;R=t}}function Jo(t=1){if(L){for(var e=t,n=R;e--;)n=Re(n);R=n}}function pr(t=!0){for(var e=0,n=R;;){if(n.nodeType===Pt){var i=n.data;if(i===zr){if(e===0)return n;e-=1}else(i===Yi||i===ar)&&(e+=1)}var r=Re(n);t&&n.remove(),n=r}}function ns(t){if(!t||t.nodeType!==Pt)throw Cn(),It;return t.data}function rs(t){return t===this.v}function Ko(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function is(t){return!Ko(t,this.v)}let Qo=!1,fe=null;function un(t){fe=t}function Kr(t,e=!1,n){fe={p:fe,i:!1,c:null,e:null,s:t,x:null,l:null}}function Qr(t){var e=fe,n=e.e;if(n!==null){e.e=null;for(var i of n)xs(i)}return t!==void 0&&(e.x=t),e.i=!0,fe=e.p,t??{}}function ss(){return!0}let Dt=[];function as(){var t=Dt;Dt=[],Lo(t)}function vr(t){if(Dt.length===0&&!Rn){var e=Dt;queueMicrotask(()=>{e===Dt&&as()})}Dt.push(t)}function Xo(){for(;Dt.length>0;)as()}function os(t){var e=k;if(e===null)return T.f|=dt,t;if((e.f&fr)===0){if((e.f&Vr)===0)throw t;e.b.error(t)}else dn(t,e)}function dn(t,e){for(;e!==null;){if((e.f&Vr)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const Zo=-7169;function J(t,e){t.f=t.f&Zo|e}function Xr(t){(t.f&ge)!==0||t.deps===null?J(t,te):J(t,Qe)}function ls(t){if(t!==null)for(const e of t)(e.f&X)===0||(e.f&kt)===0||(e.f^=kt,ls(e.deps))}function cs(t,e,n){(t.f&ie)!==0?e.add(t):(t.f&Qe)!==0&&n.add(t),ls(t.deps),J(t,te)}const _r=new Set;let D=null,Z=null,me=[],gr=null,Zr=!1,Rn=!1;const Mr=class Mr{constructor(){I(this,Oe);G(this,"committed",!1);G(this,"current",new Map);G(this,"previous",new Map);I(this,wn,new Set);I(this,En,new Set);I(this,Kt,0);I(this,Qt,0);I(this,Kn,null);I(this,$n,new Set);I(this,An,new Set);G(this,"skipped_effects",new Set);G(this,"is_fork",!1)}is_deferred(){return this.is_fork||p(this,Qt)>0}process(e){var r;me=[],this.apply();var n=[],i=[];for(const s of e)Y(this,Oe,Gi).call(this,s,n,i);this.is_fork||Y(this,Oe,so).call(this),this.is_deferred()?(Y(this,Oe,zi).call(this,i),Y(this,Oe,zi).call(this,n)):(D=null,ds(i),ds(n),(r=p(this,Kn))==null||r.resolve()),Z=null}capture(e,n){n!==Q&&!this.previous.has(e)&&this.previous.set(e,n),(e.f&dt)===0&&(this.current.set(e,e.v),Z==null||Z.set(e,e.v))}activate(){D=this,this.apply()}deactivate(){D===this&&(D=null,Z=null)}flush(){if(this.activate(),me.length>0){if(us(),D!==null&&D!==this)return}else p(this,Kt)===0&&this.process([]);this.deactivate()}discard(){for(const e of p(this,En))e(this);p(this,En).clear()}increment(e){N(this,Kt,p(this,Kt)+1),e&&N(this,Qt,p(this,Qt)+1)}decrement(e){N(this,Kt,p(this,Kt)-1),e&&N(this,Qt,p(this,Qt)-1),this.revive()}revive(){for(const e of p(this,$n))p(this,An).delete(e),J(e,ie),et(e);for(const e of p(this,An))J(e,Qe),et(e);this.flush()}oncommit(e){p(this,wn).add(e)}ondiscard(e){p(this,En).add(e)}settled(){return(p(this,Kn)??N(this,Kn,Xi())).promise}static ensure(){if(D===null){const e=D=new Mr;_r.add(D),Rn||Mr.enqueue(()=>{D===e&&e.flush()})}return D}static enqueue(e){vr(e)}apply(){}};wn=new WeakMap,En=new WeakMap,Kt=new WeakMap,Qt=new WeakMap,Kn=new WeakMap,$n=new WeakMap,An=new WeakMap,Oe=new WeakSet,Gi=function(e,n,i){e.f^=te;for(var r=e.first,s=null;r!==null;){var a=r.f,o=(a&(Ke|ct))!==0,l=o&&(a&te)!==0,u=l||(a&de)!==0||this.skipped_effects.has(r);if(!u&&r.fn!==null){o?r.f^=te:s!==null&&(a&(ur|dr|Zi))!==0?s.b.defer_effect(r):(a&ur)!==0?n.push(r):Pn(r)&&((a&Je)!==0&&p(this,$n).add(r),Dn(r));var c=r.first;if(c!==null){r=c;continue}}var f=r.parent;for(r=r.next;r===null&&f!==null;)f===s&&(s=null),r=f.next,f=f.parent}},zi=function(e){for(var n=0;n<e.length;n+=1)cs(e[n],p(this,$n),p(this,An))},so=function(){if(p(this,Qt)===0){for(const e of p(this,wn))e();p(this,wn).clear()}p(this,Kt)===0&&Y(this,Oe,ao).call(this)},ao=function(){var r;if(_r.size>1){this.previous.clear();var e=Z,n=!0;for(const s of _r){if(s===this){n=!1;continue}const a=[];for(const[l,u]of this.current){if(s.current.has(l))if(n&&u!==s.current.get(l))s.current.set(l,u);else continue;a.push(l)}if(a.length===0)continue;const o=[...s.current.keys()].filter(l=>!this.current.has(l));if(o.length>0){var i=me;me=[];const l=new Set,u=new Map;for(const c of a)fs(c,o,l,u);if(me.length>0){D=s,s.apply();for(const c of me)Y(r=s,Oe,Gi).call(r,c,[],[]);s.deactivate()}me=i}}D=null,Z=e}this.committed=!0,_r.delete(this)};let qe=Mr;function ye(t){var e=Rn;Rn=!0;try{for(var n;;){if(Xo(),me.length===0&&(D==null||D.flush(),me.length===0))return gr=null,n;us()}}finally{Rn=e}}function us(){var t=Ft;Zr=!0;var e=null;try{var n=0;for(br(!0);me.length>0;){var i=qe.ensure();if(n++>1e3){var r,s;el()}i.process(me),ft.clear()}}finally{Zr=!1,br(t),gr=null}}function el(){try{Uo()}catch(t){dn(t,gr)}}let Ne=null;function ds(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var i=t[n++];if((i.f&(Xe|de))===0&&Pn(i)&&(Ne=new Set,Dn(i),i.deps===null&&i.first===null&&i.nodes===null&&(i.teardown===null&&i.ac===null?Is(i):i.fn=null),(Ne==null?void 0:Ne.size)>0)){ft.clear();for(const r of Ne){if((r.f&(Xe|de))!==0)continue;const s=[r];let a=r.parent;for(;a!==null;)Ne.has(a)&&(Ne.delete(a),s.push(a)),a=a.parent;for(let o=s.length-1;o>=0;o--){const l=s[o];(l.f&(Xe|de))===0&&Dn(l)}}Ne.clear()}}Ne=null}}function fs(t,e,n,i){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const r of t.reactions){const s=r.f;(s&X)!==0?fs(r,e,n,i):(s&(Yr|Je))!==0&&(s&ie)===0&&hs(r,e,i)&&(J(r,ie),et(r))}}function hs(t,e,n){const i=n.get(t);if(i!==void 0)return i;if(t.deps!==null)for(const r of t.deps){if(e.includes(r))return!0;if((r.f&X)!==0&&hs(r,e,n))return n.set(r,!0),!0}return n.set(t,!1),!1}function et(t){for(var e=gr=t;e.parent!==null;){e=e.parent;var n=e.f;if(Zr&&e===k&&(n&Je)!==0&&(n&ts)===0)return;if((n&(ct|Ke))!==0){if((n&te)===0)return;e.f^=te}}me.push(e)}function tl(t){let e=0,n=Mt(0),i;return()=>{ri()&&(h(n),ii(()=>(e===0&&(i=Le(()=>t(()=>Ln(n)))),e+=1,()=>{vr(()=>{e-=1,e===0&&(i==null||i(),i=void 0,Ln(n))})})))}}var nl=on|Lt|Vr;function rl(t,e,n){new il(t,e,n)}class il{constructor(e,n,i){I(this,B);G(this,"parent");G(this,"is_pending",!1);I(this,ve);I(this,Qn,L?R:null);I(this,ze);I(this,Xt);I(this,Be);I(this,Se,null);I(this,ue,null);I(this,Ve,null);I(this,at,null);I(this,Tt,null);I(this,Zt,0);I(this,ot,0);I(this,en,!1);I(this,On,new Set);I(this,Sn,new Set);I(this,Nt,null);I(this,Hr,tl(()=>(N(this,Nt,Mt(p(this,Zt))),()=>{N(this,Nt,null)})));N(this,ve,e),N(this,ze,n),N(this,Xt,i),this.parent=k.b,this.is_pending=!!p(this,ze).pending,N(this,Be,si(()=>{if(k.b=this,L){const s=p(this,Qn);cn(),s.nodeType===Pt&&s.data===ar?Y(this,B,lo).call(this):(Y(this,B,oo).call(this),p(this,ot)===0&&(this.is_pending=!1))}else{var r=Y(this,B,Bi).call(this);try{N(this,Se,we(()=>i(r)))}catch(s){this.error(s)}p(this,ot)>0?Y(this,B,Gr).call(this):this.is_pending=!1}return()=>{var s;(s=p(this,Tt))==null||s.remove()}},nl)),L&&N(this,ve,R)}defer_effect(e){cs(e,p(this,On),p(this,Sn))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!p(this,ze).pending}update_pending_count(e){Y(this,B,Vi).call(this,e),N(this,Zt,p(this,Zt)+e),p(this,Nt)&&fn(p(this,Nt),p(this,Zt))}get_effect_pending(){return p(this,Hr).call(this),h(p(this,Nt))}error(e){var n=p(this,ze).onerror;let i=p(this,ze).failed;if(p(this,en)||!n&&!i)throw e;p(this,Se)&&(ae(p(this,Se)),N(this,Se,null)),p(this,ue)&&(ae(p(this,ue)),N(this,ue,null)),p(this,Ve)&&(ae(p(this,Ve)),N(this,Ve,null)),L&&(se(p(this,Qn)),Jo(),se(pr()));var r=!1,s=!1;const a=()=>{if(r){Yo();return}r=!0,s&&Wo(),qe.ensure(),N(this,Zt,0),p(this,Ve)!==null&&jt(p(this,Ve),()=>{N(this,Ve,null)}),this.is_pending=this.has_pending_snippet(),N(this,Se,Y(this,B,Ur).call(this,()=>(N(this,en,!1),we(()=>p(this,Xt).call(this,p(this,ve)))))),p(this,ot)>0?Y(this,B,Gr).call(this):this.is_pending=!1};var o=T;try{ne(null),s=!0,n==null||n(e,a),s=!1}catch(l){dn(l,p(this,Be)&&p(this,Be).parent)}finally{ne(o)}i&&vr(()=>{N(this,Ve,Y(this,B,Ur).call(this,()=>{qe.ensure(),N(this,en,!0);try{return we(()=>{i(p(this,ve),()=>e,()=>a)})}catch(l){return dn(l,p(this,Be).parent),null}finally{N(this,en,!1)}}))})}}ve=new WeakMap,Qn=new WeakMap,ze=new WeakMap,Xt=new WeakMap,Be=new WeakMap,Se=new WeakMap,ue=new WeakMap,Ve=new WeakMap,at=new WeakMap,Tt=new WeakMap,Zt=new WeakMap,ot=new WeakMap,en=new WeakMap,On=new WeakMap,Sn=new WeakMap,Nt=new WeakMap,Hr=new WeakMap,B=new WeakSet,oo=function(){try{N(this,Se,we(()=>p(this,Xt).call(this,p(this,ve))))}catch(e){this.error(e)}},lo=function(){const e=p(this,ze).pending;e&&(N(this,ue,we(()=>e(p(this,ve)))),qe.enqueue(()=>{var n=Y(this,B,Bi).call(this);N(this,Se,Y(this,B,Ur).call(this,()=>(qe.ensure(),we(()=>p(this,Xt).call(this,n))))),p(this,ot)>0?Y(this,B,Gr).call(this):(jt(p(this,ue),()=>{N(this,ue,null)}),this.is_pending=!1)}))},Bi=function(){var e=p(this,ve);return this.is_pending&&(N(this,Tt,be()),p(this,ve).before(p(this,Tt)),e=p(this,Tt)),e},Ur=function(e){var n=k,i=T,r=fe;Ee(p(this,Be)),ne(p(this,Be)),un(p(this,Be).ctx);try{return e()}catch(s){return os(s),null}finally{Ee(n),ne(i),un(r)}},Gr=function(){const e=p(this,ze).pending;p(this,Se)!==null&&(N(this,at,document.createDocumentFragment()),p(this,at).append(p(this,Tt)),Ps(p(this,Se),p(this,at))),p(this,ue)===null&&N(this,ue,we(()=>e(p(this,ve))))},Vi=function(e){var n;if(!this.has_pending_snippet()){this.parent&&Y(n=this.parent,B,Vi).call(n,e);return}if(N(this,ot,p(this,ot)+e),p(this,ot)===0){this.is_pending=!1;for(const i of p(this,On))J(i,ie),et(i);for(const i of p(this,Sn))J(i,Qe),et(i);p(this,On).clear(),p(this,Sn).clear(),p(this,ue)&&jt(p(this,ue),()=>{N(this,ue,null)}),p(this,at)&&(p(this,ve).before(p(this,at)),N(this,at,null))}};function sl(t,e,n,i){const r=yr;if(n.length===0&&t.length===0){i(e.map(r));return}var s=D,a=k,o=al();function l(){Promise.all(n.map(u=>ol(u))).then(u=>{o();try{i([...e.map(r),...u])}catch(c){(a.f&Xe)===0&&dn(c,a)}s==null||s.deactivate(),mr()}).catch(u=>{dn(u,a)})}t.length>0?Promise.all(t).then(()=>{o();try{return l()}finally{s==null||s.deactivate(),mr()}}):l()}function al(){var t=k,e=T,n=fe,i=D;return function(s=!0){Ee(t),ne(e),un(n),s&&(i==null||i.activate())}}function mr(){Ee(null),ne(null),un(null)}function yr(t){var e=X|ie,n=T!==null&&(T.f&X)!==0?T:null;return k!==null&&(k.f|=Lt),{ctx:fe,deps:null,effects:null,equals:rs,f:e,fn:t,reactions:null,rv:0,v:Q,wv:0,parent:n??k,ac:null}}function ol(t,e,n){let i=k;i===null&&Ho();var r=i.b,s=void 0,a=Mt(Q),o=!T,l=new Map;return _l(()=>{var w;var u=Xi();s=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{c===D&&c.committed&&c.deactivate(),mr()})}catch(b){u.reject(b),mr()}var c=D;if(o){var f=r.is_rendered();r.update_pending_count(1),c.increment(f),(w=l.get(c))==null||w.reject(ln),l.delete(c),l.set(c,u)}const _=(b,O=void 0)=>{if(c.activate(),O)O!==ln&&(a.f|=dt,fn(a,O));else{(a.f&dt)!==0&&(a.f^=dt),fn(a,b);for(const[d,v]of l){if(l.delete(d),d===c)break;v.reject(ln)}}o&&(r.update_pending_count(-1),c.decrement(f))};u.promise.then(_,b=>_(null,b||"unknown"))}),hl(()=>{for(const u of l.values())u.reject(ln)}),new Promise(u=>{function c(f){function _(){f===s?u(a):c(s)}f.then(_,_)}c(s)})}function In(t){const e=yr(t);return Ms(e),e}function ll(t){const e=yr(t);return e.equals=is,e}function ps(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ae(e[n])}}function cl(t){for(var e=t.parent;e!==null;){if((e.f&X)===0)return(e.f&Xe)===0?e:null;e=e.parent}return null}function ei(t){var e,n=k;Ee(cl(t));try{t.f&=~kt,ps(t),e=Us(t)}finally{Ee(n)}return e}function vs(t){var e=ei(t);if(!t.equals(e)&&(t.wv=Fs(),(!(D!=null&&D.is_fork)||t.deps===null)&&(t.v=e,t.deps===null))){J(t,te);return}pt||(Z!==null?(ri()||D!=null&&D.is_fork)&&Z.set(t,e):Xr(t))}let ti=new Set;const ft=new Map;let _s=!1;function Mt(t,e){var n={f:0,v:t,reactions:null,equals:rs,rv:0,wv:0};return n}function j(t,e){const n=Mt(t);return Ms(n),n}function gs(t,e=!1,n=!0){const i=Mt(t);return e||(i.equals=is),i}function A(t,e,n=!1){T!==null&&(!Ie||(T.f&es)!==0)&&ss()&&(T.f&(X|Je|Yr|es))!==0&&!(oe!=null&&oe.includes(t))&&Vo();let i=n?tt(e):e;return fn(t,i)}function fn(t,e){if(!t.equals(e)){var n=t.v;pt?ft.set(t,e):ft.set(t,n),t.v=e;var i=qe.ensure();if(i.capture(t,n),(t.f&X)!==0){const r=t;(t.f&ie)!==0&&ei(r),Xr(r)}t.wv=Fs(),ms(t,ie),k!==null&&(k.f&te)!==0&&(k.f&(Ke|ct))===0&&($e===null?ml([t]):$e.push(t)),!i.is_fork&&ti.size>0&&!_s&&ul()}return e}function ul(){_s=!1;var t=Ft;br(!0);const e=Array.from(ti);try{for(const n of e)(n.f&te)!==0&&J(n,Qe),Pn(n)&&Dn(n)}finally{br(t)}ti.clear()}function Ln(t){A(t,t.v+1)}function ms(t,e){var n=t.reactions;if(n!==null)for(var i=n.length,r=0;r<i;r++){var s=n[r],a=s.f,o=(a&ie)===0;if(o&&J(s,e),(a&X)!==0){var l=s;Z==null||Z.delete(l),(a&kt)===0&&(a&ge&&(s.f|=kt),ms(l,Qe))}else o&&((a&Je)!==0&&Ne!==null&&Ne.add(s),et(s))}}function tt(t){if(typeof t!="object"||t===null||hr in t)return t;const e=Ki(t);if(e!==Ro&&e!==Io)return t;var n=new Map,i=Ji(t),r=j(0),s=qt,a=o=>{if(qt===s)return o();var l=T,u=qt;ne(null),js(s);var c=o();return ne(l),js(u),c};return i&&n.set("length",j(t.length)),new Proxy(t,{defineProperty(o,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&zo();var c=n.get(l);return c===void 0?c=a(()=>{var f=j(u.value);return n.set(l,f),f}):A(c,u.value,!0),!0},deleteProperty(o,l){var u=n.get(l);if(u===void 0){if(l in o){const c=a(()=>j(Q));n.set(l,c),Ln(r)}}else A(u,Q),Ln(r);return!0},get(o,l,u){var w;if(l===hr)return t;var c=n.get(l),f=l in o;if(c===void 0&&(!f||(w=an(o,l))!=null&&w.writable)&&(c=a(()=>{var b=tt(f?o[l]:Q),O=j(b);return O}),n.set(l,c)),c!==void 0){var _=h(c);return _===Q?void 0:_}return Reflect.get(o,l,u)},getOwnPropertyDescriptor(o,l){var u=Reflect.getOwnPropertyDescriptor(o,l);if(u&&"value"in u){var c=n.get(l);c&&(u.value=h(c))}else if(u===void 0){var f=n.get(l),_=f==null?void 0:f.v;if(f!==void 0&&_!==Q)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return u},has(o,l){var _;if(l===hr)return!0;var u=n.get(l),c=u!==void 0&&u.v!==Q||Reflect.has(o,l);if(u!==void 0||k!==null&&(!c||(_=an(o,l))!=null&&_.writable)){u===void 0&&(u=a(()=>{var w=c?tt(o[l]):Q,b=j(w);return b}),n.set(l,u));var f=h(u);if(f===Q)return!1}return c},set(o,l,u,c){var y;var f=n.get(l),_=l in o;if(i&&l==="length")for(var w=u;w<f.v;w+=1){var b=n.get(w+"");b!==void 0?A(b,Q):w in o&&(b=a(()=>j(Q)),n.set(w+"",b))}if(f===void 0)(!_||(y=an(o,l))!=null&&y.writable)&&(f=a(()=>j(void 0)),A(f,tt(u)),n.set(l,f));else{_=f.v!==Q;var O=a(()=>tt(u));A(f,O)}var d=Reflect.getOwnPropertyDescriptor(o,l);if(d!=null&&d.set&&d.set.call(c,u),!_){if(i&&typeof l=="string"){var v=n.get("length"),m=Number(l);Number.isInteger(m)&&m>=v.v&&A(v,m+1)}Ln(r)}return!0},ownKeys(o){h(r);var l=Reflect.ownKeys(o).filter(f=>{var _=n.get(f);return _===void 0||_.v!==Q});for(var[u,c]of n)c.v!==Q&&!(u in o)&&l.push(u);return l},setPrototypeOf(){Bo()}})}var ys,bs,ws,Es;function ni(){if(ys===void 0){ys=window,bs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;ws=an(e,"firstChild").get,Es=an(e,"nextSibling").get,Qi(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Qi(n)&&(n.__t=void 0)}}function be(t=""){return document.createTextNode(t)}function Ce(t){return ws.call(t)}function Re(t){return Es.call(t)}function ht(t,e){if(!L)return Ce(t);var n=Ce(R);if(n===null)n=R.appendChild(be());else if(e&&n.nodeType!==Jr){var i=be();return n==null||n.before(i),se(i),i}return se(n),n}function $s(t,e=!1){if(!L){var n=Ce(t);return n instanceof Comment&&n.data===""?Re(n):n}if(e&&(R==null?void 0:R.nodeType)!==Jr){var i=be();return R==null||R.before(i),se(i),i}return R}function Ht(t,e=1,n=!1){let i=L?R:t;for(var r;e--;)r=i,i=Re(i);if(!L)return i;if(n&&(i==null?void 0:i.nodeType)!==Jr){var s=be();return i===null?r==null||r.after(s):i.before(s),se(s),s}return se(i),i}function As(t){t.textContent=""}function Os(){return!1}function Ss(t){var e=T,n=k;ne(null),Ee(null);try{return t()}finally{ne(e),Ee(n)}}function dl(t){k===null&&(T===null&&qo(),Fo()),pt&&jo()}function fl(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Ue(t,e,n){var i=k;i!==null&&(i.f&de)!==0&&(t|=de);var r={ctx:fe,deps:null,nodes:null,f:t|ie|ge,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Dn(r),r.f|=fr}catch(o){throw ae(r),o}else e!==null&&et(r);var s=r;if(n&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&Lt)===0&&(s=s.first,(t&Je)!==0&&(t&on)!==0&&s!==null&&(s.f|=on)),s!==null&&(s.parent=i,i!==null&&fl(s,i),T!==null&&(T.f&X)!==0&&(t&ct)===0)){var a=T;(a.effects??(a.effects=[])).push(s)}return r}function ri(){return T!==null&&!Ie}function hl(t){const e=Ue(dr,null,!1);return J(e,te),e.teardown=t,e}function hn(t){dl();var e=k.f,n=!T&&(e&Ke)!==0&&(e&fr)===0;if(n){var i=fe;(i.e??(i.e=[])).push(t)}else return xs(t)}function xs(t){return Ue(ur|ko,t,!1)}function pl(t){qe.ensure();const e=Ue(ct|Lt,t,!0);return()=>{ae(e)}}function vl(t){qe.ensure();const e=Ue(ct|Lt,t,!0);return(n={})=>new Promise(i=>{n.outro?jt(e,()=>{ae(e),i(void 0)}):(ae(e),i(void 0))})}function Ts(t){return Ue(ur,t,!1)}function _l(t){return Ue(Yr|Lt,t,!0)}function ii(t,e=0){return Ue(dr|e,t,!0)}function nt(t,e=[],n=[],i=[]){sl(i,e,n,r=>{Ue(dr,()=>t(...r.map(h)),!0)})}function si(t,e=0){var n=Ue(Je|e,t,!0);return n}function we(t){return Ue(Ke|Lt,t,!0)}function Ns(t){var e=t.teardown;if(e!==null){const n=pt,i=T;Ds(!0),ne(null);try{e.call(null)}finally{Ds(n),ne(i)}}}function Cs(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const r=n.ac;r!==null&&Ss(()=>{r.abort(ln)});var i=n.next;(n.f&ct)!==0?n.parent=null:ae(n,e),n=i}}function gl(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Ke)===0&&ae(e),e=n}}function ae(t,e=!0){var n=!1;(e||(t.f&ts)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Rs(t.nodes.start,t.nodes.end),n=!0),Cs(t,e&&!n),wr(t,0),J(t,Xe);var i=t.nodes&&t.nodes.t;if(i!==null)for(const s of i)s.stop();Ns(t);var r=t.parent;r!==null&&r.first!==null&&Is(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Rs(t,e){for(;t!==null;){var n=t===e?null:Re(t);t.remove(),t=n}}function Is(t){var e=t.parent,n=t.prev,i=t.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=n))}function jt(t,e,n=!0){var i=[];Ls(t,i,!0);var r=()=>{n&&ae(t),e&&e()},s=i.length;if(s>0){var a=()=>--s||r();for(var o of i)o.out(a)}else r()}function Ls(t,e,n){if((t.f&de)===0){t.f^=de;var i=t.nodes&&t.nodes.t;if(i!==null)for(const o of i)(o.is_global||n)&&e.push(o);for(var r=t.first;r!==null;){var s=r.next,a=(r.f&on)!==0||(r.f&Ke)!==0&&(t.f&Je)!==0;Ls(r,e,a?n:!1),r=s}}}function ai(t){ks(t,!0)}function ks(t,e){if((t.f&de)!==0){t.f^=de,(t.f&te)===0&&(J(t,ie),et(t));for(var n=t.first;n!==null;){var i=n.next,r=(n.f&on)!==0||(n.f&Ke)!==0;ks(n,r?e:!1),n=i}var s=t.nodes&&t.nodes.t;if(s!==null)for(const a of s)(a.is_global||e)&&a.in()}}function Ps(t,e){if(t.nodes)for(var n=t.nodes.start,i=t.nodes.end;n!==null;){var r=n===i?null:Re(n);e.append(n),n=r}}let Ft=!1;function br(t){Ft=t}let pt=!1;function Ds(t){pt=t}let T=null,Ie=!1;function ne(t){T=t}let k=null;function Ee(t){k=t}let oe=null;function Ms(t){T!==null&&(oe===null?oe=[t]:oe.push(t))}let le=null,he=0,$e=null;function ml(t){$e=t}let Hs=1,kn=0,qt=kn;function js(t){qt=t}function Fs(){return++Hs}function Pn(t){var e=t.f;if((e&ie)!==0)return!0;if(e&X&&(t.f&=~kt),(e&Qe)!==0){for(var n=t.deps,i=n.length,r=0;r<i;r++){var s=n[r];if(Pn(s)&&vs(s),s.wv>t.wv)return!0}(e&ge)!==0&&Z===null&&J(t,te)}return!1}function qs(t,e,n=!0){var i=t.reactions;if(i!==null&&!(oe!=null&&oe.includes(t)))for(var r=0;r<i.length;r++){var s=i[r];(s.f&X)!==0?qs(s,e,!1):e===s&&(n?J(s,ie):(s.f&te)!==0&&J(s,Qe),et(s))}}function Us(t){var b;var e=le,n=he,i=$e,r=T,s=oe,a=fe,o=Ie,l=qt,u=t.f;le=null,he=0,$e=null,T=(u&(Ke|ct))===0?t:null,oe=null,un(t.ctx),Ie=!1,qt=++kn,t.ac!==null&&(Ss(()=>{t.ac.abort(ln)}),t.ac=null);try{t.f|=Wr;var c=t.fn,f=c(),_=t.deps;if(le!==null){var w;if(wr(t,he),_!==null&&he>0)for(_.length=he+le.length,w=0;w<le.length;w++)_[he+w]=le[w];else t.deps=_=le;if(ri()&&(t.f&ge)!==0)for(w=he;w<_.length;w++)((b=_[w]).reactions??(b.reactions=[])).push(t)}else _!==null&&he<_.length&&(wr(t,he),_.length=he);if(ss()&&$e!==null&&!Ie&&_!==null&&(t.f&(X|Qe|ie))===0)for(w=0;w<$e.length;w++)qs($e[w],t);return r!==null&&r!==t&&(kn++,$e!==null&&(i===null?i=$e:i.push(...$e))),(t.f&dt)!==0&&(t.f^=dt),f}catch(O){return os(O)}finally{t.f^=Wr,le=e,he=n,$e=i,T=r,oe=s,un(a),Ie=o,qt=l}}function yl(t,e){let n=e.reactions;if(n!==null){var i=No.call(n,t);if(i!==-1){var r=n.length-1;r===0?n=e.reactions=null:(n[i]=n[r],n.pop())}}if(n===null&&(e.f&X)!==0&&(le===null||!le.includes(e))){var s=e;(s.f&ge)!==0&&(s.f^=ge,s.f&=~kt),Xr(s),ps(s),wr(s,0)}}function wr(t,e){var n=t.deps;if(n!==null)for(var i=e;i<n.length;i++)yl(t,n[i])}function Dn(t){var e=t.f;if((e&Xe)===0){J(t,te);var n=k,i=Ft;k=t,Ft=!0;try{(e&(Je|Zi))!==0?gl(t):Cs(t),Ns(t);var r=Us(t);t.teardown=typeof r=="function"?r:null,t.wv=Hs;var s;Br&&Qo&&(t.f&ie)!==0&&t.deps}finally{Ft=i,k=n}}}function h(t){var e=t.f,n=(e&X)!==0;if(T!==null&&!Ie){var i=k!==null&&(k.f&Xe)!==0;if(!i&&!(oe!=null&&oe.includes(t))){var r=T.deps;if((T.f&Wr)!==0)t.rv<kn&&(t.rv=kn,le===null&&r!==null&&r[he]===t?he++:le===null?le=[t]:le.includes(t)||le.push(t));else{(T.deps??(T.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[T]:s.includes(T)||s.push(T)}}}if(pt&&ft.has(t))return ft.get(t);if(n){var a=t;if(pt){var o=a.v;return((a.f&te)===0&&a.reactions!==null||zs(a))&&(o=ei(a)),ft.set(a,o),o}var l=(a.f&ge)===0&&!Ie&&T!==null&&(Ft||(T.f&ge)!==0),u=a.deps===null;Pn(a)&&(l&&(a.f|=ge),vs(a)),l&&!u&&Gs(a)}if(Z!=null&&Z.has(t))return Z.get(t);if((t.f&dt)!==0)throw t.v;return t.v}function Gs(t){if(t.deps!==null){t.f|=ge;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&X)!==0&&(e.f&ge)===0&&Gs(e)}}function zs(t){if(t.v===Q)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(ft.has(e)||(e.f&X)!==0&&zs(e))return!0;return!1}function Le(t){var e=Ie;try{return Ie=!0,t()}finally{Ie=e}}const Bs=new Set,oi=new Set;function bl(t){for(var e=0;e<t.length;e++)Bs.add(t[e]);for(var n of oi)n(t)}let Vs=null;function Er(t){var d;var e=this,n=e.ownerDocument,i=t.type,r=((d=t.composedPath)==null?void 0:d.call(t))||[],s=r[0]||t.target;Vs=t;var a=0,o=Vs===t&&t.__root;if(o){var l=r.indexOf(o);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var u=r.indexOf(e);if(u===-1)return;l<=u&&(a=l)}if(s=r[a]||t.target,s!==e){cr(t,"currentTarget",{configurable:!0,get(){return s||n}});var c=T,f=k;ne(null),Ee(null);try{for(var _,w=[];s!==null;){var b=s.assignedSlot||s.parentNode||s.host||null;try{var O=s["__"+i];O!=null&&(!s.disabled||t.target===s)&&O.call(s,t)}catch(v){_?w.push(v):_=v}if(t.cancelBubble||b===e||b===null)break;s=b}if(_){for(let v of w)queueMicrotask(()=>{throw v});throw _}}finally{t.__root=e,delete t.currentTarget,ne(c),Ee(f)}}}function Ws(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function vt(t,e){var n=k;n.nodes===null&&(n.nodes={start:t,end:e,a:null,t:null})}function rt(t,e){var n=(e&So)!==0,i=(e&xo)!==0,r,s=!t.startsWith("<!>");return()=>{if(L)return vt(R,null),R;r===void 0&&(r=Ws(s?t:"<!>"+t),n||(r=Ce(r)));var a=i||bs?document.importNode(r,!0):r.cloneNode(!0);if(n){var o=Ce(a),l=a.lastChild;vt(o,l)}else vt(a,a);return a}}function Ys(){if(L)return vt(R,null),R;var t=document.createDocumentFragment(),e=document.createComment(""),n=be();return t.append(e,n),vt(e,n),t}function Ae(t,e){if(L){var n=k;((n.f&fr)===0||n.nodes.end===null)&&(n.nodes.end=R),cn();return}t!==null&&t.before(e)}const wl=["touchstart","touchmove"];function El(t){return wl.includes(t)}function $l(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function Js(t,e){return Ks(t,e)}function Al(t,e){ni(),e.intro=e.intro??!1;const n=e.target,i=L,r=R;try{for(var s=Ce(n);s&&(s.nodeType!==Pt||s.data!==Yi);)s=Re(s);if(!s)throw It;Te(!0),se(s);const a=Ks(t,{...e,anchor:s});return Te(!1),a}catch(a){if(a instanceof Error&&a.message.split(`
`).some(o=>o.startsWith("https://svelte.dev/e/")))throw a;return a!==It&&console.warn("Failed to hydrate: ",a),e.recover===!1&&Go(),ni(),As(n),Te(!1),Js(t,e)}finally{Te(i),se(r)}}const pn=new Map;function Ks(t,{target:e,anchor:n,props:i={},events:r,context:s,intro:a=!0}){ni();var o=new Set,l=f=>{for(var _=0;_<f.length;_++){var w=f[_];if(!o.has(w)){o.add(w);var b=El(w);e.addEventListener(w,Er,{passive:b});var O=pn.get(w);O===void 0?(document.addEventListener(w,Er,{passive:b}),pn.set(w,1)):pn.set(w,O+1)}}};l(or(Bs)),oi.add(l);var u=void 0,c=vl(()=>{var f=n??e.appendChild(be());return rl(f,{pending:()=>{}},_=>{if(s){Kr({});var w=fe;w.c=s}if(r&&(i.$$events=r),L&&vt(_,null),u=t(_,i)||{},L&&(k.nodes.end=R,R===null||R.nodeType!==Pt||R.data!==zr))throw Cn(),It;s&&Qr()}),()=>{var b;for(var _ of o){e.removeEventListener(_,Er);var w=pn.get(_);--w===0?(document.removeEventListener(_,Er),pn.delete(_)):pn.set(_,w)}oi.delete(l),f!==n&&((b=f.parentNode)==null||b.removeChild(f))}});return li.set(u,c),u}let li=new WeakMap;function Ol(t,e){const n=li.get(t);return n?(li.delete(t),n(e)):Promise.resolve()}class Sl{constructor(e,n=!0){G(this,"anchor");I(this,He,new Map);I(this,We,new Map);I(this,_e,new Map);I(this,tn,new Set);I(this,Xn,!0);I(this,Zn,()=>{var e=D;if(p(this,He).has(e)){var n=p(this,He).get(e),i=p(this,We).get(n);if(i)ai(i),p(this,tn).delete(n);else{var r=p(this,_e).get(n);r&&(p(this,We).set(n,r.effect),p(this,_e).delete(n),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),i=r.effect)}for(const[s,a]of p(this,He)){if(p(this,He).delete(s),s===e)break;const o=p(this,_e).get(a);o&&(ae(o.effect),p(this,_e).delete(a))}for(const[s,a]of p(this,We)){if(s===n||p(this,tn).has(s))continue;const o=()=>{if(Array.from(p(this,He).values()).includes(s)){var u=document.createDocumentFragment();Ps(a,u),u.append(be()),p(this,_e).set(s,{effect:a,fragment:u})}else ae(a);p(this,tn).delete(s),p(this,We).delete(s)};p(this,Xn)||!i?(p(this,tn).add(s),jt(a,o,!1)):o()}}});I(this,jr,e=>{p(this,He).delete(e);const n=Array.from(p(this,He).values());for(const[i,r]of p(this,_e))n.includes(i)||(ae(r.effect),p(this,_e).delete(i))});this.anchor=e,N(this,Xn,n)}ensure(e,n){var i=D,r=Os();if(n&&!p(this,We).has(e)&&!p(this,_e).has(e))if(r){var s=document.createDocumentFragment(),a=be();s.append(a),p(this,_e).set(e,{effect:we(()=>n(a)),fragment:s})}else p(this,We).set(e,we(()=>n(this.anchor)));if(p(this,He).set(i,e),r){for(const[o,l]of p(this,We))o===e?i.skipped_effects.delete(l):i.skipped_effects.add(l);for(const[o,l]of p(this,_e))o===e?i.skipped_effects.delete(l.effect):i.skipped_effects.add(l.effect);i.oncommit(p(this,Zn)),i.ondiscard(p(this,jr))}else L&&(this.anchor=R),p(this,Zn).call(this)}}He=new WeakMap,We=new WeakMap,_e=new WeakMap,tn=new WeakMap,Xn=new WeakMap,Zn=new WeakMap,jr=new WeakMap;function Qs(t){fe===null&&Mo(),hn(()=>{const e=Le(t);if(typeof e=="function")return e})}function _t(t,e,n=!1){L&&cn();var i=new Sl(t),r=n?on:0;function s(a,o){if(L){const u=ns(t)===ar;if(a===u){var l=pr();se(l),i.anchor=l,Te(!1),i.ensure(a,o),Te(!0);return}}i.ensure(a,o)}si(()=>{var a=!1;e((o,l=!0)=>{a=!0,s(l,o)}),a||s(!1,null)},r)}function xl(t,e,n){for(var i=[],r=e.length,s,a=e.length,o=0;o<r;o++){let f=e[o];jt(f,()=>{if(s){if(s.pending.delete(f),s.done.add(f),s.pending.size===0){var _=t.outrogroups;ci(or(s.done)),_.delete(s),_.size===0&&(t.outrogroups=null)}}else a-=1},!1)}if(a===0){var l=i.length===0&&n!==null;if(l){var u=n,c=u.parentNode;As(c),c.append(u),t.items.clear()}ci(e,!l)}else s={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(s)}function ci(t,e=!0){for(var n=0;n<t.length;n++)ae(t[n],e)}var Xs;function Tl(t,e,n,i,r,s=null){var a=t,o=new Map;{var l=t;a=L?se(Ce(l)):l.appendChild(be())}L&&cn();var u=null,c=ll(()=>{var d=n();return Ji(d)?d:d==null?[]:or(d)}),f,_=!0;function w(){O.fallback=u,Nl(O,f,a,e,i),u!==null&&(f.length===0?(u.f&ut)===0?ai(u):(u.f^=ut,Mn(u,null,a)):jt(u,()=>{u=null}))}var b=si(()=>{f=h(c);var d=f.length;let v=!1;if(L){var m=ns(a)===ar;m!==(d===0)&&(a=pr(),se(a),Te(!1),v=!0)}for(var y=new Set,S=D,x=Os(),C=0;C<d;C+=1){L&&R.nodeType===Pt&&R.data===zr&&(a=R,v=!0,Te(!1));var P=f[C],U=i(P,C),q=_?null:o.get(U);q?(q.v&&fn(q.v,P),q.i&&fn(q.i,C),x&&S.skipped_effects.delete(q.e)):(q=Cl(o,_?a:Xs??(Xs=be()),P,U,C,r,e,n),_||(q.e.f|=ut),o.set(U,q)),y.add(U)}if(d===0&&s&&!u&&(_?u=we(()=>s(a)):(u=we(()=>s(Xs??(Xs=be()))),u.f|=ut)),L&&d>0&&se(pr()),!_)if(x){for(const[Fr,er]of o)y.has(Fr)||S.skipped_effects.add(er.e);S.oncommit(w),S.ondiscard(()=>{})}else w();v&&Te(!0),h(c)}),O={effect:b,items:o,outrogroups:null,fallback:u};_=!1,L&&(a=R)}function Nl(t,e,n,i,r){var U;var s=e.length,a=t.items,o=t.effect.first,l,u=null,c=[],f=[],_,w,b,O;for(O=0;O<s;O+=1){if(_=e[O],w=r(_,O),b=a.get(w).e,t.outrogroups!==null)for(const q of t.outrogroups)q.pending.delete(b),q.done.delete(b);if((b.f&ut)!==0)if(b.f^=ut,b===o)Mn(b,null,n);else{var d=u?u.next:o;b===t.effect.last&&(t.effect.last=b.prev),b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),gt(t,u,b),gt(t,b,d),Mn(b,d,n),u=b,c=[],f=[],o=u.next;continue}if((b.f&de)!==0&&ai(b),b!==o){if(l!==void 0&&l.has(b)){if(c.length<f.length){var v=f[0],m;u=v.prev;var y=c[0],S=c[c.length-1];for(m=0;m<c.length;m+=1)Mn(c[m],v,n);for(m=0;m<f.length;m+=1)l.delete(f[m]);gt(t,y.prev,S.next),gt(t,u,y),gt(t,S,v),o=v,u=S,O-=1,c=[],f=[]}else l.delete(b),Mn(b,o,n),gt(t,b.prev,b.next),gt(t,b,u===null?t.effect.first:u.next),gt(t,u,b),u=b;continue}for(c=[],f=[];o!==null&&o!==b;)(l??(l=new Set)).add(o),f.push(o),o=o.next;if(o===null)continue}(b.f&ut)===0&&c.push(b),u=b,o=b.next}if(t.outrogroups!==null){for(const q of t.outrogroups)q.pending.size===0&&(ci(or(q.done)),(U=t.outrogroups)==null||U.delete(q));t.outrogroups.size===0&&(t.outrogroups=null)}if(o!==null||l!==void 0){var x=[];if(l!==void 0)for(b of l)(b.f&de)===0&&x.push(b);for(;o!==null;)(o.f&de)===0&&o!==t.fallback&&x.push(o),o=o.next;var C=x.length;if(C>0){var P=s===0?n:null;xl(t,x,P)}}}function Cl(t,e,n,i,r,s,a,o){var l=(a&$o)!==0?(a&Oo)===0?gs(n,!1,!1):Mt(n):null,u=(a&Ao)!==0?Mt(r):null;return{v:l,i:u,e:we(()=>(s(e,l??n,u??r,o),()=>{t.delete(i)}))}}function Mn(t,e,n){if(t.nodes)for(var i=t.nodes.start,r=t.nodes.end,s=e&&(e.f&ut)===0?e.nodes.start:n;i!==null;){var a=Re(i);if(s.before(i),i===r)return;i=a}}function gt(t,e,n){e===null?t.effect.first=n:e.next=n,n===null?t.effect.last=e:n.prev=e}function Rl(t,e,n=!1,i=!1,r=!1){var s=t,a="";nt(()=>{var o=k;if(a===(a=e()??"")){L&&cn();return}if(o.nodes!==null&&(Rs(o.nodes.start,o.nodes.end),o.nodes=null),a!==""){if(L){R.data;for(var l=cn(),u=l;l!==null&&(l.nodeType!==Pt||l.data!=="");)u=l,l=Re(l);if(l===null)throw Cn(),It;vt(R,u),s=se(l);return}var c=a+"";n?c=`<svg>${c}</svg>`:i&&(c=`<math>${c}</math>`);var f=Ws(c);if((n||i)&&(f=Ce(f)),vt(Ce(f),f.lastChild),n||i)for(;Ce(f);)s.before(Ce(f));else s.before(f)}})}function Zs(t,e){Ts(()=>{var n=t.getRootNode(),i=n.host?n:n.head??n.ownerDocument.head;if(!i.querySelector("#"+e.hash)){const r=document.createElement("style");r.id=e.hash,r.textContent=e.code,i.appendChild(r)}})}function Il(t,e,n){var i=t==null?"":""+t;return e&&(i=i?i+" "+e:e),i===""?null:i}function Ll(t,e){return t==null?null:String(t)}function ke(t,e,n,i,r,s){var a=t.__className;if(L||a!==n||a===void 0){var o=Il(n,i);(!L||o!==t.getAttribute("class"))&&(o==null?t.removeAttribute("class"):t.className=o),t.__className=n}return s}function mt(t,e,n,i){var r=t.__style;if(L||r!==e){var s=Ll(e);(!L||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}return i}const kl=Symbol("is custom element"),Pl=Symbol("is html");function ea(t,e,n,i){var r=Dl(t);L&&(r[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||r[e]!==(r[e]=n)&&(e==="loading"&&(t[Do]=n),n==null?t.removeAttribute(e):typeof n!="string"&&na(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function ta(t,e,n){var i=T,r=k;let s=L;L&&Te(!1),ne(null),Ee(null);try{e!=="style"&&(ui.has(t.getAttribute("is")||t.nodeName)||!customElements||customElements.get(t.getAttribute("is")||t.tagName.toLowerCase())?na(t).includes(e):n&&typeof n=="object")?t[e]=n:ea(t,e,n==null?n:String(n))}finally{ne(i),Ee(r),s&&Te(!0)}}function Dl(t){return t.__attributes??(t.__attributes={[kl]:t.nodeName.includes("-"),[Pl]:t.namespaceURI===To})}var ui=new Map;function na(t){var e=t.getAttribute("is")||t.nodeName,n=ui.get(e);if(n)return n;ui.set(e,n=[]);for(var i,r=t,s=Element.prototype;s!==r;){i=Co(r);for(var a in i)i[a].set&&n.push(a);r=Ki(r)}return n}function ra(t,e){return t===e||(t==null?void 0:t[hr])===e}function yt(t={},e,n,i){return Ts(()=>{var r,s;return ii(()=>{r=s,s=[],Le(()=>{t!==n(...s)&&(e(t,...s),r&&ra(n(...r),t)&&e(null,...r))})}),()=>{vr(()=>{s&&ra(n(...s),t)&&e(null,...s)})}}),t}function Pe(t,e,n,i){var r=i,s=!0,a=()=>(s&&(s=!1,r=i),r),o;o=t[e],o===void 0&&i!==void 0&&(o=a());var l;l=()=>{var _=t[e];return _===void 0?a():(s=!0,_)};var u=!1,c=yr(()=>(u=!1,l())),f=k;return(function(_,w){if(arguments.length>0){const b=w?h(c):_;return A(c,b),u=!0,r!==void 0&&(r=b),_}return pt&&u||(f.f&Xe)!==0?c.v:h(c)})}function Ml(t){return new Hl(t)}class Hl{constructor(e){I(this,lt);I(this,xe);var s;var n=new Map,i=(a,o)=>{var l=gs(o,!1,!1);return n.set(a,l),l};const r=new Proxy({...e.props||{},$$events:{}},{get(a,o){return h(n.get(o)??i(o,Reflect.get(a,o)))},has(a,o){return o===Po?!0:(h(n.get(o)??i(o,Reflect.get(a,o))),Reflect.has(a,o))},set(a,o,l){return A(n.get(o)??i(o,l),l),Reflect.set(a,o,l)}});N(this,xe,(e.hydrate?Al:Js)(e.component,{target:e.target,anchor:e.anchor,props:r,context:e.context,intro:e.intro??!1,recover:e.recover})),(!((s=e==null?void 0:e.props)!=null&&s.$$host)||e.sync===!1)&&ye(),N(this,lt,r.$$events);for(const a of Object.keys(p(this,xe)))a==="$set"||a==="$destroy"||a==="$on"||cr(this,a,{get(){return p(this,xe)[a]},set(o){p(this,xe)[a]=o},enumerable:!0});p(this,xe).$set=a=>{Object.assign(r,a)},p(this,xe).$destroy=()=>{Ol(p(this,xe))}}$set(e){p(this,xe).$set(e)}$on(e,n){p(this,lt)[e]=p(this,lt)[e]||[];const i=(...r)=>n.call(this,...r);return p(this,lt)[e].push(i),()=>{p(this,lt)[e]=p(this,lt)[e].filter(r=>r!==i)}}$destroy(){p(this,xe).$destroy()}}lt=new WeakMap,xe=new WeakMap;let ia;typeof HTMLElement=="function"&&(ia=class extends HTMLElement{constructor(e,n,i){super();G(this,"$$ctor");G(this,"$$s");G(this,"$$c");G(this,"$$cn",!1);G(this,"$$d",{});G(this,"$$r",!1);G(this,"$$p_d",{});G(this,"$$l",{});G(this,"$$l_u",new Map);G(this,"$$me");this.$$ctor=e,this.$$s=n,i&&this.attachShadow({mode:"open"})}addEventListener(e,n,i){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(n),this.$$c){const r=this.$$c.$on(e,n);this.$$l_u.set(n,r)}super.addEventListener(e,n,i)}removeEventListener(e,n,i){if(super.removeEventListener(e,n,i),this.$$c){const r=this.$$l_u.get(n);r&&(r(),this.$$l_u.delete(n))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(r){return s=>{const a=document.createElement("slot");r!=="default"&&(a.name=r),Ae(s,a)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const n={},i=jl(this);for(const r of this.$$s)r in i&&(r==="default"&&!this.$$d.children?(this.$$d.children=e(r),n.default=!0):n[r]=e(r));for(const r of this.attributes){const s=this.$$g_p(r.name);s in this.$$d||(this.$$d[s]=$r(s,r.value,this.$$p_d,"toProp"))}for(const r in this.$$p_d)!(r in this.$$d)&&this[r]!==void 0&&(this.$$d[r]=this[r],delete this[r]);this.$$c=Ml({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$host:this}}),this.$$me=pl(()=>{ii(()=>{var r;this.$$r=!0;for(const s of lr(this.$$c)){if(!((r=this.$$p_d[s])!=null&&r.reflect))continue;this.$$d[s]=this.$$c[s];const a=$r(s,this.$$d[s],this.$$p_d,"toAttribute");a==null?this.removeAttribute(this.$$p_d[s].attribute||s):this.setAttribute(this.$$p_d[s].attribute||s,a)}this.$$r=!1})});for(const r in this.$$l)for(const s of this.$$l[r]){const a=this.$$c.$on(r,s);this.$$l_u.set(s,a)}this.$$l={}}}attributeChangedCallback(e,n,i){var r;this.$$r||(e=this.$$g_p(e),this.$$d[e]=$r(e,i,this.$$p_d,"toProp"),(r=this.$$c)==null||r.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(e){return lr(this.$$p_d).find(n=>this.$$p_d[n].attribute===e||!this.$$p_d[n].attribute&&n.toLowerCase()===e)||e}});function $r(t,e,n,i){var s;const r=(s=n[t])==null?void 0:s.type;if(e=r==="Boolean"&&typeof e!="boolean"?e!=null:e,!i||!n[t])return e;if(i==="toAttribute")switch(r){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(r){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function jl(t){const e={};return t.childNodes.forEach(n=>{e[n.slot||"default"]=!0}),e}function sa(t,e,n,i,r,s){let a=class extends ia{constructor(){super(t,n,r),this.$$p_d=e}static get observedAttributes(){return lr(e).map(o=>(e[o].attribute||o).toLowerCase())}};return lr(e).forEach(o=>{cr(a.prototype,o,{get(){return this.$$c&&o in this.$$c?this.$$c[o]:this.$$d[o]},set(l){var f;l=$r(o,l,e),this.$$d[o]=l;var u=this.$$c;if(u){var c=(f=an(u,o))==null?void 0:f.get;c?u[o]=l:u.$set({[o]:l})}}})}),i.forEach(o=>{cr(a.prototype,o,{get(){var l;return(l=this.$$c)==null?void 0:l[o]}})}),s&&(a=s(a)),t.element=a,a}class di extends Error{constructor(e,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,di),this.name="TimeoutError",this.timeout=e,this.message=`Timed out in ${e} ms.`}}const Fl=(t,e)=>{const n=new Promise((i,r)=>{setTimeout(()=>{r(new di(t))},t)});return Promise.race([e,n])},aa=t=>{if(typeof t.getCardSize=="function")try{return Fl(500,t.getCardSize()).catch(()=>1)}catch{return 1}return customElements.get(t.localName)?1:customElements.whenDefined(t.localName).then(()=>aa(t))};var ql=rt('<span class="loading svelte-lv9s7p">Loading...</span>'),Ul=rt("<div><!></div>");const Gl={hash:"svelte-lv9s7p",code:`.loading.svelte-lv9s7p {padding:1em;display:block;}.animation.svelte-lv9s7p {hui-card {display:flex;flex-direction:column;}}.outer-container.animation.svelte-lv9s7p {transition:margin-bottom 0.35s ease;}.outer-container.animation.open.svelte-lv9s7p,
  .outer-container.animation.opening.svelte-lv9s7p {margin-bottom:inherit;}.outer-container.animation.close.svelte-lv9s7p,
  .outer-container.animation.closing.svelte-lv9s7p {margin-bottom:var(--expander-animation-height, -100%);}.outer-container.animation.opening.svelte-lv9s7p {
    animation: svelte-lv9s7p-fadeInOpacity 0.5s forwards ease;
    -webkit-animation: svelte-lv9s7p-fadeInOpacity 0.5s forwards ease;}.outer-container.animation.closing.svelte-lv9s7p {
      animation: svelte-lv9s7p-fadeOutOpacity 0.5s forwards ease;
      -webkit-animation: svelte-lv9s7p-fadeOutOpacity 0.5s forwards ease;}.outer-container.svelte-lv9s7p > hui-card {margin-top:var(--child-card-margin-top, 0px);}
  @keyframes svelte-lv9s7p-fadeInOpacity {
      0% {
          opacity: 0;
      }
      100% {
          opacity: 1;
      }
  }
  @-webkit-keyframes svelte-lv9s7p-fadeInOpacity {
      0% {
          opacity: 0;
      }
      100% {
          opacity: 1;
      }
  }
    @keyframes svelte-lv9s7p-fadeOutOpacity {
      0% {
          opacity: 1;
      }
      100% {
          opacity: 0;
      }
  }
  @-webkit-keyframes svelte-lv9s7p-fadeOutOpacity {
      0% {
          opacity: 1;
      }
      100% {
          opacity: 0;
      }
  }`};function fi(t,e){Kr(e,!0),Zs(t,Gl);const n=Pe(e,"config"),i=Pe(e,"hass"),r=Pe(e,"preview"),s=Pe(e,"marginTop",7,"0px"),a=Pe(e,"open"),o=Pe(e,"animation",7,!0),l=Pe(e,"animationState"),u=Pe(e,"clearCardCss",7,!1);let c=null,f=j(null),_=j(!0),w=j(0);const b=Le(()=>JSON.parse(JSON.stringify(n())));hn(()=>{h(f)&&(h(f).hass=i())}),hn(()=>{h(f)&&r()!==void 0&&(h(f).preview=r())}),hn(()=>{var y;h(f)&&(b.disabled=!a(),(y=h(f)._element)==null||y.dispatchEvent(new CustomEvent("card-visibility-changed",{detail:{value:a()},bubbles:!0,composed:!1})))}),Qs(async()=>{const y=document.createElement("hui-card");y.hass=i(),y.preview=r(),b.disabled=!a(),y.config=b,y.load(),c==null||c.appendChild(y),A(f,y,!0),A(_,!1),h(f).addEventListener("ll-upgrade",S=>{var x;S.stopPropagation(),(x=h(f))!=null&&x._element&&i()&&(h(f)._element.hass=i())},{capture:!0}),u()&&(y.style.setProperty("--ha-card-background","transparent"),y.style.setProperty("--ha-card-box-shadow","none"),y.style.setProperty("--ha-card-border-color","transparent"),y.style.setProperty("--ha-card-border-width","0px"),y.style.setProperty("--ha-card-border-radius","0px"),y.style.setProperty("--ha-card-backdrop-filter","none")),o()&&(A(w,await aa(y)*56),c&&A(w,h(w)+(window.getComputedStyle(c).marginTop?parseFloat(window.getComputedStyle(c).marginTop):0)),new ResizeObserver(x=>{for(const C of x)if(C.contentBoxSize){const P=Array.isArray(C.contentBoxSize)?C.contentBoxSize[0]:C.contentBoxSize;P.blockSize&&(A(w,P.blockSize,!0),h(f)&&A(w,h(w)+(window.getComputedStyle(h(f)).marginTop?parseFloat(window.getComputedStyle(h(f)).marginTop):0)))}else C.contentRect&&(A(w,C.contentRect.height,!0),h(f)&&A(w,h(w)+(window.getComputedStyle(h(f)).marginTop?parseFloat(window.getComputedStyle(h(f)).marginTop):0)))}).observe(y))});var O={get config(){return n()},set config(y){n(y),ye()},get hass(){return i()},set hass(y){i(y),ye()},get preview(){return r()},set preview(y){r(y),ye()},get marginTop(){return s()},set marginTop(y="0px"){s(y),ye()},get open(){return a()},set open(y){a(y),ye()},get animation(){return o()},set animation(y=!0){o(y),ye()},get animationState(){return l()},set animationState(y){l(y),ye()},get clearCardCss(){return u()},set clearCardCss(y=!1){u(y),ye()}},d=Ul(),v=ht(d);{var m=y=>{var S=ql();Ae(y,S)};_t(v,y=>{h(_)&&y(m)})}return Ze(d),yt(d,y=>c=y,()=>c),nt(()=>{ke(d,1,`outer-container${a()?" open":" close"}${o()?" animation "+l():""}`,"svelte-lv9s7p"),mt(d,`--child-card-margin-top: ${(a()?s():"0px")??""};${h(w)?` --expander-animation-height: -${h(w)}px;`:""}`)}),Ae(t,d),Qr(O)}customElements.define("expander-sub-card",sa(fi,{config:{},hass:{},preview:{},marginTop:{},open:{},animation:{},animationState:{},clearCardCss:{}},[],[],!0));const zl=(t,e)=>{var n;(n=t.dispatchEvent)==null||n.call(t,new CustomEvent("haptic",{detail:e,bubbles:!0,composed:!0}))};var Hn=function(t,e,n){var i;n===void 0&&(n={});var r=n.retries,s=r===void 0?10:r,a=n.delay,o=a===void 0?10:a,l=n.shouldReject,u=l===void 0||l,c=(i=n.rejectMessage)!==null&&i!==void 0?i:"Could not get the result after {{ retries }} retries";return new Promise((function(f,_){var w=0,b=function(){var O=t();e(O)?f(O):++w<s?setTimeout(b,o):u?_(new Error(c.replace(/\{\{\s*retries\s*\}\}/g,"".concat(s)))):f(O)};b()}))},Ar=function(){return Ar=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ar.apply(this,arguments)};function hi(t,e,n){if(arguments.length===2)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var Or,vn,De,bt,pi="[home-assistant-javascript-templates]",Bl=/^([a-z_]+)\.(\w+)$/;(function(t){t.UNKNOWN="unknown",t.UNAVAILABLE="unavailable"})(Or||(Or={})),(function(t){t.AREA_ID="area_id",t.NAME="name"})(vn||(vn={})),(function(t){t.PANEL_URL="panel_url",t.LANG="lang"})(De||(De={})),(function(t){t.LOCATION_CHANGED="location-changed",t.TRANSLATIONS_UPDATED="translations-updated",t.POPSTATE="popstate",t.SUBSCRIBE_EVENTS="subscribe_events",t.STATE_CHANGE_EVENT="state_changed"})(bt||(bt={}));var oa=function(t){return t.reduce((function(e,n){var i=n[0],r=n[1];return e[i.replace(Bl,"$2")]=r,e}),{})},wt=function(t){return t.includes(".")},Sr="ref",Ut="value",la="toJSON",ca=function(t){return"".concat(Sr,".").concat(t)};function Vl(t,e,n){var i=function(){return Object.entries(t.hass.areas)},r=function(){return Object.entries(t.hass.devices)},s=function(){return Object.entries(t.hass.entities)},a=new Set,o=new Map,l=function(d,v){n&&console.warn("".concat(d," ").concat(v," used in a JavaScript template doesn't exist"))},u=function(d){return l("Entity",d)},c=function(d){return l("Domain",d)},f=function(d){var v=new SyntaxError(d);if(e)throw v;n&&console.warn(v)},_=function(d){t.hass.states[d]?a.add(d):u(d)},w=function(d){a.add(d)},b=function(d,v){var m=v.with_unit,y=m!==void 0&&m,S=v.rounded,x=S!==void 0&&S;if(d){var C=d.state,P=d.attributes.unit_of_measurement,U=Number(x),q=x===!1||isNaN(Number(C))?C:new Intl.NumberFormat(t.hass.language,{minimumFractionDigits:U,maximumFractionDigits:U}).format(Number(C));return y&&P?"".concat(q," ").concat(P):q}},O=function(d){return new Proxy(d,{get:function(v,m){return m==="state_with_unit"?b(v,{rounded:!0,with_unit:!0}):v[m]}})};return{get hass(){return t.hass},states:new Proxy((function(d,v){if(v===void 0&&(v={}),wt(d))return _(d),b(t.hass.states[d],v);throw SyntaxError("".concat(pi,": states method cannot be used with a domain, use it as an object instead."))}),{get:function(d,v){if(wt(v))return _(v),O(t.hass.states[v]);var m=Object.entries(t.hass.states).filter((function(y){return y[0].startsWith(v)}));return m.length||c(v),new Proxy(oa(m),{get:function(y,S){return _("".concat(v,".").concat(S)),O(y[S])}})}}),state_translated:function(d){if(_(d),t.hass.states[d])return t.hass.formatEntityState(t.hass.states[d])},is_state:function(d,v){var m;return _(d),Array.isArray(v)?v.some((function(y){var S;return((S=t.hass.states[d])===null||S===void 0?void 0:S.state)===y})):((m=t.hass.states[d])===null||m===void 0?void 0:m.state)===v},state_attr:function(d,v){var m,y;return _(d),(y=(m=t.hass.states[d])===null||m===void 0?void 0:m.attributes)===null||y===void 0?void 0:y[v]},is_state_attr:function(d,v,m){return this.state_attr(d,v)===m},has_value:function(d){return this.states(d)?!(this.is_state(d,Or.UNKNOWN)||this.is_state(d,Or.UNAVAILABLE)):(u(d),!1)},entities:new Proxy((function(d){if(d===void 0)return t.hass.entities;if(wt(d))return _(d),t.hass.entities[d];var v=s().filter((function(m){return m[0].startsWith(d)}));return v.length||c(d),new Proxy(oa(v),{get:function(m,y){return _("".concat(d,".").concat(y)),m[y]}})}),{get:function(d,v){return d(v)}}),entity_prop:function(d,v){var m;return _(d),(m=t.hass.entities[d])===null||m===void 0?void 0:m[v]},is_entity_prop:function(d,v,m){return this.entity_prop(d,v)===m},devices:new Proxy((function(d){if(d===void 0)return t.hass.devices;if(wt(d))throw SyntaxError("".concat(pi,": devices method cannot be used with an entity id, you should use a device id instead."));return t.hass.devices[d]}),{get:function(d,v){if(wt(v))throw SyntaxError("".concat(pi,": devices cannot be accesed using an entity id, you should use a device id instead."));return t.hass.devices[v]}}),device_attr:function(d,v){var m,y,S;if(wt(d)){_(d);var x=(m=t.hass.entities[d])===null||m===void 0?void 0:m.device_id;return(y=t.hass.devices[x])===null||y===void 0?void 0:y[v]}return(S=t.hass.devices[d])===null||S===void 0?void 0:S[v]},is_device_attr:function(d,v,m){return this.device_attr(d,v)===m},device_id:function(d){var v;if(wt(d))return _(d),(v=t.hass.entities[d])===null||v===void 0?void 0:v.device_id;var m=r().find((function(y){return y[1].name===d}));return m==null?void 0:m[0]},device_name:function(d){var v,m,y;if(wt(d)){_(d);var S=(v=t.hass.entities[d])===null||v===void 0?void 0:v.device_id;return(m=t.hass.devices[S])===null||m===void 0?void 0:m.name}return(y=t.hass.devices[d])===null||y===void 0?void 0:y.name},areas:function(){return i().map((function(d){return d[1].area_id}))},area_id:function(d){var v,m;if(d in t.hass.devices)return this.device_attr(d,vn.AREA_ID);var y=(v=t.hass.entities[d])===null||v===void 0?void 0:v.device_id;if(y)return this.device_attr(y,vn.AREA_ID);var S=i().find((function(x){return x[1].name===d}));return(m=S==null?void 0:S[1])===null||m===void 0?void 0:m.area_id},area_name:function(d){var v,m,y;d in t.hass.devices&&(y=this.device_attr(d,vn.AREA_ID));var S=(v=t.hass.entities[d])===null||v===void 0?void 0:v.device_id;S&&(y=this.device_attr(S,vn.AREA_ID));var x=i().find((function(C){var P=C[1];return P.area_id===d||P.area_id===y}));return(m=x==null?void 0:x[1])===null||m===void 0?void 0:m.name},area_entities:function(d){var v=i().find((function(m){var y=m[1];return y.area_id===d||y.name===d}));return v?s().filter((function(m){return m[1].area_id===v[1].area_id})).map((function(m){return m[0]})):[]},area_devices:function(d){var v=i().find((function(m){var y=m[1];return y.area_id===d||y.name===d}));return v?r().filter((function(m){return m[1].area_id===v[1].area_id})).map((function(m){return m[1].id})):[]},get user_name(){return t.hass.user.name},get user_is_admin(){return t.hass.user.is_admin},get user_is_owner(){return t.hass.user.is_owner},get user_agent(){return window.navigator.userAgent},get tracked(){return a},cleanTracked:function(){a.clear()},ref:function(d,v,m){var y;m===void 0&&(m=void 0);var S=ca(v);if(o.has(v))return o.get(v);var x=new Proxy(((y={})[Ut]=m,y[la]=function(){return this[Ut]},y),{get:function(C,P,U){if(P===Ut||P===la)return w(S),Reflect.get(C,P,U);f("".concat(P," is not a valid ").concat(Sr," property. A ").concat(Sr,' only exposes a "').concat(Ut,'" property'))},set:function(C,P,U){if(P===Ut){var q=C[Ut];return C[Ut]=U,d({event_type:bt.STATE_CHANGE_EVENT,data:{entity_id:S,old_state:{state:JSON.stringify(q)},new_state:{state:JSON.stringify(U)}}}),!0}return f('property "'.concat(P,'" cannot be set in a ').concat(Sr)),!1}});return o.set(v,x),x},unref:function(d,v){var m=ca(v);o.has(v)?(o.delete(v),d(m)):f("".concat(v," is not a ref or it has been unrefed already"))},refs:function(d,v,m){m===void 0&&(m={});var y=this.ref,S=this.unref,x=new Proxy(m,{get:function(C,P){return y(d,P).value},set:function(C,P,U){return y(d,P).value=U,!0}});return Object.entries(m).forEach((function(C){var P=C[0],U=C[1];o.has(P)&&S(v,P),y(d,P,U)})),x},cleanRefs:function(d){var v=this;Array.from(o.keys()).forEach((function(m){v.unref(d,m)}))},clientSideProxy:new Proxy({},{get:function(d,v){switch(Object.values(De).includes(v)&&w(v),v){case De.PANEL_URL:return location.pathname;case De.LANG:return t.hass.language}n&&console.warn("clientSideProxy should only be used to access these variables: ".concat(Object.values(De).join(", ")))}})}}var Wl=(function(){function t(e,n){var i=n.throwErrors,r=i!==void 0&&i,s=n.throwWarnings,a=s===void 0||s,o=n.variables,l=o===void 0?{}:o,u=n.refs,c=u===void 0?{}:u,f=n.refsVariableName,_=f===void 0?"refs":f,w=n.autoReturn,b=w===void 0||w;this._throwErrors=r,this._throwWarnings=a,this._variables=l,this._refsVariableName=_,this._autoReturn=b,this._subscriptions=new Map,this._clientSideEntitiesRegExp=new RegExp("(^|[ \\?(+:\\{\\[><,])(".concat(Object.values(De).join("|"),")($|[ \\?)+:\\}\\]><.,])"),"gm"),this._scopped=Vl(e,r,a),this.refs=c,this._watchForPanelUrlChange(),this._watchForEntitiesChange(),this._watchForLanguageChange()}return t.prototype._executeRenderingFunctions=function(e){var n=this;this._subscriptions.get(e).forEach((function(i,r){i.forEach((function(s,a){n.trackTemplate(r,a,s)}))}))},t.prototype._watchForPanelUrlChange=function(){var e=this;window.addEventListener(bt.LOCATION_CHANGED,(function(){e._panelUrlWatchCallback()})),window.addEventListener(bt.POPSTATE,(function(){e._panelUrlWatchCallback()}))},t.prototype._panelUrlWatchCallback=function(){this._subscriptions.has(De.PANEL_URL)&&this._executeRenderingFunctions(De.PANEL_URL)},t.prototype._watchForEntitiesChange=function(){var e=this;window.hassConnection.then((function(n){n.conn.subscribeMessage((function(i){return e._entityWatchCallback(i)}),{type:bt.SUBSCRIBE_EVENTS,event_type:bt.STATE_CHANGE_EVENT})}))},t.prototype._watchForLanguageChange=function(){var e=this;window.addEventListener(bt.TRANSLATIONS_UPDATED,(function(){e._subscriptions.has(De.LANG)&&e._executeRenderingFunctions(De.LANG)}))},t.prototype._entityWatchCallback=function(e){if(this._subscriptions.size){var n=e.data.entity_id;this._subscriptions.has(n)&&this._executeRenderingFunctions(n)}},t.prototype._storeTracked=function(e,n,i){var r=this;this._scopped.tracked.forEach((function(s){var a=[n,i];if(r._subscriptions.has(s)){var o=r._subscriptions.get(s);if(o.has(e)){var l=o.get(e);l.has(n)||l.set.apply(l,a)}else o.set(e,new Map([a]))}else r._subscriptions.set(s,new Map([[e,new Map([a])]]))}))},t.prototype._untrackTemplate=function(e,n){var i=this;this._subscriptions.forEach((function(r,s){if(r.has(e)){var a=r.get(e);a.delete(n),a.size===0&&(r.delete(e),r.size===0&&i._subscriptions.delete(s))}}))},t.prototype.renderTemplate=function(e,n){n===void 0&&(n={});try{var i=n.variables,r=i===void 0?{}:i,s=n.refs,a=s===void 0?{}:s,o=new Map(Object.entries(Ar(Ar({},this._variables),r))),l=e.trim().replace(this._clientSideEntitiesRegExp,"$1clientSide.$2$3"),u=l.includes("return")||!this._autoReturn?l:"return ".concat(l);return new(Function.bind.apply(Function,hi(hi([void 0,"hass","states","state_translated","is_state","state_attr","is_state_attr","has_value","entities","entity_prop","is_entity_prop","devices","device_attr","is_device_attr","device_id","device_name","areas","area_id","area_name","area_entities","area_devices","user_name","user_is_admin","user_is_owner","user_agent","clientSide","ref","unref",this._refsVariableName],Array.from(o.keys()),!1),["".concat('"use strict";'," ").concat(u)],!1)))().apply(void 0,hi([this._scopped.hass,this._scopped.states,this._scopped.state_translated.bind(this._scopped),this._scopped.is_state.bind(this._scopped),this._scopped.state_attr.bind(this._scopped),this._scopped.is_state_attr.bind(this._scopped),this._scopped.has_value.bind(this._scopped),this._scopped.entities,this._scopped.entity_prop,this._scopped.is_entity_prop.bind(this._scopped),this._scopped.devices,this._scopped.device_attr.bind(this._scopped),this._scopped.is_device_attr.bind(this._scopped),this._scopped.device_id.bind(this._scopped),this._scopped.device_name.bind(this._scopped),this._scopped.areas.bind(this._scopped),this._scopped.area_id.bind(this._scopped),this._scopped.area_name.bind(this._scopped),this._scopped.area_entities.bind(this._scopped),this._scopped.area_devices.bind(this._scopped),this._scopped.user_name,this._scopped.user_is_admin,this._scopped.user_is_owner,this._scopped.user_agent,this._scopped.clientSideProxy,this._scopped.ref.bind(this._scopped,this._entityWatchCallback.bind(this)),this._scopped.unref.bind(this._scopped,this.cleanTracked.bind(this)),this._scopped.refs(this._entityWatchCallback.bind(this),this.cleanTracked.bind(this),a)],Array.from(o.values()),!1))}catch(c){if(this._throwErrors)throw c;return void(this._throwWarnings&&console.warn(c))}},t.prototype.trackTemplate=function(e,n,i){var r=this;i===void 0&&(i={}),this._scopped.cleanTracked();var s=this.renderTemplate(e,i);return this._storeTracked(e,n,i),n(s),function(){return r._untrackTemplate(e,n)}},t.prototype.cleanTracked=function(e){e?this._subscriptions.has(e)&&this._subscriptions.delete(e):this._subscriptions.clear()},Object.defineProperty(t.prototype,"variables",{get:function(){return this._variables},set:function(e){this._variables=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refs",{get:function(){return this._scopped.refs(this._entityWatchCallback.bind(this),this.cleanTracked.bind(this))},set:function(e){this._scopped.cleanRefs(this.cleanTracked.bind(this)),this._scopped.refs(this._entityWatchCallback.bind(this),this.cleanTracked.bind(this),e)},enumerable:!1,configurable:!0}),t})(),Yl=(function(){function t(e,n){n===void 0&&(n={}),this._renderer=Hn((function(){return e.hass}),(function(i){return!!(i&&i.areas&&i.devices&&i.entities&&i.states&&i.user)}),{retries:100,delay:50,rejectMessage:"The provided element doesn't contain a proper or initialised hass object"}).then((function(){return new Wl(e,n)}))}return t.prototype.getRenderer=function(){return this._renderer},t})();function Jl(t={},e={}){return new Yl(document.querySelector("home-assistant"),{autoReturn:!1,variables:t,refs:e,refsVariableName:"variables"}).getRenderer()}function xr(t){return!t||typeof t!="string"?!1:String(t).trim().startsWith("[[[")&&String(t).trim().endsWith("]]]")}function ua(t,e,n,i={}){if(!xr(n))throw new Error("Not a valid JS template");return n=String(n).trim().slice(3,-3),t.then(r=>r.trackTemplate(n,e,{variables:i}))}function da(t,e,n){t.then(i=>{i.refs[e]=n})}function Kl(t,e){t.then(n=>{const i=e.detail;Object.keys(i).forEach(r=>{const s=i[r].property,a=i[r].value,o=`${r}_${s}`;n.refs[o]=a})})}function Ql(t,e){const n=Kl.bind(null,t);return document.addEventListener(e,n),()=>{document.removeEventListener(e,n)}}var Tr=function(){return Tr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Tr.apply(this,arguments)};function Gt(t,e,n,i){return new(n||(n=Promise))((function(r,s){function a(u){try{l(i.next(u))}catch(c){s(c)}}function o(u){try{l(i.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof n?c:new n((function(f){f(c)}))).then(a,o)}l((i=i.apply(t,[])).next())}))}function zt(t,e){var n,i,r,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(u){return(function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&c[0]?i.return:c[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,c[1])).done)return r;switch(i=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,i=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){s.label=c[1];break}if(c[0]===6&&s.label<r[1]){s.label=r[1],r=c;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(c);break}r[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(f){c=[6,f],i=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}})([l,u])}}}typeof SuppressedError=="function"&&SuppressedError;var Bt="$",fa=":host",vi="invalid selector",Et=10,$t=10,_i=function(t){var e,n=t[0],i=t[1];return(e=n)&&(e instanceof Document||e instanceof Element||e instanceof ShadowRoot)&&typeof i=="string"};function gi(t,e){return(function(n){return n.split(",").map((function(i){return i.trim()}))})(t).map((function(n){var i=(function(r){return r.split(Bt).map((function(s){return s.trim()}))})(n);return e(i)}))}function ha(t,e){var n=e?" If you want to select a shadowRoot, use ".concat(e," instead."):"";return"".concat(t," cannot be used with a selector ending in a shadowRoot (").concat(Bt,").").concat(n)}function _n(t){return t instanceof Promise?t:Promise.resolve(t)}function pa(){return"You can not select a shadowRoot (".concat(Bt,") of the document.")}function va(){return"You can not select a shadowRoot (".concat(Bt,") of a shadowRoot.")}function mi(t,e){for(var n,i,r=null,s=t.length,a=0;a<s;a++){if(a===0)if(t[a].length)r=e.querySelector(t[a]);else{if(e instanceof Document)throw new SyntaxError(pa());if(e instanceof ShadowRoot)throw new SyntaxError(va());r=((n=e.shadowRoot)===null||n===void 0?void 0:n.querySelector(t[++a]))||null}else r=((i=r.shadowRoot)===null||i===void 0?void 0:i.querySelector("".concat(fa," ").concat(t[a])))||null;if(r===null)return null}return r}function Xl(t,e){var n,i=(function(a,o,l){for(var u,c=0,f=o.length;c<f;c++)!u&&c in o||(u||(u=Array.prototype.slice.call(o,0,c)),u[c]=o[c]);return a.concat(u||Array.prototype.slice.call(o))})([],t),r=i.pop();if(!i.length)return e.querySelectorAll(r);var s=mi(i,e);return((n=s==null?void 0:s.shadowRoot)===null||n===void 0?void 0:n.querySelectorAll("".concat(fa," ").concat(r)))||null}function Zl(t,e){if(t.length===1&&!t[0].length){if(e instanceof Document)throw new SyntaxError(pa());if(e instanceof ShadowRoot)throw new SyntaxError(va());return e.shadowRoot}var n=mi(t,e);return(n==null?void 0:n.shadowRoot)||null}function ec(t,e,n,i){for(var r=gi(t,(function(l){if(!l[l.length-1].length)throw new SyntaxError(ha(n,i));return l})),s=r.length,a=0;a<s;a++){var o=mi(r[a],e);if(o)return o}return null}function tc(t,e,n){for(var i=gi(t,(function(o){if(!o[o.length-1].length)throw new SyntaxError(ha(n));return o})),r=i.length,s=0;s<r;s++){var a=Xl(i[s],e);if(a!=null&&a.length)return a}return document.querySelectorAll(vi)}function nc(t,e,n,i){for(var r=gi(t,(function(l){if(l.pop().length)throw new SyntaxError((function(u,c){return"".concat(u," must be used with a selector ending in a shadowRoot (").concat(Bt,"). If you don't want to select a shadowRoot, use ").concat(c," instead.")})(n,i));return l})),s=r.length,a=0;a<s;a++){var o=Zl(r[a],e);if(o)return o}return null}function _a(t,e,n,i){return Gt(this,void 0,void 0,(function(){return zt(this,(function(r){return[2,Hn((function(){return ec(t,e,"asyncQuerySelector","asyncShadowRootQuerySelector")}),(function(s){return!!s}),{retries:n,delay:i,shouldReject:!1})]}))}))}function ga(t,e,n,i){return Gt(this,void 0,void 0,(function(){return zt(this,(function(r){return[2,Hn((function(){return tc(t,e,"asyncQuerySelectorAll")}),(function(s){return!!s.length}),{retries:n,delay:i,shouldReject:!1})]}))}))}function ma(t,e,n,i){return Gt(this,void 0,void 0,(function(){return zt(this,(function(r){return[2,Hn((function(){return nc(t,e,"asyncShadowRootQuerySelector","asyncQuerySelector")}),(function(s){return!!s}),{retries:n,delay:i,shouldReject:!1})]}))}))}var yi=function(t,e){var n=t.querySelectorAll(e);if(n.length)return n;if(t instanceof Element&&t.shadowRoot){var i=yi(t.shadowRoot,e);if(i.length)return i}for(var r=0,s=Array.from(t.querySelectorAll("*"));r<s.length;r++){var a=s[r],o=yi(a,e);if(o.length)return o}return document.querySelectorAll(vi)},ya=function(t,e,n,i){return Hn((function(){return yi(t,e)}),(function(r){return!!r.length}),{retries:n,delay:i,shouldReject:!1})};function ba(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gt(this,void 0,void 0,(function(){var n,i,r,s,a;return zt(this,(function(o){switch(o.label){case 0:return _i(t)?(n=t[0],i=t[1],r=t[2],[4,_a(i,n,(r==null?void 0:r.retries)||Et,(r==null?void 0:r.delay)||$t)]):[3,2];case 1:case 3:return[2,o.sent()];case 2:return s=t[0],a=t[1],[4,_a(s,document,(a==null?void 0:a.retries)||Et,(a==null?void 0:a.delay)||$t)]}}))}))}function wa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gt(this,void 0,void 0,(function(){var n,i,r,s,a;return zt(this,(function(o){switch(o.label){case 0:return _i(t)?(n=t[0],i=t[1],r=t[2],[4,ga(i,n,(r==null?void 0:r.retries)||Et,(r==null?void 0:r.delay)||$t)]):[3,2];case 1:return[2,o.sent()];case 2:return s=t[0],a=t[1],[2,ga(s,document,(a==null?void 0:a.retries)||Et,(a==null?void 0:a.delay)||$t)]}}))}))}function Ea(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gt(this,void 0,void 0,(function(){var n,i,r,s,a;return zt(this,(function(o){switch(o.label){case 0:return _i(t)?(n=t[0],i=t[1],r=t[2],[4,ma(i,n,(r==null?void 0:r.retries)||Et,(r==null?void 0:r.delay)||$t)]):[3,2];case 1:return[2,o.sent()];case 2:return s=t[0],a=t[1],[2,ma(s,document,(a==null?void 0:a.retries)||Et,(a==null?void 0:a.delay)||$t)]}}))}))}var rc=(function(){function t(e,n){e instanceof Node||e instanceof Promise?(this._element=e,this._asyncParams=Tr({retries:Et,delay:$t},n||{})):(this._element=document,this._asyncParams=Tr({retries:Et,delay:$t},e||{}))}return Object.defineProperty(t.prototype,"element",{get:function(){return _n(this._element).then((function(e){return e instanceof NodeList?e[0]||null:e}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){var e=this;return new t(_n(this._element).then((function(n){return n instanceof Document||n instanceof ShadowRoot||n===null||n instanceof NodeList&&n.length===0?null:n instanceof NodeList?Ea(n[0],Bt,e._asyncParams):Ea(n,Bt,e._asyncParams)})),this._asyncParams)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"all",{get:function(){return _n(this._element).then((function(e){return e instanceof NodeList?e:document.querySelectorAll(vi)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"asyncParams",{get:function(){return this._asyncParams},enumerable:!1,configurable:!0}),t.prototype.eq=function(e){return Gt(this,void 0,void 0,(function(){return zt(this,(function(n){return[2,_n(this._element).then((function(i){return i instanceof NodeList&&i[e]||null}))]}))}))},t.prototype.query=function(e){var n=this;return new t(_n(this._element).then((function(i){return i===null||i instanceof NodeList&&i.length===0?null:i instanceof NodeList?wa(i[0],e,n._asyncParams):wa(i,e,n._asyncParams)})),this._asyncParams)},t.prototype.deepQuery=function(e){var n=this;return new t(_n(this._element).then((function(i){return i===null||i instanceof NodeList&&i.length===0?null:i instanceof NodeList?Promise.race(Array.from(i).map((function(r){return ya(r,e,n._asyncParams.retries,n._asyncParams.delay)}))):ya(i,e,n._asyncParams.retries,n._asyncParams.delay)})),this._asyncParams)},t})(),bi=function(t,e){return bi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},bi(t,e)},it=function(){return it=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},it.apply(this,arguments)};typeof SuppressedError=="function"&&SuppressedError;var Me,At,W,st,$a,wi,Ei,Nr,Aa,$i,Cr,Ai,Oi,Si,jn,F,Ot="$",ic={retries:100,delay:50,eventThreshold:450};(function(t){t.HOME_ASSISTANT="HOME_ASSISTANT",t.HOME_ASSISTANT_MAIN="HOME_ASSISTANT_MAIN",t.HA_DRAWER="HA_DRAWER",t.HA_SIDEBAR="HA_SIDEBAR",t.PARTIAL_PANEL_RESOLVER="PARTIAL_PANEL_RESOLVER"})(Me||(Me={})),(function(t){t.HA_PANEL_LOVELACE="HA_PANEL_LOVELACE",t.HUI_ROOT="HUI_ROOT",t.HEADER="HEADER",t.HUI_VIEW="HUI_VIEW"})(At||(At={})),(function(t){t.HA_MORE_INFO_DIALOG="HA_MORE_INFO_DIALOG",t.HA_DIALOG="HA_DIALOG",t.HA_DIALOG_CONTENT="HA_DIALOG_CONTENT",t.HA_MORE_INFO_DIALOG_INFO="HA_MORE_INFO_DIALOG_INFO",t.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK="HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK",t.HA_DIALOG_MORE_INFO_SETTINGS="HA_DIALOG_MORE_INFO_SETTINGS"})(W||(W={})),(function(t){t.ON_LISTEN="onListen",t.ON_PANEL_LOAD="onPanelLoad",t.ON_LOVELACE_PANEL_LOAD="onLovelacePanelLoad",t.ON_MORE_INFO_DIALOG_OPEN="onMoreInfoDialogOpen",t.ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN="onHistoryAndLogBookDialogOpen",t.ON_SETTINGS_DIALOG_OPEN="onSettingsDialogOpen"})(st||(st={})),(function(t){t.HOME_ASSISTANT="home-assistant",t.HOME_ASSISTANT_MAIN="home-assistant-main",t.HA_DRAWER="ha-drawer",t.HA_SIDEBAR="ha-sidebar",t.PARTIAL_PANEL_RESOLVER="partial-panel-resolver",t.HA_PANEL_LOVELACE="ha-panel-lovelace",t.HUI_ROOT="hui-root",t.HEADER=".header",t.HUI_VIEW="hui-view",t.HA_MORE_INFO_DIALOG="ha-more-info-dialog",t.HA_DIALOG="ha-dialog",t.HA_DIALOG_CONTENT=".content",t.HA_MORE_INFO_DIALOG_INFO="ha-more-info-info",t.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK="ha-more-info-history-and-logbook",t.HA_DIALOG_MORE_INFO_SETTINGS="ha-more-info-settings"})(F||(F={}));var sc=(($a={})[Me.HOME_ASSISTANT]={selector:F.HOME_ASSISTANT,children:{shadowRoot:{selector:Ot,children:(wi={},wi[Me.HOME_ASSISTANT_MAIN]={selector:F.HOME_ASSISTANT_MAIN,children:{shadowRoot:{selector:Ot,children:(Ei={},Ei[Me.HA_DRAWER]={selector:F.HA_DRAWER,children:(Nr={},Nr[Me.HA_SIDEBAR]={selector:F.HA_SIDEBAR,children:{shadowRoot:{selector:Ot}}},Nr[Me.PARTIAL_PANEL_RESOLVER]={selector:F.PARTIAL_PANEL_RESOLVER},Nr)},Ei)}}},wi)}}},$a),ac=((Aa={})[At.HA_PANEL_LOVELACE]={selector:F.HA_PANEL_LOVELACE,children:{shadowRoot:{selector:Ot,children:($i={},$i[At.HUI_ROOT]={selector:F.HUI_ROOT,children:{shadowRoot:{selector:Ot,children:(Cr={},Cr[At.HEADER]={selector:F.HEADER},Cr[At.HUI_VIEW]={selector:F.HUI_VIEW},Cr)}}},$i)}}},Aa),oc={shadowRoot:{selector:Ot,children:(Ai={},Ai[W.HA_MORE_INFO_DIALOG]={selector:F.HA_MORE_INFO_DIALOG,children:{shadowRoot:{selector:Ot,children:(Oi={},Oi[W.HA_DIALOG]={selector:F.HA_DIALOG,children:(Si={},Si[W.HA_DIALOG_CONTENT]={selector:F.HA_DIALOG_CONTENT,children:(jn={},jn[W.HA_MORE_INFO_DIALOG_INFO]={selector:F.HA_MORE_INFO_DIALOG_INFO},jn[W.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]={selector:F.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK},jn[W.HA_DIALOG_MORE_INFO_SETTINGS]={selector:F.HA_DIALOG_MORE_INFO_SETTINGS},jn)},Si)},Oi)}}},Ai)}},Fn=function(t,e,n,i){return n===void 0&&(n=null),i===void 0&&(i=!1),Object.entries(e||{}).reduce((function(r,s){var a=s[0],o=s[1];if(o.selector===Ot&&n)return o.children?it(it({},r),Fn(t,o.children,n,!0)):r;var l=n?n.then((function(u){return u?ba(u,(c=o.selector,i?"$ "+c:c),t):null;var c})):ba(o.selector,t);return r[a]={element:l,children:Fn(t,o.children,l),selector:new rc(l,t)},r}),{})},Oa=function(t,e){for(var n=0,i=Object.entries(e);n<i.length;n++){var r=i[n];if(r[0]===t)return r[1];var s=Oa(t,r[1].children);if(s)return s}},xi=function(t,e){return Object.keys(t).reduce((function(n,i){var r=Oa(i,e);r.children;var s=(function(a,o){var l={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&o.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var c=0;for(u=Object.getOwnPropertySymbols(a);c<u.length;c++)o.indexOf(u[c])<0&&Object.prototype.propertyIsEnumerable.call(a,u[c])&&(l[u[c]]=a[u[c]])}return l})(r,["children"]);return n[i]=it({},s),n}),{})},lc=(function(){function t(){this.delegate=document.createDocumentFragment()}return t.prototype.addEventListener=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(e=this.delegate).addEventListener.apply(e,n)},t.prototype.dispatchEvent=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return(e=this.delegate).dispatchEvent.apply(e,n)},t.prototype.removeEventListener=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return(e=this.delegate).removeEventListener.apply(e,n)},t})(),cc=(function(t){function e(n){n===void 0&&(n={});var i=t.call(this)||this;return i._config=it(it({},ic),n),i._timestaps={},i}return(function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}bi(n,i),n.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)})(e,t),e.prototype._dispatchEvent=function(n,i){var r=Date.now();r-this._timestaps[n]<this._config.eventThreshold||(this._timestaps[n]=r,this.dispatchEvent(new CustomEvent(n,{detail:i})))},e.prototype._updateDialogElements=function(n){var i,r=this;n===void 0&&(n=W.HA_MORE_INFO_DIALOG_INFO),this._dialogTree=Fn(this._config,oc,this._haRootElements.HOME_ASSISTANT.element);var s=xi(W,this._dialogTree);s.HA_DIALOG_CONTENT.element.then((function(o){r._dialogsContentObserver.disconnect(),r._dialogsContentObserver.observe(o,{childList:!0})})),this._haDialogElements=(function(o,l){return[W.HA_MORE_INFO_DIALOG,W.HA_DIALOG,W.HA_DIALOG_CONTENT,l].reduce((function(u,c){return u[c]=o[c],u}),{})})(s,n);var a=((i={})[W.HA_MORE_INFO_DIALOG_INFO]=st.ON_MORE_INFO_DIALOG_OPEN,i[W.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]=st.ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN,i[W.HA_DIALOG_MORE_INFO_SETTINGS]=st.ON_SETTINGS_DIALOG_OPEN,i);this._dispatchEvent(a[n],this._haDialogElements)},e.prototype._updateRootElements=function(){var n=this;this._homeAssistantRootTree=Fn(this._config,sc),this._haRootElements=xi(Me,this._homeAssistantRootTree),this._haRootElements[Me.HOME_ASSISTANT].selector.$.element.then((function(i){n._dialogsObserver.disconnect(),n._dialogsObserver.observe(i,{childList:!0})})),this._haRootElements[Me.PARTIAL_PANEL_RESOLVER].element.then((function(i){n._panelResolverObserver.disconnect(),i&&n._panelResolverObserver.observe(i,{subtree:!0,childList:!0})})),this._dispatchEvent(st.ON_LISTEN,this._haRootElements),this._dispatchEvent(st.ON_PANEL_LOAD,this._haRootElements)},e.prototype._updateLovelaceElements=function(){var n=this;this._homeAssistantResolverTree=Fn(this._config,ac,this._haRootElements[Me.HA_DRAWER].element),this._haResolverElements=xi(At,this._homeAssistantResolverTree),this._haResolverElements[At.HA_PANEL_LOVELACE].element.then((function(i){n._lovelaceObserver.disconnect(),i&&(n._lovelaceObserver.observe(i.shadowRoot,{childList:!0}),n._dispatchEvent(st.ON_LOVELACE_PANEL_LOAD,it(it({},n._haRootElements),n._haResolverElements)))}))},e.prototype._watchDialogs=function(n){var i=this;n.forEach((function(r){r.addedNodes.forEach((function(s){s.localName===F.HA_MORE_INFO_DIALOG&&i._updateDialogElements()}))}))},e.prototype._watchDialogsContent=function(n){var i=this;n.forEach((function(r){r.addedNodes.forEach((function(s){var a,o=((a={})[F.HA_MORE_INFO_DIALOG_INFO]=W.HA_MORE_INFO_DIALOG_INFO,a[F.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]=W.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK,a[F.HA_DIALOG_MORE_INFO_SETTINGS]=W.HA_DIALOG_MORE_INFO_SETTINGS,a);if(s.localName&&s.localName in o){var l=s.localName;i._updateDialogElements(o[l])}}))}))},e.prototype._watchDashboards=function(n){var i=this;n.forEach((function(r){r.addedNodes.forEach((function(s){i._dispatchEvent(st.ON_PANEL_LOAD,i._haRootElements),s.localName===F.HA_PANEL_LOVELACE&&i._updateLovelaceElements()}))}))},e.prototype._watchLovelace=function(n){var i=this;n.forEach((function(r){r.addedNodes.forEach((function(s){s.localName===F.HUI_ROOT&&i._updateLovelaceElements()}))}))},e.prototype.listen=function(){this._watchDialogsBinded=this._watchDialogs.bind(this),this._watchDialogsContentBinded=this._watchDialogsContent.bind(this),this._watchDashboardsBinded=this._watchDashboards.bind(this),this._watchLovelaceBinded=this._watchLovelace.bind(this),this._dialogsObserver=new MutationObserver(this._watchDialogsBinded),this._dialogsContentObserver=new MutationObserver(this._watchDialogsContentBinded),this._panelResolverObserver=new MutationObserver(this._watchDashboardsBinded),this._lovelaceObserver=new MutationObserver(this._watchLovelaceBinded),this._updateRootElements(),this._updateLovelaceElements()},e.prototype.addEventListener=function(n,i,r){t.prototype.addEventListener.call(this,n,i,r)},e})(lc);const Sa=new cc;let Rr={};Sa.addEventListener("onLovelacePanelLoad",({detail:t})=>{t.HUI_ROOT.element.then(e=>{const n=e==null?void 0:e.lovelace;n!=null&&n.config&&(Rr=n.config["expander-card"]||{})}).catch(()=>{Rr={}}).finally(()=>{document.body.dispatchEvent(new CustomEvent("expander-card-raw-config-updated",{detail:{rawConfig:Rr},bubbles:!0,composed:!0}))})}),Sa.listen();const uc=()=>Rr,xa=t=>t?typeof t=="string"?t:Object.entries(t).map(([e,n])=>{if(!Array.isArray(n))return null;const i=n.map(r=>{if(typeof r=="string")return`  ${r};`;const[s,a]=Object.entries(r)[0];return`  ${s}: ${a};`}).join(`
`);return`${e} {
${i}
}`}).filter(e=>e!==null).join(`
`):null,Ti={gap:"0.0em","expanded-gap":"0.6em",padding:"1em",clear:!1,"clear-children":!1,title:" ","overlay-margin":"0.0em","child-padding":"0.0em","child-margin-top":"0.0em","button-background":"transparent","expander-card-background":"var(--ha-card-background,var(--card-background-color,#fff))","header-color":"var(--primary-text-color,#fff)","arrow-color":"var(--arrow-color,var(--primary-text-color,#fff))","expander-card-display":"block","title-card-clickable":!1,"min-width-expanded":0,"max-width-expanded":0,icon:"mdi:chevron-down","icon-rotate-degree":"180deg",animation:!0,haptic:"light"};var dc=rt("<ha-ripple></ha-ripple>",2),fc=rt('<button aria-label="Toggle button"><ha-icon></ha-icon> <!></button>',2),hc=rt("<ha-ripple></ha-ripple>",2),pc=rt('<div id="id1"><div id="id2"><!></div> <!> <!></div>'),vc=rt("<button><div> </div> <ha-icon></ha-icon> <ha-ripple></ha-ripple></button>",2),_c=rt("<div><div></div></div>"),gc=rt("<ha-card><!> <!> <!></ha-card>",2);const mc={hash:"svelte-1jqiztq",code:`.expander-card.svelte-1jqiztq {display:var(--expander-card-display,block);gap:var(--gap);padding:var(--padding);background:var(--card-background,#fff);-webkit-tap-highlight-color:transparent;}.expander-card.animation.svelte-1jqiztq {transition:gap 0.35s ease, background-color var(--background-animation-duration, 0) ease;}.children-wrapper.svelte-1jqiztq {display:flex;flex-direction:column;}.children-wrapper.animation.opening.svelte-1jqiztq,
    .children-wrapper.animation.closing.svelte-1jqiztq {overflow:hidden;}.children-container.animation.svelte-1jqiztq {transition:padding 0.35s ease, gap 0.35s ease;}.children-container.svelte-1jqiztq {padding:var(--child-padding);display:var(--expander-card-display,block);gap:var(--gap);}.clear.svelte-1jqiztq {background:none !important;background-color:transparent !important;border-style:none !important;box-shadow:none !important;}.title-card-header.svelte-1jqiztq {display:flex;align-items:center;justify-content:space-between;flex-direction:row;position:relative;}.title-card-header.clickable.svelte-1jqiztq {cursor:pointer;border-style:none;border-radius:var(--ha-card-border-radius, var(--ha-border-radius-lg));}.title-card-header-overlay.svelte-1jqiztq {display:block;}.title-card-container.svelte-1jqiztq {width:100%;padding:var(--title-padding);}.header.svelte-1jqiztq {display:flex;flex-direction:row;align-items:center;padding:0.85em 0.85em;background:var(--button-background);border-style:none;border-radius:var(--ha-card-border-radius, var(--ha-border-radius-lg));width:var(--header-width,auto);color:var(--header-color,#fff);cursor:pointer;position:relative;font-family:var(--ha-font-family-body);font-size:var(--ha-font-size-m);}.header-overlay.svelte-1jqiztq {position:absolute;top:0;right:0;margin:var(--overlay-margin);height:var(--expander-card-overlay-height, auto);z-index:1;}.title-card-header-overlay.clickable.svelte-1jqiztq  > .header-overlay:where(.svelte-1jqiztq) {width:calc(100% - var(--overlay-margin) * 2);justify-content:flex-end;}.title-card-header-overlay.clickable.svelte-1jqiztq > .title-card-container:where(.svelte-1jqiztq) {width:calc(100% - var(--overlay-margin) * 2);}.title.svelte-1jqiztq {width:100%;text-align:left;}.ico.animation.svelte-1jqiztq {transition-property:transform;transition-duration:0.35s;}.ico.svelte-1jqiztq {color:var(--arrow-color,var(--primary-text-color,#fff));}.flipped.svelte-1jqiztq {transform:rotate(var(--icon-rotate-degree,180deg));}`};function Ta(t,e){Kr(e,!0),Zs(t,mc);const n=Pe(e,"hass"),i=Pe(e,"preview"),r=Pe(e,"config",7,Ti);let s=j(!1),a=j(null),o=j(tt(!!Le(()=>i()))),l=j(tt(!!Le(()=>i()))),u=j(!0),c=j("idle"),f=j(null),_=j(0),w=j(0),b=j(null),O=j(null),d=j(null),v=j(null);const m={},y={},S={},x=j(tt({}));let C=j(tt(uc()));const P=In(()=>{const g=h(x).style,E=r().style;let $=null;return g!==void 0?$=typeof g=="string"?g:typeof g=="object"&&g!==null?xa(g):String(g):E&&($=xa(E)),$?`<style>${$}</style>`:null}),U=In(()=>h(x).icon!==void 0?String(h(x).icon):r().icon),q=In(()=>h(x).title!==void 0?String(h(x).title):r().title),Fr=In(()=>h(x)["arrow-color"]!==void 0?String(h(x)["arrow-color"]):r()["arrow-color"]),er=Le(()=>r()["storage-id"]),Ya="expander-open-"+er;A(u,Le(()=>i()||(ji(r()["show-button-users"])??!0)),!0),hn(()=>{if(h(x).expanded===void 0||Le(()=>i()&&h(C)["preview-expanded"]!==!1))return;const g=!!h(x).expanded;queueMicrotask(()=>{g!==h(o)&&nn(g)})}),hn(()=>{if(!(i()===h(l)||i()===void 0)){if(A(l,i(),!0),h(l)&&h(C)["preview-expanded"]!==!1){tr(!0),A(u,!0);return}if(A(u,ji(r()["show-button-users"])??!0,!0),qr("expanded")){const g=Le(()=>h(x).expanded);g!==void 0&&nn(!!g);return}Ja()}});function qr(g){const E=r().templates&&Array.isArray(r().templates)?r().templates.find($=>$.template===g):void 0;if(E&&xr(E.value_template))return E}function Hi(g){if(!r()["expander-card-id"])return;const E={};E[r()["expander-card-id"]]={property:"open",value:g},document.dispatchEvent(new CustomEvent("expander-card",{detail:E,bubbles:!0,composed:!0}))}function ji(g){var E,$,ee,je;if(g!==void 0)return(($=(E=n())==null?void 0:E.user)==null?void 0:$.name)!==void 0&&g.includes((je=(ee=n())==null?void 0:ee.user)==null?void 0:je.name)}function Ja(){if(!qr("expanded")){if(ji(r()["start-expanded-users"])){Ct(!0);return}if(er===void 0){Ka();return}try{const g=localStorage.getItem(Ya);if(g===null){Ka();return}const E=g?g==="true":h(o);Ct(E)}catch(g){console.error(g),Ct(!1)}}}function Ka(){if(r().expanded!==void 0){Ct(r().expanded);return}Ct(!1)}function nn(g){h(f)&&(clearTimeout(h(f)),A(f,null));const E=g!==void 0?g:!h(o);if(!r().animation){Ct(E);return}if(Hi(E),A(c,E?"opening":"closing",!0),E){tr(!0),A(f,setTimeout(()=>{A(c,"idle"),A(f,null)},350),!0);return}A(f,setTimeout(()=>{tr(!1),A(c,"idle"),A(f,null)},350),!0)}function Ct(g){tr(g),Hi(g)}function tr(g){if(A(o,g,!0),!i()&&er!==void 0)try{localStorage.setItem(Ya,h(o)?"true":"false")}catch(E){console.error(E)}h(o)&&h(_)===0&&A(_,.35)}function Qa(g){var $;const E=($=g.detail)==null?void 0:$.rawConfig;E&&JSON.stringify(E)!==JSON.stringify(h(C))&&A(C,E,!0)}function Xa(g){var $,ee;const E=(ee=($=g.detail)==null?void 0:$["expander-card"])==null?void 0:ee.data;if(E!=null&&E["expander-card-id"]&&E["expander-card-id"]===r()["expander-card-id"]){if(E.action==="open"&&!h(o)){nn(!0);return}if(E.action==="close"&&h(o)){nn(!1);return}E.action==="toggle"&&nn()}}function Xc(){document.body.removeEventListener("ll-custom",Xa),document.body.removeEventListener("expander-card-raw-config-updated",Qa),Object.entries(S).forEach(([g,E])=>{E.then($=>{$(),delete S[g]}).catch(()=>{})}),Object.entries(y).forEach(([g,E])=>{E.then($=>{$(),delete y[g]}).catch(()=>{})}),Object.entries(m).forEach(([g,E])=>{E(),delete m[g]})}const Za=g=>{r().haptic&&r().haptic!=="none"&&zl(g,r().haptic)};let nr,rr=!1,eo=0,to=0;const Zc=g=>{h(v)&&(h(v).disabled=!0),nr=g.target,eo=g.touches[0].clientX,to=g.touches[0].clientY,rr=!1},eu=g=>{const E=g.touches[0].clientX,$=g.touches[0].clientY;rr=Math.abs(E-eo)>10||Math.abs($-to)>10},tu=()=>{h(v)&&(h(v).disabled=!1),nr=void 0,rr=!1},nu=()=>{h(v)&&(h(v).disabled=!1)},ru=g=>{!rr&&nr===g.target&&r()["title-card-clickable"]&&(Za(nr),nn(),A(s,!0),A(a,window.setTimeout(()=>{A(s,!1),A(a,null)},100),!0),h(v)&&(h(v).startPressAnimation(),h(v).endPressAnimation())),nr=void 0,rr=!1},iu=g=>{for(const E of Object.values(r().variables??{}))xr(E.value_template)?y[E.variable]=ua(g,$=>{da(g,E.variable,$)},E.value_template,{config:r()}):da(g,E.variable,E.value_template)},su=g=>{m["expander-card"]=Ql(g,"expander-card")},au=()=>{if(!r().templates)return;const g=Object.values(r().variables||{}).reduce(($,ee)=>($[ee.variable]=void 0,$),{}),E=Jl({config:r(),expanderCard:{}},g);iu(E),su(E),Object.values(r().templates||{}).forEach($=>{xr($.value_template)?S[$.template]=ua(E,ee=>{h(x)[$.template]=ee},$.value_template,{config:r()}):h(x)[$.template]=$.value_template})};function ou(){if(qr("expanded"))return;const g=r()["min-width-expanded"],E=r()["max-width-expanded"],$=document.body.offsetWidth;if(g&&E){r().expanded=$>=g&&$<=E;return}if(g){r().expanded=$>=g;return}E&&(r().expanded=$<=E)}function lu(){if(i()&&h(C)["preview-expanded"]!==!1){tr(!0);return}if(qr("expanded")){const g=Le(()=>h(x).expanded);Ct(g!==void 0?!!g:!1)}else Ja()}function cu(){if(r()["title-card-clickable"]&&!r()["title-card-button-overlay"]&&h(O))return h(O);if(h(d))return h(d)}Qs(()=>{au(),Hi(!1),ou(),lu(),document.body.addEventListener("ll-custom",Xa),document.body.addEventListener("expander-card-raw-config-updated",Qa);const g=cu();return g&&(g.addEventListener("touchstart",Zc,{passive:!0,capture:!0}),g.addEventListener("touchmove",eu,{passive:!0,capture:!0}),g.addEventListener("touchcancel",tu,{passive:!0,capture:!0}),g.addEventListener("touchend",nu,{passive:!0,capture:!0}),g.addEventListener("touchend",ru,{passive:!1,capture:!1})),r()["title-card-clickable"]&&r()["title-card-button-overlay"]&&h(O)&&new ResizeObserver(()=>{if(h(d)&&h(O)&&h(b)){const $=h(O).getBoundingClientRect();A(w,$.height-parseFloat(getComputedStyle(h(d)).marginTop)-parseFloat(getComputedStyle(h(d)).marginBottom)+parseFloat(getComputedStyle(h(b)).paddingTop)+parseFloat(getComputedStyle(h(b)).paddingBottom))}}).observe(h(O)),Xc});const Fi=g=>{if(!h(s)){Za(g.currentTarget),nn();return}return g.preventDefault(),g.stopImmediatePropagation(),A(s,!1),h(a)&&(clearTimeout(h(a)),A(a,null)),!1};var uu={get hass(){return n()},set hass(g){n(g),ye()},get preview(){return i()},set preview(g){i(g),ye()},get config(){return r()},set config(g=Ti){r(g),ye()}},xn=gc(),no=ht(xn);{var du=g=>{var E=pc();E.__click=function(...re){var ce;(ce=r()["title-card-clickable"]&&!r()["title-card-button-overlay"]?Fi:null)==null||ce.apply(this,re)};var $=ht(E),ee=ht($);fi(ee,{get hass(){return n()},get preview(){return i()},get config(){return r()["title-card"]},animation:!1,open:!0,animationState:"idle",get clearCardCss(){return r()["clear-children"]}}),Ze($);var je=Ht($,2);{var Fe=re=>{var ce=fc();ce.__click=function(...rn){var ir;(ir=!r()["title-card-clickable"]||r()["title-card-button-overlay"]?Fi:null)==null||ir.apply(this,rn)};var Ye=ht(ce);nt(()=>ta(Ye,"icon",h(U)));var _u=Ht(Ye,2);{var gu=rn=>{var ir=dc();yt(ir,mu=>A(v,mu),()=>h(v)),Ae(rn,ir)};_t(_u,rn=>{(!r()["title-card-clickable"]||r()["title-card-button-overlay"])&&rn(gu)})}Ze(ce),yt(ce,rn=>A(d,rn),()=>h(d)),nt(()=>{mt(ce,`--overlay-margin:${r()["overlay-margin"]??""}; --button-background:${r()["button-background"]??""}; --header-color:${r()["header-color"]??""};`),ke(ce,1,`header ${r()["title-card-button-overlay"]?" header-overlay":""}${h(o)?" open":" close"}${r().animation?" animation "+h(c):""}`,"svelte-1jqiztq"),mt(Ye,`--arrow-color:${h(Fr)??""}`),ke(Ye,1,`ico${h(o)&&h(c)!=="closing"?" flipped open":" close"}${r().animation?" animation "+h(c):""}`,"svelte-1jqiztq")}),Ae(re,ce)};_t(je,re=>{h(u)&&re(Fe)})}var Tn=Ht(je,2);{var qi=re=>{var ce=hc();yt(ce,Ye=>A(v,Ye),()=>h(v)),Ae(re,ce)};_t(Tn,re=>{r()["title-card-clickable"]&&!r()["title-card-button-overlay"]&&re(qi)})}Ze(E),yt(E,re=>A(O,re),()=>h(O)),nt(()=>{ke(E,1,`title-card-header${r()["title-card-button-overlay"]?"-overlay":""}${h(o)?" open":" close"}${r().animation?" animation "+h(c):""}${r()["title-card-clickable"]?" clickable":""}`,"svelte-1jqiztq"),ea(E,"role",r()["title-card-clickable"]&&!r()["title-card-button-overlay"]?"button":void 0),ke($,1,`title-card-container${h(o)?" open":" close"}${r().animation?" animation "+h(c):""}`,"svelte-1jqiztq"),mt($,`--title-padding:${(r()["title-card-padding"]?r()["title-card-padding"]:"0px")??""};`)}),Ae(g,E)},fu=g=>{var E=Ys(),$=$s(E);{var ee=je=>{var Fe=vc();Fe.__click=Fi;var Tn=ht(Fe),qi=ht(Tn,!0);Ze(Tn);var re=Ht(Tn,2);nt(()=>ta(re,"icon",h(U)));var ce=Ht(re,2);yt(ce,Ye=>A(v,Ye),()=>h(v)),Ze(Fe),yt(Fe,Ye=>A(d,Ye),()=>h(d)),nt(()=>{ke(Fe,1,`header${h(o)?" open":" close"}${r().animation?" animation "+h(c):""}`,"svelte-1jqiztq"),mt(Fe,`--header-width:100%; --button-background:${r()["button-background"]??""};--header-color:${r()["header-color"]??""};`),ke(Tn,1,`primary title${h(o)?" open":" close"}`,"svelte-1jqiztq"),$l(qi,h(q)),mt(re,`--arrow-color:${h(Fr)??""}`),ke(re,1,`ico${h(o)&&h(c)!=="closing"?" flipped open":" close"}${r().animation?" animation "+h(c):""}`,"svelte-1jqiztq")}),Ae(je,Fe)};_t($,je=>{h(u)&&je(ee)})}Ae(g,E)};_t(no,g=>{r()["title-card"]?g(du):g(fu,!1)})}var ro=Ht(no,2);{var hu=g=>{var E=_c(),$=ht(E);Tl($,20,()=>r().cards,ee=>ee,(ee,je)=>{{let Fe=In(()=>h(o)&&i());fi(ee,{get hass(){return n()},get preview(){return h(Fe)},get config(){return je},get marginTop(){return r()["child-margin-top"]},get open(){return h(o)},get animation(){return r().animation},get animationState(){return h(c)},get clearCardCss(){return r()["clear-children"]}})}}),Ze($),Ze(E),nt(()=>{ke(E,1,`children-wrapper ${r().animation?"animation "+h(c):""}${h(o)?" open":" close"}`,"svelte-1jqiztq"),mt($,`--expander-card-display:${r()["expander-card-display"]??""};
                --gap:${(h(o)&&h(c)!=="closing"?r()["expanded-gap"]:r().gap)??""};
                --child-padding:${(h(o)&&h(c)!=="closing"?r()["child-padding"]:"0px")??""};`),ke($,1,`children-container${h(o)?" open":" close"}${r().animation?" animation "+h(c):""}`,"svelte-1jqiztq")}),Ae(g,E)};_t(ro,g=>{r().cards&&g(hu)})}var pu=Ht(ro,2);{var vu=g=>{var E=Ys(),$=$s(E);Rl($,()=>h(P)),Ae(g,E)};_t(pu,g=>{h(P)&&g(vu)})}return Ze(xn),yt(xn,g=>A(b,g),()=>h(b)),nt(()=>{ke(xn,1,`expander-card${r().clear?" clear":""}${h(o)?" open":" close"} ${h(c)}${r().animation?" animation "+h(c):""}`,"svelte-1jqiztq"),mt(xn,`--expander-card-display:${r()["expander-card-display"]??""};
     --gap:${(h(o)&&h(c)!=="closing"?r()["expanded-gap"]:r().gap)??""}; --padding:${r().padding??""};
     --expander-state:${h(o)??""};
     --icon-rotate-degree:${r()["icon-rotate-degree"]??""};
     --card-background:${(h(o)&&h(c)!=="closing"&&r()["expander-card-background-expanded"]?r()["expander-card-background-expanded"]:r()["expander-card-background"])??""};
     --background-animation-duration:${h(_)??""}s;
     --expander-card-overlay-height:${h(w)?`${h(w)}px`:"auto"};
    `)}),Ae(t,xn),Qr(uu)}bl(["click"]),customElements.define("expander-card",sa(Ta,{hass:{},preview:{},config:{}},[],[],!0,t=>class extends t{constructor(){super(...arguments);G(this,"config")}static async getConfigElement(){return await Eo(),document.createElement("expander-card-editor")}static getStubConfig(){return{type:"custom:expander-card",title:"Expander Card",cards:[]}}setConfig(n={}){this.config={...Ti,...n}}}));const yc="5.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ir=globalThis,Ni=Ir.ShadowRoot&&(Ir.ShadyCSS===void 0||Ir.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ci=Symbol(),Na=new WeakMap;let Ca=class{constructor(e,n,i){if(this._$cssResult$=!0,i!==Ci)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Ni&&e===void 0){const i=n!==void 0&&n.length===1;i&&(e=Na.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&Na.set(n,e))}return e}toString(){return this.cssText}};const bc=t=>new Ca(typeof t=="string"?t:t+"",void 0,Ci),Ri=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((i,r,s)=>i+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+t[s+1],t[0]);return new Ca(n,t,Ci)},wc=(t,e)=>{if(Ni)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const i=document.createElement("style"),r=Ir.litNonce;r!==void 0&&i.setAttribute("nonce",r),i.textContent=n.cssText,t.appendChild(i)}},Ra=Ni?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const i of e.cssRules)n+=i.cssText;return bc(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Ec,defineProperty:$c,getOwnPropertyDescriptor:Ac,getOwnPropertyNames:Oc,getOwnPropertySymbols:Sc,getPrototypeOf:xc}=Object,St=globalThis,Ia=St.trustedTypes,Tc=Ia?Ia.emptyScript:"",Ii=St.reactiveElementPolyfillSupport,qn=(t,e)=>t,Lr={toAttribute(t,e){switch(e){case Boolean:t=t?Tc:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Li=(t,e)=>!Ec(t,e),La={attribute:!0,type:String,converter:Lr,reflect:!1,useDefault:!1,hasChanged:Li};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),St.litPropertyMetadata??(St.litPropertyMetadata=new WeakMap);let gn=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=La){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const i=Symbol(),r=this.getPropertyDescriptor(e,i,n);r!==void 0&&$c(this.prototype,e,r)}}static getPropertyDescriptor(e,n,i){const{get:r,set:s}=Ac(this.prototype,e)??{get(){return this[n]},set(a){this[n]=a}};return{get:r,set(a){const o=r==null?void 0:r.call(this);s==null||s.call(this,a),this.requestUpdate(e,o,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??La}static _$Ei(){if(this.hasOwnProperty(qn("elementProperties")))return;const e=xc(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(qn("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(qn("properties"))){const n=this.properties,i=[...Oc(n),...Sc(n)];for(const r of i)this.createProperty(r,n[r])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[i,r]of n)this.elementProperties.set(i,r)}this._$Eh=new Map;for(const[n,i]of this.elementProperties){const r=this._$Eu(n,i);r!==void 0&&this._$Eh.set(r,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const r of i)n.unshift(Ra(r))}else e!==void 0&&n.push(Ra(e));return n}static _$Eu(e,n){const i=n.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const i of n.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return wc(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var i;return(i=n.hostConnected)==null?void 0:i.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var i;return(i=n.hostDisconnected)==null?void 0:i.call(n)})}attributeChangedCallback(e,n,i){this._$AK(e,i)}_$ET(e,n){var s;const i=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,i);if(r!==void 0&&i.reflect===!0){const a=(((s=i.converter)==null?void 0:s.toAttribute)!==void 0?i.converter:Lr).toAttribute(n,i.type);this._$Em=e,a==null?this.removeAttribute(r):this.setAttribute(r,a),this._$Em=null}}_$AK(e,n){var s,a;const i=this.constructor,r=i._$Eh.get(e);if(r!==void 0&&this._$Em!==r){const o=i.getPropertyOptions(r),l=typeof o.converter=="function"?{fromAttribute:o.converter}:((s=o.converter)==null?void 0:s.fromAttribute)!==void 0?o.converter:Lr;this._$Em=r;const u=l.fromAttribute(n,o.type);this[r]=u??((a=this._$Ej)==null?void 0:a.get(r))??u,this._$Em=null}}requestUpdate(e,n,i,r=!1,s){var a;if(e!==void 0){const o=this.constructor;if(r===!1&&(s=this[e]),i??(i=o.getPropertyOptions(e)),!((i.hasChanged??Li)(s,n)||i.useDefault&&i.reflect&&s===((a=this._$Ej)==null?void 0:a.get(e))&&!this.hasAttribute(o._$Eu(e,i))))return;this.C(e,n,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:i,reflect:r,wrapped:s},a){i&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,a??n??this[e]),s!==!0||a!==void 0)||(this._$AL.has(e)||(this.hasUpdated||i||(n=void 0),this._$AL.set(e,n)),r===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,a]of this._$Ep)this[s]=a;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[s,a]of r){const{wrapped:o}=a,l=this[s];o!==!0||this._$AL.has(s)||l===void 0||this.C(s,void 0,a,l)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(i=this._$EO)==null||i.forEach(r=>{var s;return(s=r.hostUpdate)==null?void 0:s.call(r)}),this.update(n)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(i=>{var r;return(r=i.hostUpdated)==null?void 0:r.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};gn.elementStyles=[],gn.shadowRootOptions={mode:"open"},gn[qn("elementProperties")]=new Map,gn[qn("finalized")]=new Map,Ii==null||Ii({ReactiveElement:gn}),(St.reactiveElementVersions??(St.reactiveElementVersions=[])).push("2.1.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Un=globalThis,ka=t=>t,kr=Un.trustedTypes,Pa=kr?kr.createPolicy("lit-html",{createHTML:t=>t}):void 0,Da="$lit$",xt=`lit$${Math.random().toFixed(9).slice(2)}$`,Ma="?"+xt,Nc=`<${Ma}>`,Vt=document,Gn=()=>Vt.createComment(""),zn=t=>t===null||typeof t!="object"&&typeof t!="function",ki=Array.isArray,Cc=t=>ki(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Pi=`[ 	
\f\r]`,Bn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ha=/-->/g,ja=/>/g,Wt=RegExp(`>|${Pi}(?:([^\\s"'>=/]+)(${Pi}*=${Pi}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Fa=/'/g,qa=/"/g,Ua=/^(?:script|style|textarea|title)$/i,Rc=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),mn=Rc(1),yn=Symbol.for("lit-noChange"),z=Symbol.for("lit-nothing"),Ga=new WeakMap,Yt=Vt.createTreeWalker(Vt,129);function za(t,e){if(!ki(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Pa!==void 0?Pa.createHTML(e):e}const Ic=(t,e)=>{const n=t.length-1,i=[];let r,s=e===2?"<svg>":e===3?"<math>":"",a=Bn;for(let o=0;o<n;o++){const l=t[o];let u,c,f=-1,_=0;for(;_<l.length&&(a.lastIndex=_,c=a.exec(l),c!==null);)_=a.lastIndex,a===Bn?c[1]==="!--"?a=Ha:c[1]!==void 0?a=ja:c[2]!==void 0?(Ua.test(c[2])&&(r=RegExp("</"+c[2],"g")),a=Wt):c[3]!==void 0&&(a=Wt):a===Wt?c[0]===">"?(a=r??Bn,f=-1):c[1]===void 0?f=-2:(f=a.lastIndex-c[2].length,u=c[1],a=c[3]===void 0?Wt:c[3]==='"'?qa:Fa):a===qa||a===Fa?a=Wt:a===Ha||a===ja?a=Bn:(a=Wt,r=void 0);const w=a===Wt&&t[o+1].startsWith("/>")?" ":"";s+=a===Bn?l+Nc:f>=0?(i.push(u),l.slice(0,f)+Da+l.slice(f)+xt+w):l+xt+(f===-2?o:w)}return[za(t,s+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};class Vn{constructor({strings:e,_$litType$:n},i){let r;this.parts=[];let s=0,a=0;const o=e.length-1,l=this.parts,[u,c]=Ic(e,n);if(this.el=Vn.createElement(u,i),Yt.currentNode=this.el.content,n===2||n===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(r=Yt.nextNode())!==null&&l.length<o;){if(r.nodeType===1){if(r.hasAttributes())for(const f of r.getAttributeNames())if(f.endsWith(Da)){const _=c[a++],w=r.getAttribute(f).split(xt),b=/([.?@])?(.*)/.exec(_);l.push({type:1,index:s,name:b[2],strings:w,ctor:b[1]==="."?kc:b[1]==="?"?Pc:b[1]==="@"?Dc:Pr}),r.removeAttribute(f)}else f.startsWith(xt)&&(l.push({type:6,index:s}),r.removeAttribute(f));if(Ua.test(r.tagName)){const f=r.textContent.split(xt),_=f.length-1;if(_>0){r.textContent=kr?kr.emptyScript:"";for(let w=0;w<_;w++)r.append(f[w],Gn()),Yt.nextNode(),l.push({type:2,index:++s});r.append(f[_],Gn())}}}else if(r.nodeType===8)if(r.data===Ma)l.push({type:2,index:s});else{let f=-1;for(;(f=r.data.indexOf(xt,f+1))!==-1;)l.push({type:7,index:s}),f+=xt.length-1}s++}}static createElement(e,n){const i=Vt.createElement("template");return i.innerHTML=e,i}}function bn(t,e,n=t,i){var a,o;if(e===yn)return e;let r=i!==void 0?(a=n._$Co)==null?void 0:a[i]:n._$Cl;const s=zn(e)?void 0:e._$litDirective$;return(r==null?void 0:r.constructor)!==s&&((o=r==null?void 0:r._$AO)==null||o.call(r,!1),s===void 0?r=void 0:(r=new s(t),r._$AT(t,n,i)),i!==void 0?(n._$Co??(n._$Co=[]))[i]=r:n._$Cl=r),r!==void 0&&(e=bn(t,r._$AS(t,e.values),r,i)),e}class Lc{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:i}=this._$AD,r=((e==null?void 0:e.creationScope)??Vt).importNode(n,!0);Yt.currentNode=r;let s=Yt.nextNode(),a=0,o=0,l=i[0];for(;l!==void 0;){if(a===l.index){let u;l.type===2?u=new Wn(s,s.nextSibling,this,e):l.type===1?u=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(u=new Mc(s,this,e)),this._$AV.push(u),l=i[++o]}a!==(l==null?void 0:l.index)&&(s=Yt.nextNode(),a++)}return Yt.currentNode=Vt,r}p(e){let n=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,n),n+=i.strings.length-2):i._$AI(e[n])),n++}}class Wn{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,i,r){this.type=2,this._$AH=z,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=i,this.options=r,this._$Cv=(r==null?void 0:r.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=bn(this,e,n),zn(e)?e===z||e==null||e===""?(this._$AH!==z&&this._$AR(),this._$AH=z):e!==this._$AH&&e!==yn&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Cc(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==z&&zn(this._$AH)?this._$AA.nextSibling.data=e:this.T(Vt.createTextNode(e)),this._$AH=e}$(e){var s;const{values:n,_$litType$:i}=e,r=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Vn.createElement(za(i.h,i.h[0]),this.options)),i);if(((s=this._$AH)==null?void 0:s._$AD)===r)this._$AH.p(n);else{const a=new Lc(r,this),o=a.u(this.options);a.p(n),this.T(o),this._$AH=a}}_$AC(e){let n=Ga.get(e.strings);return n===void 0&&Ga.set(e.strings,n=new Vn(e)),n}k(e){ki(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let i,r=0;for(const s of e)r===n.length?n.push(i=new Wn(this.O(Gn()),this.O(Gn()),this,this.options)):i=n[r],i._$AI(s),r++;r<n.length&&(this._$AR(i&&i._$AB.nextSibling,r),n.length=r)}_$AR(e=this._$AA.nextSibling,n){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,n);e!==this._$AB;){const r=ka(e).nextSibling;ka(e).remove(),e=r}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class Pr{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,i,r,s){this.type=1,this._$AH=z,this._$AN=void 0,this.element=e,this.name=n,this._$AM=r,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=z}_$AI(e,n=this,i,r){const s=this.strings;let a=!1;if(s===void 0)e=bn(this,e,n,0),a=!zn(e)||e!==this._$AH&&e!==yn,a&&(this._$AH=e);else{const o=e;let l,u;for(e=s[0],l=0;l<s.length-1;l++)u=bn(this,o[i+l],n,l),u===yn&&(u=this._$AH[l]),a||(a=!zn(u)||u!==this._$AH[l]),u===z?e=z:e!==z&&(e+=(u??"")+s[l+1]),this._$AH[l]=u}a&&!r&&this.j(e)}j(e){e===z?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class kc extends Pr{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===z?void 0:e}}class Pc extends Pr{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==z)}}class Dc extends Pr{constructor(e,n,i,r,s){super(e,n,i,r,s),this.type=5}_$AI(e,n=this){if((e=bn(this,e,n,0)??z)===yn)return;const i=this._$AH,r=e===z&&i!==z||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,s=e!==z&&(i===z||r);r&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class Mc{constructor(e,n,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){bn(this,e)}}const Di=Un.litHtmlPolyfillSupport;Di==null||Di(Vn,Wn),(Un.litHtmlVersions??(Un.litHtmlVersions=[])).push("3.3.2");const Hc=(t,e,n)=>{const i=(n==null?void 0:n.renderBefore)??e;let r=i._$litPart$;if(r===void 0){const s=(n==null?void 0:n.renderBefore)??null;i._$litPart$=r=new Wn(e.insertBefore(Gn(),s),s,void 0,n??{})}return r._$AI(t),r};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Jt=globalThis;class Yn extends gn{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Hc(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return yn}}Yn._$litElement$=!0,Yn.finalized=!0,(Wa=Jt.litElementHydrateSupport)==null||Wa.call(Jt,{LitElement:Yn});const Mi=Jt.litElementPolyfillSupport;Mi==null||Mi({LitElement:Yn}),(Jt.litElementVersions??(Jt.litElementVersions=[])).push("4.2.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jc=t=>(e,n)=>{n!==void 0?n.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fc={attribute:!0,type:String,converter:Lr,reflect:!1,hasChanged:Li},qc=(t=Fc,e,n)=>{const{kind:i,metadata:r}=n;let s=globalThis.litPropertyMetadata.get(r);if(s===void 0&&globalThis.litPropertyMetadata.set(r,s=new Map),i==="setter"&&((t=Object.create(t)).wrapped=!0),s.set(n.name,t),i==="accessor"){const{name:a}=n;return{set(o){const l=e.get.call(this);e.set.call(this,o),this.requestUpdate(a,l,t,!0,o)},init(o){return o!==void 0&&this.C(a,void 0,t,o),o}}}if(i==="setter"){const{name:a}=n;return function(o){const l=this[a];e.call(this,o),this.requestUpdate(a,l,t,!0,o)}}throw Error("Unsupported decorator location: "+i)};function Dr(t){return(e,n)=>typeof n=="object"?qc(t,e,n):((i,r,s)=>{const a=r.hasOwnProperty(s);return r.constructor.createProperty(s,i),a?Object.getOwnPropertyDescriptor(r,s):void 0})(t,e,n)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Jn(t){return Dr({...t,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Uc=(t,e,n)=>(n.configurable=!0,n.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(t,e,n),n);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Gc(t,e){return(n,i,r)=>{const s=a=>{var o;return((o=a.renderRoot)==null?void 0:o.querySelector(t))??null};return Uc(n,i,{get(){return s(this)}})}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zc=t=>t??z,Bc=Ri`
  /* mwc-dialog (ha-dialog) styles */
  ha-dialog {
    --mdc-dialog-min-width: 400px;
    --mdc-dialog-max-width: 600px;
    --mdc-dialog-max-width: min(600px, 95vw);
    --justify-action-buttons: space-between;
    --dialog-container-padding: var(--safe-area-inset-top, 0)
      var(--safe-area-inset-right, 0) var(--safe-area-inset-bottom, 0)
      var(--safe-area-inset-left, 0);
    --dialog-surface-padding: 0px;
  }

  ha-dialog .form {
    color: var(--primary-text-color);
  }

  a {
    color: var(--primary-color);
  }

  /* make dialog fullscreen on small screens */
  @media all and (max-width: 450px), all and (max-height: 500px) {
    ha-dialog {
      --mdc-dialog-min-width: 100vw;
      --mdc-dialog-max-width: 100vw;
      --mdc-dialog-min-height: 100vh;
      --mdc-dialog-min-height: 100svh;
      --mdc-dialog-max-height: 100vh;
      --mdc-dialog-max-height: 100svh;
      --dialog-container-padding: 0px;
      --dialog-surface-padding: var(--safe-area-inset-top, 0)
        var(--safe-area-inset-right, 0) var(--safe-area-inset-bottom, 0)
        var(--safe-area-inset-left, 0);
      --vertical-align-dialog: flex-end;
      --ha-dialog-border-radius: var(--ha-border-radius-square);
    }
  }
  .error {
    color: var(--error-color);
  }
`,Vc=Ri`
  ha-dialog {
    /* Pin dialog to top so it doesn't jump when content changes size */
    --vertical-align-dialog: flex-start;
    --dialog-surface-margin-top: var(--ha-space-10);
    --mdc-dialog-max-height: calc(
      100vh - var(--dialog-surface-margin-top) - var(--ha-space-2) - var(
          --safe-area-inset-y,
          0px
        )
    );
    --mdc-dialog-max-height: calc(
      100svh - var(--dialog-surface-margin-top) - var(--ha-space-2) - var(
          --safe-area-inset-y,
          0px
        )
    );
  }

  @media all and (max-width: 450px), all and (max-height: 500px) {
    ha-dialog {
      /* When in fullscreen, dialog should be attached to top */
      --dialog-surface-margin-top: 0px;
      --mdc-dialog-min-height: 100vh;
      --mdc-dialog-min-height: 100svh;
      --mdc-dialog-max-height: 100vh;
      --mdc-dialog-max-height: 100svh;
    }
  }
`;var Wc=Object.defineProperty,Yc=Object.getOwnPropertyDescriptor,Ge=(t,e,n,i)=>{for(var r=i>1?void 0:i?Yc(e,n):e,s=t.length-1,a;s>=0;s--)(a=t[s])&&(r=(i?a(e,n,r):a(r))||r);return i&&r&&Wc(e,n,r),r};const Ba="custom:",Jc=t=>t.startsWith(Ba),Kc=t=>{var e;return(e=window.customCards)==null?void 0:e.find(n=>n.type===t)},Qc=t=>t.replace(Ba,"");let pe=class extends Yn{constructor(){super(...arguments),this.large=!1,this._config={},this._cardGUIMode=!0,this._cardGUIModeAvailable=!0,this._error=!1}async showDialog(t){this._params=t,this._config=t.config??{},this.lovelace=t.lovelace,this.large=!1}closeDialog(){return this._params=void 0,this._config={},this.dispatchEvent(new CustomEvent("dialog-closed",{detail:{dialog:this.localName}})),!0}_submit(){var t,e;(e=(t=this._params)==null?void 0:t.submit)==null||e.call(t,this._config),this.closeDialog()}_cancel(){var t,e;(e=(t=this._params)==null?void 0:t.cancel)==null||e.call(t),this.closeDialog()}_enlarge(){this.large=!this.large}_ignoreKeydown(t){t.stopPropagation()}render(){var n;if(!this._params||!this.hass)return z;const t=!this._config.type||this._error||void 0;let e=this._params.title??"";if(this._config.type){let i;Jc(this._config.type)?(i=(n=Kc(Qc(this._config.type)))==null?void 0:n.name,i!=null&&i.toLowerCase().endsWith(" card")&&(i=i.substring(0,i.length-5))):i=this.hass.localize(`ui.panel.lovelace.editor.card.${this._config.type}.name`),e=`${e} - ${this.hass.localize("ui.panel.lovelace.editor.edit_card.typed_header",{type:i})}`}return mn`
        <ha-dialog
            open
            scrimClickAction
            escapeKeyAction
            @keydown=${this._ignoreKeydown.bind(this)}
            @closed=${this._cancel.bind(this)}
            .heading=${e}
        >
            <ha-dialog-header slot="heading">
                <ha-icon-button
                    slot="navigationIcon"
                    dialogAction="cancel"
                    .label=${this.hass.localize("ui.common.close")}
                >
                    <ha-icon .icon=${"mdi:close"}></ha-icon>
                </ha-icon-button>
                <span slot="title" @click=${this._enlarge.bind(this)}>${e}</span>
            </ha-dialog-header>
            ${this._renderCardEditor()}
            <div slot="primaryAction" @click=${this._submit.bind(this)}>
                <ha-button
                    appearance="plain"
                    size="small"
                    @click=${this._cancel.bind(this)}
                    dialogInitialFocus
                >
                    ${this._params.cancelText||this.hass.localize("ui.common.cancel")}
                </ha-button>
                <ha-button
                    size="small"
                    @click=${this._submit.bind(this)} 
                    disabled=${zc(t)}
                >
                    ${this._params.submitText||this.hass.localize("ui.common.save")}
                </ha-button>
            </div>
        </ha-dialog>
        `}_toggleCardMode(){var t;(t=this._cardEditorEl)==null||t.toggleMode()}_deleteCard(){this._config={}}_cardConfigChanged(t){t.stopPropagation(),this._config={...t.detail.config},this._error=t.detail.error,this._cardGUIModeAvailable=t.detail.guiModeAvailable}_cardGUIModeChanged(t){t.stopPropagation(),this._cardGUIMode=t.detail.guiMode,this._cardGUIModeAvailable=t.detail.guiModeAvailable}_renderCardEditorActions(){if(!this._config.type)return z;const t=this.hass.localize(!this._cardEditorEl||this._cardGUIMode?"ui.panel.lovelace.editor.edit_card.show_code_editor":"ui.panel.lovelace.editor.edit_card.show_visual_editor");return mn`
            <div slot="secondaryAction">
                <ha-button
                appearance="plain"
                size="small"
                @click=${this._toggleCardMode.bind(this)}
                .disabled=${!this._cardGUIModeAvailable}
                >
                    ${t}
                </ha-button>
                <ha-button
                appearance="plain"
                size="small"
                @click=${this._deleteCard.bind(this)}
                >
                    Change card
                </ha-button>
            </div>
        `}_renderCardEditor(){const t=this._error?"blur":"",e=this._error?mn` <ha-spinner aria-label="Can't update card"></ha-spinner> `:"";return mn`
        ${this._config.type?mn`
            <div class="content">
                <div class="element-editor">
                    <hui-card-element-editor
                        .hass=${this.hass}
                        .lovelace=${this.lovelace}
                        .value=${this._config}
                        @config-changed=${this._cardConfigChanged.bind(this)}
                        @GUImode-changed=${this._cardGUIModeChanged.bind(this)}
                    ></hui-card-element-editor>
                </div>
                <div class="element-preview">
                    <hui-card
                        .hass=${this.hass}
                        .config=${this._config}
                        preview
                        class=${t}
                    ></hui-card>
                    ${e}
                </div>
            </div>
            ${this._renderCardEditorActions()}
            `:mn`
            <hui-card-picker
                .hass=${this.hass}
                .lovelace=${this.lovelace}
                @config-changed=${this._cardConfigChanged.bind(this)}
            ></hui-card-picker>
            `}
        `}};return pe.styles=[Bc,Vc,Ri`
            :host {
                --code-mirror-max-height: calc(100vh - 176px);
            }
            ha-dialog {
                --mdc-dialog-max-width: 100px;
                --dialog-z-index: 6;
                --mdc-dialog-max-width: 90vw;
                --dialog-content-padding: 24px 12px;
            }
            .content {
                width: calc(90vw - 48px);
                max-width: 1000px;
            }
            @media all and (max-width: 450px), all and (max-height: 500px) {
                /* overrule the ha-style-dialog max-height on small screens */
                ha-dialog {
                    height: 100%;
                    --mdc-dialog-max-height: 100%;
                    --dialog-surface-top: 0px;
                    --mdc-dialog-max-width: 100vw;
                }
                .content {
                    width: 100%;
                    max-width: 100%;
                }
            }
            @media all and (min-width: 451px) and (min-height: 501px) {
                :host([large]) .content {
                    max-width: none;
                }
            }
            .content {
                display: flex;
                flex-direction: column;
                gap: 24px;
            }
            .content hui-card {
                display: block;
                padding: 4px;
                margin: 0 auto;
                max-width: 390px;
            }
            .content .element-editor {
                margin: 0 10px;
            }
            .content .element-preview {
                margin: 0 10px;
            }

            @media (min-width: 1000px) {
                .content {
                    flex-direction: row;
                }
                .content > * {
                    flex-basis: 0;
                    flex-grow: 1;
                    flex-shrink: 1;
                    min-width: 0;
                }
                .content hui-card {
                    padding: 8px 10px;
                    margin: auto 0px;
                    max-width: 500px;
                }
                .content .element-preview {
                    margin: unset;
                }
            }
            .hidden {
                display: none;
            }
            .element-editor {
                margin-bottom: 8px;
            }
            .blur {
                filter: blur(2px) grayscale(100%);
            }
            .element-preview {
                position: relative;
                height: max-content;
                background: var(--primary-background-color);
                padding: 4px;
                border-radius: var(--ha-border-radius-sm);
                position: sticky;
                top: 0;
            }
            .element-preview ha-spinner {
                top: calc(50% - 24px);
                left: calc(50% - 24px);
                position: absolute;
                z-index: 10;
            }
            hui-card {
                padding-top: 8px;
                margin-bottom: 4px;
                display: block;
                width: 100%;
                box-sizing: border-box;
            }

            [slot="primaryAction"] {
                gap: var(--ha-space-2);
                display: flex;
            }
            [slot="secondaryAction"] {
                gap: var(--ha-space-2);
                display: flex;
                margin-left: 0px;
            }
            [slot="navigationIcon"] {
                --ha-icon-display: block;
            }
        `],Ge([Dr({attribute:!1})],pe.prototype,"hass",2),Ge([Dr({type:Boolean,reflect:!0})],pe.prototype,"large",2),Ge([Dr({attribute:!1})],pe.prototype,"lovelace",2),Ge([Jn()],pe.prototype,"_params",2),Ge([Jn()],pe.prototype,"_config",2),Ge([Jn()],pe.prototype,"_cardGUIMode",2),Ge([Jn()],pe.prototype,"_cardGUIModeAvailable",2),Ge([Jn()],pe.prototype,"_error",2),Ge([Gc("hui-card-element-editor")],pe.prototype,"_cardEditorEl",2),pe=Ge([jc("expander-card-title-card-edit-form")],pe),console.info(`%c  Expander-Card 
%c Version ${yc}`,"color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray"),window.customCards=window.customCards||[],window.customCards.push({type:"expander-card",name:"Expander Card",preview:!0,description:"Expander card"}),customElements.get("expander-card-title-card-edit-form")||customElements.define("expander-card-title-card-edit-form",pe),Ta}));
//# sourceMappingURL=expander-card.umd.cjs.map
