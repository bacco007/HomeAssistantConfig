function e(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}"function"==typeof SuppressedError&&SuppressedError;const t=window,i=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),a=new WeakMap;class n{constructor(e,t,i){if(this._$cssResult$=!0,i!==o)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(i&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=a.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&a.set(t,e))}return e}toString(){return this.cssText}}const r=(e,...t)=>{const i=1===e.length?e[0]:t.reduce(((t,i,o)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[o+1]),e[0]);return new n(i,e,o)},l=i?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new n("string"==typeof e?e:e+"",void 0,o))(t)})(e):e;var s;const d=window,c=d.trustedTypes,u=c?c.emptyScript:"",p=d.reactiveElementPolyfillSupport,h={toAttribute(e,t){switch(t){case Boolean:e=e?u:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},v=(e,t)=>t!==e&&(t==t||e==e),_={attribute:!0,type:String,converter:h,reflect:!1,hasChanged:v},m="finalized";class f extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,i)=>{const o=this._$Ep(i,t);void 0!==o&&(this._$Ev.set(o,i),e.push(o))})),e}static createProperty(e,t=_){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i="symbol"==typeof e?Symbol():"__"+e,o=this.getPropertyDescriptor(e,i,t);void 0!==o&&Object.defineProperty(this.prototype,e,o)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(o){const a=this[e];this[t]=o,this.requestUpdate(e,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||_}static finalize(){if(this.hasOwnProperty(m))return!1;this[m]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const i of t)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(l(e))}else void 0!==e&&t.push(l(e));return t}static _$Ep(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,i;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(i=e.hostConnected)||void 0===i||i.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const o=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,o)=>{i?e.adoptedStyleSheets=o.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):o.forEach((i=>{const o=document.createElement("style"),a=t.litNonce;void 0!==a&&o.setAttribute("nonce",a),o.textContent=i.cssText,e.appendChild(o)}))})(o,this.constructor.elementStyles),o}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=_){var o;const a=this.constructor._$Ep(e,i);if(void 0!==a&&!0===i.reflect){const n=(void 0!==(null===(o=i.converter)||void 0===o?void 0:o.toAttribute)?i.converter:h).toAttribute(t,i.type);this._$El=e,null==n?this.removeAttribute(a):this.setAttribute(a,n),this._$El=null}}_$AK(e,t){var i;const o=this.constructor,a=o._$Ev.get(e);if(void 0!==a&&this._$El!==a){const e=o.getPropertyOptions(a),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(i=e.converter)||void 0===i?void 0:i.fromAttribute)?e.converter:h;this._$El=a,this[a]=n.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,i){let o=!0;void 0!==e&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||v)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,i))):o=!1),!this.isUpdatePending&&o&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}var y;f[m]=!0,f.elementProperties=new Map,f.elementStyles=[],f.shadowRootOptions={mode:"open"},null==p||p({ReactiveElement:f}),(null!==(s=d.reactiveElementVersions)&&void 0!==s?s:d.reactiveElementVersions=[]).push("1.6.3");const g=window,b=g.trustedTypes,w=b?b.createPolicy("lit-html",{createHTML:e=>e}):void 0,x="$lit$",k=`lit$${(Math.random()+"").slice(9)}$`,S="?"+k,$=`<${S}>`,C=document,E=()=>C.createComment(""),A=e=>null===e||"object"!=typeof e&&"function"!=typeof e,M=Array.isArray,z=e=>M(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),P="[ \t\n\f\r]",D=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,T=/-->/g,O=/>/g,N=RegExp(`>|${P}(?:([^\\s"'>=/]+)(${P}*=${P}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),j=/'/g,B=/"/g,I=/^(?:script|style|textarea|title)$/i,L=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),H=L(1),R=L(2),F=Symbol.for("lit-noChange"),G=Symbol.for("lit-nothing"),U=new WeakMap,V=C.createTreeWalker(C,129,null,!1);function W(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==w?w.createHTML(t):t}const Z=(e,t)=>{const i=e.length-1,o=[];let a,n=2===t?"<svg>":"",r=D;for(let t=0;t<i;t++){const i=e[t];let l,s,d=-1,c=0;for(;c<i.length&&(r.lastIndex=c,s=r.exec(i),null!==s);)c=r.lastIndex,r===D?"!--"===s[1]?r=T:void 0!==s[1]?r=O:void 0!==s[2]?(I.test(s[2])&&(a=RegExp("</"+s[2],"g")),r=N):void 0!==s[3]&&(r=N):r===N?">"===s[0]?(r=null!=a?a:D,d=-1):void 0===s[1]?d=-2:(d=r.lastIndex-s[2].length,l=s[1],r=void 0===s[3]?N:'"'===s[3]?B:j):r===B||r===j?r=N:r===T||r===O?r=D:(r=N,a=void 0);const u=r===N&&e[t+1].startsWith("/>")?" ":"";n+=r===D?i+$:d>=0?(o.push(l),i.slice(0,d)+x+i.slice(d)+k+u):i+k+(-2===d?(o.push(void 0),t):u)}return[W(e,n+(e[i]||"<?>")+(2===t?"</svg>":"")),o]};class K{constructor({strings:e,_$litType$:t},i){let o;this.parts=[];let a=0,n=0;const r=e.length-1,l=this.parts,[s,d]=Z(e,t);if(this.el=K.createElement(s,i),V.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(o=V.nextNode())&&l.length<r;){if(1===o.nodeType){if(o.hasAttributes()){const e=[];for(const t of o.getAttributeNames())if(t.endsWith(x)||t.startsWith(k)){const i=d[n++];if(e.push(t),void 0!==i){const e=o.getAttribute(i.toLowerCase()+x).split(k),t=/([.?@])?(.*)/.exec(i);l.push({type:1,index:a,name:t[2],strings:e,ctor:"."===t[1]?Q:"?"===t[1]?te:"@"===t[1]?ie:J})}else l.push({type:6,index:a})}for(const t of e)o.removeAttribute(t)}if(I.test(o.tagName)){const e=o.textContent.split(k),t=e.length-1;if(t>0){o.textContent=b?b.emptyScript:"";for(let i=0;i<t;i++)o.append(e[i],E()),V.nextNode(),l.push({type:2,index:++a});o.append(e[t],E())}}}else if(8===o.nodeType)if(o.data===S)l.push({type:2,index:a});else{let e=-1;for(;-1!==(e=o.data.indexOf(k,e+1));)l.push({type:7,index:a}),e+=k.length-1}a++}}static createElement(e,t){const i=C.createElement("template");return i.innerHTML=e,i}}function Y(e,t,i=e,o){var a,n,r,l;if(t===F)return t;let s=void 0!==o?null===(a=i._$Co)||void 0===a?void 0:a[o]:i._$Cl;const d=A(t)?void 0:t._$litDirective$;return(null==s?void 0:s.constructor)!==d&&(null===(n=null==s?void 0:s._$AO)||void 0===n||n.call(s,!1),void 0===d?s=void 0:(s=new d(e),s._$AT(e,i,o)),void 0!==o?(null!==(r=(l=i)._$Co)&&void 0!==r?r:l._$Co=[])[o]=s:i._$Cl=s),void 0!==s&&(t=Y(e,s._$AS(e,t.values),s,o)),t}class q{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:o}=this._$AD,a=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:C).importNode(i,!0);V.currentNode=a;let n=V.nextNode(),r=0,l=0,s=o[0];for(;void 0!==s;){if(r===s.index){let t;2===s.type?t=new X(n,n.nextSibling,this,e):1===s.type?t=new s.ctor(n,s.name,s.strings,this,e):6===s.type&&(t=new oe(n,this,e)),this._$AV.push(t),s=o[++l]}r!==(null==s?void 0:s.index)&&(n=V.nextNode(),r++)}return V.currentNode=C,a}v(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class X{constructor(e,t,i,o){var a;this.type=2,this._$AH=G,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=o,this._$Cp=null===(a=null==o?void 0:o.isConnected)||void 0===a||a}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Y(this,e,t),A(e)?e===G||null==e||""===e?(this._$AH!==G&&this._$AR(),this._$AH=G):e!==this._$AH&&e!==F&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):z(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==G&&A(this._$AH)?this._$AA.nextSibling.data=e:this.$(C.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:o}=e,a="number"==typeof o?this._$AC(e):(void 0===o.el&&(o.el=K.createElement(W(o.h,o.h[0]),this.options)),o);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===a)this._$AH.v(i);else{const e=new q(a,this),t=e.u(this.options);e.v(i),this.$(t),this._$AH=e}}_$AC(e){let t=U.get(e.strings);return void 0===t&&U.set(e.strings,t=new K(e)),t}T(e){M(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,o=0;for(const a of e)o===t.length?t.push(i=new X(this.k(E()),this.k(E()),this,this.options)):i=t[o],i._$AI(a),o++;o<t.length&&(this._$AR(i&&i._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class J{constructor(e,t,i,o,a){this.type=1,this._$AH=G,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=a,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=G}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,o){const a=this.strings;let n=!1;if(void 0===a)e=Y(this,e,t,0),n=!A(e)||e!==this._$AH&&e!==F,n&&(this._$AH=e);else{const o=e;let r,l;for(e=a[0],r=0;r<a.length-1;r++)l=Y(this,o[i+r],t,r),l===F&&(l=this._$AH[r]),n||(n=!A(l)||l!==this._$AH[r]),l===G?e=G:e!==G&&(e+=(null!=l?l:"")+a[r+1]),this._$AH[r]=l}n&&!o&&this.j(e)}j(e){e===G?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class Q extends J{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===G?void 0:e}}const ee=b?b.emptyScript:"";class te extends J{constructor(){super(...arguments),this.type=4}j(e){e&&e!==G?this.element.setAttribute(this.name,ee):this.element.removeAttribute(this.name)}}class ie extends J{constructor(e,t,i,o,a){super(e,t,i,o,a),this.type=5}_$AI(e,t=this){var i;if((e=null!==(i=Y(this,e,t,0))&&void 0!==i?i:G)===F)return;const o=this._$AH,a=e===G&&o!==G||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,n=e!==G&&(o===G||a);a&&this.element.removeEventListener(this.name,this,o),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$AH.handleEvent(e)}}class oe{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Y(this,e)}}const ae={O:x,P:k,A:S,C:1,M:Z,L:q,R:z,D:Y,I:X,V:J,H:te,N:ie,U:Q,F:oe},ne=g.litHtmlPolyfillSupport;var re,le;null==ne||ne(K,X),(null!==(y=g.litHtmlVersions)&&void 0!==y?y:g.litHtmlVersions=[]).push("2.8.0");class se extends f{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,i)=>{var o,a;const n=null!==(o=null==i?void 0:i.renderBefore)&&void 0!==o?o:t;let r=n._$litPart$;if(void 0===r){const e=null!==(a=null==i?void 0:i.renderBefore)&&void 0!==a?a:null;n._$litPart$=r=new X(t.insertBefore(E(),e),e,void 0,null!=i?i:{})}return r._$AI(e),r})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return F}}se.finalized=!0,se._$litElement$=!0,null===(re=globalThis.litElementHydrateSupport)||void 0===re||re.call(globalThis,{LitElement:se});const de=globalThis.litElementPolyfillSupport;null==de||de({LitElement:se}),(null!==(le=globalThis.litElementVersions)&&void 0!==le?le:globalThis.litElementVersions=[]).push("3.3.3");const ce=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:i,elements:o}=t;return{kind:i,elements:o,finisher(t){customElements.define(e,t)}}})(e,t),ue=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(i){i.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}},pe=(e,t,i)=>{t.constructor.createProperty(i,e)};function he(e){return(t,i)=>void 0!==i?pe(e,t,i):ue(e,t)}function ve(e){return he({...e,state:!0})}function _e(e,t){return(({finisher:e,descriptor:t})=>(i,o)=>{var a;if(void 0===o){const o=null!==(a=i.originalKey)&&void 0!==a?a:i.key,n=null!=t?{kind:"method",placement:"prototype",key:o,descriptor:t(i.key)}:{...i,key:o};return null!=e&&(n.finisher=function(t){e(t,o)}),n}{const a=i.constructor;void 0!==t&&Object.defineProperty(i,o,t(o)),null==e||e(a,o)}})({descriptor:i=>{const o={get(){var t,i;return null!==(i=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==i?i:null},enumerable:!0,configurable:!0};if(t){const t="symbol"==typeof i?Symbol():"__"+i;o.get=function(){var i,o;return void 0===this[t]&&(this[t]=null!==(o=null===(i=this.renderRoot)||void 0===i?void 0:i.querySelector(e))&&void 0!==o?o:null),this[t]}}return o}})}var me,fe,ye;function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}).apply(this,arguments)}null===(me=window.HTMLSlotElement)||void 0===me||me.prototype.assignedElements,function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(fe||(fe={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(ye||(ye={}));var be=function(e,t){var i=ge({maximumFractionDigits:2},t);if("string"!=typeof e)return i;if(!t||!t.minimumFractionDigits&&!t.maximumFractionDigits){var o=e.indexOf(".")>-1?e.split(".")[1].length:0;i.minimumFractionDigits=o,i.maximumFractionDigits=o}return i},we=function(e,t,i,o){o=o||{},i=null==i?{}:i;var a=new Event(t,{bubbles:void 0===o.bubbles||o.bubbles,cancelable:Boolean(o.cancelable),composed:void 0===o.composed||o.composed});return a.detail=i,e.dispatchEvent(a),a};const xe=(e,t)=>Number(`${Math.round(Number(`${e}e${t}`))}e-${t}`);function ke(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function Se(e,t=0){return ke(e)?Number(e):t}const $e=(e,t,i,{unit:o,unitWhiteSpace:a,decimals:n,accept_negative:r,watt_threshold:l=1e3})=>{if(null===i)return"0";if(!ke(i))return i.toString();const s=Number(i),d=void 0===o&&s>=l,c=null!=n?n:d?t.kw_decimals:t.w_decimals;return`${function(e,t,i){var o=t?function(e){switch(e.number_format){case fe.comma_decimal:return["en-US","en"];case fe.decimal_comma:return["de","es","it"];case fe.space_comma:return["fr","sv","cs"];case fe.system:return;default:return e.language}}(t):void 0;if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)!==fe.none&&!Number.isNaN(Number(e))&&Intl)try{return new Intl.NumberFormat(o,be(e,i)).format(Number(e))}catch(t){return console.error(t),new Intl.NumberFormat(void 0,be(e,i)).format(Number(e))}return"string"==typeof e?e:function(e,t){return void 0===t&&(t=2),Math.round(e*Math.pow(10,t))/Math.pow(10,t)}(e,null==i?void 0:i.maximumFractionDigits).toString()+("currency"===(null==i?void 0:i.style)?" "+i.currency:"")}((e=>r?e:Math.abs(e))(d?xe(s/1e3,null!=c?c:2):xe(s,null!=c?c:0)),e.locale)}${!1===a?"":" "}${o||(d?"kW":"W")}`},Ce=e=>(...t)=>({_$litDirective$:e,values:t});class Ee{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,i){this._$Ct=e,this._$AM=t,this._$Ci=i}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}const Ae=Ce(class extends Ee{constructor(e){var t;if(super(e),1!==e.type||"class"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){var i,o;if(void 0===this.it){this.it=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!(null===(i=this.nt)||void 0===i?void 0:i.has(e))&&this.it.add(e);return this.render(t)}const a=e.element.classList;this.it.forEach((e=>{e in t||(a.remove(e),this.it.delete(e))}));for(const e in t){const i=!!t[e];i===this.it.has(e)||(null===(o=this.nt)||void 0===o?void 0:o.has(e))||(i?(a.add(e),this.it.add(e)):(a.remove(e),this.it.delete(e)))}return F}}),Me=(e,t)=>{var i;return t>0||"hide"!==(null===(i=null==e?void 0:e.display_zero_lines)||void 0===i?void 0:i.mode)},ze=(e,t)=>{var i,o;if(e>0)return"";const a=null===(i=null==t?void 0:t.display_zero_lines)||void 0===i?void 0:i.mode;if("show"===a||void 0===a)return"";let n="";if("transparency"===a||"custom"===a){const e=null===(o=null==t?void 0:t.display_zero_lines)||void 0===o?void 0:o.transparency;(null==e||e)&&(n+="transparency ")}return"grey_out"!==a&&"custom"!==a||(n+="grey"),n},Pe=(e,t)=>{var i;const o=(e=>JSON.parse(JSON.stringify(e)).filter((e=>null==e?void 0:e.has)))(e);return null!==(i=null==o?void 0:o[t])&&void 0!==i?i:void 0},De=e=>Pe(e,1),Te=e=>Pe(e,2),Oe=e=>Pe(e,3),Ne=e=>!!Te(e)||!!Oe(e),je=e=>!!De(e)||!!Oe(e),Be=e=>!0!==e.disable_dots,Ie=(e,{battery:t,grid:i,individual:o,solar:a,newDur:n})=>H`${((e,{battery:t,grid:i,individual:o,solar:a,newDur:n})=>{var r;return a.has&&Me(e,a.state.toHome||0)&&!(null===(r=e.entities.home)||void 0===r?void 0:r.hide)?H`<div class="lines ${Ae({high:t.has||je(o),"individual1-individual2":!t.has&&o.every((e=>null==e?void 0:e.has)),"multi-individual":Ne(o)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-home-flow"><path id="solar" class="solar ${ze(a.state.toHome||0,e)}" d="M${t.has?55:53},0 v${i.has?15:17} c0,${t.has?"30 10,30 30,30":"35 10,35 30,35"} h25" vector-effect="non-scaling-stroke"></path>${Be(e)&&a.state.toHome?R`<circle r="1" class="solar" vector-effect="non-scaling-stroke"><animateMotion dur="${n.solarToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#solar"></animateMotion></circle>`:""}</svg></div>`:""})(e,{battery:t,grid:i,individual:o,solar:a,newDur:n})} ${((e,{battery:t,grid:i,individual:o,solar:a,newDur:n})=>i.hasReturnToGrid&&a.has&&Me(e,a.state.toGrid||0)?H`<div class="lines ${Ae({high:t.has||je(o),"individual1-individual2":!t.has&&o.every((e=>null==e?void 0:e.has)),"multi-individual":Ne(o)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-grid-flow"><path id="return" class="return ${ze(a.state.toGrid||0,e)}" d="M${t.has?45:47},0 v15 c0,${t.has?"30 -10,30 -30,30":"35 -10,35 -30,35"} h-20" vector-effect="non-scaling-stroke"></path>${Be(e)&&a.state.toGrid&&a.has?R`<circle r="1" class="return" vector-effect="non-scaling-stroke"><animateMotion dur="${n.solarToGrid}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#return"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,grid:i,individual:o,solar:a,newDur:n})} ${((e,{battery:t,individual:i,solar:o,newDur:a})=>t.has&&o.has&&Me(e,o.state.toBattery||0)?H`<div class="lines ${Ae({high:t.has||je(i),"individual1-individual2":!t.has&&i.every((e=>null==e?void 0:e.has)),"multi-individual":Ne(i)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-battery-flow" class="flat-line"><path id="battery-solar" class="battery-solar ${ze(o.state.toBattery||0,e)}" d="M50,0 V100" vector-effect="non-scaling-stroke"></path>${Be(e)&&o.state.toBattery?R`<circle r="1" class="battery-solar" vector-effect="non-scaling-stroke"><animateMotion dur="${a.solarToBattery}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-solar"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,individual:o,solar:a,newDur:n})} ${((e,{battery:t,grid:i,individual:o,solar:a,newDur:n})=>{var r;return i.has&&Me(e,i.state.fromGrid)&&!(null===(r=e.entities.home)||void 0===r?void 0:r.hide)?H`<div class="lines ${Ae({high:t.has||je(o),"individual1-individual2":!t.has&&o.every((e=>null==e?void 0:e.has)),"multi-individual":Ne(o)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="grid-home-flow" class="flat-line"><path class="grid ${ze(i.state.toHome||0,e)}" id="grid" d="M0,${t.has?50:a.has?56:53} H100" vector-effect="non-scaling-stroke"></path>${Be(e)&&i.state.toHome?R`<circle r="1" class="grid" vector-effect="non-scaling-stroke"><animateMotion dur="${n.gridToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#grid"></animateMotion></circle>`:""}</svg></div>`:""})(e,{battery:t,grid:i,individual:o,solar:a,newDur:n})} ${((e,{battery:t,grid:i,individual:o,newDur:a})=>{var n;return t.has&&Me(e,t.state.toHome)&&!(null===(n=e.entities.home)||void 0===n?void 0:n.hide)?H`<div class="lines ${Ae({high:t.has||je(o),"individual1-individual2":!t.has&&o.every((e=>null==e?void 0:e.has)),"multi-individual":Ne(o)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="battery-home-flow"><path id="battery-home" class="battery-home ${ze(t.state.toHome||0,e)}" d="M55,100 v-${i.has?15:17} c0,-30 10,-30 30,-30 h20" vector-effect="non-scaling-stroke"></path>${Be(e)&&t.state.toHome?R`<circle r="1" class="battery-home" vector-effect="non-scaling-stroke"><animateMotion dur="${a.batteryToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-home"></animateMotion></circle>`:""}</svg></div>`:""})(e,{battery:t,grid:i,individual:o,newDur:n})} ${((e,{battery:t,grid:i,individual:o,newDur:a})=>i.has&&t.has&&Me(e,Math.max(i.state.toBattery||0,t.state.toGrid||0))?H`<div class="lines ${Ae({high:t.has||je(o),"individual1-individual2":!t.has&&o.every((e=>null==e?void 0:e.has)),"multi-individual":Ne(o)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="battery-grid-flow"><path id="battery-grid" class="${ze(t.state.toGrid||i.state.toBattery||0,e)}" d="M45,100 v-15 c0,-30 -10,-30 -30,-30 h-20" vector-effect="non-scaling-stroke"></path>${Be(e)&&i.state.toBattery?R`<circle r="1" class="battery-from-grid" vector-effect="non-scaling-stroke"><animateMotion dur="${a.batteryGrid}s" repeatCount="indefinite" keyPoints="1;0" keyTimes="0;1" calcMode="linear"><mpath xlink:href="#battery-grid"></animateMotion></circle>`:""} ${Be(e)&&t.state.toGrid?R`<circle r="1" class="battery-to-grid" vector-effect="non-scaling-stroke"><animateMotion dur="${a.batteryGrid}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-grid"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,grid:i,individual:o,newDur:n})}`,Le=["unavailable","unknown"],He=({main:e,className:t,template:i,value:o,entityId:a,icon:n,tap_action:r})=>o&&Le.includes(o)?H``:o||i?H`<span class="secondary-info ${t}" @click="${t=>{e.openDetails(t,r,a)}}" @keyDown="${t=>{"Enter"===t.key&&e.openDetails(t,r,a)}}">${n?H`<ha-icon class="secondary-info small" .icon="${n}"></ha-icon>`:""} ${null!=i?i:o}</span>`:H``,Re=(e,t,i,o,a,n)=>{var r,l;return H`${(null===(r=null==a?void 0:a.secondary)||void 0===r?void 0:r.has)||(null===(l=null==a?void 0:a.secondary)||void 0===l?void 0:l.template)?H`${He({main:t,className:n,entityId:a.secondary.entity,icon:a.secondary.icon,value:$e(e,i,a.secondary.state,{unit:a.secondary.unit,unitWhiteSpace:a.secondary.unit_white_space,decimals:a.secondary.decimals,accept_negative:a.secondary.accept_negative,watt_threshold:i.watt_threshold}),tap_action:a.secondary.tap_action,template:o[`${n}Secondary`]})}`:""}`},Fe=(e,t,i)=>{var o;return null===(o=e.use_new_flow_rate_model)||void 0===o||o?((e,t)=>{const i=e.max_expected_power,o=e.min_expected_power;return((e,t,i,o,a)=>e>a?i:(e-o)*(i-t)/(a-o)+t)(t,e.max_flow_rate,e.min_flow_rate,o,i)})(e,t):((e,t,i)=>{const o=null==e?void 0:e.min_flow_rate,a=null==e?void 0:e.max_flow_rate;return a-t/(i>0?i:t)*(a-o)})(e,t,i)},Ge=(e,t)=>!1!==e&&t?t:"number"==typeof e?e:1.66,Ue=(e,t,i,o,a,n,r)=>{var l,s,d,c,u,p,h;const v=o.individual[n],_=(null===(l=null==a?void 0:a.secondary)||void 0===l?void 0:l.has)?$e(e,i,null===(s=null==a?void 0:a.secondary)||void 0===s?void 0:s.state,{unit:(null===(d=null==a?void 0:a.secondary)||void 0===d?void 0:d.unit)||void 0,unitWhiteSpace:a.secondary.unit_white_space,decimals:(null===(c=null==a?void 0:a.secondary)||void 0===c?void 0:c.decimals)||0,accept_negative:(null===(u=null==a?void 0:a.secondary)||void 0===u?void 0:u.accept_negative)||!1,watt_threshold:i.watt_threshold}):void 0;return H`${(()=>{var e,t,i,o,n;if(v)return!0;if(!0===(null===(e=null==a?void 0:a.secondary)||void 0===e?void 0:e.displayZero))return!0;if(!(null===(t=null==a?void 0:a.secondary)||void 0===t?void 0:t.state))return!1;if(!ke(null===(i=null==a?void 0:a.secondary)||void 0===i?void 0:i.state))return!0;const r=null!==(n=null===(o=null==a?void 0:a.secondary)||void 0===o?void 0:o.displayZeroTolerance)&&void 0!==n?n:0;return Number(a.secondary.state)>=r||a.secondary.accept_negative&&"number"==typeof Number(+a.secondary.state)})()?H`${He({main:t,className:r,entityId:(null==a?void 0:a.secondary.entity)||void 0,icon:(null===(p=null==a?void 0:a.secondary)||void 0===p?void 0:p.icon)||void 0,value:_,template:o.individual[n]||void 0,tap_action:(null===(h=null==a?void 0:a.secondary)||void 0===h?void 0:h.tap_action)||void 0})}`:""}`},Ve=e=>null==e?void 0:e.split("|").map((e=>e.trim())),We=e=>{const t=Ve(e);return t.length>0?t[0]:""},Ze=(e,t)=>{var i;const o=Ve(t);for(const t of o)if(!ke(null===(i=e.states[t])||void 0===i?void 0:i.state))return!1;return o.length>0};var Ke="0.2.6";console.groupCollapsed(`%c⚡ Power Flow Card Plus v${Ke} is installed`,"color: #488fc2; font-weight: bold"),console.log("Readme:","https://github.com/flixlix/power-flow-card-plus"),console.groupEnd();const Ye=function(e,t,i){var o;return void 0===i&&(i=!1),function(){var t=[].slice.call(arguments),a=this,n=i&&!o;clearTimeout(o),o=setTimeout((function(){o=null,i||e.apply(a,t)}),6e4),n&&e.apply(a,t)}}((e=>{console.log(`%c⚡ Power Flow Card Plus v${Ke} %cError: ${e}`,"color: #488fc2; font-weight: bold","color: #b33a3a; font-weight: normal")})),qe=e=>{Ye(`Entity "${null!=e?e:"Unknown"}" is not available or misconfigured`)},Xe=(e,t)=>{if(!t||!Ze(e,t))return qe(t),null;const i=Ve(t);let o,a=0;for(const t of i)o=Se(e.states[t].state),a+=o;return a},Je=["K","M","G","T","P","E","Z","Y"],Qe=(e,t)=>{var i;const o=Xe(e,t);if(!t||null===o)return 0;const a=null!==(i=e.states[We(t)].attributes.unit_of_measurement)&&void 0!==i?i:"";return et(o,a)},et=(e,t)=>{const i=t.toUpperCase().slice(0,1),o=Je.indexOf(i);return o>-1?e*Math.pow(1e3,o+1):e},tt=(e,t,{nonFossil:i,entities:o,templatesObj:a,grid:n,newDur:r})=>{var l,s,d;return H`${i.hasPercentage?H`<div class="circle-container low-carbon"><span class="label">${i.name}</span><div class="circle" @click="${t=>{var i,a;e.openDetails(t,null===(i=o.fossil_fuel_percentage)||void 0===i?void 0:i.tap_action,null===(a=o.fossil_fuel_percentage)||void 0===a?void 0:a.entity)}}" @keyDown="${t=>{var i,a;"Enter"===t.key&&e.openDetails(t,null===(i=o.fossil_fuel_percentage)||void 0===i?void 0:i.tap_action,null===(a=o.fossil_fuel_percentage)||void 0===a?void 0:a.entity)}}">${Re(e.hass,e,t,a,i,"low-carbon")} ${" "!==i.icon?H`<ha-icon id="low-carbon-icon" .icon="${i.icon}">`:null} ${!1!==(null===(l=o.fossil_fuel_percentage)||void 0===l?void 0:l.display_zero_state)||(i.state.power||0)>((null===(s=o.fossil_fuel_percentage)||void 0===s?void 0:s.display_zero_tolerance)||0)?H`<span class="low-carbon">${((e,t,i,o)=>{var a,n,r,l,s,d,c,u,p;if(!i||!Ze(e,i))return qe(i),"NaN";const h=null===(n=null===(a=t.entities.fossil_fuel_percentage)||void 0===a?void 0:a.unit_white_space)||void 0===n||n,v="percentage"===(null===(r=t.entities.fossil_fuel_percentage)||void 0===r?void 0:r.state_type)?"%":"W",_=1-(null!==(l=Xe(e,i))&&void 0!==l?l:0)/100;let m;m="string"==typeof(null===(s=t.entities.grid)||void 0===s?void 0:s.entity)?o:Qe(e,null===(d=t.entities.grid)||void 0===d?void 0:d.entity.consumption)||0;const f=null!==(u=null===(c=t.entities.fossil_fuel_percentage)||void 0===c?void 0:c.display_zero_tolerance)&&void 0!==u?u:0;if("W"===v){let i=m*_;return f&&i<f&&(i=0),$e(e,t,i,{unitWhiteSpace:h,watt_threshold:t.watt_threshold})}let y=100-(null!==(p=Xe(e,i))&&void 0!==p?p:0);return f&&y<f&&(y=0),$e(e,t,y,{unit:"%",unitWhiteSpace:h,decimals:0,watt_threshold:t.watt_threshold})})(e.hass,t,o.fossil_fuel_percentage.entity,n.state.fromGrid)}</span>`:""}</div>${Me(t,i.state.power||0)?H`<svg width="80" height="30"><path d="M40 -10 v40" class="low-carbon ${ze(i.state.power||0,t)}" id="low-carbon"/>${Be(t)&&i.has&&i.state.power>0?R`<circle r="1.75" class="low-carbon" vector-effect="non-scaling-stroke"><animateMotion dur="${Ge(null===(d=o.fossil_fuel_percentage)||void 0===d?void 0:d.calculate_flow_rate,r.nonFossil)}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#low-carbon"></animateMotion></circle>`:""}</svg>`:""}</div>`:H`<div class="spacer"></div>`}`},it=(e,t)=>{var i;return!!(null===(i=e.entities[t])||void 0===i?void 0:i.invert_state)},ot=e=>Math.abs(Math.min(e,0)),at=e=>Math.max(e,0),nt=(e,t,i)=>{var o,a,n;const r=null===(n=null===(a=null===(o=t.entities)||void 0===o?void 0:o[i])||void 0===a?void 0:a.secondary_info)||void 0===n?void 0:n.entity;if("string"!=typeof r)return null;const l=e.states[We(r)].state;return ke(l)?Number(l):l},rt=(e,t,i)=>{var o;const a=null===(o=t.entities[i])||void 0===o?void 0:o.entity;if(void 0===a)return null;if("string"==typeof a){const o=Qe(e,a);return it(t,i)?at(o):ot(o)}return Qe(e,a.production)},lt=(e,t,i)=>{var o;const a=null===(o=t.entities[i])||void 0===o?void 0:o.entity;if(void 0===a)return null;if("string"==typeof a){const o=Qe(e,a);return it(t,i)?ot(o):at(o)}return Qe(e,a.consumption)},st=(e,t)=>{var i;const o=null===(i=t.entities.battery)||void 0===i?void 0:i.state_of_charge;return void 0===o?null:Xe(e,o)},dt=(e,t)=>rt(e,t,"battery"),ct=(e,t)=>lt(e,t,"battery"),ut=(e,t)=>lt(e,t,"grid"),pt=(e,t)=>nt(e,t,"grid"),ht=(e,t)=>nt(e,t,"home"),vt=(e,t)=>{if(t&&Ze(e,t))return e.states[We(t)];qe(t)},_t=(e,t,i)=>{var o,a,n,r,l,s,d,c;return(null==t?void 0:t.icon)?t.icon:(null==t?void 0:t.use_metadata)?"string"==typeof(null==t?void 0:t.entity)?(null===(a=null===(o=vt(e,null==t?void 0:t.entity))||void 0===o?void 0:o.attributes)||void 0===a?void 0:a.icon)||i:(null===(l=null===(r=vt(e,null===(n=null==t?void 0:t.entity)||void 0===n?void 0:n.consumption))||void 0===r?void 0:r.attributes)||void 0===l?void 0:l.icon)||(null===(c=null===(d=vt(e,null===(s=null==t?void 0:t.entity)||void 0===s?void 0:s.production))||void 0===d?void 0:d.attributes)||void 0===c?void 0:c.icon)||i:i},mt=(e,t,i)=>{var o,a,n,r,l,s,d,c;return(null==t?void 0:t.name)?t.name:(null==t?void 0:t.use_metadata)?"string"==typeof(null==t?void 0:t.entity)?(null===(a=null===(o=vt(e,t.entity))||void 0===o?void 0:o.attributes)||void 0===a?void 0:a.friendly_name)||i:(null===(l=null===(r=vt(e,null===(n=null==t?void 0:t.entity)||void 0===n?void 0:n.consumption))||void 0===r?void 0:r.attributes)||void 0===l?void 0:l.friendly_name)||(null===(c=null===(d=vt(e,null===(s=null==t?void 0:t.entity)||void 0===s?void 0:s.production))||void 0===d?void 0:d.attributes)||void 0===c?void 0:c.friendly_name)||i:i},ft=(e,t)=>{var i;if("string"!=typeof(null==t?void 0:t.entity))return null;const o=vt(e,null===(i=null==t?void 0:t.secondary_info)||void 0===i?void 0:i.entity),a=null==o?void 0:o.state;return ke(a)?Number(a):a},yt=(e,t)=>!!e&&e>=t,gt=(e,t)=>e?t?yt(e,t)?e:0:e:0,bt={field:void 0,entity:"",has:!1,state:null,displayZero:!1,displayZeroTolerance:0,icon:"",name:"",color:null,unit:void 0,unit_white_space:!1,invertAnimation:!1,showDirection:!1,secondary:{entity:null,template:null,has:!1,state:null,icon:null,unit:null,unit_white_space:!1,displayZero:!1,accept_negative:!1,displayZeroTolerance:0,decimals:null}},wt=(e,t)=>{var i,o,a,n,r,l,s,d,c,u,p;if(!t||!(null==t?void 0:t.entity))return bt;const h=t.entity,v=((e,t)=>{const i=null==t?void 0:t.entity;if(void 0===i)return null;const o=Qe(e,i);return Math.abs(o)})(e,t),_=(null==t?void 0:t.display_zero)||!1,m=(null==t?void 0:t.display_zero_tolerance)||0,f=((e,t,i)=>!!e||!!yt(t,i))(_,v,m),y=v&&v<0,g=(null==t?void 0:t.inverted_animation)||!1,b=y?!g:g,w=(null==t?void 0:t.color)&&"string"==typeof(null==t?void 0:t.color)?null==t?void 0:t.color:null;return{field:t,entity:h,has:f,state:v,displayZero:_,displayZeroTolerance:m,icon:_t(e,t,"mdi:flash"),name:mt(e,t,"Individual"),color:w,unit:null==t?void 0:t.unit_of_measurement,unit_white_space:!1!==(null==t?void 0:t.unit_white_space),decimals:null==t?void 0:t.decimals,invertAnimation:b,showDirection:(null==t?void 0:t.show_direction)||!1,secondary:{entity:(null===(i=null==t?void 0:t.secondary_info)||void 0===i?void 0:i.entity)||null,template:(null===(o=null==t?void 0:t.secondary_info)||void 0===o?void 0:o.template)||null,has:void 0!==(null===(a=null==t?void 0:t.secondary_info)||void 0===a?void 0:a.entity),state:ft(e,t)||null,accept_negative:(null===(n=null==t?void 0:t.secondary_info)||void 0===n?void 0:n.accept_negative)||!1,icon:(null===(r=null==t?void 0:t.secondary_info)||void 0===r?void 0:r.icon)||null,unit:(null===(l=null==t?void 0:t.secondary_info)||void 0===l?void 0:l.unit_of_measurement)||null,unit_white_space:!1!==(null===(s=null==t?void 0:t.secondary_info)||void 0===s?void 0:s.unit_white_space),displayZero:(null===(d=null==t?void 0:t.secondary_info)||void 0===d?void 0:d.display_zero)||!1,displayZeroTolerance:(null===(c=null==t?void 0:t.secondary_info)||void 0===c?void 0:c.display_zero_tolerance)||0,decimals:(null===(u=null==t?void 0:t.secondary_info)||void 0===u?void 0:u.decimals)||null,tap_action:null===(p=null==t?void 0:t.secondary_info)||void 0===p?void 0:p.tap_action}}},xt=(e,t)=>{var i;const o=t.entities.fossil_fuel_percentage;t.entities.grid;const a=null==o?void 0:o.entity,n=null==o?void 0:o.display_zero,r=ut(e,t);return void 0!==a&&(!0===n||null!==r&&1*r-(null!==(i=Xe(e,a))&&void 0!==i?i:0)/100>0)},kt=(e,t)=>{var i;const o=t.entities.fossil_fuel_percentage;t.entities.grid;const a=null==o?void 0:o.entity,n=null==o?void 0:o.display_zero,r=ut(e,t);return void 0!==a&&(!0===n||null!==r&&!1!==xt(e,t)&&1*r-(null!==(i=Xe(e,a))&&void 0!==i?i:0)/100>0)},St=(e,t)=>nt(e,t,"fossil_fuel_percentage"),$t=(e,t)=>{var i;const o=null===(i=t.entities.solar)||void 0===i?void 0:i.entity;if(void 0===o)return null;const a=Qe(e,o);return it(t,"solar")?ot(a):at(a)},Ct=(e,t)=>nt(e,t,"solar"),Et=r`:host{--size-circle-entity:79.99px;--mdc-icon-size:24px;--clickable-cursor:pointer;--individual-left-bottom-color:#d0cc5b;--individual-left-top-color:#964cb5;--individual-right-top-color:#b54c9d;--individual-right-bottom-color:#5bd0cc;--non-fossil-color:var(--energy-non-fossil-color, #0f9d58);--icon-non-fossil-color:var(--non-fossil-color, #0f9d58);--icon-solar-color:var(--energy-solar-color, #ff9800);--icon-individual-bottom-color:var(--individual-left-bottom-color, #d0cc5b);--icon-individual-top-color:var(--individual-left-top-color, #964cb5);--icon-grid-color:var(--energy-grid-consumption-color, #488fc2);--icon-battery-color:var(--energy-battery-in-color, #f06292);--icon-home-color:var(--energy-grid-consumption-color, #488fc2);--text-solar-color:var(--primary-text-color);--text-non-fossil-color:var(--primary-text-color);--text-individual-bottom-color:var(--primary-text-color);--text-individual-top-color:var(--primary-text-color);--text-home-color:var(--primary-text-color);--secondary-text-individual-bottom-color:var(--primary-text-color);--secondary-text-individual-top-color:var(--primary-text-color);--text-battery-state-of-charge-color:var(--primary-text-color);--cirlce-grid-color:var(--energy-grid-consumption-color, #488fc2);--circle-battery-color:var(--energy-battery-in-color, #f06292);--battery-grid-line:var(--energy-grid-return-color, #8353d1);--secondary-text-solar-color:var(--primary-text-color);--secondary-text-grid-color:var(--primary-text-color);--secondary-text-home-color:var(--primary-text-color);--secondary-text-non-fossil-color:var(--primary-text-color);--lines-svg-not-flat-line-height:106%;--lines-svg-not-flat-line-top:-2%;--lines-svg-flat-width:calc(100% - 160px);--lines-svg-not-flat-width:calc(103% - 165px);--lines-svg-not-flat-multi-indiv-height:104%;--lines-svg-not-flat-multi-indiv-width:calc(103% - var(--size-circle-entity) * 3.7);--lines-svg-not-flat-multi-indiv-width:calc(((106% - 165px) * 0.5));--lines-svg-not-flat-multi-indiv-width:calc(((130% - 246px) * 0.5));--lines-svg-not-flat-multi-indiv-right-indiv-width:calc(((130% - 210px) * 0.5));--lines-svg-not-flat-multi-indiv-right-indiv-height:103%;--lines-svg-flat-multi-indiv-width:calc((129% - 242px) * 0.5);--lines-svg-flat-left:0;--lines-svg-not-flat-left:0;--dot-size:3.5px;--transparency:var(--transparency-unused-lines);--greyed-out--line-color:#bdbdbd;--text-grid-consumption-color:var(--energy-grid-consumption-color);--text-grid-return-color:var(--energy-grid-return-color);--text-battery-in-color:var(--energy-battery-in-color);--text-battery-out-color:var(--energy-battery-out-color);--home-circle-animation:rotate-in 0.6s ease-in}ha-card{overflow:hidden}ha-card.full-size{height:100%}.card-content.full-size{transform:scale(2) translateY(30%)}.card-content{position:relative;margin:0 auto}.circle{width:80px;height:80px;border-radius:50%;box-sizing:border-box;border:2px solid;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;font-size:12px;line-height:12px;position:relative;text-decoration:none;color:var(--primary-text-color);gap:2px}.card-content,.row{max-width:470px}.lines{position:absolute;bottom:0;left:var(--size-circle-entity);width:100%;height:146px;display:flex;justify-content:flex-start;padding:0 16px 16px;box-sizing:border-box}:dir(rtl) .lines{justify-content:flex-end}.lines:not(.multi-individual) svg.flat-line{left:var(--lines-svg-flat-left)}.lines:not(.multi-individual) svg:not(.flat-line){left:var(--lines-svg-not-flat-left)}.lines:has(svg:not(.flat-line)){margin-left:-1%}.lines.individual-bottom-individual-top{bottom:110px}.lines.high{bottom:100px;height:156px}.lines svg{width:var(--lines-svg-flat-width);height:100%;max-width:340px;position:relative}.lines svg:not(.flat-line){width:var(--lines-svg-not-flat-width);height:var(--lines-svg-not-flat-line-height);top:var(--lines-svg-not-flat-line-top)}.multi-individual{left:calc(var(--size-circle-entity) + 2%);margin-left:-2.2%!important}.multi-individual svg{width:var(--lines-svg-flat-multi-indiv-width)}.multi-individual svg:not(.flat-line){width:var(--lines-svg-not-flat-multi-indiv-width);margin-top:1px;height:var(--lines-svg-not-flat-multi-indiv-height)}.row{display:flex;justify-content:space-between;max-width:500px;margin:0 auto}.circle-container{display:flex;flex-direction:column;align-items:center}.circle-container.solar{height:130px}.circle-container.individual-top{height:130px}.circle-container.individual-bottom{justify-content:flex-end}.circle-container.individual-bottom.bottom{position:relative;top:-20px;margin-bottom:-20px}.circle-container.battery{height:110px;justify-content:flex-end}.spacer{width:var(--size-circle-entity)}.circle-container .circle{cursor:var(--clickable-cursor)}#battery-grid{stroke:var(--battery-grid-line)}ha-icon{display:inline;padding-bottom:2px}ha-icon.small{--mdc-icon-size:12px}.label{color:var(--secondary-text-color);font-size:12px;max-width:80px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;min-height:20px}line,path{stroke:var(--disabled-text-color);stroke-width:1;fill:none}path.transparency{opacity:calc(calc(100 - var(--transparency))/ 100)}path.grey{stroke:var(--greyed-out--line-color)!important}.circle svg{position:absolute;fill:none;stroke-width:4px;width:100%;height:100%;top:0;left:0}span.secondary-info{color:var(--primary-text-color);font-size:12px;max-width:60px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.individual-top circle,.individual-top path{stroke:var(--individual-left-top-color)}#individual-left-bottom-icon{color:var(--icon-individual-left-bottom-color)}#individual-left-top-icon{color:var(--icon-individual-left-top-color)}#individual-right-bottom-icon{color:var(--icon-individual-right-bottom-color)}#individual-right-top-icon{color:var(--icon-individual-right-top-color)}#solar-icon{color:var(--icon-solar-color)}circle.individual-top{stroke-width:4;width:var(--dot-size);fill:var(--individual-left-top-color)}circle.individual-bottom{stroke-width:4;width:var(--dot-size);fill:var(--individual-left-bottom-color)}.individual-top .circle{border-color:var(--individual-left-top-color)}.individual-bottom circle,.individual-bottom path{stroke:var(--individual-left-bottom-color)}.individual-bottom .circle{border-color:var(--individual-left-bottom-color)}.individual-right-top .circle{border-color:var(--individual-right-top-color)}circle.individual-right-top .circle{fill:var(--individual-right-top-color)}.individual-right-top circle,.individual-right-top path{stroke:var(--individual-right-top-color)}.individual-right-bottom .circle{border-color:var(--individual-right-bottom-color)}circle.individual-right-bottom .circle{fill:var(--individual-right-bottom-color)}.individual-right-bottom circle,.individual-right-bottom path{stroke:var(--individual-right-bottom-color)}.right-individual-flow-container{position:absolute;right:calc(var(--size-circle-entity) - 27% * 1.1 + 6px);width:100%;display:flex;justify-content:flex-end;height:156px;bottom:100px;padding:0 16px 16px;margin-right:-1.2%;box-sizing:border-box;pointer-events:none}.right-individual-flow-container>svg{width:var(--lines-svg-not-flat-multi-indiv-right-indiv-width)}.right-individual-flow{height:var(--lines-svg-not-flat-multi-indiv-right-indiv-height);margin-top:2px;width:var(--lines-svg-not-flat-multi-indiv-width);top:var(--lines-svg-not-flat-line-top);max-width:340px;position:relative}.circle-container.low-carbon{height:130px}.low-carbon path{stroke:var(--non-fossil-color)}.low-carbon .circle{border-color:var(--non-fossil-color)}.low-carbon ha-icon:not(.small){color:var(--icon-non-fossil-color)}circle.low-carbon{stroke-width:4;fill:var(--non-fossil-color);stroke:var(--non-fossil-color)}.solar{color:var(--primary-text-color)}.solar .circle{border-color:var(--energy-solar-color)}.solar ha-icon:not(.small){color:var(--icon-solar-color)}circle.solar,path.solar{stroke:var(--energy-solar-color)}circle.solar{stroke-width:4;fill:var(--energy-solar-color)}.battery .circle{border-color:var(--circle-battery-color)}circle.battery,path.battery{stroke:var(--energy-battery-out-color)}circle.battery-home,path.battery-home{stroke:var(--energy-battery-out-color)}circle.battery-home{stroke-width:4;fill:var(--energy-battery-out-color)}circle.battery-solar,path.battery-solar{stroke:var(--energy-battery-in-color)}circle.battery-solar{stroke-width:4;fill:var(--energy-battery-in-color)}.battery-in{color:var(--energy-battery-in-color)}.battery-out{color:var(--energy-battery-out-color)}span.battery-in{color:var(--text-battery-in-color)}span.battery-out{color:var(--text-battery-out-color)}path.battery-from-grid{stroke:var(--energy-grid-consumption-color)}path.battery-to-grid{stroke:var(--battery-grid-line)}.battery ha-icon:not(.small){color:var(--icon-battery-color)}circle.battery-to-grid,circle.return,path.return{stroke:var(--energy-grid-return-color)}circle.battery-to-grid,circle.return{stroke-width:4;fill:var(--energy-grid-return-color)}.return{color:var(--energy-grid-return-color)}span.return{color:var(--text-grid-return-color)}.grid .circle{border-color:var(--circle-grid-color)}.consumption{color:var(--energy-grid-consumption-color)}span.consumption{color:var(--text-grid-consumption-color)}circle.battery-from-grid,circle.grid,path.grid{stroke:var(--energy-grid-consumption-color)}circle.battery-from-grid,circle.grid{stroke-width:4;fill:var(--energy-grid-consumption-color)}.grid ha-icon:not(.small){color:var(--icon-grid-color)}.home .circle{border-width:0;border-color:var(--primary-color)}.home .circle.border{border-width:2px}.home ha-icon:not(.small){color:var(--icon-home-color)}.circle svg circle{animation:var(--home-circle-animation);transition:stroke-dashoffset .4s,stroke-dasharray .4s;fill:none}span.solar{color:var(--text-solar-color)}span.low-carbon{color:var(--text-non-fossil-color)}span.low-carbon.secondary-info{color:var(--secondary-text-non-fossil-color)}#home-circle{color:var(--text-home-color);z-index:2}.individual-bottom .circle{color:var(--text-individual-bottom-color)}.individual-top .circle{color:var(--text-individual-top-color)}.individual-bottom span.secondary-info{color:var(--secondary-text-individual-bottom-color)}.individual-top span.secondary-info{color:var(--secondary-text-individual-top-color)}span.secondary-info.left-top{color:var(--secondary-text-individual-left-top-color)}span.individual-left-top{color:var(--text-individual-left-top-color)}span.secondary-info.left-bottom{color:var(--secondary-text-individual-left-bottom-color)}span.individual-left-bottom{color:var(--text-individual-left-bottom-color)}span.secondary-info.right-top{color:var(--secondary-text-individual-right-top-color)}span.individual-right-top{color:var(--text-individual-right-top-color)}span.secondary-info.right-bottom{color:var(--secondary-text-individual-right-bottom-color)}span.individual-right-bottom{color:var(--text-individual-right-bottom-color)}.solar span.secondary-info{color:var(--secondary-text-solar-color)}.grid span.secondary-info{color:var(--secondary-text-grid-color)}.home span.secondary-info{color:var(--secondary-text-home-color)}#battery-state-of-charge-text{color:var(--text-battery-state-of-charge-color)}@keyframes rotate-in{from{stroke-dashoffset:238.76104;stroke-dasharray:238.76104}}.card-actions{display:flex;justify-content:space-between;align-items:center}.card-actions a{text-decoration:none}.home-circle-sections{pointer-events:none}`,At=e=>e?"#".concat(e.map((e=>e.toString(16).padStart(2,"0"))).join("")):"",Mt=(e,t,i)=>{let o="var(--primary-text-color)";return"string"==typeof e&&(o=t[e].color),!0===e&&(o=t[i].color),o},zt={maxFlowRate:6,minFlowRate:.75,wattDecimals:0,kilowattDecimals:1,minExpectedPower:.01,maxExpectedPower:2e3,wattThreshold:1e3,transparencyZeroLines:0,displayZeroLines:{mode:"show",transparency:50,grey_color:[189,189,189]}},Pt=238.76104;!function(e){const t=window;t.customCards=t.customCards||[],t.customCards.push(Object.assign(Object.assign({},{type:"power-flow-card-plus",name:"Power Flow Card Plus",description:"An extended version of the power flow card with richer options, advanced features and a few small UI enhancements. Inspired by the Energy Dashboard."}),{preview:!0,documentationURL:"https://github.com/flixlix/power-flow-card-plus"}))}();let Dt=class extends se{constructor(){super(...arguments),this._config={},this._templateResults={},this._unsubRenderTemplates=new Map,this._width=0,this.previousDur={}}setConfig(e){var t,i,o,a,n,r,l,s,d,c,u;if(e.entities.individual1||e.entities.individual2)throw new Error("You are using an outdated configuration. Please update your configuration to the latest version.");if(!e.entities||!(null===(i=null===(t=e.entities)||void 0===t?void 0:t.battery)||void 0===i?void 0:i.entity)&&!(null===(a=null===(o=e.entities)||void 0===o?void 0:o.grid)||void 0===a?void 0:a.entity)&&!(null===(r=null===(n=e.entities)||void 0===n?void 0:n.solar)||void 0===r?void 0:r.entity))throw new Error("At least one entity for battery, grid or solar must be defined");this._config=Object.assign(Object.assign({},e),{kw_decimals:Se(e.kw_decimals,zt.kilowattDecimals),min_flow_rate:Se(e.min_flow_rate,zt.minFlowRate),max_flow_rate:Se(e.max_flow_rate,zt.maxFlowRate),w_decimals:Se(e.w_decimals,zt.wattDecimals),watt_threshold:Se(e.watt_threshold,zt.wattThreshold),max_expected_power:Se(e.max_expected_power,zt.maxExpectedPower),min_expected_power:Se(e.min_expected_power,zt.minExpectedPower),display_zero_lines:{mode:null!==(s=null===(l=e.display_zero_lines)||void 0===l?void 0:l.mode)&&void 0!==s?s:zt.displayZeroLines.mode,transparency:Se(null===(d=e.display_zero_lines)||void 0===d?void 0:d.transparency,zt.displayZeroLines.transparency),grey_color:null!==(u=null===(c=e.display_zero_lines)||void 0===c?void 0:c.grey_color)&&void 0!==u?u:zt.displayZeroLines.grey_color}})}connectedCallback(){super.connectedCallback(),this._tryConnectAll()}disconnectedCallback(){this._tryDisconnectAll()}static async getConfigElement(){return await Promise.resolve().then((function(){return Ba})),document.createElement("power-flow-card-plus-editor")}static getStubConfig(e){return function(e){function t(t,i){const o=We(t),a=e.states[o].attributes.friendly_name;return i.some((e=>o.includes(e)||(null==a?void 0:a.includes(e))))}const i=Object.keys(e.states).filter((t=>{const i=e.states[We(t)];return i.state&&i.attributes&&"power"===i.attributes.device_class||i.entity_id.includes("power")})),o=["grid","utility","net","meter"],a=["solar","pv","photovoltaic","inverter"],n=["battery"],r=["battery_percent","battery_level","state_of_charge","soc","percentage"],l=i.filter((e=>t(e,o)))[0],s=i.filter((e=>t(e,a)))[0],d=i.filter((e=>t(e,n)))[0],c=Object.keys(e.states).filter((t=>{const i=e.states[t];return i&&i.state&&i.attributes&&"%"===i.attributes.unit_of_measurement})).filter((e=>t(e,r)))[0];return{entities:{battery:{entity:null!=d?d:"",state_of_charge:null!=c?c:""},grid:l?{entity:l}:void 0,solar:s?{entity:s,display_zero_state:!0}:void 0},clickable_entities:!0,display_zero_lines:!0,use_new_flow_rate_model:!0,w_decimals:zt.wattDecimals,kw_decimals:zt.kilowattDecimals,min_flow_rate:zt.minFlowRate,max_flow_rate:zt.maxFlowRate,max_expected_power:zt.maxExpectedPower,min_expected_power:zt.minExpectedPower,watt_threshold:zt.wattThreshold,transparency_zero_lines:zt.transparencyZeroLines,sort_individual_devices:!1}}(e)}getCardSize(){return 3}openDetails(e,t,i){if(e.stopPropagation(),t)(async(e,t,i,o)=>{((e,t,i,o)=>{o=o||{},i=null==i?{}:i;const a=new Event("hass-action",{bubbles:void 0===o.bubbles||o.bubbles,cancelable:Boolean(o.cancelable),composed:void 0===o.composed||o.composed});a.detail=i,e.dispatchEvent(a)})(e,0,{config:i,action:o})})(e.target,this.hass,{entity:i,tap_action:t},"tap");else{if(!i||!this._config.clickable_entities)return;if(!((e,t)=>{const i=Ve(t);for(const t of i)if(!(t in e.states))return!1;return!0})(this.hass,i))return;const e=new CustomEvent("hass-more-info",{composed:!0,detail:{entityId:i}});this.dispatchEvent(e)}}render(){var e,t,i,o,a,n,r,l,s,d,c,u,p,h,v,_,m,f,y,g,b,w,x,k,S,$,C,E,A,M,z,P,D,T,O,N,j,B,I,L,F,G,U,V,W,Z,K,Y,q,X,J,Q,ee,te,ie,oe,ae,ne,re,le,se,de,ce,ue,pe,he,ve,_e,me,fe,ye,ge,be,we,xe,ke,Se,Ce,Ee,Ae,Le,He,Ve,We,Ze,Ke,Ye,qe,Je,et,it,ot,at,nt,lt,vt,ft,yt,bt,Et,zt,Dt,Tt,Ot,Nt,jt,Bt,It,Lt,Ht,Rt,Ft,Gt,Ut,Vt,Wt,Zt,Kt,Yt,qt,Xt,Jt,Qt,ei,ti,ii,oi,ai,ni,ri,li,si,di,ci,ui,pi,hi,vi,_i,mi,fi,yi,gi,bi,wi,xi,ki,Si,$i,Ci,Ei,Ai,Mi,zi,Pi,Di,Ti,Oi,Ni,ji,Bi,Ii,Li,Hi,Ri,Fi,Gi,Ui,Vi,Wi,Zi,Ki,Yi,qi,Xi,Ji,Qi,eo,to,io,oo,ao,no,ro,lo,so,co,uo,po,ho,vo,_o,mo,fo,yo;if(!this._config||!this.hass)return H``;const{entities:go}=this._config;this.style.setProperty("--clickable-cursor",this._config.clickable_entities?"pointer":"default");const bo=null,wo={entity:null===(e=go.grid)||void 0===e?void 0:e.entity,has:void 0!==(null===(t=null==go?void 0:go.grid)||void 0===t?void 0:t.entity),hasReturnToGrid:"string"==typeof(null===(i=go.grid)||void 0===i?void 0:i.entity)||!!(null===(a=null===(o=go.grid)||void 0===o?void 0:o.entity)||void 0===a?void 0:a.production),state:{fromGrid:ut(this.hass,this._config),toGrid:(xo=this.hass,ko=this._config,rt(xo,ko,"grid")),toBattery:bo,toHome:bo},powerOutage:{has:void 0!==(null===(r=null===(n=go.grid)||void 0===n?void 0:n.power_outage)||void 0===r?void 0:r.entity),isOutage:(go.grid&&(null===(s=this.hass.states[null===(l=go.grid.power_outage)||void 0===l?void 0:l.entity])||void 0===s?void 0:s.state))===(null!==(u=null===(c=null===(d=go.grid)||void 0===d?void 0:d.power_outage)||void 0===c?void 0:c.state_alert)&&void 0!==u?u:"on"),icon:(null===(h=null===(p=go.grid)||void 0===p?void 0:p.power_outage)||void 0===h?void 0:h.icon_alert)||"mdi:transmission-tower-off",name:null!==(m=null===(_=null===(v=go.grid)||void 0===v?void 0:v.power_outage)||void 0===_?void 0:_.label_alert)&&void 0!==m?m:H`Power<br>Outage`,entityGenerator:null===(y=null===(f=go.grid)||void 0===f?void 0:f.power_outage)||void 0===y?void 0:y.entity_generator},icon:_t(this.hass,go.grid,"mdi:transmission-tower"),name:mt(this.hass,go.grid,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.grid")),mainEntity:"object"==typeof(null===(g=go.grid)||void 0===g?void 0:g.entity)?go.grid.entity.consumption||go.grid.entity.production:null===(b=go.grid)||void 0===b?void 0:b.entity,color:{fromGrid:null===(x=null===(w=go.grid)||void 0===w?void 0:w.color)||void 0===x?void 0:x.consumption,toGrid:null===(S=null===(k=go.grid)||void 0===k?void 0:k.color)||void 0===S?void 0:S.production,icon_type:null===($=go.grid)||void 0===$?void 0:$.color_icon,circle_type:null===(C=go.grid)||void 0===C?void 0:C.color_circle},tap_action:null===(E=go.grid)||void 0===E?void 0:E.tap_action,secondary:{entity:null===(M=null===(A=go.grid)||void 0===A?void 0:A.secondary_info)||void 0===M?void 0:M.entity,decimals:null===(P=null===(z=go.grid)||void 0===z?void 0:z.secondary_info)||void 0===P?void 0:P.decimals,template:null===(T=null===(D=go.grid)||void 0===D?void 0:D.secondary_info)||void 0===T?void 0:T.template,has:void 0!==(null===(N=null===(O=go.grid)||void 0===O?void 0:O.secondary_info)||void 0===N?void 0:N.entity),state:pt(this.hass,this._config),icon:null===(B=null===(j=go.grid)||void 0===j?void 0:j.secondary_info)||void 0===B?void 0:B.icon,unit:null===(L=null===(I=go.grid)||void 0===I?void 0:I.secondary_info)||void 0===L?void 0:L.unit_of_measurement,unit_white_space:null===(G=null===(F=go.grid)||void 0===F?void 0:F.secondary_info)||void 0===G?void 0:G.unit_white_space,accept_negative:(null===(V=null===(U=go.grid)||void 0===U?void 0:U.secondary_info)||void 0===V?void 0:V.accept_negative)||!1,color:{type:null===(Z=null===(W=go.grid)||void 0===W?void 0:W.secondary_info)||void 0===Z?void 0:Z.color_value},tap_action:null===(Y=null===(K=go.grid)||void 0===K?void 0:K.secondary_info)||void 0===Y?void 0:Y.tap_action}};var xo,ko;const So=void 0!==(null===(q=go.solar)||void 0===q?void 0:q.entity),$o=null!==(X=$t(this.hass,this._config))&&void 0!==X&&X,Co=!1!==(null===(J=go.solar)||void 0===J?void 0:J.display_zero)||$o,Eo={entity:null===(Q=go.solar)||void 0===Q?void 0:Q.entity,has:So&&Co,state:{total:$t(this.hass,this._config),toHome:bo,toGrid:bo,toBattery:bo},icon:_t(this.hass,go.solar,"mdi:solar-power"),name:mt(this.hass,go.solar,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.solar")),tap_action:null===(ee=go.solar)||void 0===ee?void 0:ee.tap_action,secondary:{entity:null===(ie=null===(te=go.solar)||void 0===te?void 0:te.secondary_info)||void 0===ie?void 0:ie.entity,decimals:null===(ae=null===(oe=go.solar)||void 0===oe?void 0:oe.secondary_info)||void 0===ae?void 0:ae.decimals,template:null===(re=null===(ne=go.solar)||void 0===ne?void 0:ne.secondary_info)||void 0===re?void 0:re.template,has:void 0!==(null===(se=null===(le=go.solar)||void 0===le?void 0:le.secondary_info)||void 0===se?void 0:se.entity),accept_negative:(null===(ce=null===(de=go.solar)||void 0===de?void 0:de.secondary_info)||void 0===ce?void 0:ce.accept_negative)||!1,state:Ct(this.hass,this._config),icon:null===(pe=null===(ue=go.solar)||void 0===ue?void 0:ue.secondary_info)||void 0===pe?void 0:pe.icon,unit:null===(ve=null===(he=go.solar)||void 0===he?void 0:he.secondary_info)||void 0===ve?void 0:ve.unit_of_measurement,unit_white_space:null===(me=null===(_e=go.solar)||void 0===_e?void 0:_e.secondary_info)||void 0===me?void 0:me.unit_white_space,tap_action:null===(ye=null===(fe=go.solar)||void 0===fe?void 0:fe.secondary_info)||void 0===ye?void 0:ye.tap_action}},Ao={entity:null===(ge=go.battery)||void 0===ge?void 0:ge.entity,has:(()=>{var e,t,i,o,a;return!!(null===(e=go.battery)||void 0===e?void 0:e.entity)&&("object"==typeof(null===(t=go.battery)||void 0===t?void 0:t.entity)?(null===(i=go.battery)||void 0===i?void 0:i.entity.consumption)||(null===(o=go.battery)||void 0===o?void 0:o.entity.production):void 0!==(null===(a=go.battery)||void 0===a?void 0:a.entity))})(),mainEntity:"object"==typeof(null===(be=go.battery)||void 0===be?void 0:be.entity)?go.battery.entity.consumption:null===(we=go.battery)||void 0===we?void 0:we.entity,name:mt(this.hass,go.battery,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.battery")),icon:_t(this.hass,go.battery,"mdi:battery-high"),state_of_charge:{state:st(this.hass,this._config),unit:null!==(ke=null===(xe=null==go?void 0:go.battery)||void 0===xe?void 0:xe.state_of_charge_unit)&&void 0!==ke?ke:"%",unit_white_space:null===(Ce=null===(Se=null==go?void 0:go.battery)||void 0===Se?void 0:Se.state_of_charge_unit_white_space)||void 0===Ce||Ce,decimals:(null===(Ee=null==go?void 0:go.battery)||void 0===Ee?void 0:Ee.state_of_charge_decimals)||0},state:{toBattery:dt(this.hass,this._config),fromBattery:ct(this.hass,this._config),toGrid:0,toHome:0},tap_action:null===(Ae=go.battery)||void 0===Ae?void 0:Ae.tap_action,color:{fromBattery:null===(He=null===(Le=go.battery)||void 0===Le?void 0:Le.color)||void 0===He?void 0:He.consumption,toBattery:null===(We=null===(Ve=go.battery)||void 0===Ve?void 0:Ve.color)||void 0===We?void 0:We.production,icon_type:void 0,circle_type:null===(Ze=go.battery)||void 0===Ze?void 0:Ze.color_circle}},Mo={entity:null===(Ke=go.home)||void 0===Ke?void 0:Ke.entity,has:void 0!==(null===(Ye=null==go?void 0:go.home)||void 0===Ye?void 0:Ye.entity),state:bo,icon:_t(this.hass,null==go?void 0:go.home,"mdi:home"),name:mt(this.hass,null==go?void 0:go.home,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.home")),tap_action:null===(qe=go.home)||void 0===qe?void 0:qe.tap_action,secondary:{entity:null===(et=null===(Je=go.home)||void 0===Je?void 0:Je.secondary_info)||void 0===et?void 0:et.entity,template:null===(ot=null===(it=go.home)||void 0===it?void 0:it.secondary_info)||void 0===ot?void 0:ot.template,has:void 0!==(null===(nt=null===(at=go.home)||void 0===at?void 0:at.secondary_info)||void 0===nt?void 0:nt.entity),state:ht(this.hass,this._config),accept_negative:(null===(vt=null===(lt=go.home)||void 0===lt?void 0:lt.secondary_info)||void 0===vt?void 0:vt.accept_negative)||!1,unit:null===(yt=null===(ft=go.home)||void 0===ft?void 0:ft.secondary_info)||void 0===yt?void 0:yt.unit_of_measurement,unit_white_space:null===(Et=null===(bt=go.home)||void 0===bt?void 0:bt.secondary_info)||void 0===Et?void 0:Et.unit_white_space,icon:null===(Dt=null===(zt=go.home)||void 0===zt?void 0:zt.secondary_info)||void 0===Dt?void 0:Dt.icon,decimals:null===(Ot=null===(Tt=go.home)||void 0===Tt?void 0:Tt.secondary_info)||void 0===Ot?void 0:Ot.decimals,tap_action:null===(jt=null===(Nt=go.home)||void 0===Nt?void 0:Nt.secondary_info)||void 0===jt?void 0:jt.tap_action}},zo=(null===(Bt=go.individual)||void 0===Bt?void 0:Bt.map((e=>wt(this.hass,e))))||[],Po={entity:null===(It=go.fossil_fuel_percentage)||void 0===It?void 0:It.entity,name:mt(this.hass,go.fossil_fuel_percentage,this.hass.localize("card.label.non_fossil_fuel_percentage")),icon:_t(this.hass,go.fossil_fuel_percentage,"mdi:leaf"),has:xt(this.hass,this._config),hasPercentage:kt(this.hass,this._config),state:{power:bo},color:null===(Lt=go.fossil_fuel_percentage)||void 0===Lt?void 0:Lt.color,color_value:null===(Ht=go.fossil_fuel_percentage)||void 0===Ht?void 0:Ht.color_value,tap_action:null===(Rt=go.fossil_fuel_percentage)||void 0===Rt?void 0:Rt.tap_action,secondary:{entity:null===(Gt=null===(Ft=go.fossil_fuel_percentage)||void 0===Ft?void 0:Ft.secondary_info)||void 0===Gt?void 0:Gt.entity,decimals:null===(Vt=null===(Ut=go.fossil_fuel_percentage)||void 0===Ut?void 0:Ut.secondary_info)||void 0===Vt?void 0:Vt.decimals,template:null===(Zt=null===(Wt=go.fossil_fuel_percentage)||void 0===Wt?void 0:Wt.secondary_info)||void 0===Zt?void 0:Zt.template,has:void 0!==(null===(Yt=null===(Kt=go.fossil_fuel_percentage)||void 0===Kt?void 0:Kt.secondary_info)||void 0===Yt?void 0:Yt.entity),state:St(this.hass,this._config),accept_negative:(null===(Xt=null===(qt=go.fossil_fuel_percentage)||void 0===qt?void 0:qt.secondary_info)||void 0===Xt?void 0:Xt.accept_negative)||!1,icon:null===(Qt=null===(Jt=go.fossil_fuel_percentage)||void 0===Jt?void 0:Jt.secondary_info)||void 0===Qt?void 0:Qt.icon,unit:null===(ti=null===(ei=go.fossil_fuel_percentage)||void 0===ei?void 0:ei.secondary_info)||void 0===ti?void 0:ti.unit_of_measurement,unit_white_space:null===(oi=null===(ii=go.fossil_fuel_percentage)||void 0===ii?void 0:ii.secondary_info)||void 0===oi?void 0:oi.unit_white_space,color_value:null===(ni=null===(ai=go.fossil_fuel_percentage)||void 0===ai?void 0:ai.secondary_info)||void 0===ni?void 0:ni.color_value,tap_action:null===(li=null===(ri=go.fossil_fuel_percentage)||void 0===ri?void 0:ri.secondary_info)||void 0===li?void 0:li.tap_action}};wo.state.fromGrid=gt(wo.state.fromGrid,null===(si=go.grid)||void 0===si?void 0:si.display_zero_tolerance),wo.state.toGrid=gt(wo.state.toGrid,null===(di=go.grid)||void 0===di?void 0:di.display_zero_tolerance),Eo.state.total=gt(Eo.state.total,null===(ci=go.solar)||void 0===ci?void 0:ci.display_zero_tolerance),Ao.state.fromBattery=gt(Ao.state.fromBattery,null===(ui=go.battery)||void 0===ui?void 0:ui.display_zero_tolerance),Ao.state.toBattery=gt(Ao.state.toBattery,null===(pi=go.battery)||void 0===pi?void 0:pi.display_zero_tolerance),0===wo.state.fromGrid&&(wo.state.toHome=0,wo.state.toBattery=0),0===Eo.state.total&&(Eo.state.toGrid=0,Eo.state.toBattery=0,Eo.state.toHome=0),0===Ao.state.fromBattery&&(Ao.state.toGrid=0,Ao.state.toHome=0),Eo.has&&(Eo.state.toHome=(null!==(hi=Eo.state.total)&&void 0!==hi?hi:0)-(null!==(vi=wo.state.toGrid)&&void 0!==vi?vi:0)-(null!==(_i=Ao.state.toBattery)&&void 0!==_i?_i:0));const Do=Math.max(null!==(fi=null===(mi=go.grid)||void 0===mi?void 0:mi.display_zero_tolerance)&&void 0!==fi?fi:0,null!==(gi=null===(yi=go.battery)||void 0===yi?void 0:yi.display_zero_tolerance)&&void 0!==gi?gi:0);if(null!==Eo.state.toHome&&Eo.state.toHome<0?(Ao.has&&(wo.state.toBattery=Math.abs(Eo.state.toHome),wo.state.toBattery>(null!==(bi=wo.state.fromGrid)&&void 0!==bi?bi:0)&&(Ao.state.toGrid=Math.min(wo.state.toBattery-(null!==(wi=wo.state.fromGrid)&&void 0!==wi?wi:0),0),wo.state.toBattery=wo.state.fromGrid)),Eo.state.toHome=0):null!==Ao.state.toBattery&&Ao.state.toBattery>0?(Eo.state.toBattery=Eo.state.total-(Eo.state.toHome||0)-(wo.state.toGrid||0),wo.state.toBattery=Ao.state.toBattery-Eo.state.toBattery):wo.state.toBattery=0,wo.state.toBattery=(null!==(xi=wo.state.toBattery)&&void 0!==xi?xi:0)>Do?wo.state.toBattery:0,Ao.has&&(Eo.has?(Ao.state.toGrid||(Ao.state.toGrid=Math.max(0,(wo.state.toGrid||0)-(Eo.state.total||0)-(Ao.state.toBattery||0)-(wo.state.toBattery||0))),Eo.state.toBattery=Ao.state.toBattery-(wo.state.toBattery||0),(null===(ki=go.solar)||void 0===ki?void 0:ki.display_zero_tolerance)&&go.solar.display_zero_tolerance>=(Eo.state.total||0)&&(Eo.state.toBattery=0)):Ao.state.toGrid=wo.state.toGrid||0,Ao.state.toGrid=(Ao.state.toGrid||0)>Do&&Ao.state.toGrid||0,Ao.state.toHome=(null!==(Si=Ao.state.fromBattery)&&void 0!==Si?Si:0)-(null!==($i=Ao.state.toGrid)&&void 0!==$i?$i:0)),wo.state.toHome=Math.max(wo.state.fromGrid-(null!==(Ci=wo.state.toBattery)&&void 0!==Ci?Ci:0),0),Eo.has&&wo.state.toGrid&&(Eo.state.toGrid=wo.state.toGrid-(null!==(Ei=Ao.state.toGrid)&&void 0!==Ei?Ei:0)),wo.powerOutage.isOutage&&(wo.state.fromGrid=wo.powerOutage.entityGenerator?Math.max(Qe(this.hass,wo.powerOutage.entityGenerator),0):0,wo.state.toHome=Math.max(wo.state.fromGrid-(null!==(Ai=wo.state.toBattery)&&void 0!==Ai?Ai:0),0),wo.state.toGrid=0,Ao.state.toGrid=0,Eo.state.toGrid=0,wo.icon=wo.powerOutage.icon,Po.has=!1,Po.hasPercentage=!1),Po.has){const e=1-(null!==(zi=Xe(this.hass,null===(Mi=go.fossil_fuel_percentage)||void 0===Mi?void 0:Mi.entity))&&void 0!==zi?zi:0)/100;Po.state.power=wo.state.toHome*e}const To=(null==zo?void 0:zo.reduce(((e,t)=>e+(t.has&&t.state||0)),0))||0,Oo=Math.max(wo.state.toHome+(null!==(Pi=Eo.state.toHome)&&void 0!==Pi?Pi:0)+(null!==(Di=Ao.state.toHome)&&void 0!==Di?Di:0),0),No=Ao.state.toHome?Pt*(Ao.state.toHome/Oo):0,jo=Eo.state.toHome?Pt*(Eo.state.toHome/Oo):0,Bo=Po.state.power?Pt*(Po.state.power/Oo):0,Io=Pt*((Oo-(null!==(Ti=Po.state.power)&&void 0!==Ti?Ti:0)-(null!==(Oi=Ao.state.toHome)&&void 0!==Oi?Oi:0)-(null!==(Ni=Eo.state.toHome)&&void 0!==Ni?Ni:0))/Oo),Lo=(null===(ji=go.home)||void 0===ji?void 0:ji.override_state)&&go.home.entity?(null===(Bi=go.home)||void 0===Bi?void 0:Bi.subtract_individual)?$e(this.hass,this._config,Qe(this.hass,go.home.entity)-To,{unit:null===(Ii=go.home)||void 0===Ii?void 0:Ii.unit_of_measurement,unitWhiteSpace:null===(Li=go.home)||void 0===Li?void 0:Li.unit_white_space,watt_threshold:this._config.watt_threshold}):$e(this.hass,this._config,Qe(this.hass,go.home.entity),{unit:null===(Hi=go.home)||void 0===Hi?void 0:Hi.unit_of_measurement,unitWhiteSpace:null===(Ri=go.home)||void 0===Ri?void 0:Ri.unit_white_space,watt_threshold:this._config.watt_threshold}):(null===(Fi=go.home)||void 0===Fi?void 0:Fi.subtract_individual)?$e(this.hass,this._config,Oo-To||0,{unit:null===(Gi=go.home)||void 0===Gi?void 0:Gi.unit_of_measurement,unitWhiteSpace:null===(Ui=go.home)||void 0===Ui?void 0:Ui.unit_white_space,watt_threshold:this._config.watt_threshold}):$e(this.hass,this._config,Oo,{unit:null===(Vi=go.home)||void 0===Vi?void 0:Vi.unit_of_measurement,unitWhiteSpace:null===(Wi=go.home)||void 0===Wi?void 0:Wi.unit_white_space,watt_threshold:this._config.watt_threshold}),Ho=wo.state.toHome+(null!==(Zi=Eo.state.toHome)&&void 0!==Zi?Zi:0)+(null!==(Ki=Eo.state.toGrid)&&void 0!==Ki?Ki:0)+(null!==(Yi=Eo.state.toBattery)&&void 0!==Yi?Yi:0)+(null!==(qi=Ao.state.toHome)&&void 0!==qi?qi:0)+(null!==(Xi=wo.state.toBattery)&&void 0!==Xi?Xi:0)+(null!==(Ji=Ao.state.toGrid)&&void 0!==Ji?Ji:0);if(null===Ao.state_of_charge.state?Ao.icon="mdi:battery":Ao.state_of_charge.state<=72&&Ao.state_of_charge.state>44?Ao.icon="mdi:battery-medium":Ao.state_of_charge.state<=44&&Ao.state_of_charge.state>16?Ao.icon="mdi:battery-low":Ao.state_of_charge.state<=16&&(Ao.icon="mdi:battery-outline"),void 0!==(null===(Qi=go.battery)||void 0===Qi?void 0:Qi.icon)&&(Ao.icon=null===(eo=go.battery)||void 0===eo?void 0:eo.icon),null===(to=go.battery)||void 0===to?void 0:to.use_metadata){const e=_t(this.hass,go.battery,"NO_ICON_METADATA");"NO_ICON_METADATA"!==e&&(Ao.icon=e)}const Ro={batteryGrid:Fe(this._config,null!==(oo=null!==(io=wo.state.toBattery)&&void 0!==io?io:Ao.state.toGrid)&&void 0!==oo?oo:0,Ho),batteryToHome:Fe(this._config,null!==(ao=Ao.state.toHome)&&void 0!==ao?ao:0,Ho),gridToHome:Fe(this._config,wo.state.toHome,Ho),solarToBattery:Fe(this._config,null!==(no=Eo.state.toBattery)&&void 0!==no?no:0,Ho),solarToGrid:Fe(this._config,null!==(ro=Eo.state.toGrid)&&void 0!==ro?ro:0,Ho),solarToHome:Fe(this._config,null!==(lo=Eo.state.toHome)&&void 0!==lo?lo:0,Ho),individual:(null==zo?void 0:zo.map((e=>{var t;return Fe(this._config,null!==(t=e.state)&&void 0!==t?t:0,To)})))||[],nonFossil:Fe(this._config,null!==(so=Po.state.power)&&void 0!==so?so:0,Ho)};["batteryGrid","batteryToHome","gridToHome","solarToBattery","solarToGrid","solarToHome"].forEach((e=>{const t=this[`${e}Flow`];t&&this.previousDur[e]&&this.previousDur[e]!==Ro[e]&&(t.pauseAnimations(),t.setCurrentTime(t.getCurrentTime()*(Ro[e]/this.previousDur[e])),t.unpauseAnimations()),this.previousDur[e]=Ro[e]}));const Fo={battery:{value:No,color:"var(--energy-battery-out-color)"},solar:{value:jo,color:"var(--energy-solar-color)"},grid:{value:Io,color:"var(--energy-grid-consumption-color)"},gridNonFossil:{value:Bo,color:"var(--energy-non-fossil-color)"}},Go=Object.keys(Fo).reduce(((e,t)=>Fo[e].value>Fo[t].value?e:t)),Uo=e=>e?void 0===(null==e?void 0:e.state)?"":$e(this.hass,this._config,null==e?void 0:e.state,{decimals:null==e?void 0:e.decimals,unit:null==e?void 0:e.unit,unitWhiteSpace:null==e?void 0:e.unit_white_space,watt_threshold:this._config.watt_threshold}):"",Vo=["left-top","left-bottom","right-top","right-bottom"],Wo={gridSecondary:null===(co=this._templateResults.gridSecondary)||void 0===co?void 0:co.result,solarSecondary:null===(uo=this._templateResults.solarSecondary)||void 0===uo?void 0:uo.result,homeSecondary:null===(po=this._templateResults.homeSecondary)||void 0===po?void 0:po.result,nonFossilFuelSecondary:null===(ho=this._templateResults.nonFossilFuelSecondary)||void 0===ho?void 0:ho.result,individual:(null==zo?void 0:zo.map(((e,t)=>{var i;return null===(i=this._templateResults[`${Vo[t]}Secondary`])||void 0===i?void 0:i.result})))||[]},Zo=this._width>420;((e,{grid:t,solar:i,entities:o,individual:a,battery:n,homeSources:r,homeLargestSource:l,nonFossil:s,display_zero_lines_transparency:d,display_zero_lines_grey_color:c,isCardWideEnough:u})=>{var p,h,v,_,m,f,y,g,b,w,x,k,S,$,C,E,A,M,z,P,D,T,O,N,j;if(e.style.setProperty("--icon-grid-color","consumption"===t.color.icon_type?"var(--energy-grid-consumption-color)":"production"===t.color.icon_type?"var(--energy-grid-return-color)":!0===t.color.icon_type?(null!==(p=t.state.fromGrid)&&void 0!==p?p:0)>=(null!==(h=t.state.toGrid)&&void 0!==h?h:0)?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--primary-text-color)"),e.style.setProperty("--circle-grid-color","consumption"===t.color.circle_type?"var(--energy-grid-consumption-color)":"production"===t.color.circle_type?"var(--energy-grid-return-color)":!0===t.color.circle_type?(null!==(v=t.state.fromGrid)&&void 0!==v?v:0)>=(null!==(_=t.state.toGrid)&&void 0!==_?_:0)?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--energy-grid-consumption-color)"),void 0!==t.color.fromGrid&&("object"==typeof t.color.fromGrid&&(t.color.fromGrid=At(t.color.fromGrid)),e.style.setProperty("--energy-grid-consumption-color",t.color.fromGrid||"#a280db")),void 0!==t.color.toGrid&&("object"==typeof t.color.toGrid&&(t.color.toGrid=At(t.color.toGrid)),e.style.setProperty("--energy-grid-return-color",t.color.toGrid||"#a280db")),e.style.setProperty("--secondary-text-grid-color","consumption"===t.secondary.color.type?"var(--energy-grid-consumption-color)":"production"===t.secondary.color.type?"var(--energy-grid-return-color)":!0===t.secondary.color.type?(null!==(m=t.state.fromGrid)&&void 0!==m?m:0)>=(null!==(f=t.state.toGrid)&&void 0!==f?f:0)?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--primary-text-color)"),!1===(null===(y=o.grid)||void 0===y?void 0:y.color_value)?(e.style.setProperty("--text-grid-consumption-color","var(--primary-text-color)"),e.style.setProperty("--text-grid-return-color","var(--primary-text-color)")):(e.style.setProperty("--text-grid-consumption-color","var(--energy-grid-consumption-color)"),e.style.setProperty("--text-grid-return-color","var(--energy-grid-return-color)")),e.style.setProperty("--text-solar-color",(null===(g=o.solar)||void 0===g?void 0:g.color_value)?"var(--energy-solar-color)":"var(--primary-text-color)"),e.style.setProperty("--secondary-text-solar-color",(null===(w=null===(b=o.solar)||void 0===b?void 0:b.secondary_info)||void 0===w?void 0:w.color_value)?"var(--energy-solar-color)":"var(--primary-text-color)"),void 0!==(null===(x=o.solar)||void 0===x?void 0:x.color)){let t=null===(k=o.solar)||void 0===k?void 0:k.color;"object"==typeof t&&(t=At(t)),e.style.setProperty("--energy-solar-color",t||"#ff9800")}e.style.setProperty("--icon-solar-color",(null===(S=o.solar)||void 0===S?void 0:S.color_icon)?"var(--energy-solar-color)":"var(--primary-text-color)"),void 0!==n.color.fromBattery&&("object"==typeof n.color.fromBattery&&(n.color.fromBattery=At(n.color.fromBattery)),e.style.setProperty("--energy-battery-out-color",n.color.fromBattery||"#4db6ac")),void 0!==n.color.toBattery&&("object"==typeof n.color.toBattery&&(n.color.toBattery=At(n.color.toBattery)),e.style.setProperty("--energy-battery-in-color",n.color.toBattery||"#a280db")),n.color.icon_type=null===($=o.battery)||void 0===$?void 0:$.color_icon,e.style.setProperty("--icon-battery-color","consumption"===n.color.icon_type?"var(--energy-battery-in-color)":"production"===n.color.icon_type?"var(--energy-battery-out-color)":!0===n.color.icon_type?n.state.fromBattery>=n.state.toBattery?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)":"var(--primary-text-color)");const B=null===(C=o.battery)||void 0===C?void 0:C.color_state_of_charge_value;if(e.style.setProperty("--text-battery-state-of-charge-color","consumption"===B?"var(--energy-battery-in-color)":"production"===B?"var(--energy-battery-out-color)":!0===B?n.state.fromBattery>=n.state.toBattery?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)":"var(--primary-text-color)"),e.style.setProperty("--circle-battery-color","consumption"===n.color.circle_type?"var(--energy-battery-in-color)":"production"===n.color.circle_type||!0===n.color.circle_type&&n.state.fromBattery>=n.state.toBattery?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)"),!1===(null===(E=o.battery)||void 0===E?void 0:E.color_value)?(e.style.setProperty("--text-battery-in-color","var(--primary-text-color)"),e.style.setProperty("--text-battery-out-color","var(--primary-text-color)")):(e.style.setProperty("--text-battery-in-color","var(--energy-battery-in-color)"),e.style.setProperty("--text-battery-out-color","var(--energy-battery-out-color)")),void 0!==s.color&&("object"==typeof s.color&&(s.color=At(s.color)),e.style.setProperty("--non-fossil-color",s.color||"var(--energy-non-fossil-color)")),e.style.setProperty("--icon-non-fossil-color",(null===(A=o.fossil_fuel_percentage)||void 0===A?void 0:A.color_icon)?"var(--non-fossil-color)":"var(--primary-text-color)"),e.style.setProperty("--text-non-fossil-color",(null===(M=o.fossil_fuel_percentage)||void 0===M?void 0:M.color_value)?"var(--non-fossil-color)":"var(--primary-text-color)"),e.style.setProperty("--secondary-text-non-fossil-color",(null===(P=null===(z=o.fossil_fuel_percentage)||void 0===z?void 0:z.secondary_info)||void 0===P?void 0:P.color_value)?"var(--non-fossil-color)":"var(--primary-text-color)"),e.style.setProperty("--secondary-text-home-color",(null===(T=null===(D=o.home)||void 0===D?void 0:D.secondary_info)||void 0===T?void 0:T.color_value)?"var(--text-home-color)":"var(--primary-text-color)"),e.style.setProperty("--icon-home-color",Mt(null===(O=o.home)||void 0===O?void 0:O.color_icon,r,l)),e.style.setProperty("--text-home-color",Mt(null===(N=o.home)||void 0===N?void 0:N.color_value,r,l)),!1===(null===(j=o.home)||void 0===j?void 0:j.circle_animation)&&e.style.setProperty("--home-circle-animation","none"),e.style.setProperty("--battery-grid-line",t.state.toBattery?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)"),e.style.setProperty("--transparency-unused-lines",d?d.toString():"0"),void 0!==c){let t=c;"object"==typeof t&&(t=At(t)),e.style.setProperty("--greyed-out--line-color",t)}if(i.has&&(n.has?(e.style.setProperty("--lines-svg-not-flat-line-height","106%"),e.style.setProperty("--lines-svg-not-flat-line-top","-3%"),e.style.setProperty("--lines-svg-flat-width","calc(100% - 160px)"),e.style.setProperty("--lines-svg-flat-left","0"),e.style.setProperty("--lines-svg-not-flat-left","0")):(e.style.setProperty("--lines-svg-not-flat-line-top","-2%"),e.style.setProperty("--lines-svg-flat-width",u?"calc(100% - 154px)":"calc(100% - 157px)"),e.style.setProperty("--lines-svg-not-flat-width",u?"calc(103% - 172px)":"calc(103% - 169px)"),e.style.setProperty("--lines-svg-not-flat-left","3px"),e.style.setProperty("--lines-svg-flat-left","-3px"))),null==a?void 0:a.some((e=>e.has))){const t=(t,i)=>{var o;const a=["left-top","left-bottom","right-top","right-bottom"],n=(null==a?void 0:a[i])||"left-top";let r=null==t?void 0:t.color;"object"==typeof r&&(r=At(r)),e.style.setProperty(`--individual-${n}-color`,r||["#d0cc5b","#964cb5","#b54c9d","#5bd0cc"][i]||"#d0cc5b"),e.style.setProperty(`--icon-individual-${n}-color`,!1!==(null==t?void 0:t.color_icon)?`var(--individual-${n}-color)`:"var(--primary-text-color)"),e.style.setProperty(`--text-individual-${n}-color`,(null==t?void 0:t.color_value)?`var(--individual-${n}-color)`:"var(--primary-text-color)"),e.style.setProperty(`--secondary-text-individual-${n}-color`,(null===(o=null==t?void 0:t.secondary_info)||void 0===o?void 0:o.color_value)?`var(--individual-${n}-color)`:"var(--primary-text-color)")};let i=0;a.forEach(((e,n)=>{a[n].has&&(t(o.individual[n],i),i++)}))}})(this,{grid:wo,solar:Eo,battery:Ao,display_zero_lines_grey_color:"grey_out"===(null===(vo=this._config.display_zero_lines)||void 0===vo?void 0:vo.mode)?null===(_o=this._config.display_zero_lines)||void 0===_o?void 0:_o.grey_color:"",display_zero_lines_transparency:"transparency"===(null===(mo=this._config.display_zero_lines)||void 0===mo?void 0:mo.mode)?null===(fo=this._config.display_zero_lines)||void 0===fo?void 0:fo.transparency:"",entities:go,homeLargestSource:Go,homeSources:Fo,individual:zo,nonFossil:Po,isCardWideEnough:Zo});const Ko=this._config.sort_individual_devices?function(e){const t=[...e];return t.sort(((e,t)=>(e.state||0)-(t.state||0))).reverse(),t}(zo):zo,Yo=(e=>Pe(e,0))(Ko),qo=De(Ko),Xo=Te(Ko),Jo=Oe(Ko);return H`<ha-card .header="${this._config.title}" class="${this._config.full_size?"full-size":""}" style="${this._config.style_ha_card?this._config.style_ha_card:""}"><div class="card-content ${this._config.full_size?"full-size":""}" id="power-flow-card-plus" style="${this._config.style_card_content?this._config.style_card_content:""}">${Eo.has||(null==zo?void 0:zo.some((e=>null==e?void 0:e.has)))||Po.hasPercentage?H`<div class="row">${tt(this,this._config,{entities:go,grid:wo,newDur:Ro,nonFossil:Po,templatesObj:Wo})} ${Eo.has?((e,t,{entities:i,solar:o,templatesObj:a})=>{var n;return H`<div class="circle-container solar"><span class="label">${o.name}</span><div class="circle" @click="${t=>{e.openDetails(t,o.tap_action,o.entity)}}" @keyDown="${t=>{"Enter"===t.key&&e.openDetails(t,o.tap_action,o.entity)}}">${Re(e.hass,e,t,a,o,"solar")} ${" "!==o.icon?H`<ha-icon id="solar-icon" .icon="${o.icon}">`:null} ${!1!==(null===(n=i.solar)||void 0===n?void 0:n.display_zero_state)||(o.state.total||0)>0?H`<span class="solar">${$e(e.hass,t,o.state.total,{unit:o.state.unit,unitWhiteSpace:o.state.unit_white_space,decimals:o.state.decimals,watt_threshold:t.watt_threshold})}</span>`:""}</div></div>`})(this,this._config,{entities:go,solar:Eo,templatesObj:Wo}):(null==zo?void 0:zo.some((e=>null==e?void 0:e.has)))?H`<div class="spacer"></div>`:""} ${Yo?((e,t,{individualObj:i,templatesObj:o,displayState:a,newDur:n})=>{var r,l,s,d,c,u,p;if(!i)return H`<div class="spacer"></div>`;const h=(null===(l=null===(r=null==t?void 0:t.entities)||void 0===r?void 0:r.individual)||void 0===l?void 0:l.findIndex((e=>e.entity===i.entity)))||0,v=n.individual[h]||0;return H`<div class="circle-container individual-top"><span class="label">${i.name}</span><div class="circle" @click="${t=>{var o;e.openDetails(t,null===(o=null==i?void 0:i.field)||void 0===o?void 0:o.tap_action,null==i?void 0:i.entity)}}" @keyDown="${t=>{var o;"Enter"===t.key&&e.openDetails(t,null===(o=null==i?void 0:i.field)||void 0===o?void 0:o.tap_action,null==i?void 0:i.entity)}}">${Ue(e.hass,e,t,o,i,h,"left-top")} ${" "!==i.icon?H`<ha-icon id="individual-left-top-icon" .icon="${i.icon}">`:null} ${!1!==(null===(s=null==i?void 0:i.field)||void 0===s?void 0:s.display_zero_state)||(i.state||0)>(null!==(d=i.displayZeroTolerance)&&void 0!==d?d:0)?H`<span class="individual-top individual-left-top">${(null==i?void 0:i.showDirection)?H`<ha-icon class="small" .icon="${i.invertAnimation?"mdi:arrow-down":"mdi:arrow-up"}"></ha-icon>`:""}${a}</span>`:""}</div>${Me(t,i.state||0)&&!(null===(c=t.entities.home)||void 0===c?void 0:c.hide)?H`<svg width="80" height="30"><path d="M40 -10 v50" id="individual-top" class="${ze(i.state||0,t)}"/>${Be(t)&&i.state&&i.state>=(null!==(u=i.displayZeroTolerance)&&void 0!==u?u:0)?R`<circle r="1.75" class="individual-top" vector-effect="non-scaling-stroke"><animateMotion dur="${Ge(null===(p=null==i?void 0:i.field)||void 0===p?void 0:p.calculate_flow_rate,v)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${i.invertAnimation?"0;1":"1;0"}" keyTimes="0;1"><mpath xlink:href="#individual-top"></animateMotion></circle>`:""}</svg>`:""}</div>`})(this,this._config,{individualObj:Yo,displayState:Uo(Yo),newDur:Ro,templatesObj:Wo}):H`<div class="spacer"></div>`} ${Ne(zo)?((e,t,{individualObj:i,templatesObj:o,displayState:a,newDur:n,battery:r,individualObjs:l})=>{var s,d,c,u,p,h,v;if(!i)return H`<div class="spacer"></div>`;const _=(null===(d=null===(s=null==t?void 0:t.entities)||void 0===s?void 0:s.individual)||void 0===d?void 0:d.findIndex((e=>e.entity===i.entity)))||-1;if(-1===_)return H`<div class="spacer"></div>`;const m=n.individual[_]||1.66,f=!!(null==r?void 0:r.has)||je(l);return H`<div class="circle-container individual-top individual-right individual-right-top"><span class="label">${i.name}</span><div class="circle" @click="${t=>{var o;e.openDetails(t,null===(o=null==i?void 0:i.field)||void 0===o?void 0:o.tap_action,null==i?void 0:i.entity)}}" @keyDown="${t=>{var o;"Enter"===t.key&&e.openDetails(t,null===(o=null==i?void 0:i.field)||void 0===o?void 0:o.tap_action,null==i?void 0:i.entity)}}">${Ue(e.hass,e,t,o,i,_,"right-top")} ${" "!==i.icon?H`<ha-icon id="individual-right-top-icon" .icon="${i.icon}">`:null} ${!1!==(null===(c=null==i?void 0:i.field)||void 0===c?void 0:c.display_zero_state)||(i.state||0)>(null!==(u=i.displayZeroTolerance)&&void 0!==u?u:0)?H`<span class="individual-top individual-right-top">${(null==i?void 0:i.showDirection)?H`<ha-icon class="small" .icon="${i.invertAnimation?"mdi:arrow-down":"mdi:arrow-up"}"></ha-icon>`:""}${a}</span>`:""}</div>${Me(t,i.state||0)&&!(null===(p=t.entities.home)||void 0===p?void 0:p.hide)?H`<div class="right-individual-flow-container"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" class="right-individual-flow"><path id="individual-top-right-home" class="${ze(i.state||0,t)}" d="M${f?45:47},0 v15 c0,${f?"30 -10,30 -30,30":"35 -10,35 -30,35"} h-20" vector-effect="non-scaling-stroke"/>${Be(t)&&i.state&&i.state>=(null!==(h=i.displayZeroTolerance)&&void 0!==h?h:0)?R`<circle r="1" class="individual-top" vector-effect="non-scaling-stroke"><animateMotion dur="${Ge(null===(v=null==i?void 0:i.field)||void 0===v?void 0:v.calculate_flow_rate,m)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${i.invertAnimation?"0;1":"1;0"}" keyTimes="0;1"><mpath xlink:href="#individual-top-right-home"></animateMotion></circle>`:""}</svg></div>`:""}</div>`})(this,this._config,{displayState:Uo(Xo),individualObj:Xo,newDur:Ro,templatesObj:Wo,battery:Ao,individualObjs:zo}):H``}</div>`:H``}<div class="row">${wo.has?((e,t,{entities:i,grid:o,templatesObj:a})=>{var n,r,l,s,d,c,u,p,h,v,_;return H`<div class="circle-container grid"><div class="circle" @click="${t=>{var a,n,r,l,s,d;const c=null!==(n=null===(a=o.powerOutage)||void 0===a?void 0:a.entityGenerator)&&void 0!==n?n:null===(l=null===(r=i.grid)||void 0===r?void 0:r.power_outage)||void 0===l?void 0:l.entity,u=(null===(s=o.powerOutage)||void 0===s?void 0:s.isOutage)&&c?c:"string"==typeof i.grid.entity?i.grid.entity:i.grid.entity.consumption;e.openDetails(t,null===(d=i.grid)||void 0===d?void 0:d.tap_action,u)}}" @keyDown="${t=>{var a,n,r,l,s,d;if("Enter"===t.key){const c=null!==(n=null===(a=o.powerOutage)||void 0===a?void 0:a.entityGenerator)&&void 0!==n?n:null===(l=null===(r=i.grid)||void 0===r?void 0:r.power_outage)||void 0===l?void 0:l.entity,u=(null===(s=o.powerOutage)||void 0===s?void 0:s.isOutage)&&c?c:"string"==typeof i.grid.entity?i.grid.entity:i.grid.entity.consumption;e.openDetails(t,null===(d=i.grid)||void 0===d?void 0:d.tap_action,u)}}}">${Re(e.hass,e,t,a,o,"grid")} ${" "!==o.icon?H`<ha-icon id="grid-icon" .icon="${o.icon}">`:null} ${("two_way"===(null===(n=i.grid)||void 0===n?void 0:n.display_state)||void 0===(null===(r=i.grid)||void 0===r?void 0:r.display_state)||"one_way_no_zero"===(null===(l=i.grid)||void 0===l?void 0:l.display_state)&&(null!==(s=o.state.toGrid)&&void 0!==s?s:0)>0||"one_way"===(null===(d=i.grid)||void 0===d?void 0:d.display_state)&&(null===o.state.fromGrid||0===o.state.fromGrid)&&0!==o.state.toGrid)&&null!==o.state.toGrid&&!o.powerOutage.isOutage?H`<span class="return" @click="${t=>{var o;const a="string"==typeof i.grid.entity?i.grid.entity:i.grid.entity.production;e.openDetails(t,null===(o=i.grid)||void 0===o?void 0:o.tap_action,a)}}" @keyDown="${t=>{var o;if("Enter"===t.key){const a="string"==typeof i.grid.entity?i.grid.entity:i.grid.entity.production;e.openDetails(t,null===(o=i.grid)||void 0===o?void 0:o.tap_action,a)}}}"><ha-icon class="small" .icon="${"mdi:arrow-left"}"></ha-icon>${$e(e.hass,t,o.state.toGrid,{unit:o.unit,unitWhiteSpace:o.unit_white_space,decimals:o.decimals,watt_threshold:t.watt_threshold})}</span>`:null} ${("two_way"===(null===(c=i.grid)||void 0===c?void 0:c.display_state)||void 0===(null===(u=i.grid)||void 0===u?void 0:u.display_state)||"one_way_no_zero"===(null===(p=i.grid)||void 0===p?void 0:p.display_state)&&o.state.fromGrid>0||"one_way"===(null===(h=i.grid)||void 0===h?void 0:h.display_state)&&(null===o.state.toGrid||0===o.state.toGrid))&&null!==o.state.fromGrid&&!o.powerOutage.isOutage||o.powerOutage.isOutage&&o.powerOutage.entityGenerator?H`<span class="consumption" @click="${t=>{var o;const a="string"==typeof i.grid.entity?i.grid.entity:i.grid.entity.consumption;e.openDetails(t,null===(o=i.grid)||void 0===o?void 0:o.tap_action,a)}}" @keyDown="${t=>{var o;if("Enter"===t.key){const a="string"==typeof i.grid.entity?i.grid.entity:i.grid.entity.consumption;e.openDetails(t,null===(o=i.grid)||void 0===o?void 0:o.tap_action,a)}}}"><ha-icon class="small" .icon="${"mdi:arrow-right"}"></ha-icon>${$e(e.hass,t,o.state.fromGrid,{unit:o.unit,unitWhiteSpace:o.unit_white_space,decimals:o.decimals,watt_threshold:t.watt_threshold})}</span>`:""} ${(null===(v=o.powerOutage)||void 0===v?void 0:v.isOutage)&&!(null===(_=o.powerOutage)||void 0===_?void 0:_.entityGenerator)?H`<span class="grid power-outage">${o.powerOutage.name}</span>`:""}</div><span class="label">${o.name}</span></div>`})(this,this._config,{entities:go,grid:wo,templatesObj:Wo}):H`<div class="spacer"></div>`}<div class="spacer"></div>${(null===(yo=go.home)||void 0===yo?void 0:yo.hide)?H`<div class="spacer"></div>`:((e,t,{home:i,entities:o,templatesObj:a,homeUsageToDisplay:n,homeSolarCircumference:r,circleCircumference:l,homeBatteryCircumference:s,homeNonFossilCircumference:d,homeGridCircumference:c,individual:u})=>{const p=u.filter((e=>e.has)).length<=1;return H`<div class="circle-container home"><div class="circle" id="home-circle" @click="${t=>{var i,a;e.openDetails(t,null===(i=o.home)||void 0===i?void 0:i.tap_action,null===(a=o.home)||void 0===a?void 0:a.entity)}}" @keyDown="${t=>{var i,a;"Enter"===t.key&&e.openDetails(t,null===(i=o.home)||void 0===i?void 0:i.tap_action,null===(a=o.home)||void 0===a?void 0:a.entity)}}">${Re(e.hass,e,t,a,i,"home")} ${" "!==i.icon?H`<ha-icon id="home-icon" .icon="${i.icon}">`:null} ${n} <svg class="home-circle-sections">${void 0!==r?R`<circle class="solar" cx="40" cy="40" r="38" stroke-dasharray="${r} ${l-r}" shape-rendering="geometricPrecision" stroke-dashoffset="-${l-r}">`:""} ${s?R`<circle class="battery" cx="40" cy="40" r="38" stroke-dasharray="${s} ${l-s}" stroke-dashoffset="-${l-s-(r||0)}" shape-rendering="geometricPrecision">`:""} ${void 0!==d?R`<circle class="low-carbon" cx="40" cy="40" r="38" stroke-dasharray="${d} ${l-d}" stroke-dashoffset="-${l-d-(s||0)-(r||0)}" shape-rendering="geometricPrecision">`:""}<circle class="grid" cx="40" cy="40" r="38" stroke-dasharray="${null!=c?c:l-r-(s||0)} ${void 0!==c?l-c:r+(s||0)}" stroke-dashoffset="0" shape-rendering="geometricPrecision"/></svg></div>${p?H`<span class="label">${i.name}</span>`:H`<span class="label"></span>`}</div>`})(this,this._config,{circleCircumference:Pt,entities:go,grid:wo,home:Mo,homeBatteryCircumference:No,homeGridCircumference:Io,homeNonFossilCircumference:Bo,homeSolarCircumference:jo,newDur:Ro,templatesObj:Wo,homeUsageToDisplay:Lo,individual:zo})} ${Ne(zo)?H`<div class="spacer"></div>`:H``}</div>${Ao.has||je(zo)?H`<div class="row"><div class="spacer"></div>${Ao.has?((e,t,{battery:i,entities:o})=>{var a,n,r,l,s,d,c,u,p,h;return H`<div class="circle-container battery"><div class="circle" @click="${t=>{var i,a,n,r,l,s;const d=(null===(i=o.battery)||void 0===i?void 0:i.state_of_charge)?null===(a=o.battery)||void 0===a?void 0:a.state_of_charge:"string"==typeof(null===(n=o.battery)||void 0===n?void 0:n.entity)?null===(r=o.battery)||void 0===r?void 0:r.entity:null===(l=o.battery)||void 0===l?void 0:l.entity.production;e.openDetails(t,null===(s=o.battery)||void 0===s?void 0:s.tap_action,d)}}" @keyDown="${t=>{var i,a,n;if("Enter"===t.key){const r=(null===(i=o.battery)||void 0===i?void 0:i.state_of_charge)?null===(a=o.battery)||void 0===a?void 0:a.state_of_charge:"string"==typeof o.battery.entity?o.battery.entity:o.battery.entity.production;e.openDetails(t,null===(n=o.battery)||void 0===n?void 0:n.tap_action,r)}}}">${null!==i.state_of_charge.state&&!1!==(null===(a=o.battery)||void 0===a?void 0:a.show_state_of_charge)?H`<span @click="${t=>{var i,a;e.openDetails(t,null===(i=o.battery)||void 0===i?void 0:i.tap_action,null===(a=o.battery)||void 0===a?void 0:a.state_of_charge)}}" @keyDown="${t=>{var i,a;"Enter"===t.key&&e.openDetails(t,null===(i=o.battery)||void 0===i?void 0:i.tap_action,null===(a=o.battery)||void 0===a?void 0:a.state_of_charge)}}" id="battery-state-of-charge-text">${$e(e.hass,t,i.state_of_charge.state,{unit:null!==(n=i.state_of_charge.unit)&&void 0!==n?n:"%",unitWhiteSpace:i.state_of_charge.unit_white_space,decimals:i.state_of_charge.decimals,accept_negative:!0,watt_threshold:t.watt_threshold})}</span>`:null} ${" "!==i.icon?H`<ha-icon id="battery-icon" .icon="${i.icon}" @click="${t=>{var i,a;e.openDetails(t,null===(i=o.battery)||void 0===i?void 0:i.tap_action,null===(a=o.battery)||void 0===a?void 0:a.state_of_charge)}}" @keyDown="${t=>{var i,a;"Enter"===t.key&&e.openDetails(t,null===(i=o.battery)||void 0===i?void 0:i.tap_action,null===(a=o.battery)||void 0===a?void 0:a.state_of_charge)}}">`:null} ${"two_way"===(null===(r=o.battery)||void 0===r?void 0:r.display_state)||void 0===(null===(l=o.battery)||void 0===l?void 0:l.display_state)||"one_way_no_zero"===(null===(s=o.battery)||void 0===s?void 0:s.display_state)&&i.state.toBattery>0||"one_way"===(null===(d=o.battery)||void 0===d?void 0:d.display_state)&&0!==i.state.toBattery?H`<span class="battery-in" @click="${t=>{var i;const a="string"==typeof o.battery.entity?o.battery.entity:o.battery.entity.production;e.openDetails(t,null===(i=o.battery)||void 0===i?void 0:i.tap_action,a)}}" @keyDown="${t=>{var i;if("Enter"===t.key){const a="string"==typeof o.battery.entity?o.battery.entity:o.battery.entity.production;e.openDetails(t,null===(i=o.battery)||void 0===i?void 0:i.tap_action,a)}}}"><ha-icon class="small" .icon="${"mdi:arrow-down"}"></ha-icon>${$e(e.hass,t,i.state.toBattery,{unit:i.unit,unitWhiteSpace:i.unit_white_space,decimals:i.decimals,watt_threshold:t.watt_threshold})}</span>`:""} ${"two_way"===(null===(c=o.battery)||void 0===c?void 0:c.display_state)||void 0===(null===(u=o.battery)||void 0===u?void 0:u.display_state)||"one_way_no_zero"===(null===(p=o.battery)||void 0===p?void 0:p.display_state)&&i.state.fromBattery>0||"one_way"===(null===(h=o.battery)||void 0===h?void 0:h.display_state)&&(0===i.state.toBattery||0!==i.state.fromBattery)?H`<span class="battery-out" @click="${t=>{var i;const a="string"==typeof o.battery.entity?o.battery.entity:o.battery.entity.consumption;e.openDetails(t,null===(i=o.battery)||void 0===i?void 0:i.tap_action,a)}}" @keyDown="${t=>{var i;if("Enter"===t.key){const a="string"==typeof o.battery.entity?o.battery.entity:o.battery.entity.consumption;e.openDetails(t,null===(i=o.battery)||void 0===i?void 0:i.tap_action,a)}}}"><ha-icon class="small" .icon="${"mdi:arrow-up"}"></ha-icon>${$e(e.hass,t,i.state.fromBattery,{unit:i.unit,unitWhiteSpace:i.unit_white_space,decimals:i.decimals,watt_threshold:t.watt_threshold})}</span>`:""}</div><span class="label">${i.name}</span></div>`})(this,this._config,{battery:Ao,entities:go}):H`<div class="spacer"></div>`} ${qo?((e,t,{individualObj:i,templatesObj:o,displayState:a,newDur:n})=>{var r,l,s,d,c,u,p;if(!i)return H`<div class="spacer"></div>`;const h=(null===(l=null===(r=null==t?void 0:t.entities)||void 0===r?void 0:r.individual)||void 0===l?void 0:l.findIndex((e=>e.entity===i.entity)))||0,v=n.individual[h]||0;return H`<div class="circle-container individual-bottom bottom">${Me(t,(null==i?void 0:i.state)||0)&&!(null===(s=t.entities.home)||void 0===s?void 0:s.hide)?H`<svg width="80" height="30"><path d="M40 40 v-40" id="individual-bottom" class="${ze((null==i?void 0:i.state)||0,t)}"/>${Be(t)&&(null==i?void 0:i.state)&&i.state>=(null!==(d=i.displayZeroTolerance)&&void 0!==d?d:0)?R`<circle r="1.75" class="individual-bottom" vector-effect="non-scaling-stroke"><animateMotion dur="${Ge(!1!==(null===(c=i.field)||void 0===c?void 0:c.calculate_flow_rate),v)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${i.invertAnimation?"0;1":"1;0"}" keyTimes="0;1"><mpath xlink:href="#individual-bottom"></animateMotion></circle>`:""}</svg>`:H`<svg width="80" height="30"></svg>`}<div class="circle" @click="${t=>{var o;e.openDetails(t,null===(o=null==i?void 0:i.field)||void 0===o?void 0:o.tap_action,null==i?void 0:i.entity)}}" @keyDown="${t=>{var o;"Enter"===t.key&&e.openDetails(t,null===(o=null==i?void 0:i.field)||void 0===o?void 0:o.tap_action,null==i?void 0:i.entity)}}">${Ue(e.hass,e,t,o,i,h,"left-bottom")} ${" "!==(null==i?void 0:i.icon)?H`<ha-icon id="individual-left-bottom-icon" .icon="${null==i?void 0:i.icon}">`:null} ${!1!==(null===(u=null==i?void 0:i.field)||void 0===u?void 0:u.display_zero_state)||((null==i?void 0:i.state)||0)>(null!==(p=i.displayZeroTolerance)&&void 0!==p?p:0)?H`<span class="individual-bottom individual-left-bottom">${(null==i?void 0:i.showDirection)?H`<ha-icon class="small" .icon="${(null==i?void 0:i.invertAnimation)?"mdi:arrow-up":"mdi:arrow-down"}"></ha-icon>`:""}${a}</span>`:""}</div><span class="label">${null==i?void 0:i.name}</span></div>`})(this,this._config,{displayState:Uo(qo),individualObj:qo,newDur:Ro,templatesObj:Wo}):H`<div class="spacer"></div>`} ${Ne(zo)?((e,t,{individualObj:i,templatesObj:o,displayState:a,newDur:n,battery:r,individualObjs:l})=>{var s,d,c,u,p,h,v;if(!i)return H`<div class="spacer"></div>`;const _=(null===(d=null===(s=null==t?void 0:t.entities)||void 0===s?void 0:s.individual)||void 0===d?void 0:d.findIndex((e=>e.entity===i.entity)))||-1;if(-1===_)return H`<div class="spacer"></div>`;const m=n.individual[_]||1.66;return(null==r?void 0:r.has)||je(l),H`<div class="circle-container individual-bottom individual-right individual-right-bottom"><div class="circle" @click="${t=>{var o;e.openDetails(t,null===(o=null==i?void 0:i.field)||void 0===o?void 0:o.tap_action,null==i?void 0:i.entity)}}" @keyDown="${t=>{var o;"Enter"===t.key&&e.openDetails(t,null===(o=null==i?void 0:i.field)||void 0===o?void 0:o.tap_action,null==i?void 0:i.entity)}}">${Ue(e.hass,e,t,o,i,_,"right-bottom")} ${" "!==i.icon?H`<ha-icon id="individual-right-bottom-icon" .icon="${i.icon}">`:null} ${!1!==(null===(c=null==i?void 0:i.field)||void 0===c?void 0:c.display_zero_state)||(i.state||0)>(null!==(u=i.displayZeroTolerance)&&void 0!==u?u:0)?H`<span class="individual-bottom individual-right-bottom">${(null==i?void 0:i.showDirection)?H`<ha-icon class="small" .icon="${i.invertAnimation?"mdi:arrow-down":"mdi:arrow-up"}"></ha-icon>`:""}${a}</span>`:""}</div><span class="label">${i.name}</span> ${Me(t,i.state||0)&&!(null===(p=t.entities.home)||void 0===p?void 0:p.hide)?H`<div class="right-individual-flow-container"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" class="right-individual-flow"><path id="individual-bottom-right-home" class="${ze(i.state||0,t)}" d="M45,100 v-15 c0,-30 -10,-30 -30,-30 h-20" vector-effect="non-scaling-stroke"/>${Be(t)&&i.state&&i.state>=(null!==(h=i.displayZeroTolerance)&&void 0!==h?h:0)?R`<circle r="1" class="individual-bottom" vector-effect="non-scaling-stroke"><animateMotion dur="${Ge(null===(v=null==i?void 0:i.field)||void 0===v?void 0:v.calculate_flow_rate,m)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${i.invertAnimation?"0;1":"1;0"}" keyTimes="0;1"><mpath xlink:href="#individual-bottom-right-home"></animateMotion></circle>`:""}</svg></div>`:""}</div>`})(this,this._config,{displayState:Uo(Jo),individualObj:Jo,newDur:Ro,templatesObj:Wo,battery:Ao,individualObjs:zo}):H``}</div>`:H`<div class="spacer"></div>`} ${Ie(this._config,{battery:Ao,grid:wo,individual:zo,newDur:Ro,solar:Eo})}</div>${((e,t)=>e.dashboard_link||e.second_dashboard_link?H`<div class="card-actions">${e.dashboard_link?H`<ha-button appearance="plain" size="small" href="${e.dashboard_link}">${e.dashboard_link_label||t.localize("ui.panel.lovelace.cards.energy.energy_distribution.go_to_energy_dashboard")}</ha-button>`:""} ${e.second_dashboard_link?H`<ha-button appearance="plain" size="small" href="${e.second_dashboard_link}">${e.second_dashboard_link_label||t.localize("ui.panel.lovelace.cards.energy.energy_distribution.go_to_energy_dashboard")}</ha-button>`:""}</div>`:H``)(this._config,this.hass)}</ha-card>`}updated(e){var t;if(super.updated(e),!this._config||!this.hass)return;const i=null===(t=null==this?void 0:this.shadowRoot)||void 0===t?void 0:t.querySelector("#power-flow-card-plus"),o=i?getComputedStyle(i).getPropertyValue("width"):"0px";this._width=parseInt(o.replace("px",""),10),this._tryConnectAll()}_tryConnectAll(){var e,t,i,o,a,n,r,l,s;const{entities:d}=this._config,c={gridSecondary:null===(t=null===(e=d.grid)||void 0===e?void 0:e.secondary_info)||void 0===t?void 0:t.template,solarSecondary:null===(o=null===(i=d.solar)||void 0===i?void 0:i.secondary_info)||void 0===o?void 0:o.template,homeSecondary:null===(n=null===(a=d.home)||void 0===a?void 0:a.secondary_info)||void 0===n?void 0:n.template,individualSecondary:null===(r=d.individual)||void 0===r?void 0:r.map((e=>{var t;return null===(t=e.secondary_info)||void 0===t?void 0:t.template})),nonFossilFuelSecondary:null===(s=null===(l=d.fossil_fuel_percentage)||void 0===l?void 0:l.secondary_info)||void 0===s?void 0:s.template};for(const[e,t]of Object.entries(c))if(t)if(Array.isArray(t)){const e=["left-top","left-bottom","right-top","right-bottom"];t.forEach(((t,i)=>{t&&this._tryConnect(t,`${e[i]}Secondary`)}))}else this._tryConnect(t,e)}async _tryConnect(e,t){var i,o,a,n,r,l;if(this.hass&&this._config&&void 0===(null===(i=this._unsubRenderTemplates)||void 0===i?void 0:i.get(t))&&""!==e)try{const i=(n=this.hass.connection,r=e=>{this._templateResults[t]=e},l={template:e,entity_ids:this._config.entity_id,variables:{config:this._config,user:this.hass.user.name},strict:!0},n.subscribeMessage((e=>r(e)),Object.assign({type:"render_template"},l)));null===(o=this._unsubRenderTemplates)||void 0===o||o.set(t,i),await i}catch(i){this._templateResults=Object.assign(Object.assign({},this._templateResults),{[t]:{result:e,listeners:{all:!1,domains:[],entities:[],time:!1}}}),null===(a=this._unsubRenderTemplates)||void 0===a||a.delete(t)}}async _tryDisconnectAll(){var e,t,i,o,a,n,r;const{entities:l}=this._config,s={gridSecondary:null===(t=null===(e=l.grid)||void 0===e?void 0:e.secondary_info)||void 0===t?void 0:t.template,solarSecondary:null===(o=null===(i=l.solar)||void 0===i?void 0:i.secondary_info)||void 0===o?void 0:o.template,homeSecondary:null===(n=null===(a=l.home)||void 0===a?void 0:a.secondary_info)||void 0===n?void 0:n.template,individualSecondary:null===(r=l.individual)||void 0===r?void 0:r.map((e=>{var t;return null===(t=e.secondary_info)||void 0===t?void 0:t.template}))};for(const[e,t]of Object.entries(s))t&&this._tryDisconnect(e)}async _tryDisconnect(e){var t,i;const o=null===(t=this._unsubRenderTemplates)||void 0===t?void 0:t.get(e);if(o)try{(await o)(),null===(i=this._unsubRenderTemplates)||void 0===i||i.delete(e)}catch(e){if("not_found"!==e.code&&"template_error"!==e.code)throw e}}};Dt.styles=Et,e([he({attribute:!1})],Dt.prototype,"hass",void 0),e([ve()],Dt.prototype,"_config",void 0),e([ve()],Dt.prototype,"_templateResults",void 0),e([ve()],Dt.prototype,"_unsubRenderTemplates",void 0),e([ve()],Dt.prototype,"_width",void 0),e([_e("#battery-grid-flow")],Dt.prototype,"batteryGridFlow",void 0),e([_e("#battery-home-flow")],Dt.prototype,"batteryToHomeFlow",void 0),e([_e("#grid-home-flow")],Dt.prototype,"gridToHomeFlow",void 0),e([_e("#solar-battery-flow")],Dt.prototype,"solarToBatteryFlow",void 0),e([_e("#solar-grid-flow")],Dt.prototype,"solarToGridFlow",void 0),e([_e("#solar-home-flow")],Dt.prototype,"solarToHomeFlow",void 0),Dt=e([ce("power-flow-card-plus")],Dt);class Tt extends TypeError{constructor(e,t){let i;const{message:o,explanation:a,...n}=e,{path:r}=e,l=0===r.length?o:`At path: ${r.join(".")} -- ${o}`;super(a??l),null!=a&&(this.cause=l),Object.assign(this,n),this.name=this.constructor.name,this.failures=()=>i??(i=[e,...t()])}}function Ot(e){return"object"==typeof e&&null!=e}function Nt(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function jt(e,t,i,o){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:a,branch:n}=t,{type:r}=i,{refinement:l,message:s=`Expected a value of type \`${r}\`${l?` with refinement \`${l}\``:""}, but received: \`${Nt(o)}\``}=e;return{value:o,type:r,refinement:l,key:a[a.length-1],path:a,branch:n,...e,message:s}}function*Bt(e,t,i,o){(function(e){return Ot(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const a of e){const e=jt(a,t,i,o);e&&(yield e)}}function*It(e,t,i={}){const{path:o=[],branch:a=[e],coerce:n=!1,mask:r=!1}=i,l={path:o,branch:a};if(n&&(e=t.coercer(e,l),r&&"type"!==t.type&&Ot(t.schema)&&Ot(e)&&!Array.isArray(e)))for(const i in e)void 0===t.schema[i]&&delete e[i];let s="valid";for(const o of t.validator(e,l))o.explanation=i.message,s="not_valid",yield[o,void 0];for(let[d,c,u]of t.entries(e,l)){const t=It(c,u,{path:void 0===d?o:[...o,d],branch:void 0===d?a:[...a,c],coerce:n,mask:r,message:i.message});for(const i of t)i[0]?(s=null!=i[0].refinement?"not_refined":"not_valid",yield[i[0],void 0]):n&&(c=i[1],void 0===d?e=c:e instanceof Map?e.set(d,c):e instanceof Set?e.add(c):Ot(e)&&(void 0!==c||d in e)&&(e[d]=c))}if("not_valid"!==s)for(const o of t.refiner(e,l))o.explanation=i.message,s="not_refined",yield[o,void 0];"valid"===s&&(yield[void 0,e])}class Lt{constructor(e){const{type:t,schema:i,validator:o,refiner:a,coercer:n=(e=>e),entries:r=function*(){}}=e;this.type=t,this.schema=i,this.entries=r,this.coercer=n,this.validator=o?(e,t)=>Bt(o(e,t),t,this,e):()=>[],this.refiner=a?(e,t)=>Bt(a(e,t),t,this,e):()=>[]}assert(e,t){return Ht(e,this,t)}create(e,t){return function(e,t,i){const o=Rt(e,t,{coerce:!0,message:i});if(o[0])throw o[0];return o[1]}(e,this,t)}is(e){return function(e,t){return!Rt(e,t)[0]}(e,this)}mask(e,t){return function(e,t,i){const o=Rt(e,t,{coerce:!0,mask:!0,message:i});if(o[0])throw o[0];return o[1]}(e,this,t)}validate(e,t={}){return Rt(e,this,t)}}function Ht(e,t,i){const o=Rt(e,t,{message:i});if(o[0])throw o[0]}function Rt(e,t,i={}){const o=It(e,t,i),a=function(e){const{done:t,value:i}=e.next();return t?void 0:i}(o);if(a[0]){return[new Tt(a[0],(function*(){for(const e of o)e[0]&&(yield e[0])})),void 0]}return[void 0,a[1]]}function Ft(e,t){return new Lt({type:e,schema:null,validator:t})}function Gt(){return Ft("any",(()=>!0))}function Ut(){return Ft("boolean",(e=>"boolean"==typeof e))}function Vt(){return Ft("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${Nt(e)}`))}function Wt(){return Ft("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${Nt(e)}`))}function Zt(e){const t=e?Object.keys(e):[],i=Ft("never",(()=>!1));return new Lt({type:"object",schema:e||null,*entries(o){if(e&&Ot(o)){const a=new Set(Object.keys(o));for(const i of t)a.delete(i),yield[i,o[i],e[i]];for(const e of a)yield[e,o[e],i]}},validator:e=>Ot(e)||`Expected an object, but received: ${Nt(e)}`,coercer:e=>Ot(e)?{...e}:e})}function Kt(e){return new Lt({...e,validator:(t,i)=>void 0===t||e.validator(t,i),refiner:(t,i)=>void 0===t||e.refiner(t,i)})}function Yt(){return Ft("string",(e=>"string"==typeof e||`Expected a string, but received: ${Nt(e)}`))}var qt="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",Xt=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Jt(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!((o=e[i])===(a=t[i])||Xt(o)&&Xt(a)))return!1;var o,a;return!0}function Qt(e,t){void 0===t&&(t=Jt);var i=null;function o(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(i&&i.lastThis===this&&t(o,i.lastArgs))return i.lastResult;var n=e.apply(this,o);return i={lastResult:n,lastArgs:o,lastThis:this},n}return o.clear=function(){i=null},o}var ei={label:{car:"Auto",motorbike:"Motorka"}},ti={entity_generator:"Generátor",combined:"Kombinovaná entita (jedna entita s kladnými a zápornými hodnotami)",separated:"Oddelené subjekty (jeden subjekt pro spotřebu a jeden pro výrobu)",custom_colors:"Vlastní barvy",secondary_info:"Sekundární informace",power_outage:"Výpadek",grid:"Síť",solar:"Solární",battery:"Baterie",fossil_fuel_percentage:"Fosilní palivo",home:"Dům",individual:"Individuální",accept_negative:"Přijmout záporné hodnoty",advanced:"Pokročilá nastavení",decimals:"Desetinná místa",consumption:"Spotřeba",production:"Výroba",color_icon:"Barva ikony",color_circle:"Barva kruhu",color_value:"Barva hodnoty",color_state_of_charge_value:"Barva",display_zero:"Zobrazit nulu",display_zero_tolerance:"Zobrazit nulovou toleranci",display_state:"Zobrazit stav",display_zero_state:"Zobrazení nulového stavu",invert_state:"Invertovat stav",template:"Šablona",unit_of_measurement:"Jednotka",unit_white_space:"Jednotka bílé plochy",label_alert:"Štítek pro upozornění",icon_alert:"Ikona pro upozornění",state_alert:"Stav upozornění",state_of_charge:"Stav nabití",state_of_charge_unit_white_space:"Bílá plocha",state_of_charge_unit:"Jednotky",state_of_charge_decimals:"Desetinná místa",state_of_charge_icon:"Ikona",show_state_of_charge:"Zobrazit stav nabití",state_type:"Typ stavu",subtract_individual:"Odečíst individuálně",override_state:"Přepsat stav",calculate_flow_rate:"Počítat průtok",inverted_animation:"Invertovat animaci",show_direction:"Zobrazit směr",circle_animation:"Kruhová animace",color:"Barva",dashboard_link:"Odkaz na informační panel",dashboard_link_label:"Název odkazu na informační panel",w_decimals:"Desetinná místa pro Watty",kw_decimals:"Desetinná místa pro kilowatty",max_flow_rate:"Maximální průtok",min_flow_rate:"Minimální průtok",max_expected_power:"Maximální očekávaný výkon",min_expected_power:"Minimální očekávaný výkon",watt_threshold:"Práh wattů na kilowatty",display_zero_lines:"Zobrazit nulové řádky",clickable_entities:"Entity, na které se dá kliknout",disable_dots:"Vypnout tečky",use_new_flow_rate_model:"Nový model průtoku",use_metadata:"Použít Metadata",mode:"Režim",show:"Zobrazit",hide:"Skrýt",custom:"Volitelné",grey_out:"Šedý výstup",transparency:"Průhlednost",grey_color:"Šedá barva",tap_action:"Akce po klepnutí",navigation_path:"Navigační cesta",sort_individual_devices:"Seřaďte individuálně"},ii={card:ei,editor:ti},oi={label:{car:"Car",motorbike:"Motorbike"}},ai={entity_generator:"Generator",combined:"Combined Entity (One entity with positive and negative values)",separated:"Separated Entities (One entity for consumption and one for production)",custom_colors:"Custom Colors",secondary_info:"Secondary Info",power_outage:"Power Outage",grid:"Grid",solar:"Solar",battery:"Battery",fossil_fuel_percentage:"Fossil Fuel",home:"Home",individual:"Individual",accept_negative:"Accept Negative",advanced:"Advanced Options",decimals:"Decimals",consumption:"Consumption",production:"Production",color_icon:"Color of Icon",color_circle:"Color of Circle",color_value:"Color of Value",color_state_of_charge_value:"Color",display_zero:"Display Zero",display_zero_tolerance:"Display Zero Tolerance",display_state:"Display State",display_zero_state:"Display Zero State",invert_state:"Invert State",template:"Template",unit_of_measurement:"Unit",unit_white_space:"Unit White Space",label_alert:"Label for Alert",icon_alert:"Icon for Alert",state_alert:"State of Alert",state_of_charge:"State of Charge",state_of_charge_unit_white_space:"White Space",state_of_charge_unit:"Unit",state_of_charge_decimals:"Decimals",state_of_charge_icon:"Icon",show_state_of_charge:"Show State of Charge",state_type:"Type of State",subtract_individual:"Subtract Individual",override_state:"Override State",calculate_flow_rate:"Calculate Flow Rate",inverted_animation:"Invert Animation",show_direction:"Show Direction",circle_animation:"Circle Animation",color:"Color",dashboard_link:"Dashboard Link",dashboard_link_label:"Dashboard Link Name",w_decimals:"Watt Decimals",kw_decimals:"Kilowatt Decimals",max_flow_rate:"Max Flow Rate",min_flow_rate:"Min Flow Rate",max_expected_power:"Max Expected Power",min_expected_power:"Min Expected Power",watt_threshold:"Watt to Kilowatt Threshold",display_zero_lines:"Display Zero Lines",clickable_entities:"Clickable Entities",disable_dots:"Disable Dots",use_new_flow_rate_model:"New Flow Rate Model",use_metadata:"Use Metadata",mode:"Mode",show:"Show",hide:"Hide",custom:"Custom",grey_out:"Grey Out",transparency:"Transparency",grey_color:"Grey Color",tap_action:"Tap Action",navigation_path:"Navigation Path",sort_individual_devices:"Sort individual devices"},ni={card:oi,editor:ai},ri={label:{car:"Auto",motorbike:"Motorrad"}},li={entity_generator:"Generator",combined:"Kombinierte Entität (Eine Entität mit positiven und negativen Werten)",separated:"Getrennte Entitäten (Eine Entität für den Verbrauch und eine für die Produktion)",custom_colors:"Benutzerdefinierte Farben",secondary_info:"Sekundäre Information",power_outage:"Stromausfall",grid:"Netz",solar:"Solar",battery:"Batterie",fossil_fuel_percentage:"Fossile Brennstoffe",home:"Zuhause",individual:"Individuell",accept_negative:"Negative Werte akzeptieren",advanced:"Erweiterte Optionen",decimals:"Dezimalstellen",consumption:"Verbrauch",production:"Produktion",color_icon:"Farbe des Symbols",color_circle:"Farbe des Kreises",color_value:"Farbe des Wertes",color_state_of_charge_value:"Farbe",display_zero:"Null anzeigen",display_zero_tolerance:"Nulltoleranz",display_state:"Zustand anzeigen",display_zero_state:"Nullzustand anzeigen",invert_state:"Zustand umkehren",template:"Vorlage",unit_of_measurement:"Einheit",unit_white_space:"Weißraum für Einheit",label_alert:"Beschriftung für Alarm",icon_alert:"Symbol für Alarm",state_alert:"Alarmzustand",state_of_charge:"Ladezustand",state_of_charge_unit_white_space:"Leerzeichen",state_of_charge_unit:"Einheit",state_of_charge_decimals:"Dezimalstellen",state_of_charge_icon:"Symbol",show_state_of_charge:"Ladezustand anzeigen",state_type:"Typ des Zustands",subtract_individual:"Individuell abziehen",override_state:"Zustand überschreiben",calculate_flow_rate:"Flussrate berechnen",inverted_animation:"Animation umkehren",show_direction:"Richtung anzeigen",circle_animation:"Kreisanimation",color:"Farbe",dashboard_link:"Dashboard-Link",dashboard_link_label:"Name des Dashboard-Links",w_decimals:"Watt-Dezimalstellen",kw_decimals:"Kilowatt-Dezimalstellen",max_flow_rate:"Maximale Flussrate",min_flow_rate:"Minimale Flussrate",max_expected_power:"Maximale erwartete Leistung",min_expected_power:"Minimale erwartete Leistung",watt_threshold:"Watt-zu-Kilowatt-Schwelle",display_zero_lines:"Nulllinien anzeigen",clickable_entities:"Klickbare Entitäten",disable_dots:"Punkte deaktivieren",use_new_flow_rate_model:"Neues Fluss-Modell verwenden",use_metadata:"Metadaten verwenden",mode:"Modus",show:"Anzeigen",hide:"Verstecken",custom:"Benutzerdefiniert",grey_out:"Ausgrauen",transparency:"Transparenz",grey_color:"Graue Farbe",tap_action:"Aktion beim Antippen",navigation_path:"Navigationspfad",sort_individual_devices:"Individuelle Geräte sortieren"},si={card:ri,editor:li},di={label:{car:"Bil",motorbike:"Motorcykel"}},ci={entity_generator:"Generator",combined:"Kombineret enhed (Én enhed med positive og negative værdier)",separated:"Adskilte enheder (én enhed til forbrug og én til produktion)",custom_colors:"Brugerdefinerede farver",secondary_info:"Sekundær info",power_outage:"Strømafbrydelse",grid:"El-Net",solar:"Solar",battery:"Batteri",fossil_fuel_percentage:"Fossilt Brændstof",home:"Hjem",individual:"Individuel",accept_negative:"Accepter negative værdier",advanced:"Avancerede indstillinger",decimals:"Decimaler",consumption:"Forbrug",production:"Produktion",color_icon:"Farve af Icon",color_circle:"Farve af Cirkel",color_value:"Farve af værdi",color_state_of_charge_value:"Farve",display_zero:"Vis Nul",display_zero_tolerance:"Vis ingen tolerance",display_state:"Vis Tilstand",display_zero_state:"Vis Nultilstand",invert_state:"Omvendt tilstand",template:"Skabelon",unit_of_measurement:"Enhed",unit_white_space:"Enhed tomt mellemrum",label_alert:"Etiket til Alarm",icon_alert:"Ikon for alarm",state_alert:"Alarmtilstand",state_of_charge:"Ladningstilstand",state_of_charge_unit_white_space:"Tomt mellemrum",state_of_charge_unit:"Enhed",state_of_charge_decimals:"Decimal",state_of_charge_icon:"Ikon",show_state_of_charge:"Vis ladningstilstand",state_type:"Tilstande",subtract_individual:"Subtract Individual",override_state:"Overskriv Tilstand",calculate_flow_rate:"Beregn Hastighed",inverted_animation:"Omvendt Animation",show_direction:"Vis Retning",circle_animation:"Cirkel Animation",color:"Farve",dashboard_link:"Dashboard Link",dashboard_link_label:"Dashboard Link Navn",w_decimals:"Watt Decimal",kw_decimals:"Kilowatt Decimal",max_flow_rate:"Max Flow Rate",min_flow_rate:"Min Flow Rate",max_expected_power:"Max Forventede Strøm",min_expected_power:"Min Forventede Power",watt_threshold:"Watt til Kilowatt Grænse",display_zero_lines:"Vis Nul Linjer",clickable_entities:"Klikbar enheder",disable_dots:"Deaktiver prikker",use_new_flow_rate_model:"Ny flowhastighedsmodel",use_metadata:"Brug Metadata",mode:"Tilstand",show:"Vis",hide:"Skjul",custom:"Brugerdefinerede",grey_out:"Grået ud",transparency:"Transparens",grey_color:"Grå farve",tap_action:"Tap Handling",navigation_path:"Navigationssti",sort_individual_devices:"Sorter individuelle enheder"},ui={card:di,editor:ci},pi={label:{car:"Carro",motorbike:"Mota"}},hi={entity_generator:"Gerador",combined:"Entidade combinada (uma entidade com valores positivos e negativos)",separated:"Entidades Separadas (Uma entidade para consumo e outra para produção)",custom_colors:"Cores personalizadas",secondary_info:"Informação Secundária",power_outage:"Falta de energia",grid:"Rede",solar:"Solar",battery:"Bateria",fossil_fuel_percentage:"Combustíveis Fósseis",home:"Casa",individual:"Individual",accept_negative:"Aceitar Valores Negativos",advanced:"Opções Avançadas",decimals:"Casas Decimais",consumption:"Consumo",production:"Produção",color_icon:"Cor do Ícone",color_circle:"Cor do Círculo",color_value:"Cor do Valor",color_state_of_charge_value:"Cor",display_zero:"Mostrar Zero",display_zero_tolerance:"Tolerância do Zero",display_state:"Mostrar Estado",display_zero_state:"Mostrar Estado Zero",invert_state:"Inverter Estado",template:"Modelo",unit_of_measurement:"Unidade",unit_white_space:"Espaçamento da Unidade",label_alert:"Nome para Alerta",icon_alert:"Ícone para Alerta",state_alert:"Estado do Alerta",state_of_charge:"Estado de Carga",state_of_charge_unit_white_space:"Espaçamento",state_of_charge_unit:"Unidade",state_of_charge_decimals:"Casas Decimais",state_of_charge_icon:"Ícone",show_state_of_charge:"Mostrar Estado de Carga",state_type:"Tipo de Estado",subtract_individual:"Subtrair Individualmente",override_state:"Substituir Estado",calculate_flow_rate:"Calcular Taxa de Fluxo",inverted_animation:"Animação Invertida",show_direction:"Mostrar Direção",circle_animation:"Animação de Círculo",color:"Cor",dashboard_link:"Link do Painel de Controlo",dashboard_link_label:"Nome do Link do Painel de Controlo",w_decimals:"Casas Decimais de Watt",kw_decimals:"Casas Decimais de Quilowatt",max_flow_rate:"Taxa de Fluxo Máxima",min_flow_rate:"Taxa de Fluxo Mínima",max_expected_power:"Potência Máxima Esperada",min_expected_power:"Potência Mínima Esperada",watt_threshold:"Limiar de Watt para Quilowatt",display_zero_lines:"Mostrar Linhas Zero",clickable_entities:"Entidades Clicáveis",disable_dots:"Desativar Pontos",use_new_flow_rate_model:"Utilizar Novo Modelo de Velocidade",use_metadata:"Utilizar Metadados",mode:"Modo",show:"Mostrar",hide:"Esconder",custom:"Personalizado",grey_out:"Cinzento",transparency:"Transparência",grey_color:"Cor Cinzenta",tap_action:"Ação de Toque",navigation_path:"Caminho de Navegação",sort_individual_devices:"Classifique dispositivos individuais"},vi={card:pi,editor:hi},_i={label:{car:"Carro",motorbike:"Mota"}},mi={entity_generator:"Gerador",combined:"Entidade combinada (uma entidade com valores positivos e negativos)",separated:"Entidades Separadas (Uma entidade para consumo e outra para produção)",custom_colors:"Cores personalizadas",secondary_info:"Informação Secundária",power_outage:"Falta de energia",grid:"Rede",solar:"Solar",battery:"Bateria",fossil_fuel_percentage:"Combustíveis Fósseis",home:"Casa",individual:"Individual",accept_negative:"Aceitar Valores Negativos",advanced:"Opções Avançadas",decimals:"Casas Decimais",consumption:"Consumo",production:"Produção",color_icon:"Cor do Ícone",color_circle:"Cor do Círculo",color_value:"Cor do Valor",color_state_of_charge_value:"Cor",display_zero:"Exibir Zero",display_zero_tolerance:"Tolerância de Zero",display_state:"Exibir Estado",display_zero_state:"Exibir Estado Zero",invert_state:"Inverter Estado",template:"Modelo",unit_of_measurement:"Unidade",unit_white_space:"Espaçamento da Unidade",label_alert:"Rótulo para Alerta",icon_alert:"Ícone para Alerta",state_alert:"Estado do Alerta",state_of_charge:"Estado de Carga",state_of_charge_unit_white_space:"Espaçamento",state_of_charge_unit:"Unidade",state_of_charge_decimals:"Casas Decimais",state_of_charge_icon:"Ícone",show_state_of_charge:"Exibir Estado de Carga",state_type:"Tipo de Estado",subtract_individual:"Subtrair Individualmente",override_state:"Substituir Estado",calculate_flow_rate:"Calcular Taxa de Fluxo",inverted_animation:"Animação Invertida",show_direction:"Mostrar Direção",circle_animation:"Animação de Círculo",color:"Cor",dashboard_link:"Link do Painel",dashboard_link_label:"Nome do Link do Painel",w_decimals:"Casas Decimais de Watts",kw_decimals:"Casas Decimais de Quilowatts",max_flow_rate:"Taxa de Fluxo Máxima",min_flow_rate:"Taxa de Fluxo Mínima",max_expected_power:"Potência Máxima Esperada",min_expected_power:"Potência Mínima Esperada",watt_threshold:"Limiar de Watts para Quilowatts",display_zero_lines:"Exibir Linhas Zero",clickable_entities:"Entidades Clicáveis",disable_dots:"Desativar Pontos",use_new_flow_rate_model:"Utilizar Novo Modelo de Velocidade",use_metadata:"Utilizar Metadados",mode:"Modo",show:"Mostrar",hide:"Esconder",custom:"Personalizado",grey_out:"Cinza",transparency:"Transparência",grey_color:"Cor do Cinza",tap_action:"Ação de Toque",navigation_path:"Caminho de Navegação",sort_individual_devices:"Classifique dispositivos individuais"},fi={card:_i,editor:mi},yi={label:{car:"Coche",motorbike:"Motocicleta"}},gi={entity_generator:"Generador",combined:"Entidad combinada (una entidad con valores positivos y negativos)",separated:"Entidades separadas (una entidad de consumo y otra de producción)",custom_colors:"Colores personalizados",secondary_info:"Información secundaria",power_outage:"Corte de energía",grid:"Red eléctrica",solar:"Solar",battery:"Batería",fossil_fuel_percentage:"Combustible Fósil",home:"Casa",individual:"Individual",accept_negative:"Aceptar valores negativos",advanced:"Opciones Avanzadas",decimals:"Decimales",consumption:"Consumo",production:"Producción",color_icon:"Color del Icono",color_circle:"Color del Círculo",color_value:"Color del Valor",color_state_of_charge_value:"Color",display_zero:"Mostrar Cero",display_zero_tolerance:"Tolerancia de Cero",display_state:"Mostrar Estado",display_zero_state:"Mostrar Estado Cero",invert_state:"Invertir Estado",template:"Plantilla",unit_of_measurement:"Unidad",unit_white_space:"Espacio en Blanco de la Unidad",label_alert:"Etiqueta para Alerta",icon_alert:"Ícono para Alerta",state_alert:"Estado de Alerta",state_of_charge:"Estado de Carga",state_of_charge_unit_white_space:"Espacio en Blanco",state_of_charge_unit:"Unidad",state_of_charge_decimals:"Decimales",state_of_charge_icon:"Ícono",show_state_of_charge:"Mostrar Estado de Carga",state_type:"Tipo de Estado",subtract_individual:"Restar Individualmente",override_state:"Sobrescribir Estado",calculate_flow_rate:"Calcular Tasa de Flujo",inverted_animation:"Animación Invertida",show_direction:"Mostrar Dirección",circle_animation:"Animación de Círculo",color:"Color",dashboard_link:"Enlace del Tablero",dashboard_link_label:"Nombre del Enlace del Tablero",w_decimals:"Decimales de Vatio",kw_decimals:"Decimales de Kilovatio",max_flow_rate:"Tasa de Flujo Máxima",min_flow_rate:"Tasa de Flujo Mínima",max_expected_power:"Potencia Máxima Esperada",min_expected_power:"Potencia Mínima Esperada",watt_threshold:"Umbral de Vatio a Kilovatio",display_zero_lines:"Mostrar Líneas de Cero",clickable_entities:"Entidades Clicables",disable_dots:"Desactivar Puntos",use_new_flow_rate_model:"Utilizar Nuevo Modelo de Tasa de Flujo",use_metadata:"Utilizar Metadatos",mode:"Modo",show:"Mostrar",hide:"Ocultar",custom:"Personalizado",grey_out:"Gris",transparency:"Transparencia",grey_color:"Color Gris",tap_action:"Acción de Toque",navigation_path:"Ruta de Navegación",sort_individual_devices:"Ordenar dispositivos individuales"},bi={card:yi,editor:gi},wi={label:{car:"Auto",motorbike:"Motorfiets"}},xi={entity_generator:"Generator",combined:"Gecombineerde entiteit (één entiteit met positieve en negatieve waarden)",separated:"Gescheiden entiteiten (één entiteit voor consumptie en één voor productie)",custom_colors:"Aangepaste kleuren",secondary_info:"Secundaire informatie",power_outage:"Stroomuitval",grid:"Elektriciteitsnet",solar:"Zonne-energie",battery:"Batterij",fossil_fuel_percentage:"Fossiele Brandstof",home:"Thuis",individual:"Individueel",accept_negative:"Negatieve waarden accepteren",advanced:"Geavanceerde Opties",decimals:"Decimalen",consumption:"Verbruik",production:"Productie",color_icon:"Kleur van Pictogram",color_circle:"Kleur van Cirkel",color_value:"Kleur van Waarde",color_state_of_charge_value:"Kleur",display_zero:"Nul Weergeven",display_zero_tolerance:"Nultolerantie Weergeven",display_state:"Toestand Weergeven",display_zero_state:"Nul Toestand Weergeven",invert_state:"Toestand Omkeren",template:"Sjabloon",unit_of_measurement:"Eenheid",unit_white_space:"Eenheid Spaties",label_alert:"Label voor Alarm",icon_alert:"Pictogram voor Alarm",state_alert:"Toestand van Alarm",state_of_charge:"Laadstatus",state_of_charge_unit_white_space:"Spaties",state_of_charge_unit:"Eenheid",state_of_charge_decimals:"Decimalen",state_of_charge_icon:"Pictogram",show_state_of_charge:"Laadstatus Weergeven",state_type:"Type Toestand",subtract_individual:"Individueel Aftrekken",override_state:"Toestand Overschrijven",calculate_flow_rate:"Stroomsnelheid Berekenen",inverted_animation:"Animatie Omkeren",show_direction:"Richting Weergeven",circle_animation:"Cirkel Animatie",color:"Kleur",dashboard_link:"Dashboard Link",dashboard_link_label:"Naam van Dashboard Link",w_decimals:"Watt Decimalen",kw_decimals:"Kilowatt Decimalen",max_flow_rate:"Maximale Stroomsnelheid",min_flow_rate:"Minimale Stroomsnelheid",max_expected_power:"Maximaal Verwacht Vermogen",min_expected_power:"Minimaal Verwacht Vermogen",watt_threshold:"Watt naar Kilowatt Drempelwaarde",display_zero_lines:"Nullijnen Weergeven",clickable_entities:"Klikbare Entiteiten",disable_dots:"Punten Uitschakelen",use_new_flow_rate_model:"Nieuw Stroomsnelheid Model Gebruiken",use_metadata:"Metadata Gebruiken",mode:"Modus",show:"Weergeven",hide:"Verbergen",custom:"Aangepast",grey_out:"Grijstint",transparency:"Transparantie",grey_color:"Grijstint",tap_action:"Tik Actie",navigation_path:"Navigatiepad",sort_individual_devices:"Sorteer individuele apparaten"},ki={card:wi,editor:xi},Si={label:{car:"Auto",motorbike:"Motocicletta"}},$i={entity_generator:"Generatore",combined:"Entità combinata (un'entità con valori positivi e negativi)",separated:"Entità separate (Un'entità per il consumo e una per la produzione)",custom_colors:"Colori personalizzati",secondary_info:"Informazioni secondarie",power_outage:"Interruzione di corrente",grid:"Rete Elettrica",solar:"Solare",battery:"Batteria",fossil_fuel_percentage:"Carburante Fossile",home:"Casa",individual:"Individuale",accept_negative:"Accetta Valori Negativi",advanced:"Opzioni Avanzate",decimals:"Decimali",consumption:"Consumo",production:"Produzione",color_icon:"Colore dell'Icona",color_circle:"Colore del Cerchio",color_value:"Colore del Valore",color_state_of_charge_value:"Colore",display_zero:"Mostra Zero",display_zero_tolerance:"Tolleranza dello Zero",display_state:"Mostra Stato",display_zero_state:"Mostra Stato Zero",invert_state:"Inverti Stato",template:"Modello",unit_of_measurement:"Unità",unit_white_space:"Spazio Bianco Unità",label_alert:"Etichetta per l'Allarme",icon_alert:"Icona per l'Allarme",state_alert:"Stato dell'Allarme",state_of_charge:"Stato di Carica",state_of_charge_unit_white_space:"Spazio Bianco",state_of_charge_unit:"Unità",state_of_charge_decimals:"Decimali",state_of_charge_icon:"Icona",show_state_of_charge:"Mostra Stato di Carica",state_type:"Tipo di Stato",subtract_individual:"Sottrai Individualmente",override_state:"Sovrascrivi Stato",calculate_flow_rate:"Calcola Tasso di Flusso",inverted_animation:"Animazione Invertita",show_direction:"Mostra Direzione",circle_animation:"Animazione Cerchio",color:"Colore",dashboard_link:"Collegamento Dashboard",dashboard_link_label:"Nome Collegamento Dashboard",w_decimals:"Decimali Watt",kw_decimals:"Decimali Kilowatt",max_flow_rate:"Tasso di Flusso Massimo",min_flow_rate:"Tasso di Flusso Minimo",max_expected_power:"Potenza Massima Prevista",min_expected_power:"Potenza Minima Prevista",watt_threshold:"Soglia Watt per Kilowatt",display_zero_lines:"Mostra Linee Zero",clickable_entities:"Entità Cliccabili",disable_dots:"Disabilita Punti",use_new_flow_rate_model:"Utilizza Nuovo Modello di Tasso di Flusso",use_metadata:"Utilizza Metadati",mode:"Modalità",show:"Mostra",hide:"Nascondi",custom:"Personalizzato",grey_out:"Sfuma",transparency:"Trasparenza",grey_color:"Colore Sfumato",tap_action:"Azione al tocco",navigation_path:"Percorso di navigazione",sort_individual_devices:"Ordina i singoli individuale"},Ci={card:Si,editor:$i},Ei={label:{car:"Voiture",motorbike:"Moto"}},Ai={entity_generator:"Générateur",combined:"Entité combinée (une entité avec des valeurs positives et négatives)",separated:"Entités séparées (une entité pour la consommation et une pour la production)",custom_colors:"Couleurs personnalisées",secondary_info:"Informations secondaires",power_outage:"Panne de courant",grid:"Réseau Électrique",solar:"Solaire",battery:"Batterie",fossil_fuel_percentage:"Carburant fossile",home:"Domicile",individual:"Individuel",accept_negative:"Accepter les valeurs négatives",advanced:"Options avancées",decimals:"Décimales",consumption:"Consommation",production:"Production",color_icon:"Couleur de l'icône",color_circle:"Couleur du cercle",color_value:"Couleur de la valeur",color_state_of_charge_value:"Couleur",display_zero:"Afficher zéro",display_zero_tolerance:"Tolérance de l'affichage zéro",display_state:"Afficher l'état",display_zero_state:"Afficher l'état zéro",invert_state:"Inverser l'état",template:"Modèle",unit_of_measurement:"Unité",unit_white_space:"Espace blanc de l'unité",label_alert:"Libellé de l'alerte",icon_alert:"Icône de l'alerte",state_alert:"État de l'alerte",state_of_charge:"État de charge",state_of_charge_unit_white_space:"Espace blanc de l'unité",state_of_charge_unit:"Unité",state_of_charge_decimals:"Décimales",state_of_charge_icon:"Icône",show_state_of_charge:"Afficher l'état de charge",state_type:"Type d'état",subtract_individual:"Soustraire l'individuel",override_state:"Remplacer l'état",calculate_flow_rate:"Calculer le débit",inverted_animation:"Animation inversée",show_direction:"Afficher la direction",circle_animation:"Animation de cercle",color:"Couleur",dashboard_link:"Lien du tableau de bord",dashboard_link_label:"Nom du lien du tableau de bord",w_decimals:"Décimales de watt",kw_decimals:"Décimales de kilowatt",max_flow_rate:"Débit maximal",min_flow_rate:"Débit minimal",max_expected_power:"Puissance maximale attendue",min_expected_power:"Puissance minimale attendue",watt_threshold:"Seuil de watt vers kilowatt",display_zero_lines:"Afficher les lignes zéro",clickable_entities:"Entités cliquables",disable_dots:"Désactiver les points",use_new_flow_rate_model:"Nouveau modèle de débit",use_metadata:"Utiliser les métadonnées",mode:"Mode",show:"Afficher",hide:"Masquer",custom:"Personnalisé",grey_out:"Griser",transparency:"Transparence",grey_color:"Couleur grise",tap_action:"Action de tap",navigation_path:"Chemin de navigation",sort_individual_devices:"Trier les appareils individuels"},Mi={card:Ei,editor:Ai},zi={label:{car:"Автомобиль",motorbike:"Мотоцикл"}},Pi={entity_generator:"Генератор",combined:"Комбинированный объект (один объект с положительными и отрицательными значениями)",separated:"Отдельные объекты (один объект для потребления и один для производства)",custom_colors:"Пользовательские цвета",secondary_info:"Вторичная информация",power_outage:"Отключение электричества",grid:"Электрическая сеть",solar:"Солнечная",battery:"Батарея",fossil_fuel_percentage:"Полный объем ископаемого топлива",home:"Домашняя",individual:"Индивидуальная",accept_negative:"Принять отрицательные значения",advanced:"Расширенные настройки",decimals:"Десятичные",consumption:"Потребление",production:"Производство",color_icon:"Цвет иконки",color_circle:"Цвет круга",color_value:"Цвет значения",color_state_of_charge_value:"Цвет",display_zero:"Отображать ноль",display_zero_tolerance:"Допустимая погрешность нуля",display_state:"Отображать состояние",display_zero_state:"Отображать состояние нуля",invert_state:"Инвертировать состояние",template:"Шаблон",unit_of_measurement:"Единица измерения",unit_white_space:"Пробел единицы измерения",label_alert:"Метка для предупреждения",icon_alert:"Иконка для предупреждения",state_alert:"Состояние предупреждения",state_of_charge:"Уровень заряда",state_of_charge_unit_white_space:"Пробел",state_of_charge_unit:"Единица измерения",state_of_charge_decimals:"Десятичные",state_of_charge_icon:"Иконка",show_state_of_charge:"Показать уровень заряда",state_type:"Тип состояния",subtract_individual:"Вычесть индивидуально",override_state:"Переопределить состояние",calculate_flow_rate:"Рассчитать скорость потока",inverted_animation:"Инвертированная анимация",show_direction:"Показать направление",circle_animation:"Анимация круга",color:"Цвет",dashboard_link:"Ссылка на панель управления",dashboard_link_label:"Название ссылки на панель управления",w_decimals:"Десятичные ватт",kw_decimals:"Десятичные киловатт",max_flow_rate:"Максимальная скорость потока",min_flow_rate:"Минимальная скорость потока",max_expected_power:"Максимальная ожидаемая мощность",min_expected_power:"Минимальная ожидаемая мощность",watt_threshold:"Пороговое значение ватт в киловатты",display_zero_lines:"Отображать нулевые линии",clickable_entities:"Кликабельные сущности",disable_dots:"Отключить точки",use_new_flow_rate_model:"Использовать новую модель скорости потока",use_metadata:"Использовать метаданные",mode:"Режим",show:"Показать",hide:"Скрыть",custom:"Пользовательский",grey_out:"Серый",transparency:"Прозрачность",grey_color:"Серый цвет",tap_action:"действие касания",navigation_path:"путь навигации",sort_individual_devices:"Сортировка отдельных устройств"},Di={card:zi,editor:Pi},Ti={label:{car:"Auto",motorbike:"Moottoripyörä"}},Oi={entity_generator:"Generaattori",combined:"Yhdistetty kokonaisuus (yksi kokonaisuus positiivisilla ja negatiivisilla arvoilla)",separated:"Erotetut kokonaisuudet (yksi kulutukseen ja yksi tuotantoon)",custom_colors:"Mukautetut värit",secondary_info:"Toissijaiset tiedot",power_outage:"Sähkökatkos",grid:"Sähköverkko",solar:"Aurinko",battery:"Akku",fossil_fuel_percentage:"Fossiilinen polttoaine",home:"Koti",individual:"Yksittäinen",accept_negative:"Hyväksy negatiiviset arvot",advanced:"Lisäasetukset",decimals:"Desimaalit",consumption:"Kulutus",production:"Tuotanto",color_icon:"Ikonin väri",color_circle:"Ympyrän väri",color_value:"Arvon väri",color_state_of_charge_value:"Väri",display_zero:"Näytä nolla",display_zero_tolerance:"Näytä nolla-toleranssi",display_state:"Näytä tila",display_zero_state:"Näytä nolla-tila",invert_state:"Käänteinen tila",template:"Malli",unit_of_measurement:"Yksikkö",unit_white_space:"Yksikön välilyönti",label_alert:"Hälytyksen teksti",icon_alert:"Hälytyksen kuvake",state_alert:"Hälytyksen tila",state_of_charge:"Varauksen tila",state_of_charge_unit_white_space:"Välilyönti",state_of_charge_unit:"Yksikkö",state_of_charge_decimals:"Desimaalit",state_of_charge_icon:"Kuvake",show_state_of_charge:"Näytä varauksen tila",state_type:"Tilan tyyppi",subtract_individual:"Vähennä yksittäinen",override_state:"Korvaa tila",calculate_flow_rate:"Laske virtausnopeus",inverted_animation:"Käänteinen animaatio",show_direction:"Näytä suunta",circle_animation:"Ympyräanimaatio",color:"Väri",dashboard_link:"Ohjauspaneelin linkki",dashboard_link_label:"Ohjauspaneelin linkin nimi",w_decimals:"Wattien desimaalit",kw_decimals:"Kilowattien desimaalit",max_flow_rate:"Maksimivirtausnopeus",min_flow_rate:"Minimivirtausnopeus",max_expected_power:"Ennustettu maksimiteho",min_expected_power:"Ennustettu minimiteho",watt_threshold:"Wattin ja kilowatin kynnysarvo",display_zero_lines:"Näytä nolla-viivat",clickable_entities:"Napautettavat kohteet",disable_dots:"Poista pisteet",use_new_flow_rate_model:"Uusi virtausnopeusmalli",use_metadata:"Käytä metatietoja",mode:"Tila",show:"Näytä",hide:"Piilota",custom:"Mukautettu",grey_out:"Harmaa",transparency:"Läpinäkyvyys",grey_color:"Harmaa väri",tap_action:"Napauta toimintoa",navigation_path:"Navigointipolku",sort_individual_devices:"Lajittele yksittäiset laitteet"},Ni={card:Ti,editor:Oi},ji={label:{car:"Samochód",motorbike:"Motocykl"}},Bi={entity_generator:"Generator",combined:"Jednostka połączona (jedna jednostka z wartościami dodatnimi i ujemnymi)",separated:"Oddzielne podmioty (jeden podmiot do konsumpcji i jeden do produkcji)",custom_colors:"Kolory niestandardowe",secondary_info:"Informacje dodatkowe",power_outage:"Brak prądu",grid:"Sieć elektryczna",solar:"Energia słoneczna",battery:"Bateria",fossil_fuel_percentage:"Paliwo kopalne",home:"Dom",individual:"Indywidualne",accept_negative:"Akceptuj wartości ujemne",advanced:"Zaawansowane opcje",decimals:"Miejsca po przecinku",consumption:"Zużycie",production:"Produkcja",color_icon:"Kolor ikony",color_circle:"Kolor okręgu",color_value:"Kolor wartości",color_state_of_charge_value:"Kolor",display_zero:"Wyświetl zero",display_zero_tolerance:"Wyświetl tolerancję zera",display_state:"Wyświetl stan",display_zero_state:"Wyświetl stan zera",invert_state:"Odwróć stan",template:"Szablon",unit_of_measurement:"Jednostka",unit_white_space:"Spacja jednostki",label_alert:"Etykieta alertu",icon_alert:"Ikona alertu",state_alert:"Stan alertu",state_of_charge:"Stan naładowania",state_of_charge_unit_white_space:"Spacja jednostki",state_of_charge_unit:"Jednostka",state_of_charge_decimals:"Miejsca po przecinku",state_of_charge_icon:"Ikona",show_state_of_charge:"Pokaż stan naładowania",state_type:"Typ stanu",subtract_individual:"Odjęcie indywidualne",override_state:"Nadpisanie stanu",calculate_flow_rate:"Oblicz wskaźnik przepływu",inverted_animation:"Odwróć animację",show_direction:"Pokaż kierunek",circle_animation:"Animacja okręgu",color:"Kolor",dashboard_link:"Link do panelu",dashboard_link_label:"Nazwa linku do panelu",w_decimals:"Miejsca po przecinku dla watów",kw_decimals:"Miejsca po przecinku dla kilowatów",max_flow_rate:"Maksymalna szybkość przepływu",min_flow_rate:"Minimalna szybkość przepływu",max_expected_power:"Maksymalna oczekiwana moc",min_expected_power:"Minimalna oczekiwana moc",watt_threshold:"Próg watów na kilowaty",display_zero_lines:"Wyświetl linie zera",clickable_entities:"Klikalne jednostki",disable_dots:"Wyłącz kropki",use_new_flow_rate_model:"Nowy model wskaźnika przepływu",use_metadata:"Użyj metadanych",mode:"Tryb",show:"Pokaż",hide:"Ukryj",custom:"Niestandardowy",grey_out:"Szary",transparency:"Przezroczystość",grey_color:"Kolor szary",tap_action:"Akcja dotknięcia",navigation_path:"Ścieżka nawigacji",sort_individual_devices:"Sortuj poszczególne urządzenia"},Ii={card:ji,editor:Bi},Li={label:{car:"Auto",motorbike:"Motorka"}},Hi={entity_generator:"Generátor",combined:"Kombinovaná entita (jedna entita s kladnými a zápornými hodnotami)",separated:"Oddelené subjekty (jeden subjekt pre spotrebu a jeden pre výrobu)",custom_colors:"Vlastné farby",secondary_info:"Sekundárne informácie",power_outage:"Výpadok",grid:"Sieť",solar:"Solárne",battery:"Batéria",fossil_fuel_percentage:"Fosílne palivo",home:"Doma",individual:"Individuálne",accept_negative:"Povoliť záporné hodnoty",advanced:"Pokročilé nastavenia",decimals:"Desatinné",consumption:"Spotreba",production:"Výroba",color_icon:"Farba ikony",color_circle:"Farba kruhu",color_value:"Farba hodnoty",color_state_of_charge_value:"Farba",display_zero:"Zobraziť nulu",display_zero_tolerance:"Zobraziť nulovú toleranciu",display_state:"Zobraziť stav",display_zero_state:"Zobrazenie nulového stavu",invert_state:"Invertovať stav",template:"Šablóna",unit_of_measurement:"Jednotka",unit_white_space:"Jednotka bielej plochy",label_alert:"Štítok pre upozornenie",icon_alert:"Ikona pre upozornenie",state_alert:"Stav upozornenia",state_of_charge:"Stav nabitia",state_of_charge_unit_white_space:"Biela plocha",state_of_charge_unit:"Jednotky",state_of_charge_decimals:"Desatinné",state_of_charge_icon:"Ikona",show_state_of_charge:"Zobraziť stav nabitia",state_type:"Typ stavu",subtract_individual:"Odčítať individuálne",override_state:"Prepísať stav",calculate_flow_rate:"Počítať prietok",inverted_animation:"Invertovať animáciu",show_direction:"Zobraziť smer",circle_animation:"Kruhová animácia",color:"Farba",dashboard_link:"Odkaz na informačný panel",dashboard_link_label:"Názov odkazu na informačný panel",w_decimals:"Wattové desatinné miesta",kw_decimals:"Kilowattové desatinné miesta",max_flow_rate:"Max prietok",min_flow_rate:"Min prietok",max_expected_power:"Max očakávaný výkon",min_expected_power:"Min očakávaný výkon",watt_threshold:"Prah wattov na kilowatty",display_zero_lines:"Zobraziť nulové riadky",clickable_entities:"Entity, na ktoré sa dá kliknúť",disable_dots:"Vypnúť bodky",use_new_flow_rate_model:"Nový model prietoku",use_metadata:"Použiť Metadata",mode:"Mód",show:"Zobraziť",hide:"Skryť",custom:"Voliteľné",grey_out:"Grey Out",transparency:"Transparentnosť",grey_color:"Šedá farba",tap_action:"Akcia po klepnutí",navigation_path:"Navigačná cesta",sort_individual_devices:"Zoraďte jednotlivé zariadenia"},Ri={card:Li,editor:Hi},Fi={label:{car:"Bil",motorbike:"Motorcykel"}},Gi={entity_generator:"Generator",combined:"Sammansatt entitet (en entitet med postitiva och negativa värden)",separated:"Separata entiteter (en entitet för konsumtion och en för produktion)",custom_colors:"Anpassade färger",secondary_info:"Sekundär information",power_outage:"Strömavbrott",grid:"Nät",solar:"Sol",battery:"Batteri",fossil_fuel_percentage:"Fossilt bränsle",home:"Hem",individual:"Individuell",accept_negative:"Acceptera negativa värden",advanced:"Avancerade inställningar",decimals:"Decimaler",consumption:"Konsumtion",production:"Produktion",color_icon:"Ikonfärg",color_circle:"Cirkelfärg",color_value:"Färg på värde",color_state_of_charge_value:"Färg",display_zero:"Visa vid nollvärde",display_zero_tolerance:"Tolerans för nollvärde",display_state:"Visningsläge",display_zero_state:"Visning vid noll",invert_state:"Invertera status",template:"Mall",unit_of_measurement:"Enhet",unit_white_space:"Mellanrum före enhet",label_alert:"Varningsetikett",icon_alert:"Varningsikon",state_alert:"Status vid strömavbrott",state_of_charge:"Laddningsnivå",state_of_charge_unit_white_space:"Mellanrum före enhet",state_of_charge_unit:"Enhet",state_of_charge_decimals:"Decimaler",state_of_charge_icon:"Ikon",show_state_of_charge:"Visa laddningsnivå",state_type:"Statustyp",subtract_individual:"Individuell avräkning",override_state:"Använd entitetsvärde",calculate_flow_rate:"Beräkna flöde",inverted_animation:"Reversera animation",show_direction:"Visa riktning",circle_animation:"Cirkelanimation",color:"Färg",dashboard_link:"Länk till kontrollpanel",dashboard_link_label:"Länknamn till kontrollpanel",w_decimals:"Decimaler watt",kw_decimals:"Decimaler kilowatt",max_flow_rate:"Maximalt flöde",min_flow_rate:"Minimalt flöde",max_expected_power:"Maximal förväntad effekt",min_expected_power:"Minimal förväntad effekt",watt_threshold:"Tröskelvärde för kiloprefix",display_zero_lines:"Vising av inaktiva linjer",clickable_entities:"Klickbara entiteter",disable_dots:"Avaktivera punkter",use_new_flow_rate_model:"Ny flödesmodell",use_metadata:"Använd metadata",mode:"Läge",show:"Visa",hide:"Dölj",custom:"Anpassad",grey_out:"Utgråad",transparency:"Transparens",grey_color:"Grå färg",tap_action:"Tryckåtgärd",navigation_path:"Navigationsväg",sort_individual_devices:"Sortera enskilda enheter"},Ui={card:Fi,editor:Gi},Vi={label:{car:"कार",motorbike:"मोटरसाइकिल"}},Wi={entity_generator:"जनरेटर",combined:"संयुक्त इकाई (सकारात्मक और नकारात्मक मानों के साथ)",separated:"अलग-अलग इकाइयाँ (उपभोग और उत्पादन के लिए)",custom_colors:"कस्टम रंग",secondary_info:"द्वितीयक जानकारी",power_outage:"बिजली गुल",grid:"ग्रिड",solar:"सौर ऊर्जा",battery:"बैटरी",fossil_fuel_percentage:"जीवाश्म ईंधन",home:"घर",individual:"व्यक्तिगत",accept_negative:"नकारात्मक स्वीकार करें",advanced:"उन्नत विकल्प",decimals:"दशमलव",consumption:"उपभोग",production:"उत्पादन",color_icon:"आइकन का रंग",color_circle:"सर्कल का रंग",color_value:"मान का रंग",color_state_of_charge_value:"रंग",display_zero:"शून्य दिखाएँ",display_zero_tolerance:"शून्य सहिष्णुता दिखाएँ",display_state:"स्थिति दिखाएँ",display_zero_state:"शून्य स्थिति दिखाएँ",invert_state:"स्थिति उलटें",template:"टेम्पलेट",unit_of_measurement:"माप की इकाई",unit_white_space:"यूनिट स्पेस",label_alert:"अलर्ट के लिए लेबल",icon_alert:"अलर्ट के लिए आइकन",state_alert:"अलर्ट की स्थिति",state_of_charge:"चार्ज की स्थिति",state_of_charge_unit_white_space:"स्पेस",state_of_charge_unit:"इकाई",state_of_charge_decimals:"दशमलव",state_of_charge_icon:"आइकन",show_state_of_charge:"चार्ज की स्थिति दिखाएँ",state_type:"स्थिति प्रकार",subtract_individual:"व्यक्तिगत घटाएँ",override_state:"स्थिति ओवरराइड करें",calculate_flow_rate:"प्रवाह दर की गणना करें",inverted_animation:"एनिमेशन उलटें",show_direction:"दिशा दिखाएँ",circle_animation:"सर्कल एनिमेशन",color:"रंग",dashboard_link:"डैशबोर्ड लिंक",dashboard_link_label:"डैशबोर्ड लिंक नाम",w_decimals:"वाट दशमलव",kw_decimals:"किलोवाट दशमलव",max_flow_rate:"अधिकतम प्रवाह दर",min_flow_rate:"न्यूनतम प्रवाह दर",max_expected_power:"अधिकतम अपेक्षित शक्ति",min_expected_power:"न्यूनतम अपेक्षित शक्ति",watt_threshold:"वाट से किलोवाट सीमा",display_zero_lines:"शून्य रेखाएँ दिखाएँ",clickable_entities:"क्लिक करने योग्य इकाइयाँ",disable_dots:"डॉट्स अक्षम करें",use_new_flow_rate_model:"नया प्रवाह दर मॉडल",use_metadata:"मेटाडेटा का उपयोग करें",mode:"मोड",show:"दिखाएँ",hide:"छुपाएँ",custom:"कस्टम",grey_out:"धूसर करें",transparency:"पारदर्शिता",grey_color:"धूसर रंग",tap_action:"टैप क्रिया",navigation_path:"नेविगेशन पथ",sort_individual_devices:"व्यक्तिगत डिवाइस क्रमबद्ध करें"},Zi={card:Vi,editor:Wi},Ki={label:{car:"Автомобіль",motorbike:"Мотоцикл"}},Yi={entity_generator:"Генератор сутностей",combined:"Об’єднана сутність (одна сутність із позитивними та негативними значеннями)",separated:"Розділені сутності (окрема для споживання та окрема для виробництва)",custom_colors:"Власні кольори",secondary_info:"Додаткова інформація",power_outage:"Відключення живлення",grid:"Мережа",solar:"Сонячна енергія",battery:"Акумулятор",fossil_fuel_percentage:"Частка викопного палива",home:"Дім",individual:"Окремо",accept_negative:"Дозволити від’ємні значення",advanced:"Розширені параметри",decimals:"Кількість десяткових знаків",consumption:"Споживання",production:"Виробництво",color_icon:"Колір іконки",color_circle:"Колір кола",color_value:"Колір значення",color_state_of_charge_value:"Колір заряду",display_zero:"Показувати нульові значення",display_zero_tolerance:"Допуск для нульових значень",display_state:"Показувати стан",display_zero_state:"Показувати стан при нулі",invert_state:"Інвертувати стан",template:"Шаблон",unit_of_measurement:"Одиниця виміру",unit_white_space:"Пробіл між числом і одиницею",label_alert:"Мітка сповіщення",icon_alert:"Іконка сповіщення",state_alert:"Стан сповіщення",state_of_charge:"Рівень заряду",state_of_charge_unit_white_space:"Пробіл одиниці виміру заряду",state_of_charge_unit:"Одиниця виміру заряду",state_of_charge_decimals:"Десяткові знаки заряду",state_of_charge_icon:"Іконка заряду",show_state_of_charge:"Показувати рівень заряду",state_type:"Тип стану",subtract_individual:"Віднімати індивідуальні значення",override_state:"Перевизначити стан",calculate_flow_rate:"Розраховувати швидкість потоку",inverted_animation:"Інвертована анімація",show_direction:"Показувати напрямок",circle_animation:"Анімація кола",color:"Колір",dashboard_link:"Посилання на дашборд",dashboard_link_label:"Назва посилання на дашборд",w_decimals:"Десяткові знаки для ватів",kw_decimals:"Десяткові знаки для кіловатів",max_flow_rate:"Максимальна швидкість потоку",min_flow_rate:"Мінімальна швидкість потоку",max_expected_power:"Максимальна очікувана потужність",min_expected_power:"Мінімальна очікувана потужність",watt_threshold:"Поріг переходу ват → кіловат",display_zero_lines:"Показувати лінії з нульовим значенням",clickable_entities:"Клікабельні сутності",disable_dots:"Вимкнути точки",use_new_flow_rate_model:"Новий алгоритм швидкості потоку",use_metadata:"Використовувати метадані",mode:"Режим",show:"Показати",hide:"Приховати",custom:"Користувацький",grey_out:"Затемнити неактивні",transparency:"Прозорість",grey_color:"Колір затемнення",tap_action:"Дія при натисканні",navigation_path:"Шлях переходу",sort_individual_devices:"Сортувати окремі пристрої"},qi={card:Ki,editor:Yi};const Xi={cs:Object.freeze({__proto__:null,card:ei,editor:ti,default:ii}),en:Object.freeze({__proto__:null,card:oi,editor:ai,default:ni}),de:Object.freeze({__proto__:null,card:ri,editor:li,default:si}),dk:Object.freeze({__proto__:null,card:di,editor:ci,default:ui}),pt:Object.freeze({__proto__:null,card:pi,editor:hi,default:vi}),pt_BR:Object.freeze({__proto__:null,card:_i,editor:mi,default:fi}),es:Object.freeze({__proto__:null,card:yi,editor:gi,default:bi}),nl:Object.freeze({__proto__:null,card:wi,editor:xi,default:ki}),it:Object.freeze({__proto__:null,card:Si,editor:$i,default:Ci}),fr:Object.freeze({__proto__:null,card:Ei,editor:Ai,default:Mi}),ru:Object.freeze({__proto__:null,card:zi,editor:Pi,default:Di}),fi:Object.freeze({__proto__:null,card:Ti,editor:Oi,default:Ni}),pl:Object.freeze({__proto__:null,card:ji,editor:Bi,default:Ii}),sk:Object.freeze({__proto__:null,card:Li,editor:Hi,default:Ri}),sv:Object.freeze({__proto__:null,card:Fi,editor:Gi,default:Ui}),hi:Object.freeze({__proto__:null,card:Vi,editor:Wi,default:Zi}),ua:Object.freeze({__proto__:null,card:Ki,editor:Yi,default:qi})},Ji="en";function Qi(e,t){try{return e.split(".").reduce(((e,t)=>e[t]),Xi[t])}catch(e){return}}function eo(e){let t=Qi(e,(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_"));return t||(t=Qi(e,Ji)),null!=t?t:e}function to(){return{type:"expandable",title:eo("editor.combined"),schema:[{name:"entity",selector:{entity:{}}}]}}function io(){return{type:"expandable",title:eo("editor.separated"),name:"entity",schema:[{name:"consumption",label:"Consumption Entity",selector:{entity:{}}},{name:"production",label:"Production Entity",selector:{entity:{}}}]}}const oo={name:"color",title:eo("editor.custom_colors"),type:"expandable",schema:[{type:"grid",column_min_width:"200px",schema:[{name:"consumption",label:"Consumption",selector:{color_rgb:{}}},{name:"production",label:"Production",selector:{color_rgb:{}}}]}]},ao=[{name:"tap_action",selector:{ui_action:{}}}],no=[{name:"entity",selector:{entity:{}}},{name:"template",label:"Template (overrides entity, save to update)",selector:{template:{}}},{type:"grid",column_min_width:"200px",schema:[{name:"icon",selector:{icon:{}}},{name:"unit_of_measurement",label:"Unit of Measurement",selector:{text:{}}},{name:"decimals",label:"Decimals",selector:{number:{mode:"box",min:0,max:10,step:1}}},{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"unit_white_space",label:"Unit White Space",default:!0,selector:{boolean:{}}},{name:"display_zero",label:"Display Zero",selector:{boolean:{}}},{name:"accept_negative",label:"Accept Negative",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}}]},{title:eo("editor.tap_action"),name:"",type:"expandable",schema:ao}],ro=[{name:"color_icon",label:"Color of Icon",selector:{select:{options:[{value:!1,label:"Do not Color"},{value:!0,label:"Color dynamically"},{value:"production",label:"Production"},{value:"consumption",label:"Consumption"}],custom_value:!0}}},{name:"color_circle",label:"Color of Circle",selector:{select:{options:[{value:!0,label:"Color dynamically"},{value:!1,label:"Consumption"},{value:"production",label:"Production"}],custom_value:!0}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{min:0,max:1e6,step:1,mode:"box"}}},{name:"display_state",label:"Display State",selector:{select:{options:[{value:"two_way",label:"Two Way"},{value:"one_way_no_zero",label:"One Way"},{value:"one_way",label:"One Way (Show Zero)"}],custom_value:!0}}}];function lo(e){const t={type:"grid",column_min_width:"200px",schema:[{name:"name",selector:{text:{}}},{name:"icon",selector:{icon:{}}}]};return"battery"!==e&&"grid"!==e||t.schema.push(...ro),t}const so=Object.assign(Object.assign({},lo("battery")),{schema:[...lo("battery").schema,{name:"invert_state",label:"Invert State",selector:{boolean:{}}},{name:"color_value",label:"Color of Value",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),co=[to(),io(),{title:eo("editor.state_of_charge"),name:"",type:"expandable",schema:[{name:"state_of_charge",label:"State of Charge Entity",selector:{entity:{}}},{name:"",type:"grid",column_min_width:"200px",schema:[{name:"state_of_charge_unit",label:"Unit",selector:{text:{}}},{name:"state_of_charge_unit_white_space",label:"Unit White Space",default:!0,selector:{boolean:{}}},{name:"state_of_charge_decimals",label:"Decimals",selector:{number:{mode:"box",min:0,max:4,step:1}}},{name:"show_state_of_charge",label:"Show State of Charge",selector:{boolean:{}}},{name:"color_state_of_charge_value",label:"Color of Value",selector:{select:{options:[{value:!1,label:"Do Not Color"},{value:!0,label:"Color dynamically"},{value:"consumption",label:"Consumption"},{value:"production",label:"Production"}],custom_value:!0}}}]}]},so,oo,{title:eo("editor.tap_action"),name:"",type:"expandable",schema:ao}],uo={name:"grey_color",selector:{color_rgb:{}}},po={name:"transparency",selector:{number:{min:0,max:100,step:1,mode:"box"}}},ho={name:"",type:"grid",column_min_width:"200px",schema:[po,uo]},vo=e=>{switch(e){case"grey_out":return uo;case"transparency":return po;case"custom":return ho;default:return[]}},_o=Qt(((e,t)=>[{name:"display_zero_lines",type:"grid",column_min_width:"400px",schema:[{name:"mode",selector:{select:{mode:"dropdown",options:[{value:"show",label:e("editor.show")},{value:"hide",label:e("editor.hide")},{value:"transparency",label:e("editor.transparency")},{value:"grey_out",label:e("editor.grey_out")},{value:"custom",label:e("editor.custom")}]}}},vo(t)]}])),mo=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},lo()),{schema:[...lo().schema,{name:"state_type",label:"State Type",selector:{select:{options:[{value:"power",label:"Power"},{value:"percentage",label:"Percentage"}],custom_value:!0}}},{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"color_icon",label:"Color Icon",selector:{boolean:{}}},{name:"display_zero",label:"Display Zero",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}},{name:"display_zero_state",label:"Display Zero State",selector:{boolean:{}}},{name:"unit_white_space",label:"Unit White Space",default:!0,selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),{name:"color",label:"Color",selector:{color_rgb:{}}},{title:eo("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:no},{title:eo("editor.tap_action"),name:"",type:"expandable",schema:ao}],fo=Object.assign(Object.assign({},lo("grid")),{schema:[...lo("grid").schema,{name:"invert_state",label:"Invert State",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}},{name:"color_value",label:"Color of Value",selector:{boolean:{}}}]}),yo=[to(),io(),fo,oo,{title:eo("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:no},{title:eo("editor.power_outage"),name:"power_outage",type:"expandable",schema:[{type:"grid",column_min_width:"200px",schema:[{name:"entity",selector:{entity:{}}},{name:"entity_generator",label:"Generator Entity",selector:{entity:{}}},{name:"label_alert",label:"Outage Label",selector:{text:{}}},{name:"icon_alert",label:"Outage Icon",selector:{icon:{}}},{name:"state_alert",label:"Outage State",selector:{text:{}}}]}]},{title:eo("editor.tap_action"),name:"",type:"expandable",schema:ao}],go=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},lo()),{schema:[...lo().schema,{name:"color_value",label:"Color Value",selector:{select:{options:[{value:!0,label:"Color dynamically"},{value:!1,label:"Do Not Color"},{value:"solar",label:"Solar"},{value:"grid",label:"Grid"},{value:"battery",label:"Battery"}],custom_value:!0}}},{name:"color_icon",label:"Color Icon",selector:{select:{options:[{value:!0,label:"Color dynamically"},{value:!1,label:"Do Not Color"},{value:"solar",label:"Solar"},{value:"grid",label:"Grid"},{value:"battery",label:"Battery"}],custom_value:!0}}},{name:"circle_animation",label:"Circle Animation",default:!0,selector:{boolean:{}}},{name:"subtract_individual",label:"Subtract Individual",selector:{boolean:{}}},{name:"override_state",label:"Override State (With Home Entity)",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}},{name:"hide",label:"Hide Home",selector:{boolean:{}}}]}),{title:eo("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:no},{title:eo("editor.tap_action"),name:"",type:"expandable",schema:ao}],bo=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},lo()),{schema:[...lo().schema,{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"color_icon",label:"Color Icon",selector:{boolean:{}}},{name:"display_zero",label:"Display Zero",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}},{name:"display_zero_state",label:"Display Zero State",selector:{boolean:{}}},{name:"unit_of_measurement",label:"Unit of Measurement",selector:{text:{}}},{name:"calculate_flow_rate",label:"Calculate Flow Rate",selector:{boolean:{}}},{name:"decimals",label:"Decimals",selector:{number:{mode:"box",min:0,max:4,step:1}}},{name:"inverted_animation",label:"Invert Animation",selector:{boolean:{}}},{name:"show_direction",label:"Show Direction",selector:{boolean:{}}},{name:"unit_white_space",label:"Unit White Space",default:!0,selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),{name:"color",label:"Color",selector:{color_rgb:{}}},{title:eo("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:no},{title:eo("editor.tap_action"),name:"",type:"expandable",schema:ao}],wo=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},lo()),{schema:[...lo().schema,{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"color_icon",label:"Color Icon",selector:{boolean:{}}},{name:"display_zero",label:"Display Zero",default:!0,selector:{boolean:{}}},{name:"display_zero_state",label:"Display State When Zero?",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}},{name:"invert_state",label:"Invert State",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),{name:"color",label:"Color",selector:{color_rgb:{}}},{title:eo("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:no},{title:eo("editor.tap_action"),name:"",type:"expandable",schema:ao}],xo=function(...e){const t="type"===e[0].type,i=e.map((e=>e.schema)),o=Object.assign({},...i);return t?function(e){const t=Object.keys(e);return new Lt({type:"type",schema:e,*entries(i){if(Ot(i))for(const o of t)yield[o,i[o],e[o]]},validator:e=>Ot(e)||`Expected an object, but received: ${Nt(e)}`,coercer:e=>Ot(e)?{...e}:e})}(o):Zt(o)}(Zt({type:Yt(),view_layout:Gt(),layout_options:Gt(),grid_options:Gt(),visibility:Gt(),disabled:Kt(Ut())}),Zt({title:Kt(Yt()),theme:Kt(Yt()),dashboard_link:Kt(Yt()),dashboard_link_label:Kt(Yt()),second_dashboard_link:Kt(Yt()),second_dashboard_link_label:Kt(Yt()),inverted_entities:Kt(Gt()),w_decimals:Kt(Vt()),kw_decimals:Kt(Vt()),min_flow_rate:Kt(Wt()),max_flow_rate:Kt(Wt()),min_expected_power:Kt(Wt()),max_expected_power:Kt(Wt()),watt_threshold:Kt(Wt()),clickable_entities:Kt(Ut()),transparency_zero_lines:Kt(Wt()),greyout_zero_lines:Kt(Ut()),display_zero_lines:Kt(Gt()),use_new_flow_rate_model:Kt(Ut()),full_size:Kt(Ut()),style_ha_card:Kt(Gt()),style_card_content:Kt(Gt()),disable_dots:Kt(Ut()),entities:Zt({battery:Kt(Gt()),grid:Kt(Gt()),solar:Kt(Gt()),home:Kt(Gt()),fossil_fuel_percentage:Kt(Gt()),individual:Kt(Gt())}),sort_individual_devices:Kt(Ut())})),ko=[{name:"title",label:"Title",selector:{text:{}}}];Qt((e=>[{name:"entities",type:"grid",column_min_width:"400px",schema:[{title:e("editor.grid"),name:"grid",type:"expandable",iconPath:"M8.28,5.45L6.5,4.55L7.76,2H16.23L17.5,4.55L15.72,5.44L15,4H9L8.28,5.45M18.62,8H14.09L13.3,5H10.7L9.91,8H5.38L4.1,10.55L5.89,11.44L6.62,10H17.38L18.1,11.45L19.89,10.56L18.62,8M17.77,22H15.7L15.46,21.1L12,15.9L8.53,21.1L8.3,22H6.23L9.12,11H11.19L10.83,12.35L12,14.1L13.16,12.35L12.81,11H14.88L17.77,22M11.4,15L10.5,13.65L9.32,18.13L11.4,15M14.68,18.12L13.5,13.64L12.6,15L14.68,18.12Z",schema:yo},{title:e("editor.solar"),name:"solar",type:"expandable",iconPath:"M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,2L14.39,5.42C13.65,5.15 12.84,5 12,5C11.16,5 10.35,5.15 9.61,5.42L12,2M3.34,7L7.5,6.65C6.9,7.16 6.36,7.78 5.94,8.5C5.5,9.24 5.25,10 5.11,10.79L3.34,7M3.36,17L5.12,13.23C5.26,14 5.53,14.78 5.95,15.5C6.37,16.24 6.91,16.86 7.5,17.37L3.36,17M20.65,7L18.88,10.79C18.74,10 18.47,9.23 18.05,8.5C17.63,7.78 17.1,7.15 16.5,6.64L20.65,7M20.64,17L16.5,17.36C17.09,16.85 17.62,16.22 18.04,15.5C18.46,14.77 18.73,14 18.87,13.21L20.64,17M12,22L9.59,18.56C10.33,18.83 11.14,19 12,19C12.82,19 13.63,18.83 14.37,18.56L12,22Z",schema:wo},{title:e("editor.battery"),name:"battery",type:"expandable",iconPath:"M16 20H8V6H16M16.67 4H15V2H9V4H7.33C6.6 4 6 4.6 6 5.33V20.67C6 21.4 6.6 22 7.33 22H16.67C17.41 22 18 21.41 18 20.67V5.33C18 4.6 17.4 4 16.67 4M15 16H9V19H15V16M15 7H9V10H15V7M15 11.5H9V14.5H15V11.5Z",schema:co},{title:e("editor.fossil_fuel_percentage"),name:"fossil_fuel_percentage",type:"expandable",iconPath:"M17,8C8,10 5.9,16.17 3.82,21.34L5.71,22L6.66,19.7C7.14,19.87 7.64,20 8,20C19,20 22,3 22,3C21,5 14,5.25 9,6.25C4,7.25 2,11.5 2,13.5C2,15.5 3.75,17.25 3.75,17.25C7,8 17,8 17,8Z",schema:mo},{title:e("editor.home"),name:"home",type:"expandable",iconPath:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",schema:go}]}]));const So=Qt((e=>[{name:"entities",type:"grid",column_min_width:"400px",schema:[{title:`${e("editor.individual")} 1`,name:"individual1",type:"expandable",schema:bo},{title:`${e("editor.individual")} 2`,name:"individual2",type:"expandable",schema:bo}]}])),$o=Qt(((e,t)=>[{type:"grid",column_min_width:"200px",schema:[{name:"dashboard_link",label:"Dashboard Link",selector:{navigation:{}}},{name:"dashboard_link_label",label:"Dashboard Link Label",selector:{text:{}}},{name:"w_decimals",label:"Watt Decimals",selector:{number:{mode:"box",min:0,max:5,step:1}}},{name:"kw_decimals",label:"kW Decimals",selector:{number:{mode:"box",min:0,max:5,step:1}}},{name:"max_flow_rate",label:"Max Flow Rate (Sec/Dot)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"min_flow_rate",label:"Min Flow Rate (Sec/Dot)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"max_expected_power",label:"Max Expected Power (in Watts)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"min_expected_power",label:"Min Expected Power (in Watts)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"watt_threshold",label:"Watt to Kilowatt Threshold",selector:{number:{mode:"box",min:0,max:1e6,step:1}}},{name:"clickable_entities",label:"Clickable Entities",selector:{boolean:{}}},{name:"disable_dots",label:"Disable Moving Dots",selector:{boolean:{}}},{name:"use_new_flow_rate_model",label:"New Flow Model?",selector:{boolean:{}}},{name:"sort_individual_devices",label:"Sort individual devices by usage",selector:{boolean:{}}}]},{type:"expandable",title:e("editor.display_zero_lines"),schema:[..._o(e,t)]}])),Co="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,Eo=(e,t,i=null)=>{for(;t!==i;){const i=t.nextSibling;e.removeChild(t),t=i}},Ao=`{{lit-${String(Math.random()).slice(2)}}}`,Mo=`\x3c!--${Ao}--\x3e`,zo=new RegExp(`${Ao}|${Mo}`),Po="$lit$";class Do{constructor(e,t){this.parts=[],this.element=t;const i=[],o=[],a=document.createTreeWalker(t.content,133,null,!1);let n=0,r=-1,l=0;const{strings:s,values:{length:d}}=e;for(;l<d;){const e=a.nextNode();if(null!==e){if(r++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:i}=t;let o=0;for(let e=0;e<i;e++)To(t[e].name,Po)&&o++;for(;o-- >0;){const t=s[l],i=jo.exec(t)[2],o=i.toLowerCase()+Po,a=e.getAttribute(o);e.removeAttribute(o);const n=a.split(zo);this.parts.push({type:"attribute",index:r,name:i,strings:n}),l+=n.length-1}}"TEMPLATE"===e.tagName&&(o.push(e),a.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(Ao)>=0){const o=e.parentNode,a=t.split(zo),n=a.length-1;for(let t=0;t<n;t++){let i,n=a[t];if(""===n)i=No();else{const e=jo.exec(n);null!==e&&To(e[2],Po)&&(n=n.slice(0,e.index)+e[1]+e[2].slice(0,-5)+e[3]),i=document.createTextNode(n)}o.insertBefore(i,e),this.parts.push({type:"node",index:++r})}""===a[n]?(o.insertBefore(No(),e),i.push(e)):e.data=a[n],l+=n}}else if(8===e.nodeType)if(e.data===Ao){const t=e.parentNode;null!==e.previousSibling&&r!==n||(r++,t.insertBefore(No(),e)),n=r,this.parts.push({type:"node",index:r}),null===e.nextSibling?e.data="":(i.push(e),r--),l++}else{let t=-1;for(;-1!==(t=e.data.indexOf(Ao,t+1));)this.parts.push({type:"node",index:-1}),l++}}else a.currentNode=o.pop()}for(const e of i)e.parentNode.removeChild(e)}}const To=(e,t)=>{const i=e.length-t.length;return i>=0&&e.slice(i)===t},Oo=e=>-1!==e.index,No=()=>document.createComment(""),jo=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function Bo(e,t){const{element:{content:i},parts:o}=e,a=document.createTreeWalker(i,133,null,!1);let n=Lo(o),r=o[n],l=-1,s=0;const d=[];let c=null;for(;a.nextNode();){l++;const e=a.currentNode;for(e.previousSibling===c&&(c=null),t.has(e)&&(d.push(e),null===c&&(c=e)),null!==c&&s++;void 0!==r&&r.index===l;)r.index=null!==c?-1:r.index-s,n=Lo(o,n),r=o[n]}d.forEach((e=>e.parentNode.removeChild(e)))}const Io=e=>{let t=11===e.nodeType?0:1;const i=document.createTreeWalker(e,133,null,!1);for(;i.nextNode();)t++;return t},Lo=(e,t=-1)=>{for(let i=t+1;i<e.length;i++){const t=e[i];if(Oo(t))return i}return-1},Ho=new WeakMap,Ro=e=>"function"==typeof e&&Ho.has(e),Fo={},Go={};class Uo{constructor(e,t,i){this.__parts=[],this.template=e,this.processor=t,this.options=i}update(e){let t=0;for(const i of this.__parts)void 0!==i&&i.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=Co?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],i=this.template.parts,o=document.createTreeWalker(e,133,null,!1);let a,n=0,r=0,l=o.nextNode();for(;n<i.length;)if(a=i[n],Oo(a)){for(;r<a.index;)r++,"TEMPLATE"===l.nodeName&&(t.push(l),o.currentNode=l.content),null===(l=o.nextNode())&&(o.currentNode=t.pop(),l=o.nextNode());if("node"===a.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(l.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,a.name,a.strings,this.options));n++}else this.__parts.push(void 0),n++;return Co&&(document.adoptNode(e),customElements.upgrade(e)),e}}const Vo=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),Wo=` ${Ao} `;class Zo{constructor(e,t,i,o){this.strings=e,this.values=t,this.type=i,this.processor=o}getHTML(){const e=this.strings.length-1;let t="",i=!1;for(let o=0;o<e;o++){const e=this.strings[o],a=e.lastIndexOf("\x3c!--");i=(a>-1||i)&&-1===e.indexOf("--\x3e",a+1);const n=jo.exec(e);t+=null===n?e+(i?Wo:Mo):e.substr(0,n.index)+n[1]+n[2]+Po+n[3]+Ao}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==Vo&&(t=Vo.createHTML(t)),e.innerHTML=t,e}}class Ko{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(No()),this.endNode=e.appendChild(No())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=No()),e.__insert(this.endNode=No())}insertAfterPart(e){e.__insert(this.startNode=No()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;Ro(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=Fo,e(this)}const e=this.__pendingValue;e!==Fo&&((e=>null===e||!("object"==typeof e||"function"==typeof e))(e)?e!==this.value&&this.__commitText(e):e instanceof Zo?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):(e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]))(e)?this.__commitIterable(e):e===Go?(this.value=Go,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,i="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=i:this.__commitNode(document.createTextNode(i)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof Uo&&this.value.template===t)this.value.update(e.values);else{const i=new Uo(t,e.processor,this.options),o=i._clone();i.update(e.values),this.__commitNode(o),this.value=i}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let i,o=0;for(const a of e)i=t[o],void 0===i&&(i=new Ko(this.options),t.push(i),0===o?i.appendIntoPart(this):i.insertAfterPart(t[o-1])),i.setValue(a),i.commit(),o++;o<t.length&&(t.length=o,this.clear(i&&i.endNode))}clear(e=this.startNode){Eo(this.startNode.parentNode,e.nextSibling,this.endNode)}}let Yo=!1;function qo(e){let t=Xo.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},Xo.set(e.type,t));let i=t.stringsArray.get(e.strings);if(void 0!==i)return i;const o=e.strings.join(Ao);return i=t.keyString.get(o),void 0===i&&(i=new Do(e,e.getTemplateElement()),t.keyString.set(o,i)),t.stringsArray.set(e.strings,i),i}(()=>{try{const e={get capture(){return Yo=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();const Xo=new Map,Jo=new WeakMap;"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const Qo=(e,t)=>`${e}--${t}`;let ea=!0;void 0===window.ShadyCSS?ea=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),ea=!1);const ta=e=>t=>{const i=Qo(t.type,e);let o=Xo.get(i);void 0===o&&(o={stringsArray:new WeakMap,keyString:new Map},Xo.set(i,o));let a=o.stringsArray.get(t.strings);if(void 0!==a)return a;const n=t.strings.join(Ao);if(a=o.keyString.get(n),void 0===a){const i=t.getTemplateElement();ea&&window.ShadyCSS.prepareTemplateDom(i,e),a=new Do(t,i),o.keyString.set(n,a)}return o.stringsArray.set(t.strings,a),a},ia=["html","svg"],oa=new Set;window.JSCompiler_renameProperty=(e,t)=>e;const aa={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},na=(e,t)=>t!==e&&(t==t||e==e),ra={attribute:!0,type:String,converter:aa,reflect:!1,hasChanged:na},la="finalized";class sa extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach(((t,i)=>{const o=this._attributeNameForProperty(i,t);void 0!==o&&(this._attributeToPropertyMap.set(o,i),e.push(o))})),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach(((e,t)=>this._classProperties.set(t,e)))}}static createProperty(e,t=ra){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const i="symbol"==typeof e?Symbol():`__${e}`,o=this.getPropertyDescriptor(e,i,t);void 0!==o&&Object.defineProperty(this.prototype,e,o)}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(o){const a=this[e];this[t]=o,this.requestUpdateInternal(e,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||ra}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty(la)||e.finalize(),this[la]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const i of t)this.createProperty(i,e[i])}}static _attributeNameForProperty(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,i=na){return i(e,t)}static _propertyValueFromAttribute(e,t){const i=t.type,o=t.converter||aa,a="function"==typeof o?o:o.fromAttribute;return a?a(e,i):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const i=t.type,o=t.converter;return(o&&o.toAttribute||aa.toAttribute)(e,i)}initialize(){this._updateState=0,this._updatePromise=new Promise((e=>this._enableUpdatingResolver=e)),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach(((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}}))}_applyInstanceProperties(){this._instanceProperties.forEach(((e,t)=>this[t]=e)),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,i){t!==i&&this._attributeToProperty(e,i)}_propertyToAttribute(e,t,i=ra){const o=this.constructor,a=o._attributeNameForProperty(e,i);if(void 0!==a){const e=o._propertyValueToAttribute(t,i);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(a):this.setAttribute(a,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const i=this.constructor,o=i._attributeToPropertyMap.get(e);if(void 0!==o){const e=i.getPropertyOptions(o);this._updateState=16|this._updateState,this[o]=i._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}requestUpdateInternal(e,t,i){let o=!0;if(void 0!==e){const a=this.constructor;i=i||a.getPropertyOptions(e),a._valueHasChanged(this[e],t,i.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==i.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,i))):o=!1}!this._hasRequestedUpdate&&o&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(((e,t)=>this._propertyToAttribute(t,this[t],e))),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}sa[la]=!0;const da=e=>t=>"function"==typeof t?((e,t)=>(window.customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:i,elements:o}=t;return{kind:i,elements:o,finisher(t){window.customElements.define(e,t)}}})(e,t),ca=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(i){i.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}};function ua(e){return(t,i)=>void 0!==i?((e,t,i)=>{t.constructor.createProperty(i,e)})(e,t,i):ca(e,t)}const pa=e=>function(e){return ua({attribute:!1,hasChanged:null==e?void 0:e.hasChanged})}(e),ha=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,va=Symbol();class _a{constructor(e,t){if(t!==va)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(ha?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const ma={};class fa extends sa{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const t=(e,i)=>e.reduceRight(((e,i)=>Array.isArray(i)?t(i,e):(e.add(i),e)),i),i=t(e,new Set),o=[];i.forEach((e=>o.unshift(e))),this._styles=o}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map((e=>{if(e instanceof CSSStyleSheet&&!ha){const t=Array.prototype.slice.call(e.cssRules).reduce(((e,t)=>e+t.cssText),"");return new _a(String(t),va)}return e}))}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?ha?this.renderRoot.adoptedStyleSheets=e.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map((e=>e.cssText)),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==ma&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)})))}render(){return ma}}fa.finalized=!0,fa.render=(e,t,i)=>{if(!i||"object"!=typeof i||!i.scopeName)throw new Error("The `scopeName` option is required.");const o=i.scopeName,a=Jo.has(t),n=ea&&11===t.nodeType&&!!t.host,r=n&&!oa.has(o),l=r?document.createDocumentFragment():t;if(((e,t,i)=>{let o=Jo.get(t);void 0===o&&(Eo(t,t.firstChild),Jo.set(t,o=new Ko(Object.assign({templateFactory:qo},i))),o.appendInto(t)),o.setValue(e),o.commit()})(e,l,Object.assign({templateFactory:ta(o)},i)),r){const e=Jo.get(l);Jo.delete(l);((e,t,i)=>{oa.add(e);const o=i?i.element:document.createElement("template"),a=t.querySelectorAll("style"),{length:n}=a;if(0===n)return void window.ShadyCSS.prepareTemplateStyles(o,e);const r=document.createElement("style");for(let e=0;e<n;e++){const t=a[e];t.parentNode.removeChild(t),r.textContent+=t.textContent}(e=>{ia.forEach((t=>{const i=Xo.get(Qo(t,e));void 0!==i&&i.keyString.forEach((e=>{const{element:{content:t}}=e,i=new Set;Array.from(t.querySelectorAll("style")).forEach((e=>{i.add(e)})),Bo(e,i)}))}))})(e);const l=o.content;i?function(e,t,i=null){const{element:{content:o},parts:a}=e;if(null==i)return void o.appendChild(t);const n=document.createTreeWalker(o,133,null,!1);let r=Lo(a),l=0,s=-1;for(;n.nextNode();)for(s++,n.currentNode===i&&(l=Io(t),i.parentNode.insertBefore(t,i));-1!==r&&a[r].index===s;){if(l>0){for(;-1!==r;)a[r].index+=l,r=Lo(a,r);return}r=Lo(a,r)}}(i,r,l.firstChild):l.insertBefore(r,l.firstChild),window.ShadyCSS.prepareTemplateStyles(o,e);const s=l.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==s)t.insertBefore(s.cloneNode(!0),t.firstChild);else if(i){l.insertBefore(r,l.firstChild);const e=new Set;e.add(r),Bo(i,e)}})(o,l,e.value instanceof Uo?e.value.template:void 0),Eo(t,t.firstChild),t.appendChild(l),Jo.set(t,e)}!a&&n&&window.ShadyCSS.styleElement(t.host)},fa.shadowRootOptions={mode:"open"};const{I:ya}=ae,ga=()=>document.createComment(""),ba=(e,t,i)=>{var o;const a=e._$AA.parentNode,n=void 0===t?e._$AB:t._$AA;if(void 0===i){const t=a.insertBefore(ga(),n),o=a.insertBefore(ga(),n);i=new ya(t,o,e,e.options)}else{const t=i._$AB.nextSibling,r=i._$AM,l=r!==e;if(l){let t;null===(o=i._$AQ)||void 0===o||o.call(i,e),i._$AM=e,void 0!==i._$AP&&(t=e._$AU)!==r._$AU&&i._$AP(t)}if(t!==n||l){let e=i._$AA;for(;e!==t;){const t=e.nextSibling;a.insertBefore(e,n),e=t}}}return i},wa=(e,t,i=e)=>(e._$AI(t,i),e),xa={},ka=e=>{var t;null===(t=e._$AP)||void 0===t||t.call(e,!1,!0);let i=e._$AA;const o=e._$AB.nextSibling;for(;i!==o;){const e=i.nextSibling;i.remove(),i=e}},Sa=(e,t,i)=>{const o=new Map;for(let a=t;a<=i;a++)o.set(e[a],a);return o},$a=Ce(class extends Ee{constructor(e){if(super(e),2!==e.type)throw Error("repeat() can only be used in text expressions")}ct(e,t,i){let o;void 0===i?i=t:void 0!==t&&(o=t);const a=[],n=[];let r=0;for(const t of e)a[r]=o?o(t,r):r,n[r]=i(t,r),r++;return{values:n,keys:a}}render(e,t,i){return this.ct(e,t,i).values}update(e,[t,i,o]){var a;const n=(e=>e._$AH)(e),{values:r,keys:l}=this.ct(t,i,o);if(!Array.isArray(n))return this.ut=l,r;const s=null!==(a=this.ut)&&void 0!==a?a:this.ut=[],d=[];let c,u,p=0,h=n.length-1,v=0,_=r.length-1;for(;p<=h&&v<=_;)if(null===n[p])p++;else if(null===n[h])h--;else if(s[p]===l[v])d[v]=wa(n[p],r[v]),p++,v++;else if(s[h]===l[_])d[_]=wa(n[h],r[_]),h--,_--;else if(s[p]===l[_])d[_]=wa(n[p],r[_]),ba(e,d[_+1],n[p]),p++,_--;else if(s[h]===l[v])d[v]=wa(n[h],r[v]),ba(e,n[p],n[h]),h--,v++;else if(void 0===c&&(c=Sa(l,v,_),u=Sa(s,p,h)),c.has(s[p]))if(c.has(s[h])){const t=u.get(l[v]),i=void 0!==t?n[t]:null;if(null===i){const t=ba(e,n[p]);wa(t,r[v]),d[v]=t}else d[v]=wa(i,r[v]),ba(e,n[p],i),n[t]=null;v++}else ka(n[h]),h--;else ka(n[p]),p++;for(;v<=_;){const t=ba(e,d[_+1]);wa(t,r[v]),d[v++]=t}for(;p<=h;){const e=n[p++];null!==e&&ka(e)}return this.ut=l,((e,t=xa)=>{e._$AH=t})(e,d),F}}),Ca=(e,t,i,o)=>{o=o||{},i=null==i?{}:i;const a=new Event(t,{bubbles:void 0===o.bubbles||o.bubbles,cancelable:Boolean(o.cancelable),composed:void 0===o.composed||o.composed});return a.detail=i,e.dispatchEvent(a),a},Ea=r`#sortable a:nth-of-type(2n) paper-icon-item{animation-name:keyframes1;animation-iteration-count:infinite;transform-origin:50% 10%;animation-delay:-.75s;animation-duration:.25s}#sortable a:nth-of-type(2n-1) paper-icon-item{animation-name:keyframes2;animation-iteration-count:infinite;animation-direction:alternate;transform-origin:30% 5%;animation-delay:-.5s;animation-duration:.33s}#sortable a{height:48px;display:flex}#sortable{outline:0;display:block!important}.hidden-panel{display:flex!important}.sortable-fallback{display:none}.sortable-ghost{opacity:.4}.sortable-fallback{opacity:0}@keyframes keyframes1{0%{transform:rotate(-1deg);animation-timing-function:ease-in}50%{transform:rotate(1.5deg);animation-timing-function:ease-out}}@keyframes keyframes2{0%{transform:rotate(1deg);animation-timing-function:ease-in}50%{transform:rotate(-1.5deg);animation-timing-function:ease-out}}.hide-panel,.show-panel{display:none;position:absolute;top:0;right:4px;--mdc-icon-button-size:40px}:host([rtl]) .show-panel{right:initial;left:4px}.hide-panel{top:4px;right:8px}:host([rtl]) .hide-panel{right:initial;left:8px}:host([expanded]) .hide-panel{display:block}:host([expanded]) .show-panel{display:inline-flex}paper-icon-item.hidden-panel,paper-icon-item.hidden-panel ha-icon[slot=item-icon],paper-icon-item.hidden-panel span{color:var(--secondary-text-color);cursor:pointer}`;let Aa;const Ma=async()=>{var e,t,i,o;customElements.get("ha-form")||null===(e=customElements.get("hui-button-card"))||void 0===e||e.getConfigElement(),customElements.get("ha-entity-picker")||null===(t=customElements.get("hui-entities-card"))||void 0===t||t.getConfigElement(),customElements.get("ha-form")||await(null===(o=(i=window).loadCardHelpers)||void 0===o?void 0:o.call(i))};let za=class extends se{constructor(){super(...arguments),this._indexBeingEdited=-1,this._entityKeys=new WeakMap,this._computeLabelCallback=e=>this.hass.localize(`ui.panel.lovelace.editor.card.generic.${null==e?void 0:e.name}`)||eo(`editor.${null==e?void 0:e.name}`)}connectedCallback(){super.connectedCallback(),Ma()}disconnectedCallback(){super.disconnectedCallback(),this._destroySortable()}_editRowElement(e){this._indexBeingEdited=e}_getKey(e){return this._entityKeys.has(e)||this._entityKeys.set(e,Math.random().toString()),this._entityKeys.get(e)}render(){return this.entities&&this.hass?-1!==this._indexBeingEdited?H`<div class="individual-header"><h4>${this._indexBeingEdited+1} / ${this.entities.length} ${eo("editor.individual")}</h4><ha-icon-button .label="${this.hass.localize("ui.components.entity.entity-picker.clear")}" .path="${qt}" class="remove-icon" @click="${()=>this._indexBeingEdited=-1}"></ha-icon-button></div><ha-form .hass="${this.hass}" .data="${this.entities[this._indexBeingEdited]}" .schema="${bo}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._configChanged}"></ha-form>`:H`<div class="entities">${$a(this.entities,(e=>this._getKey(e)),((e,t)=>H`<div class="entity"><div class="handle"><ha-svg-icon .path="${"M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z"}"></ha-svg-icon></div>${e.type?H`<div class="special-row"><div><span>${this.hass.localize(`ui.panel.lovelace.editor.card.entities.entity_row.${e.type}`)} </span><span class="secondary">${this.hass.localize("ui.panel.lovelace.editor.card.entities.edit_special_row")}</span></div></div>`:H`<ha-entity-picker allow-custom-entity hideClearIcon .hass="${this.hass}" .value="${e.entity}" .index="${t}" @value-changed="${this._valueChanged}"></ha-entity-picker>`}<ha-icon-button .label="${this.hass.localize("ui.components.entity.entity-picker.clear")}" .path="${qt}" class="remove-icon" .index="${t}" @click="${this._removeRow}"></ha-icon-button><ha-icon-button .label="${this.hass.localize("ui.components.entity.entity-picker.edit")}" .path="${"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}" class="edit-icon" .index="${t}" @click="${()=>this._editRowElement(t)}"></ha-icon-button></div>`))}</div><ha-entity-picker class="add-entity" .hass="${this.hass}" @value-changed="${this._addEntity}"></ha-entity-picker>`:H`<p>No entities configured.</p>`}_configChanged(e){const t=e.detail.value||"";if(!this.config||!this.hass)return;Array.isArray(this.config.entities.individual)||(this.config.entities.individual=[]);const i=[...this.config.entities.individual];if(!i)return;i[this._indexBeingEdited]=t;const o=Object.assign(Object.assign({},this.config),{entities:Object.assign(Object.assign({},this.config.entities),{individual:i})});Ca(this,"config-changed",{config:o})}firstUpdated(){this._createSortable()}async _createSortable(){const e=await(async()=>(Aa||(Aa=(await Promise.resolve().then((function(){return Rr}))).default),Aa))();this._sortable=new e(this.shadowRoot.querySelector(".entities"),{animation:150,fallbackClass:"sortable-fallback",handle:".handle",onChoose:e=>{e.item.placeholder=document.createComment("sort-placeholder"),e.item.after(e.item.placeholder)},onEnd:e=>{e.item.placeholder&&(e.item.placeholder.replaceWith(e.item),delete e.item.placeholder),this._rowMoved(e)}})}_destroySortable(){var e;null===(e=this._sortable)||void 0===e||e.destroy(),this._sortable=void 0}async _addEntity(e){const t=e.detail.value;if(""===t)return;const i=this.entities.concat({entity:t});e.target.value="",Ca(this,"entities-changed",{entities:i})}_rowMoved(e){if(e.oldIndex===e.newIndex)return;const t=this.entities.concat();t.splice(e.newIndex,0,t.splice(e.oldIndex,1)[0]),Ca(this,"entities-changed",{entities:t})}_removeRow(e){const t=e.currentTarget.index,i=this.entities.concat();i.splice(t,1),Ca(this,"entities-changed",{entities:i})}_valueChanged(e){const t=e.detail.value,i=e.target.index,o=this.entities.concat();""===t||void 0===t?o.splice(i,1):o[i]=Object.assign(Object.assign({},o[i]),{entity:t}),Ca(this,"entities-changed",{entities:o})}_editRow(e){const t=e.currentTarget.index;Ca(this,"edit-detail-element",{subElementConfig:{index:t,type:"row",elementConfig:this.entities[t]}})}static get styles(){return[Ea,r`ha-entity-picker{margin-top:8px}.individual-header{display:flex;justify-content:space-between;align-items:center;margin-inline:.2rem;margin-bottom:1rem}.add-entity{display:block;margin-left:31px;margin-right:71px;margin-inline-start:31px;margin-inline-end:71px;direction:var(--direction)}.entity{display:flex;align-items:center}.entity .handle{padding-right:8px;cursor:move;padding-inline-end:8px;padding-inline-start:initial;direction:var(--direction)}.entity .handle>*{pointer-events:none}.entity ha-entity-picker{flex-grow:1}.special-row{height:60px;font-size:16px;display:flex;align-items:center;justify-content:space-between;flex-grow:1}.special-row div{display:flex;flex-direction:column}.edit-icon,.remove-icon{--mdc-icon-button-size:36px;color:var(--secondary-text-color)}.secondary{font-size:12px;color:var(--secondary-text-color)}`]}};e([he({attribute:!1})],za.prototype,"hass",void 0),e([he({attribute:!1})],za.prototype,"config",void 0),e([he({attribute:!1})],za.prototype,"entities",void 0),e([he()],za.prototype,"label",void 0),e([ve()],za.prototype,"_indexBeingEdited",void 0),za=e([ce("individual-row-editor")],za);let Pa=class extends se{constructor(){super(...arguments),this._computeLabelCallback=e=>this.hass.localize(`ui.panel.lovelace.editor.card.generic.${null==e?void 0:e.name}`)||eo(`editor.${null==e?void 0:e.name}`)}render(){return this.config&&this.hass?(this._configEntities=this.config.entities.individual,this._subElementEditorConfig?H`<ha-form .hass="${this.hass}" @value-changed="${this._valueChanged}" .data="${this.config}" .schema="${So(this.hass)}" .computeLabel="${this._computeLabelCallback}"></ha-form>`:H`<individual-row-editor .hass="${this.hass}" .config="${this.config}" .entities="${this._configEntities||[]}" @open-sub-element-editor="${this._editDetailElement}" @entities-changed="${this._entitiesChanged}" style="width:100%"></individual-row-editor>`):H`<div>no config</div>`}_valueChanged(e){let t=e.detail.value||"";this.config&&this.hass&&we(this,"config-changed",{config:t})}_entitiesChanged(e){let t=this.config;t=Object.assign(Object.assign({},t),{entities:Object.assign(Object.assign({},t.entities),{individual:e.detail.entities})}),this._configEntities=t.entities.individual.map((e=>"string"==typeof e?{entity:e}:e)),we(this,"config-changed",{config:t})}_editDetailElement(e){this._subElementEditorConfig=e.detail.subElementConfig}static get styles(){return r``}};e([ua({attribute:!1})],Pa.prototype,"config",void 0),e([pa()],Pa.prototype,"_subElementEditorConfig",void 0),e([pa()],Pa.prototype,"_configEntities",void 0),Pa=e([da("individual-devices-editor")],Pa);let Da=class extends se{constructor(){super(...arguments),this.outlined=!1,this.leftChevron=!1,this.icon="mdi:format-list-bulleted-type"}render(){return H`<div class="link-subpage" @click="${this._openSubElementPage}" @keydown="${this._openSubElementPage}" @focus="${this._focusChanged}" @blur="${this._focusChanged}" role="button"><ha-icon icon="${this.icon}" class="summary-icon"></ha-icon><slot name="header"><div class="header">${this.header}<slot class="secondary" name="secondary">${this.secondary}</slot></div></slot><ha-svg-icon .path="${"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}" class="summary-icon-right"></ha-svg-icon></div>`}_focusChanged(e){this.shadowRoot.querySelector(".top").classList.toggle("focused","focus"===e.type)}_openSubElementPage(){we(this,"open-sub-element-editor",{open:!0})}static get styles(){return r`:host{display:block}:host([outlined]){box-shadow:none;border-width:1px;border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0));border-radius:var(--ha-card-border-radius,12px)}:host([leftchevron]) .summary-icon{margin-left:0;margin-right:8px}.link-subpage{width:100%;display:flex;gap:1rem;padding:var(--expansion-panel-summary-padding,0 8px);min-height:48px;align-items:center;cursor:pointer;overflow:hidden;font-weight:500;outline:0}.summary-icon{transition:transform 150ms cubic-bezier(.4,0,.2,1);direction:var(--direction);color:var(--secondary-text-color)}.header,::slotted([slot=header]){flex:1}.container{padding:var(--expansion-panel-content-padding,0 8px);overflow:hidden;transition:height .3s cubic-bezier(.4,0,.2,1);height:0}.container.expanded{height:auto}.secondary{display:block;color:var(--secondary-text-color);font-size:12px}`}};var Ta;e([ua({type:String})],Da.prototype,"path",void 0),e([ua({type:Boolean,reflect:!0})],Da.prototype,"outlined",void 0),e([ua({type:Boolean,reflect:!0})],Da.prototype,"leftChevron",void 0),e([ua()],Da.prototype,"header",void 0),e([ua({type:String})],Da.prototype,"icon",void 0),e([ua()],Da.prototype,"secondary",void 0),e([(Ta=".container",(e,t)=>{const i={get(){return this.renderRoot.querySelector(Ta)},enumerable:!0,configurable:!0};return void 0!==t?((e,t,i)=>{Object.defineProperty(t,i,e)})(i,e,t):((e,t)=>({kind:"method",placement:"prototype",key:t.key,descriptor:e}))(i,e)})],Da.prototype,"_container",void 0),Da=e([da("link-subpage")],Da);let Oa=class extends se{render(){return H`<div class="header"><div class="back-title"><ha-icon-button .label="${"Go Back"}" .path="${"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}" @click="${this._goBack}"></ha-icon-button><span>${eo(`editor.${this.page}`)}</span></div></div>`}_goBack(){we(this,"go-back")}static get styles(){return r`.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.back-title{display:flex;align-items:center;font-size:18px}`}};e([ua({attribute:!1})],Oa.prototype,"config",void 0),e([ua()],Oa.prototype,"page",void 0),Oa=e([da("subpage-header")],Oa);const Na=[{page:"grid",icon:"mdi:transmission-tower",schema:yo},{page:"solar",icon:"mdi:solar-power",schema:wo},{page:"battery",icon:"mdi:battery-high",schema:co},{page:"fossil_fuel_percentage",icon:"mdi:leaf",schema:mo},{page:"home",icon:"mdi:home",schema:go},{page:"individual",icon:"mdi:dots-horizontal-circle-outline"},{page:"advanced",icon:"mdi:cog",schema:$o}];let ja=class extends se{constructor(){super(...arguments),this._configEntities=[],this._currentConfigPage=null,this._computeLabelCallback=e=>this.hass.localize(`ui.panel.lovelace.editor.card.generic.${null==e?void 0:e.name}`)||eo(`editor.${null==e?void 0:e.name}`)}async setConfig(e){Ht(e,xo),this._config=e}connectedCallback(){super.connectedCallback(),Ma()}_editDetailElement(e){this._currentConfigPage=e}_goBack(){this._currentConfigPage=null}render(){var e,t,i,o,a,n,r,l,s;if(!this.hass||!this._config)return G;const d=Object.assign(Object.assign({},this._config),{display_zero_lines:{mode:null!==(t=null===(e=this._config.display_zero_lines)||void 0===e?void 0:e.mode)&&void 0!==t?t:zt.displayZeroLines.mode,transparency:null!==(o=null===(i=this._config.display_zero_lines)||void 0===i?void 0:i.transparency)&&void 0!==o?o:zt.displayZeroLines.transparency,grey_color:null!==(n=null===(a=this._config.display_zero_lines)||void 0===a?void 0:a.grey_color)&&void 0!==n?n:zt.displayZeroLines.grey_color}});if(null!==this._currentConfigPage){if("individual"===this._currentConfigPage)return H`<subpage-header @go-back="${this._goBack}" page="${this._currentConfigPage}"></subpage-header><individual-devices-editor .hass="${this.hass}" .config="${this._config}" @config-changed="${this._valueChanged}"></individual-devices-editor>`;const e=this._currentConfigPage,t="advanced"===e?$o(eo,null!==(l=null===(r=this._config.display_zero_lines)||void 0===r?void 0:r.mode)&&void 0!==l?l:zt.displayZeroLines.mode):null===(s=Na.find((t=>t.page===e)))||void 0===s?void 0:s.schema,i="advanced"===e?d:d.entities[e];return H`<subpage-header @go-back="${this._goBack}" page="${this._currentConfigPage}"></subpage-header><ha-form .hass="${this.hass}" .data="${i}" .schema="${t}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form>`}const c=(e,t="mdi:dots-horizontal-circle-outline")=>{if(null===e)return H``;const i=(()=>{var i,o;return"individual"===e||"advanced"===e?t:(null===(o=null===(i=null==this?void 0:this._config)||void 0===i?void 0:i.entities[e])||void 0===o?void 0:o.icon)||t})();return H`<link-subpage path="${e}" header="${eo(`editor.${e}`)}" @open-sub-element-editor="${()=>this._editDetailElement(e)}" icon="${i}"></link-subpage>`};return H`<div class="card-config"><ha-form .hass="${this.hass}" .data="${d}" .schema="${ko}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form>${Na.map((e=>c(e.page,e.icon)))}</div>`}_valueChanged(e){let t=e.detail.value||"";this._config&&this.hass&&(null!==this._currentConfigPage&&"advanced"!==this._currentConfigPage&&"individual"!==this._currentConfigPage&&(t=Object.assign(Object.assign({},this._config),{entities:Object.assign(Object.assign({},this._config.entities),{[this._currentConfigPage]:t})})),we(this,"config-changed",{config:t}))}static get styles(){return r`ha-form{width:100%}ha-icon-button{align-self:center}.entities-section *{background-color:red}.card-config{display:flex;flex-direction:column;gap:1.5rem;margin-bottom:10px}.config-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%}.config-header.sub-header{margin-top:24px}ha-icon{padding-bottom:2px;position:relative;top:-4px;right:1px}`}};e([he({attribute:!1})],ja.prototype,"hass",void 0),e([ve()],ja.prototype,"_config",void 0),e([ve()],ja.prototype,"_configEntities",void 0),e([ve()],ja.prototype,"_currentConfigPage",void 0),ja=e([ce("power-flow-card-plus-editor")],ja);var Ba=Object.freeze({__proto__:null,get PowerFlowCardPlusEditor(){return ja}});function Ia(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function La(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(i),!0).forEach((function(t){Ra(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ia(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Ha(e){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(e)}function Ra(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Fa(){return Fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Fa.apply(this,arguments)}function Ga(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var Ua=Ga(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Va=Ga(/Edge/i),Wa=Ga(/firefox/i),Za=Ga(/safari/i)&&!Ga(/chrome/i)&&!Ga(/android/i),Ka=Ga(/iP(ad|od|hone)/i),Ya=Ga(/chrome/i)&&Ga(/android/i),qa={capture:!1,passive:!1};function Xa(e,t,i){e.addEventListener(t,i,!Ua&&qa)}function Ja(e,t,i){e.removeEventListener(t,i,!Ua&&qa)}function Qa(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function en(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function tn(e,t,i,o){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&Qa(e,t):Qa(e,t))||o&&e===i)return e;if(e===i)break}while(e=en(e))}return null}var on,an=/\s+/g;function nn(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(an," ").replace(" "+t+" "," ");e.className=(o+(i?" "+t:"")).replace(an," ")}}function rn(e,t,i){var o=e&&e.style;if(o){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=i+("string"==typeof i?"":"px")}}function ln(e,t){var i="";if("string"==typeof e)i=e;else do{var o=rn(e,"transform");o&&"none"!==o&&(i=o+" "+i)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(i)}function sn(e,t,i){if(e){var o=e.getElementsByTagName(t),a=0,n=o.length;if(i)for(;a<n;a++)i(o[a],a);return o}return[]}function dn(){return document.scrollingElement||document.documentElement}function cn(e,t,i,o,a){if(e.getBoundingClientRect||e===window){var n,r,l,s,d,c,u;if(e!==window&&e.parentNode&&e!==dn()?(r=(n=e.getBoundingClientRect()).top,l=n.left,s=n.bottom,d=n.right,c=n.height,u=n.width):(r=0,l=0,s=window.innerHeight,d=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(t||i)&&e!==window&&(a=a||e.parentNode,!Ua))do{if(a&&a.getBoundingClientRect&&("none"!==rn(a,"transform")||i&&"static"!==rn(a,"position"))){var p=a.getBoundingClientRect();r-=p.top+parseInt(rn(a,"border-top-width")),l-=p.left+parseInt(rn(a,"border-left-width")),s=r+n.height,d=l+n.width;break}}while(a=a.parentNode);if(o&&e!==window){var h=ln(a||e),v=h&&h.a,_=h&&h.d;h&&(s=(r/=_)+(c/=_),d=(l/=v)+(u/=v))}return{top:r,left:l,bottom:s,right:d,width:u,height:c}}}function un(e,t,i){for(var o=mn(e,!0),a=cn(e)[t];o;){var n=cn(o)[i];if(!("top"===i||"left"===i?a>=n:a<=n))return o;if(o===dn())break;o=mn(o,!1)}return!1}function pn(e,t,i,o){for(var a=0,n=0,r=e.children;n<r.length;){if("none"!==r[n].style.display&&r[n]!==gr.ghost&&(o||r[n]!==gr.dragged)&&tn(r[n],i.draggable,e,!1)){if(a===t)return r[n];a++}n++}return null}function hn(e,t){for(var i=e.lastElementChild;i&&(i===gr.ghost||"none"===rn(i,"display")||t&&!Qa(i,t));)i=i.previousElementSibling;return i||null}function vn(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===gr.clone||t&&!Qa(e,t)||i++;return i}function _n(e){var t=0,i=0,o=dn();if(e)do{var a=ln(e),n=a.a,r=a.d;t+=e.scrollLeft*n,i+=e.scrollTop*r}while(e!==o&&(e=e.parentNode));return[t,i]}function mn(e,t){if(!e||!e.getBoundingClientRect)return dn();var i=e,o=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var a=rn(i);if(i.clientWidth<i.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!i.getBoundingClientRect||i===document.body)return dn();if(o||t)return i;o=!0}}}while(i=i.parentNode);return dn()}function fn(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function yn(e,t){return function(){if(!on){var i=arguments;1===i.length?e.call(this,i[0]):e.apply(this,i),on=setTimeout((function(){on=void 0}),t)}}}function gn(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function bn(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function wn(e,t,i){var o={};return Array.from(e.children).forEach((function(a){var n,r,l,s;if(tn(a,t.draggable,e,!1)&&!a.animated&&a!==i){var d=cn(a);o.left=Math.min(null!==(n=o.left)&&void 0!==n?n:1/0,d.left),o.top=Math.min(null!==(r=o.top)&&void 0!==r?r:1/0,d.top),o.right=Math.max(null!==(l=o.right)&&void 0!==l?l:-1/0,d.right),o.bottom=Math.max(null!==(s=o.bottom)&&void 0!==s?s:-1/0,d.bottom)}})),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var xn="Sortable"+(new Date).getTime();var kn=[],Sn={initializeByDefault:!0},$n={mount:function(e){for(var t in Sn)Sn.hasOwnProperty(t)&&!(t in e)&&(e[t]=Sn[t]);kn.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),kn.push(e)},pluginEvent:function(e,t,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var a=e+"Global";kn.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][a]&&t[o.pluginName][a](La({sortable:t},i)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](La({sortable:t},i)))}))},initializePlugins:function(e,t,i,o){for(var a in kn.forEach((function(o){var a=o.pluginName;if(e.options[a]||o.initializeByDefault){var n=new o(e,t,e.options);n.sortable=e,n.options=e.options,e[a]=n,Fa(i,n.defaults)}})),e.options)if(e.options.hasOwnProperty(a)){var n=this.modifyOption(e,a,e.options[a]);void 0!==n&&(e.options[a]=n)}},getEventProperties:function(e,t){var i={};return kn.forEach((function(o){"function"==typeof o.eventProperties&&Fa(i,o.eventProperties.call(t[o.pluginName],e))})),i},modifyOption:function(e,t,i){var o;return kn.forEach((function(a){e[a.pluginName]&&a.optionListeners&&"function"==typeof a.optionListeners[t]&&(o=a.optionListeners[t].call(e[a.pluginName],i))})),o}},Cn=["evt"],En=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.evt,a=function(e,t){if(null==e)return{};var i,o,a=function(e,t){if(null==e)return{};var i,o,a={},n=Object.keys(e);for(o=0;o<n.length;o++)i=n[o],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)i=n[o],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}(i,Cn);$n.pluginEvent.bind(gr)(e,t,La({dragEl:Mn,parentEl:zn,ghostEl:Pn,rootEl:Dn,nextEl:Tn,lastDownEl:On,cloneEl:Nn,cloneHidden:jn,dragStarted:Yn,putSortable:Fn,activeSortable:gr.active,originalEvent:o,oldIndex:Bn,oldDraggableIndex:Ln,newIndex:In,newDraggableIndex:Hn,hideGhostForTarget:_r,unhideGhostForTarget:mr,cloneNowHidden:function(){jn=!0},cloneNowShown:function(){jn=!1},dispatchSortableEvent:function(e){An({sortable:t,name:e,originalEvent:o})}},a))};function An(e){!function(e){var t=e.sortable,i=e.rootEl,o=e.name,a=e.targetEl,n=e.cloneEl,r=e.toEl,l=e.fromEl,s=e.oldIndex,d=e.newIndex,c=e.oldDraggableIndex,u=e.newDraggableIndex,p=e.originalEvent,h=e.putSortable,v=e.extraEventProperties;if(t=t||i&&i[xn]){var _,m=t.options,f="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||Ua||Va?(_=document.createEvent("Event")).initEvent(o,!0,!0):_=new CustomEvent(o,{bubbles:!0,cancelable:!0}),_.to=r||i,_.from=l||i,_.item=a||i,_.clone=n,_.oldIndex=s,_.newIndex=d,_.oldDraggableIndex=c,_.newDraggableIndex=u,_.originalEvent=p,_.pullMode=h?h.lastPutMode:void 0;var y=La(La({},v),$n.getEventProperties(o,t));for(var g in y)_[g]=y[g];i&&i.dispatchEvent(_),m[f]&&m[f].call(t,_)}}(La({putSortable:Fn,cloneEl:Nn,targetEl:Mn,rootEl:Dn,oldIndex:Bn,oldDraggableIndex:Ln,newIndex:In,newDraggableIndex:Hn},e))}var Mn,zn,Pn,Dn,Tn,On,Nn,jn,Bn,In,Ln,Hn,Rn,Fn,Gn,Un,Vn,Wn,Zn,Kn,Yn,qn,Xn,Jn,Qn,er=!1,tr=!1,ir=[],or=!1,ar=!1,nr=[],rr=!1,lr=[],sr="undefined"!=typeof document,dr=Ka,cr=Va||Ua?"cssFloat":"float",ur=sr&&!Ya&&!Ka&&"draggable"in document.createElement("div"),pr=function(){if(sr){if(Ua)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),hr=function(e,t){var i=rn(e),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),a=pn(e,0,t),n=pn(e,1,t),r=a&&rn(a),l=n&&rn(n),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+cn(a).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+cn(n).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&"none"!==r.float){var c="left"===r.float?"left":"right";return!n||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return a&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=o&&"none"===i[cr]||n&&"none"===i[cr]&&s+d>o)?"vertical":"horizontal"},vr=function(e){function t(e,i){return function(o,a,n,r){var l=o.options.group.name&&a.options.group.name&&o.options.group.name===a.options.group.name;if(null==e&&(i||l))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"==typeof e)return t(e(o,a,n,r),i)(o,a,n,r);var s=(i?o:a).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var i={},o=e.group;o&&"object"==Ha(o)||(o={name:o}),i.name=o.name,i.checkPull=t(o.pull,!0),i.checkPut=t(o.put),i.revertClone=o.revertClone,e.group=i},_r=function(){!pr&&Pn&&rn(Pn,"display","none")},mr=function(){!pr&&Pn&&rn(Pn,"display","")};sr&&!Ya&&document.addEventListener("click",(function(e){if(tr)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),tr=!1,!1}),!0);var fr=function(e){if(Mn){var t=function(e,t){var i;return ir.some((function(o){var a=o[xn].options.emptyInsertThreshold;if(a&&!hn(o)){var n=cn(o),r=e>=n.left-a&&e<=n.right+a,l=t>=n.top-a&&t<=n.bottom+a;return r&&l?i=o:void 0}})),i}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[xn]._onDragOver(i)}}},yr=function(e){Mn&&Mn.parentNode[xn]._isOutsideThisEl(e.target)};function gr(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Fa({},t),e[xn]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return hr(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==gr.supportPointer&&"PointerEvent"in window&&!Za,emptyInsertThreshold:5};for(var o in $n.initializePlugins(this,e,i),i)!(o in t)&&(t[o]=i[o]);for(var a in vr(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&ur,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Xa(e,"pointerdown",this._onTapStart):(Xa(e,"mousedown",this._onTapStart),Xa(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Xa(e,"dragover",this),Xa(e,"dragenter",this)),ir.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Fa(this,function(){var e,t=[];return{captureAnimationState:function(){t=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(e){if("none"!==rn(e,"display")&&e!==gr.ghost){t.push({target:e,rect:cn(e)});var i=La({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=ln(e,!0);o&&(i.top-=o.f,i.left-=o.e)}e.fromRect=i}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[i][o])return Number(i);return-1}(t,{target:e}),1)},animateAll:function(i){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof i&&i());var a=!1,n=0;t.forEach((function(e){var t=0,i=e.target,r=i.fromRect,l=cn(i),s=i.prevFromRect,d=i.prevToRect,c=e.rect,u=ln(i,!0);u&&(l.top-=u.f,l.left-=u.e),i.toRect=l,i.thisAnimationDuration&&fn(s,l)&&!fn(r,l)&&(c.top-l.top)/(c.left-l.left)==(r.top-l.top)/(r.left-l.left)&&(t=function(e,t,i,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*o.animation}(c,s,d,o.options)),fn(l,r)||(i.prevFromRect=r,i.prevToRect=l,t||(t=o.options.animation),o.animate(i,c,l,t)),t&&(a=!0,n=Math.max(n,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),t),i.thisAnimationDuration=t)})),clearTimeout(e),a?e=setTimeout((function(){"function"==typeof i&&i()}),n):"function"==typeof i&&i(),t=[]},animate:function(e,t,i,o){if(o){rn(e,"transition",""),rn(e,"transform","");var a=ln(this.el),n=a&&a.a,r=a&&a.d,l=(t.left-i.left)/(n||1),s=(t.top-i.top)/(r||1);e.animatingX=!!l,e.animatingY=!!s,rn(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),rn(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),rn(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){rn(e,"transition",""),rn(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}())}function br(e,t,i,o,a,n,r,l){var s,d,c=e[xn],u=c.options.onMove;return!window.CustomEvent||Ua||Va?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=i,s.draggedRect=o,s.related=a||t,s.relatedRect=n||cn(t),s.willInsertAfter=l,s.originalEvent=r,e.dispatchEvent(s),u&&(d=u.call(c,s,r)),d}function wr(e){e.draggable=!1}function xr(){rr=!1}function kr(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,o=0;i--;)o+=t.charCodeAt(i);return o.toString(36)}function Sr(e){return setTimeout(e,0)}function $r(e){return clearTimeout(e)}gr.prototype={constructor:gr,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(qn=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Mn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,o=this.options,a=o.preventOnFilter,n=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=o.filter;if(function(e){lr.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var o=t[i];o.checked&&lr.push(o)}}(i),!Mn&&!(/mousedown|pointerdown/.test(n)&&0!==e.button||o.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Za||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=tn(l,o.draggable,i,!1))&&l.animated||On===l)){if(Bn=vn(l),Ln=vn(l,o.draggable),"function"==typeof d){if(d.call(this,e,l,this))return An({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:i,fromEl:i}),En("filter",t,{evt:e}),void(a&&e.cancelable&&e.preventDefault())}else if(d&&(d=d.split(",").some((function(o){if(o=tn(s,o.trim(),i,!1))return An({sortable:t,rootEl:o,name:"filter",targetEl:l,fromEl:i,toEl:i}),En("filter",t,{evt:e}),!0}))))return void(a&&e.cancelable&&e.preventDefault());o.handle&&!tn(s,o.handle,i,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,t,i){var o,a=this,n=a.el,r=a.options,l=n.ownerDocument;if(i&&!Mn&&i.parentNode===n){var s=cn(i);if(Dn=n,zn=(Mn=i).parentNode,Tn=Mn.nextSibling,On=i,Rn=r.group,gr.dragged=Mn,Gn={target:Mn,clientX:(t||e).clientX,clientY:(t||e).clientY},Zn=Gn.clientX-s.left,Kn=Gn.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Mn.style["will-change"]="all",o=function(){En("delayEnded",a,{evt:e}),gr.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!Wa&&a.nativeDraggable&&(Mn.draggable=!0),a._triggerDragStart(e,t),An({sortable:a,name:"choose",originalEvent:e}),nn(Mn,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){sn(Mn,e.trim(),wr)})),Xa(l,"dragover",fr),Xa(l,"mousemove",fr),Xa(l,"touchmove",fr),Xa(l,"mouseup",a._onDrop),Xa(l,"touchend",a._onDrop),Xa(l,"touchcancel",a._onDrop),Wa&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Mn.draggable=!0),En("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(Va||Ua))o();else{if(gr.eventCanceled)return void this._onDrop();Xa(l,"mouseup",a._disableDelayedDrag),Xa(l,"touchend",a._disableDelayedDrag),Xa(l,"touchcancel",a._disableDelayedDrag),Xa(l,"mousemove",a._delayedDragTouchMoveHandler),Xa(l,"touchmove",a._delayedDragTouchMoveHandler),r.supportPointer&&Xa(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(o,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Mn&&wr(Mn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ja(e,"mouseup",this._disableDelayedDrag),Ja(e,"touchend",this._disableDelayedDrag),Ja(e,"touchcancel",this._disableDelayedDrag),Ja(e,"mousemove",this._delayedDragTouchMoveHandler),Ja(e,"touchmove",this._delayedDragTouchMoveHandler),Ja(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Xa(document,"pointermove",this._onTouchMove):Xa(document,t?"touchmove":"mousemove",this._onTouchMove):(Xa(Mn,"dragend",this),Xa(Dn,"dragstart",this._onDragStart));try{document.selection?Sr((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(er=!1,Dn&&Mn){En("dragStarted",this,{evt:t}),this.nativeDraggable&&Xa(document,"dragover",yr);var i=this.options;!e&&nn(Mn,i.dragClass,!1),nn(Mn,i.ghostClass,!0),gr.active=this,e&&this._appendGhost(),An({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Un){this._lastX=Un.clientX,this._lastY=Un.clientY,_r();for(var e=document.elementFromPoint(Un.clientX,Un.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Un.clientX,Un.clientY))!==t;)t=e;if(Mn.parentNode[xn]._isOutsideThisEl(e),t)do{if(t[xn]&&t[xn]._onDragOver({clientX:Un.clientX,clientY:Un.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=t.parentNode);mr()}},_onTouchMove:function(e){if(Gn){var t=this.options,i=t.fallbackTolerance,o=t.fallbackOffset,a=e.touches?e.touches[0]:e,n=Pn&&ln(Pn,!0),r=Pn&&n&&n.a,l=Pn&&n&&n.d,s=dr&&Qn&&_n(Qn),d=(a.clientX-Gn.clientX+o.x)/(r||1)+(s?s[0]-nr[0]:0)/(r||1),c=(a.clientY-Gn.clientY+o.y)/(l||1)+(s?s[1]-nr[1]:0)/(l||1);if(!gr.active&&!er){if(i&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(Pn){n?(n.e+=d-(Vn||0),n.f+=c-(Wn||0)):n={a:1,b:0,c:0,d:1,e:d,f:c};var u="matrix(".concat(n.a,",").concat(n.b,",").concat(n.c,",").concat(n.d,",").concat(n.e,",").concat(n.f,")");rn(Pn,"webkitTransform",u),rn(Pn,"mozTransform",u),rn(Pn,"msTransform",u),rn(Pn,"transform",u),Vn=d,Wn=c,Un=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Pn){var e=this.options.fallbackOnBody?document.body:Dn,t=cn(Mn,!0,dr,!0,e),i=this.options;if(dr){for(Qn=e;"static"===rn(Qn,"position")&&"none"===rn(Qn,"transform")&&Qn!==document;)Qn=Qn.parentNode;Qn!==document.body&&Qn!==document.documentElement?(Qn===document&&(Qn=dn()),t.top+=Qn.scrollTop,t.left+=Qn.scrollLeft):Qn=dn(),nr=_n(Qn)}nn(Pn=Mn.cloneNode(!0),i.ghostClass,!1),nn(Pn,i.fallbackClass,!0),nn(Pn,i.dragClass,!0),rn(Pn,"transition",""),rn(Pn,"transform",""),rn(Pn,"box-sizing","border-box"),rn(Pn,"margin",0),rn(Pn,"top",t.top),rn(Pn,"left",t.left),rn(Pn,"width",t.width),rn(Pn,"height",t.height),rn(Pn,"opacity","0.8"),rn(Pn,"position",dr?"absolute":"fixed"),rn(Pn,"zIndex","100000"),rn(Pn,"pointerEvents","none"),gr.ghost=Pn,e.appendChild(Pn),rn(Pn,"transform-origin",Zn/parseInt(Pn.style.width)*100+"% "+Kn/parseInt(Pn.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,o=e.dataTransfer,a=i.options;En("dragStart",this,{evt:e}),gr.eventCanceled?this._onDrop():(En("setupClone",this),gr.eventCanceled||((Nn=bn(Mn)).removeAttribute("id"),Nn.draggable=!1,Nn.style["will-change"]="",this._hideClone(),nn(Nn,this.options.chosenClass,!1),gr.clone=Nn),i.cloneId=Sr((function(){En("clone",i),gr.eventCanceled||(i.options.removeCloneOnHide||Dn.insertBefore(Nn,Mn),i._hideClone(),An({sortable:i,name:"clone"}))})),!t&&nn(Mn,a.dragClass,!0),t?(tr=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Ja(document,"mouseup",i._onDrop),Ja(document,"touchend",i._onDrop),Ja(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",a.setData&&a.setData.call(i,o,Mn)),Xa(document,"drop",i),rn(Mn,"transform","translateZ(0)")),er=!0,i._dragStartId=Sr(i._dragStarted.bind(i,t,e)),Xa(document,"selectstart",i),Yn=!0,Za&&rn(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,o,a,n=this.el,r=e.target,l=this.options,s=l.group,d=gr.active,c=Rn===s,u=l.sort,p=Fn||d,h=this,v=!1;if(!rr){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=tn(r,l.draggable,n,!0),M("dragOver"),gr.eventCanceled)return v;if(Mn.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||h._ignoreWhileAnimating===r)return P(!1);if(tr=!1,d&&!l.disabled&&(c?u||(o=zn!==Dn):Fn===this||(this.lastPutMode=Rn.checkPull(this,d,Mn,e))&&s.checkPut(this,d,Mn,e))){if(a="vertical"===this._getDirection(e,r),t=cn(Mn),M("dragOverValid"),gr.eventCanceled)return v;if(o)return zn=Dn,z(),this._hideClone(),M("revert"),gr.eventCanceled||(Tn?Dn.insertBefore(Mn,Tn):Dn.appendChild(Mn)),P(!0);var _=hn(n,l.draggable);if(!_||function(e,t,i){var o=cn(hn(i.el,i.options.draggable)),a=wn(i.el,i.options,Pn);return t?e.clientX>a.right+10||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>a.bottom+10||e.clientX>o.right&&e.clientY>o.top}(e,a,this)&&!_.animated){if(_===Mn)return P(!1);if(_&&n===e.target&&(r=_),r&&(i=cn(r)),!1!==br(Dn,n,Mn,t,r,i,e,!!r))return z(),_&&_.nextSibling?n.insertBefore(Mn,_.nextSibling):n.appendChild(Mn),zn=n,D(),P(!0)}else if(_&&function(e,t,i){var o=cn(pn(i.el,0,i.options,!0)),a=wn(i.el,i.options,Pn);return t?e.clientX<a.left-10||e.clientY<o.top&&e.clientX<o.right:e.clientY<a.top-10||e.clientY<o.bottom&&e.clientX<o.left}(e,a,this)){var m=pn(n,0,l,!0);if(m===Mn)return P(!1);if(i=cn(r=m),!1!==br(Dn,n,Mn,t,r,i,e,!1))return z(),n.insertBefore(Mn,m),zn=n,D(),P(!0)}else if(r.parentNode===n){i=cn(r);var f,y,g,b=Mn.parentNode!==n,w=!function(e,t,i){var o=i?e.left:e.top,a=i?e.right:e.bottom,n=i?e.width:e.height,r=i?t.left:t.top,l=i?t.right:t.bottom,s=i?t.width:t.height;return o===r||a===l||o+n/2===r+s/2}(Mn.animated&&Mn.toRect||t,r.animated&&r.toRect||i,a),x=a?"top":"left",k=un(r,"top","top")||un(Mn,"top","top"),S=k?k.scrollTop:void 0;if(qn!==r&&(y=i[x],or=!1,ar=!w&&l.invertSwap||b),f=function(e,t,i,o,a,n,r,l){var s=o?e.clientY:e.clientX,d=o?i.height:i.width,c=o?i.top:i.left,u=o?i.bottom:i.right,p=!1;if(!r)if(l&&Jn<d*a){if(!or&&(1===Xn?s>c+d*n/2:s<u-d*n/2)&&(or=!0),or)p=!0;else if(1===Xn?s<c+Jn:s>u-Jn)return-Xn}else if(s>c+d*(1-a)/2&&s<u-d*(1-a)/2)return function(e){return vn(Mn)<vn(e)?1:-1}(t);return(p=p||r)&&(s<c+d*n/2||s>u-d*n/2)?s>c+d/2?1:-1:0}(e,r,i,a,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,ar,qn===r),0!==f){var $=vn(Mn);do{$-=f,g=zn.children[$]}while(g&&("none"===rn(g,"display")||g===Pn))}if(0===f||g===r)return P(!1);qn=r,Xn=f;var C=r.nextElementSibling,E=!1,A=br(Dn,n,Mn,t,r,i,e,E=1===f);if(!1!==A)return 1!==A&&-1!==A||(E=1===A),rr=!0,setTimeout(xr,30),z(),E&&!C?n.appendChild(Mn):r.parentNode.insertBefore(Mn,E?C:r),k&&gn(k,0,S-k.scrollTop),zn=Mn.parentNode,void 0===y||ar||(Jn=Math.abs(y-cn(r)[x])),D(),P(!0)}if(n.contains(Mn))return P(!1)}return!1}function M(l,s){En(l,h,La({evt:e,isOwner:c,axis:a?"vertical":"horizontal",revert:o,dragRect:t,targetRect:i,canSort:u,fromSortable:p,target:r,completed:P,onMove:function(i,o){return br(Dn,n,Mn,t,i,cn(i),e,o)},changed:D},s))}function z(){M("dragOverAnimationCapture"),h.captureAnimationState(),h!==p&&p.captureAnimationState()}function P(t){return M("dragOverCompleted",{insertion:t}),t&&(c?d._hideClone():d._showClone(h),h!==p&&(nn(Mn,Fn?Fn.options.ghostClass:d.options.ghostClass,!1),nn(Mn,l.ghostClass,!0)),Fn!==h&&h!==gr.active?Fn=h:h===gr.active&&Fn&&(Fn=null),p===h&&(h._ignoreWhileAnimating=r),h.animateAll((function(){M("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(r===Mn&&!Mn.animated||r===n&&!r.animated)&&(qn=null),l.dragoverBubble||e.rootEl||r===document||(Mn.parentNode[xn]._isOutsideThisEl(e.target),!t&&fr(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function D(){In=vn(Mn),Hn=vn(Mn,l.draggable),An({sortable:h,name:"change",toEl:n,newIndex:In,newDraggableIndex:Hn,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ja(document,"mousemove",this._onTouchMove),Ja(document,"touchmove",this._onTouchMove),Ja(document,"pointermove",this._onTouchMove),Ja(document,"dragover",fr),Ja(document,"mousemove",fr),Ja(document,"touchmove",fr)},_offUpEvents:function(){var e=this.el.ownerDocument;Ja(e,"mouseup",this._onDrop),Ja(e,"touchend",this._onDrop),Ja(e,"pointerup",this._onDrop),Ja(e,"touchcancel",this._onDrop),Ja(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;In=vn(Mn),Hn=vn(Mn,i.draggable),En("drop",this,{evt:e}),zn=Mn&&Mn.parentNode,In=vn(Mn),Hn=vn(Mn,i.draggable),gr.eventCanceled||(er=!1,ar=!1,or=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),$r(this.cloneId),$r(this._dragStartId),this.nativeDraggable&&(Ja(document,"drop",this),Ja(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Za&&rn(document.body,"user-select",""),rn(Mn,"transform",""),e&&(Yn&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),Pn&&Pn.parentNode&&Pn.parentNode.removeChild(Pn),(Dn===zn||Fn&&"clone"!==Fn.lastPutMode)&&Nn&&Nn.parentNode&&Nn.parentNode.removeChild(Nn),Mn&&(this.nativeDraggable&&Ja(Mn,"dragend",this),wr(Mn),Mn.style["will-change"]="",Yn&&!er&&nn(Mn,Fn?Fn.options.ghostClass:this.options.ghostClass,!1),nn(Mn,this.options.chosenClass,!1),An({sortable:this,name:"unchoose",toEl:zn,newIndex:null,newDraggableIndex:null,originalEvent:e}),Dn!==zn?(In>=0&&(An({rootEl:zn,name:"add",toEl:zn,fromEl:Dn,originalEvent:e}),An({sortable:this,name:"remove",toEl:zn,originalEvent:e}),An({rootEl:zn,name:"sort",toEl:zn,fromEl:Dn,originalEvent:e}),An({sortable:this,name:"sort",toEl:zn,originalEvent:e})),Fn&&Fn.save()):In!==Bn&&In>=0&&(An({sortable:this,name:"update",toEl:zn,originalEvent:e}),An({sortable:this,name:"sort",toEl:zn,originalEvent:e})),gr.active&&(null!=In&&-1!==In||(In=Bn,Hn=Ln),An({sortable:this,name:"end",toEl:zn,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){En("nulling",this),Dn=Mn=zn=Pn=Tn=Nn=On=jn=Gn=Un=Yn=In=Hn=Bn=Ln=qn=Xn=Fn=Rn=gr.dragged=gr.ghost=gr.clone=gr.active=null,lr.forEach((function(e){e.checked=!0})),lr.length=Vn=Wn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Mn&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,o=0,a=i.length,n=this.options;o<a;o++)tn(e=i[o],n.draggable,this.el,!1)&&t.push(e.getAttribute(n.dataIdAttr)||kr(e));return t},sort:function(e,t){var i={},o=this.el;this.toArray().forEach((function(e,t){var a=o.children[t];tn(a,this.options.draggable,o,!1)&&(i[e]=a)}),this),t&&this.captureAnimationState(),e.forEach((function(e){i[e]&&(o.removeChild(i[e]),o.appendChild(i[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return tn(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var o=$n.modifyOption(this,e,t);i[e]=void 0!==o?o:t,"group"===e&&vr(i)},destroy:function(){En("destroy",this);var e=this.el;e[xn]=null,Ja(e,"mousedown",this._onTapStart),Ja(e,"touchstart",this._onTapStart),Ja(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ja(e,"dragover",this),Ja(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),ir.splice(ir.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!jn){if(En("hideClone",this),gr.eventCanceled)return;rn(Nn,"display","none"),this.options.removeCloneOnHide&&Nn.parentNode&&Nn.parentNode.removeChild(Nn),jn=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(jn){if(En("showClone",this),gr.eventCanceled)return;Mn.parentNode!=Dn||this.options.group.revertClone?Tn?Dn.insertBefore(Nn,Tn):Dn.appendChild(Nn):Dn.insertBefore(Nn,Mn),this.options.group.revertClone&&this.animate(Mn,Nn),rn(Nn,"display",""),jn=!1}}else this._hideClone()}},sr&&Xa(document,"touchmove",(function(e){(gr.active||er)&&e.cancelable&&e.preventDefault()})),gr.utils={on:Xa,off:Ja,css:rn,find:sn,is:function(e,t){return!!tn(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},throttle:yn,closest:tn,toggleClass:nn,clone:bn,index:vn,nextTick:Sr,cancelNextTick:$r,detectDirection:hr,getChild:pn},gr.get=function(e){return e[xn]},gr.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(gr.utils=La(La({},gr.utils),e.utils)),$n.mount(e)}))},gr.create=function(e,t){return new gr(e,t)},gr.version="1.15.2";var Cr,Er,Ar,Mr,zr,Pr,Dr=[],Tr=!1;function Or(){Dr.forEach((function(e){clearInterval(e.pid)})),Dr=[]}function Nr(){clearInterval(Pr)}var jr=yn((function(e,t,i,o){if(t.scroll){var a,n=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,d=dn(),c=!1;Er!==i&&(Er=i,Or(),Cr=t.scroll,a=t.scrollFn,!0===Cr&&(Cr=mn(i,!0)));var u=0,p=Cr;do{var h=p,v=cn(h),_=v.top,m=v.bottom,f=v.left,y=v.right,g=v.width,b=v.height,w=void 0,x=void 0,k=h.scrollWidth,S=h.scrollHeight,$=rn(h),C=h.scrollLeft,E=h.scrollTop;h===d?(w=g<k&&("auto"===$.overflowX||"scroll"===$.overflowX||"visible"===$.overflowX),x=b<S&&("auto"===$.overflowY||"scroll"===$.overflowY||"visible"===$.overflowY)):(w=g<k&&("auto"===$.overflowX||"scroll"===$.overflowX),x=b<S&&("auto"===$.overflowY||"scroll"===$.overflowY));var A=w&&(Math.abs(y-n)<=l&&C+g<k)-(Math.abs(f-n)<=l&&!!C),M=x&&(Math.abs(m-r)<=l&&E+b<S)-(Math.abs(_-r)<=l&&!!E);if(!Dr[u])for(var z=0;z<=u;z++)Dr[z]||(Dr[z]={});Dr[u].vx==A&&Dr[u].vy==M&&Dr[u].el===h||(Dr[u].el=h,Dr[u].vx=A,Dr[u].vy=M,clearInterval(Dr[u].pid),0==A&&0==M||(c=!0,Dr[u].pid=setInterval(function(){o&&0===this.layer&&gr.active._onTouchMove(zr);var t=Dr[this.layer].vy?Dr[this.layer].vy*s:0,i=Dr[this.layer].vx?Dr[this.layer].vx*s:0;"function"==typeof a&&"continue"!==a.call(gr.dragged.parentNode[xn],i,t,e,zr,Dr[this.layer].el)||gn(Dr[this.layer].el,i,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&p!==d&&(p=mn(p,!1)));Tr=c}}),30),Br=function(e){var t=e.originalEvent,i=e.putSortable,o=e.dragEl,a=e.activeSortable,n=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=i||a;r();var d=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(d.clientX,d.clientY);l(),s&&!s.el.contains(c)&&(n("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function Ir(){}function Lr(){}Ir.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=pn(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:Br},Fa(Ir,{pluginName:"revertOnSpill"}),Lr.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Br},Fa(Lr,{pluginName:"removeOnSpill"});var Hr=[Lr,Ir];gr.mount(Hr,new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Xa(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Xa(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Xa(document,"touchmove",this._handleFallbackAutoScroll):Xa(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Ja(document,"dragover",this._handleAutoScroll):(Ja(document,"pointermove",this._handleFallbackAutoScroll),Ja(document,"touchmove",this._handleFallbackAutoScroll),Ja(document,"mousemove",this._handleFallbackAutoScroll)),Nr(),Or(),clearTimeout(on),on=void 0},nulling:function(){zr=Er=Cr=Tr=Pr=Ar=Mr=null,Dr.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,n=document.elementFromPoint(o,a);if(zr=e,t||this.options.forceAutoScrollFallback||Va||Ua||Za){jr(e,this.options,n,t);var r=mn(n,!0);!Tr||Pr&&o===Ar&&a===Mr||(Pr&&Nr(),Pr=setInterval((function(){var n=mn(document.elementFromPoint(o,a),!0);n!==r&&(r=n,Or()),jr(e,i.options,n,t)}),10),Ar=o,Mr=a)}else{if(!this.options.bubbleScroll||mn(n,!0)===dn())return void Or();jr(e,this.options,mn(n,!1),!1)}}},Fa(e,{pluginName:"scroll",initializeByDefault:!0})});var Rr=Object.freeze({__proto__:null,default:gr});export{Dt as PowerFlowCardPlus};
