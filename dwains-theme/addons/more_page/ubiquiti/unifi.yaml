---
#
# Unifi more_page.
# Made by Ruben Dijk.

# Donw/upload speed
- type: custom:dwains-flexbox-card
  items_classes: 'col-xs-12 col-sm-4 col-sm-3 col-xl-3'
  cards:
    - type: markdown
      content: >
        **UniFi USG**<br>
        Uptime: {{ states.sensor.usg_uptime.state }}<br>
        WAN Uptime: {{ states.sensor.unifi_gateway_www_uptime.state }}
    - type: markdown
      content: >
        **UniFi WiFi AP-AC-Lite (UFO)**<br>
        Uptime: {{ states.sensor.ufo_uptime.state }}
    - type: markdown
      content: >
        **UniFi Switch 8 Port 60W**<br>
        Uptime: {{ states.sensor.hateful8_uptime.state }}

- type: custom:dwains-flexbox-card
  items_classes: 'col-xs-12 col-sm-6 col-md-4 col-lg-4'
  cards:

  # unifi gateway alerts
    - type: custom:button-card
      entity: sensor.unifi_gateway_alerts
      show_state: true
      styles:
        grid:
          - grid-template-areas: '"i n" "i s" "i l"'
          - grid-template-columns: 25% 75%
          - grid-template-rows: min-content min-content
        card:
          - background-color: var(--dwains-theme-primary)
          - border-radius: 10px;
          - box-shadow: 10px;
        name:
          - font-size: 15px
          - font-weight: bold
          - color: var(--dwains-theme-names)
          - justify-self: start
        state:
          - justify-self: start
          - font-size: 13px
          - color: var(--dwains-theme-names)
        label:
          - padding-top: 0px
          - padding-bottom: 0px
          - font-size: 12px
          - color: var(--dwains-theme-grey)
          - justify-self: start
        icon:
          - color: var(--dwains-theme-accent)
      state:
        - value: "0"
          color: var(--dwains-theme-accent)
          icon: mdi:shield-alert-outline
        - value: "1"
          operator: '>='
          color: red
          icon: mdi:alert
          styles:
            card:
              - animation: blink 2s ease infinite

  # Go to your unifi controller webpage
    - type: custom:button-card
      show_state: false
      styles:
        grid:
          - grid-template-areas: '"i n" "i n" "i n"'
          - grid-template-columns: 25% 75%
          - grid-template-rows: min-content min-content
        card:
          - background-color: var(--dwains-theme-primary)
          - border-radius: 10px;
          - box-shadow: 10px;
        name:
          - font-size: 15px
          - font-weight: bold
          - color: var(--dwains-theme-names)
          - justify-self: start
        state:
          - justify-self: start
          - font-size: 13px
          - color: var(--dwains-theme-names)
        label:
          - padding-top: 0px
          - padding-bottom: 0px
          - font-size: 12px
          - color: var(--dwains-theme-grey)
          - justify-self: start
        icon:
          - color: var(--dwains-theme-accent)
      name: Unifi Controller
      icon: mdi:web
      color: var(--dwains-theme-accent)
      tap_action:
        action: url
        url_path: 'https://unifi.tbsmartho.me/manage/site/default/dashboard'

  # Firmware update
    - type: custom:button-card
      entity: sensor.unifi_gateway_firmware_upgradable
      show_state: true
      styles:
        grid:
          - grid-template-areas: '"i n" "i s" "i l"'
          - grid-template-columns: 25% 75%
          - grid-template-rows: min-content min-content
        card:
          - background-color: var(--dwains-theme-primary)
          - border-radius: 10px;
          - box-shadow: 10px;
        name:
          - font-size: 15px
          - font-weight: bold
          - color: var(--dwains-theme-names)
          - justify-self: start
        state:
          - justify-self: start
          - font-size: 13px
          - color: var(--dwains-theme-names)
        label:
          - padding-top: 0px
          - padding-bottom: 0px
          - font-size: 12px
          - color: var(--dwains-theme-grey)
          - justify-self: start
        icon:
          - color: var(--dwains-theme-accent)
      state:
        - value: "0"
          color: var(--dwains-theme-accent)
        - value: "1"
          operator: '>='
          color: orange
          icon: mdi:database-refresh

- type: custom:dwains-flexbox-card
  items_classes: 'col-xs-12 col-sm-6 col-sm-6 col-xl-6'
  cards:
    - type: custom:mini-graph-card
      style: |
        ha-card {
          background-color: var(--dwains-theme-primary);
          border-radius: 10px;
          box-shadow: 10px;
          font-weight: bold;
          opacity: 0.8;
        }
      entities:
        - sensor.unifi_gateway_www_xput_up
      name: Upload Speed
      line_color: 'var(--dwains-theme-accent)'
      hours_to_show: 24
      hour24: true
      points_per_hour: 1
      smoothing: false
      show:
        points: false
        graph: line
        extrema: true

    - type: custom:mini-graph-card
      style: |
        ha-card {
          background-color: var(--dwains-theme-primary);
          border-radius: 10px;
          box-shadow: 10px;
          font-weight: bold;
          opacity: 0.8;
        }
      entities:
        - sensor.unifi_gateway_www_xput_down
      name: Download Speed
      line_color: 'var(--dwains-theme-accent)'
      hours_to_show: 24
      hour24: true
      points_per_hour: 1
      smoothing: false
      show:
        points: false
        graph: line
        extrema: true

# device status first 2 cards
- type: vertical-stack
  cards:
    - type: custom:dwains-flexbox-card
      padding: true
      items_classes: 'col-lg-6 col-md-6 col-sm-12 col-xs-12'
      cards:
        - type: horizontal-stack
          cards:
        # card 1 WWW
            - type: custom:button-card
              style: |
                ha-card {
                  background-color: var(--dwains-theme-primary);
                  border-radius: 10px;
                  box-shadow: 10px;
                  font-weight: bold;
                  opacity: 0.8;
                }
              aspect_ratio: 1/1.4
              custom_fields:
                graph:
                  card:
                    type: sensor
                    entity: sensor.unifi_gateway_www_speedtest_ping
                    name: Ping
                    graph: line
                    style: |
                      ha-card {
                        background-color: var(--dwains-theme-primary);
                      }
              styles:
                custom_fields:
                  graph:
                    - overflow: unset
                card:

                grid:
                  - grid-template-areas: '"i" "n" "graph"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content

              entity: sensor.unifi_gateway_www
              name: Internet
              state:
                - value: 'OK'
                  color: var(--dwains-theme-accent)
                - value: 'ERROR'
                  color: grey
              hold_action:
                action: more-info
          # Card 2 LAN
            - type: custom:button-card
              style: |
                ha-card {
                  background-color: var(--dwains-theme-primary);
                  border-radius: 10px;
                  box-shadow: 10px;
                  font-weight: bold;
                  opacity: 0.8;
                }
              aspect_ratio: 1/1.4
              custom_fields:
                graph:
                  card:
                    type: sensor
                    entity: sensor.unifi_gateway_lan_num_user
                    name: Users
                    graph: line
                    style: |
                      ha-card {
                        background-color: var(--dwains-theme-primary);
                      }
              styles:
                custom_fields:
                  graph:
                    - overflow: unset
                card:

                grid:
                  - grid-template-areas: '"i" "n" "graph"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content

              entity: sensor.unifi_gateway_lan
              name: Ethernet
              state:
                - value: 'OK'
                  color: var(--dwains-theme-accent)
                - value: 'ERROR'
                  color: grey
              hold_action:
                action: more-info
# device status second 2 cards
        - type: horizontal-stack
          cards: 
        # Card 3 WLAN
            - type: custom:button-card
              style: |
                ha-card {
                  background-color: var(--dwains-theme-primary);
                  border-radius: 10px;
                  box-shadow: 10px;
                  font-weight: bold;
                  opacity: 0.8;
                }
              aspect_ratio: 1/1.4
              custom_fields:
                graph:
                  card:
                    type: sensor
                    entity: sensor.unifi_gateway_wlan_num_user
                    name: Users
                    graph: line
                    style: |
                      ha-card {
                        background-color: var(--dwains-theme-primary);
                      }
              styles:
                custom_fields:
                  graph:
                    - overflow: unset
                card:

                grid:
                  - grid-template-areas: '"i" "n" "graph"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content

              entity: sensor.unifi_gateway_wlan
              name: Wireless
              state:
                - value: 'OK'
                  color: var(--dwains-theme-accent)
                - value: 'ERROR'
                  color: grey
              hold_action:
                action: more-info

        # Card 4 WAN
            - type: custom:button-card
              style: |
                ha-card {
                  background-color: var(--dwains-theme-primary);
                  border-radius: 10px;
                  box-shadow: 10px;
                  font-weight: bold;
                  opacity: 0.8;
                }
              aspect_ratio: 1/1.4
              custom_fields:
                graph:
                  card:
                    type: sensor
                    entity: sensor.unifi_gateway_wan_download
                    name: Download
                    graph: line
                    style: |
                      ha-card {
                        background-color: var(--dwains-theme-primary);
                      }
              styles:
                custom_fields:
                  graph:
                    - overflow: unset
                card:

                grid:
                  - grid-template-areas: '"i" "n" "graph"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content

              entity: sensor.unifi_gateway_wan
              name: WAN
              state:
                - value: 'OK'
                  color: var(--dwains-theme-accent)
                - value: 'ERROR'
                  color: grey
              hold_action:
                action: more-info
