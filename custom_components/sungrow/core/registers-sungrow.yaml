# Based on:
# * https://github.com/mkaiser/Sungrow-SHx-Inverter-Modbus-Home-Assistant/blob/main/modbus_sungrow.yaml
# * https://github.com/bohdan-s/SunGather/blob/main/SunGather/registers-sungrow.yaml
# * TI_20231019_Communication.Protocol.of.Residential.Hybrid.Inverter_V1.1.2_EN.pdf
# * Communication Protocol of PV Grid-Connected String Inverters_V1.1.37_EN.pdf

# Levels:
# 0: builtin energy dashboard
# 1: custom advanced dashboards
# 2: more data, probably not so interesting
# 3: include data no sane person would ever want ;-)
# Note: distinction between 2 and 3 is not always clear.
# Note: At startup everything is queried regardless of level, so this is really just the level for the UI.

# Groups:
# Most detection works via "signal supported" and "signal not supported".
# However e.g. battery may be supported, and yet none is connected.
# So we need to be able to distinguish between "supported" and "connected".
# This is done via groups.
# Signals which should be hidden and signals which are indicators for "not connected" are grouped.
# Usually "total" signals are indicators, while e.g. "daily" signals are to be hidden.
# has_battery: only include if battery is present (e.g. battery_capacity is not 0)
# is_master: only include if inverter is master/standalone (e.g. total_imported_energy is not 0)

read:
  - name: "protocol_number"
    level: 2
    address: 4950
    data_type: U32

  - name: "protocol_version"
    level: 2
    address: 4952
    data_type: U32

  - name: "arm_software_version"
    level: 2
    address: 4954
    data_type: U16

  - name: "dsp_software_version"
    level: 2
    address: 4969
    data_type: U16

  - name: "serial_number"
    level: 2
    address: 4990
    data_type: "UTF-8[10]"

  - name: "device_type_code"
    level: 2
    address: 5000
    data_type: U16
    decoded:
      # PV Grid-Connected String Inverters
      0x27: "SG30KTL"
      0x26: "SG10KTL"
      0x29: "SG12KTL"
      0x28: "SG15KTL"
      0x2A: "SG20KTL"
      0x2C: "SG30KU"
      0x2D: "SG36KTL"
      0x2E: "SG36KU"
      0x2F: "SG40KTL"
      0x0135: "SG40KTL-M"
      0x011B: "SG50KTL-M"
      0x0131: "SG60KTL-M"
      0x0136: "SG60KU"
      0x0141: "SG30KTL-M"
      0x70: "SG30KTL-M-V31"
      0x0134: "SG33KTL-M"
      0x74: "SG36KTL-M"
      0x013D: "SG33K3J"
      0x0137: "SG49K5J"
      0x72: "SG34KJ"
      0x73: "LP_P34KSG"
      # 0x011B: "SG50KTL-M-20"
      0x010F: "SG60KTL"
      0x0138: "SG80KTL"
      # 0x0138: "SG80KTL-20"
      0x0132: "SG60KU-M"
      0x0147: "SG5KTL-MT"
      0x0148: "SG6KTL-MT"
      0x013F: "SG8KTL-M"
      0x013E: "SG10KTL-M"
      0x2C0F: "SG10KTL-MT"
      0x013C: "SG12KTL-M"
      0x0142: "SG15KTL-M"
      0x0149: "SG17KTL-M"
      0x0143: "SG20KTL-M"
      0x0139: "SG80KTL-M"
      0x014C: "SG111HV"
      0x013B: "SG125HV"
      0x2C03: "SG125HV-20"
      0x2C10: "SG30CX"
      0x2C00: "SG33CX"
      0x2C0A: "SG36CX-US"
      0x2C01: "SG40CX"
      0x2C02: "SG50CX"
      0x2C0B: "SG60CX-US"
      0x2C06: "SG110CX"
      0x2C0C: "SG250HX"
      0x2C11: "SG250HX-US"
      0x2C12: "SG100CX"
      # 0x2C12: "SG100CX-JP"
      0x2C13: "SG250HX-IN"
      0x2C15: "SG25CX-SA"
      0x2C22: "SG75CX"
      0x243D: "SG3.0RT"
      0x243E: "SG4.0RT"
      0x2430: "SG5.0RT"
      0x2431: "SG6.0RT"
      0x243C: "SG7.0RT"
      0x2432: "SG8.0RT"
      0x2433: "SG10RT"
      0x2434: "SG12RT"
      0x2435: "SG15RT"
      0x2436: "SG17RT"
      0x2437: "SG20RT"
      # Residential Hybrid Inverters
      0xD09: "SH5K-20"
      0xD06: "SH3K6"
      0xD07: "SH4K6"
      0xD03: "SH5K-V13"
      0xD0C: "SH5K-30"
      0xD0A: "SH3K6-30"
      0xD0B: "SH4K6-30"
      0xD0F: "SH5.0RS"
      0xD0D: "SH3.6RS"
      0xD0E: "SH4.6RS"
      0xD10: "SH6.0RS"
      0xE12: "SH8.0RT-20"
      0xE03: "SH10RT"
      0xE02: "SH8.0RT"
      0xE01: "SH6.0RT"
      0xE00: "SH5.0RT"
      # G2 Inverters
      0x0126: "SG5K-D"
      0x2403: "SG8K-D"
      # RS Series
      0x2606: "SG5.0RS"

  - name: "nominal_output_power"
    level: 2
    address: 5001
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kW"

  - name: "output_type"
    level: 2
    address: 5002
    data_type: U16
    decoded:
      0: "2P"
      1: "3P4L"
      2: "3PSL"

  - name: "daily_output_energy_pv_and_battery"
    level: 1
    address: 5003
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "total_output_energy_pv_and_battery"
    level: 2
    address: 5004
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "total_running_time"
    group: is_master
    level: 2
    address: 5006
    data_type: U32
    unit_of_measurement: "h"

  - name: "internal_temperature"
    level: 2
    address: 5008
    data_type: S16
    accuracy: 0.1
    unit_of_measurement: "°C"

  - name: "total_apparent_power"
    level: 2
    address: 5009
    data_type: U32
    unit_of_measurement: "VA"

  - name: "mppt_1_voltage"
    level: 1
    address: 5011
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "mppt_1_current"
    level: 1
    address: 5012
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "mppt_2_voltage"
    level: 1
    address: 5013
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "mppt_2_current"
    level: 1
    address: 5014
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "mppt_3_voltage"
    level: 1
    address: 5015
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "mppt_3_current"
    level: 1
    address: 5016
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "total_dc_power" # pv power
    level: 1
    address: 5017
    data_type: U32
    unit_of_measurement: "W"
    # Note: this is per inverter. To get total PV power, sum all inverters.

  - name: "phase_a_voltage"
    level: 2
    address: 5019
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "phase_b_voltage"
    level: 2
    address: 5020
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "phase_c_voltage"
    level: 2
    address: 5021
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "phase_a_current"
    level: 2
    address: 5022
    data_type: S16 # Documentation says Unsigned, but seems to be returning Signed 16bit
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "phase_b_current"
    level: 2
    address: 5023
    data_type: S16 # Documentation says Unsigned, but seems to be returning Signed 16bit
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "phase_c_current"
    level: 2
    address: 5024
    data_type: S16 # Documentation says Unsigned, but seems to be returning Signed 16bit
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "total_active_power"
    level: 1
    address: 5031
    data_type: S32
    unit_of_measurement: "W"

  - name: "total_reactive_power"
    level: 2
    address: 5033
    data_type: S32
    unit_of_measurement: "var"

  - name: "power_factor" # >0 means leading, <0 means lagging
    level: 2
    address: 5035
    data_type: S16
    accuracy: 0.001
    unit_of_measurement: "%" # Note: documentation says "None", but it is a percentage

  - name: "grid_frequency"
    level: 2
    address: 5036
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "Hz"

  - name: "work_state_1" # See Appendix 1
    level: 1
    address: 5038
    data_type: U16
    decoded:
      # todo: where currently group is determined, the raw value is no longer available.
      # So we need to keep this 0 for now!
      # 0x0: "Run"
      0x8000: "Stop"
      0x1300: "Key Stop"
      0x1500: "Emergency Stop"
      0x1400: "Standby"
      0x1200: "Initial Standby"
      0x1600: "Starting"
      0x9100: "Alarm Run"
      0x8100: "Derating Run"
      0x8200: "Dispatch Run"
      0x5500: "Fault"
      0x2500: "Communication Fault"

  - name: "alarm_time_year"
    level: 3
    address: 5039
    data_type: U16

  - name: "alarm_time_month"
    level: 3
    address: 5040
    data_type: U16

  - name: "alarm_time_day"
    level: 3
    address: 5041
    data_type: U16

  - name: "alarm_time_hour"
    level: 3
    address: 5042
    data_type: U16

  - name: "alarm_time_minute"
    level: 3
    address: 5043
    data_type: U16

  - name: "alarm_time_second"
    level: 3
    address: 5045
    data_type: U16

  - name: "alarm_code_1" # See Appendix 3
    level: 3
    address: 5045
    data_type: U16

  - name: "nominal_reactive_power"
    level: 2
    address: 5049
    data_type: U16
    accuracy: 100
    unit_of_measurement: "var"

  - name: "array_insulation_resistance"
    level: 2
    address: 5071
    data_type: U16
    unit_of_measurement: "k-ohm"

  - name: "active_power_regulation_setpoint"
    level: 3
    address: 5077
    data_type: U32
    unit_of_measurement: "W"

  - name: "reactive_power_regulation_setpoint"
    level: 2
    address: 5079
    data_type: S32
    unit_of_measurement: "var"

  - name: "work_state_2" # See Appendix 2
    level: 2
    address: 5081
    data_type: U32
    decoded:
      0: "Run"
      1: "Stop"
      3: "Key Stop"
      5: "Emergency Stop"
      4: "Standby"
      2: "Initial Standby"
      6: "Starting"
      10: "Alarm Run"
      11: "Derating Run"
      12: "Dispatch Run"
      9: "Fault"
      13: "Communication Fault"
      17: "Total Run Bit"
      18: "Total Fault Bit"

  - name: "meter_power"
    level: 2
    address: 5083
    data_type: S32
    smart_meter: True
    unit_of_measurement: "W"
    models: ["SG[0-9]+KTL-MT?"]

  - name: "meter_a_phase_power"
    level: 2
    address: 5085
    data_type: S32
    unit_of_measurement: "W"
    models: ["SG[0-9]+KTL-MT?"]

  - name: "meter_b_phase_power"
    level: 2
    address: 5087
    data_type: S32
    unit_of_measurement: "W"
    models: ["SG[0-9]+KTL-MT?"]

  - name: "meter_c_phase_power"
    level: 2
    address: 5089
    data_type: S32
    unit_of_measurement: "W"
    models: ["SG[0-9]+KTL-MT?"]

  - name: "meter_load_power"
    level: 2
    address: 5091
    data_type: S32
    smart_meter: True
    unit_of_measurement: "W"
    models: ["SG[0-9]+KTL-MT?"]

  - name: "daily_export_energy"
    level: 1
    address: 5093
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"
    models: ["SG[0-9]+KTL-MT?"]

  - name: "total_export_energy"
    level: 1
    address: 5095
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"
    models: ["SG[0-9]+KTL-MT?"]

  - name: "daily_import_energy"
    level: 1
    address: 5097
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"
    models: ["SG[0-9]+KTL-MT?"]

  - name: "total_import_energy"
    level: 1
    address: 5099
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "daily_direct_energy_consumption"
    level: 1
    address: 5101
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"
    models: ["SG[0-9]+KTL-MT?"]

  - name: "total_direct_energy_consumption"
    level: 1
    address: 5103
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"
    models: ["SG[0-9]+KTL-MT?"]

  - name: "daily_running_time"
    level: 2
    address: 5113
    data_type: U16
    unit_of_measurement: "min"
    # models_exclude: ["SH8.0RT-20"]

  - name: "mppt_4_voltage"
    level: 1
    address: 5115
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "mppt_4_current"
    level: 1
    address: 5116
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "mppt_5_voltage"
    level: 1
    address: 5117
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "mppt_5_current"
    level: 1
    address: 5118
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "mppt_6_voltage"
    level: 2
    address: 5119
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "mppt_6_current"
    level: 2
    address: 5120
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "mppt_7_voltage"
    level: 2
    address: 5121
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "mppt_7_current"
    level: 2
    address: 5122
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "mppt_8_voltage"
    level: 2
    address: 5123
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "mppt_8_current"
    level: 2
    address: 5124
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "monthly_power_yields"
    group: is_master
    level: 1
    address: 5128
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "mppt_9_voltage"
    level: 2
    address: 5130
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"
    models:

  - name: "mppt_9_current"
    level: 2
    address: 5131
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "mppt_10_voltage"
    level: 2
    address: 5132
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "mppt_10_current"
    level: 2
    address: 5133
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "mppt_11_voltage"
    level: 2
    address: 5134
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "mppt_11_current"
    level: 2
    address: 5135
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "mppt_12_voltage"
    level: 2
    address: 5136
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "mppt_12_current"
    level: 2
    address: 5137
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "total_power_yields"
    group: is_master
    level: 1
    address: 5144
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "negative_voltage_to_the_ground"
    level: 3
    address: 5146
    data_type: S16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "bus_voltage"
    level: 2
    address: 5147
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "grid_frequency"
    level: 2
    address: 5148
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "Hz"

  - name: "pid_work_state"
    level: 3
    address: 5150
    data_type: U16
    decoded:
      2: "PID Recover Operation"
      4: "Anti-PID Operation"
      8: "PID Abnormity"

  - name: "pid_alarm_code"
    level: 2
    address: 5151
    data_type: U16
    decoded:
      432: "PID resistance abnormal"
      433: "PID function abnormal"
      434: "PID overvoltage/overcurrent protection"

  - name: "export_power"
    level: 2
    address: 5216
    data_type: S32
    unit_of_measurement: "W"

  - name: "meter_active_power"
    level: 1
    address: 5601
    data_type: S32
    unit_of_measurement: W

  - name: "meter_active_power_phase_a"
    level: 1
    address: 5603
    data_type: S32
    unit_of_measurement: W

  - name: "meter_active_power_phase_b"
    level: 1
    address: 5605
    data_type: S32
    unit_of_measurement: W

  - name: "meter_active_power_phase_c"
    level: 1
    address: 5607
    data_type: S32
    unit_of_measurement: W

  - name: "power_meter"
    level: 2
    address: 5218
    data_type: S32
    unit_of_measurement: "W"

  - name: "export_limit_min"
    level: 2
    address: 5622
    data_type: U16
    accuracy: 10
    unit_of_measurement: "W"
    models:
      [
        "SH5.0RS",
        "SH3.6RS",
        "SH4.6RS",
        "SH6.0RS",
        "SH10RT",
        "SH8.0RT",
        "SH8.0RT-20",
        "SH6.0RT",
        "SH5.0RT",
      ]

  - name: "export_limit_max"
    level: 2
    address: 5623
    data_type: U16
    accuracy: 10
    unit_of_measurement: "W"

  - name: "bdc_rated_power"
    level: 2
    address: 5628
    data_type: U16
    accuracy: 100
    unit_of_measurement: "W"

  - name: "bms_max_charging_current"
    level: 2
    address: 5635
    data_type: U16
    unit_of_measurement: "A"

  - name: "bms_max_discharging_current"
    level: 2
    address: 5636
    data_type: U16
    unit_of_measurement: "A"

  - name: "battery_capacity_high_precision"
    group: has_battery
    level: 1
    address: 5639
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "kWh"

  - name: backup_power_phase_a
    level: 2
    address: 5723
    data_type: S16
    unit_of_measurement: "W"

  - name: backup_power_phase_b
    level: 2
    address: 5724
    data_type: S16
    unit_of_measurement: "W"

  - name: backup_power_phase_c
    level: 2
    address: 5725
    data_type: S16
    unit_of_measurement: "W"

  - name: backup_power_total
    level: 2
    address: 5726
    data_type: S16
    unit_of_measurement: "W"

  - name: "pv_power_of_today"
    level: 3
    address: 6100
    data_type: "U16[96]"
    unit_of_measurement: "W"

  - name: "pv_energy_yields_daily"
    level: 3
    address: 6196
    data_type: "U16[30]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "pv_energy_yields_monthly"
    level: 3
    address: 6227
    data_type: "U16[12]"
    unit_of_measurement: "kWh"
    accuracy: 0.1

  - name: "pv_energy_yields_yearly_starting_2019"
    level: 3
    address: 6250
    data_type: "U32[20]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "direct_power_consumption_from_pv_today"
    level: 3
    address: 6290
    data_type: "U16[96]"
    unit_of_measurement: "W"

  - name: "direct_power_consumption_from_pv_daily"
    level: 3
    address: 6386
    data_type: "U16[31]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "direct_energy_consumption_from_pv_monthly"
    level: 3
    address: 6417
    data_type: "U16[12]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "direct_energy_consumption_from_pv_yearly_starting_2019"
    level: 3
    address: 6429
    data_type: "U32[20]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "export_power_from_pv_today"
    group: is_master
    level: 3
    address: 6469
    data_type: "U16[96]"
    unit_of_measurement: "W"

  - name: "export_energy_from_pv_daily"
    group: is_master
    level: 2
    address: 6565
    data_type: "U16[31]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "export_energy_from_pv_monthly"
    group: is_master
    level: 2
    address: 6596
    data_type: "U16[12]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "export_energy_from_pv_yearly_starting_2019"
    group: is_master
    level: 2
    address: 6608
    data_type: "U32[20]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "battery_charge_energy_from_pv_today"
    group: has_battery
    level: 2
    address: 6648
    data_type: "U16[96]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "battery_charge_energy_from_pv"
    group: has_battery
    level: 2
    address: 6744
    data_type: "U16[31]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "battery_charge_energy_from_pv_monthly"
    group: has_battery
    level: 2
    address: 6775
    data_type: "U16[12]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "battery_charge_energy_from_pv_yearly_starting_2019"
    group: has_battery
    level: 2
    address: 6787
    data_type: "U32[20]"
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "string_1_current"
    level: 2
    address: 7013
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"

  - name: "string_2_current"
    level: 2
    address: 7014
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"

  - name: "string_3_current"
    level: 2
    address: 7015
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG30KTL",
        "SG10KTL",
        "SG12KTL",
        "SG15KTL",
        "SG20KTL",
        "SG30KU",
        "SG36KTL",
        "SG36KU",
        "SG40KTL",
        "SG40KTL-M",
        "SG50KTL-M",
        "SG60KTL-M",
        "SG60KU",
        "SG30KTL-M",
        "SG30KTL-M-V31",
        "SG33KTL-M",
        "SG36KTL-M",
        "SG33K3J",
        "SG49K5J",
        "SG34KJ",
        "LP_P34KSG",
        "SG50KTL-M-20",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG10KTL-MT",
        "SG12KTL-M",
        "SG15KTL-M",
        "SG17KTL-M",
        "SG20KTL-M",
        "SG80KTL-M",
        "SG111HV",
        "SG125HV",
        "SG125HV-20",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG40CX",
        "SG50CX",
        "SG60CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG25CX-SA",
        "SG75CX",
        "SG7.0RT",
        "SG8.0RT",
        "SG10RT",
        "SG12RT",
      ]
  - name: "string_4_current"
    level: 2
    address: 7016
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG30KTL",
        "SG10KTL",
        "SG12KTL",
        "SG15KTL",
        "SG20KTL",
        "SG30KU",
        "SG36KTL",
        "SG36KU",
        "SG40KTL",
        "SG40KTL-M",
        "SG50KTL-M",
        "SG60KTL-M",
        "SG60KU",
        "SG30KTL-M",
        "SG30KTL-M-V31",
        "SG33KTL-M",
        "SG36KTL-M",
        "SG33K3J",
        "SG49K5J",
        "SG34KJ",
        "LP_P34KSG",
        "SG50KTL-M-20",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG10KTL-MT",
        "SG12KTL-M",
        "SG15KTL-M",
        "SG17KTL-M",
        "SG20KTL-M",
        "SG80KTL-M",
        "SG111HV",
        "SG125HV",
        "SG125HV-20",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG40CX",
        "SG50CX",
        "SG60CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG25CX-SA",
        "SG75CX",
      ]
  - name: "string_5_current"
    level: 2
    address: 7017
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG30KTL",
        "SG10KTL",
        "SG12KTL",
        "SG15KTL",
        "SG20KTL",
        "SG30KU",
        "SG36KTL",
        "SG36KU",
        "SG40KTL",
        "SG40KTL-M",
        "SG50KTL-M",
        "SG60KTL-M",
        "SG60KU",
        "SG30KTL-M",
        "SG30KTL-M-V31",
        "SG33KTL-M",
        "SG36KTL-M",
        "SG33K3J",
        "SG49K5J",
        "SG34KJ",
        "SG50KTL-M-20",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG111HV",
        "SG125HV",
        "SG125HV-20",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG40CX",
        "SG50CX",
        "SG60CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG25CX-SA",
        "SG75CX",
      ]
  - name: "string_6_current"
    level: 2
    address: 7018
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG30KTL",
        "SG10KTL",
        "SG12KTL",
        "SG15KTL",
        "SG20KTL",
        "SG30KU",
        "SG36KTL",
        "SG36KU",
        "SG40KTL",
        "SG40KTL-M",
        "SG50KTL-M",
        "SG60KTL-M",
        "SG60KU",
        "SG30KTL-M",
        "SG30KTL-M-V31",
        "SG33KTL-M",
        "SG36KTL-M",
        "SG33K3J",
        "SG49K5J",
        "SG34KJ",
        "SG50KTL-M-20",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG111HV",
        "SG125HV",
        "SG125HV-20",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG40CX",
        "SG50CX",
        "SG60CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG25CX-SA",
        "SG75CX",
      ]
  - name: "string_7_current"
    level: 2
    address: 7019
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG30KTL",
        "SG30KU",
        "SG36KTL",
        "SG36KU",
        "SG40KTL",
        "SG40KTL-M",
        "SG50KTL-M",
        "SG60KTL-M",
        "SG60KU",
        "SG30KTL-M",
        "SG30KTL-M-V31",
        "SG33KTL-M",
        "SG36KTL-M",
        "SG33K3J",
        "SG49K5J",
        "SG34KJ",
        "SG50KTL-M-20",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG40CX",
        "SG50CX",
        "SG60CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
      ]
  - name: "string_8_current"
    level: 2
    address: 7020
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG30KTL",
        "SG30KU",
        "SG36KTL",
        "SG36KU",
        "SG40KTL",
        "SG40KTL-M",
        "SG50KTL-M",
        "SG60KTL-M",
        "SG30KTL-M",
        "SG30KTL-M-V31",
        "SG33KTL-M",
        "SG36KTL-M",
        "SG33K3J",
        "SG49K5J",
        "SG34KJ",
        "SG50KTL-M-20",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG40CX",
        "SG50CX",
        "SG60CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
      ]
  - name: "string_9_current"
    level: 2
    address: 7021
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG30KU",
        "SG36KTL",
        "SG36KU",
        "SG40KTL-M",
        "SG50KTL-M",
        "SG60KTL-M",
        "SG33K3J",
        "SG49K5J",
        "SG50KTL-M-20",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG50CX",
        "SG60CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
      ]
  - name: "string_10_current"
    level: 2
    address: 7022
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG30KU",
        "SG36KTL",
        "SG36KU",
        "SG50KTL-M",
        "SG60KTL-M",
        "SG49K5J",
        "SG50KTL-M-20",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG50CX",
        "SG60CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
      ]
  - name: "string_11_current"
    level: 2
    address: 7023
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG50KTL-M",
        "SG60KTL-M",
        "SG49K5J",
        "SG50KTL-M-20",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
      ]
  - name: "string_12_current"
    level: 2
    address: 7024
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG50KTL-M",
        "SG60KTL-M",
        "SG49K5J",
        "SG50KTL-M-20",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
      ]
  - name: "string_13_current"
    level: 2
    address: 7025
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG60KTL-M",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
      ]
  - name: "string_14_current"
    level: 2
    address: 7026
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG60KTL-M",
        "SG60KTL",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG30CX",
        "SG33CX",
        "SG36CX-US",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
        "SG3.0RT",
        "SG4.0RT",
        "SG5.0RT",
        "SG5.0RS",
        "SG6.0RT",
      ]
  - name: "string_15_current"
    level: 2
    address: 7027
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG60KTL-M",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
      ]
  - name: "string_16_current"
    level: 2
    address: 7028
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG60KTL-M",
        "SG80KTL",
        "SG80KTL-20",
        "SG60KU-M",
        "SG80KTL-M",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
      ]
  - name: "string_17_current"
    level: 2
    address: 7029
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG80KTL",
        "SG80KTL-20",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
      ]
  - name: "string_18_current"
    level: 2
    address: 7030
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"
    models:
      [
        "SG80KTL",
        "SG80KTL-20",
        "SG110CX",
        "SG250HX",
        "SG250HX-US",
        "SG100CX",
        "SG100CX-JP",
        "SG250HX-IN",
        "SG75CX",
      ]
  - name: "string_19_current"
    level: 2
    address: 7031
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"

  - name: "string_20_current"
    level: 2
    address: 7032
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"

  - name: "string_21_current"
    level: 2
    address: 7033
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"

  - name: "string_22_current"
    level: 2
    address: 7034
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"

  - name: "string_23_current"
    level: 2
    address: 7035
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"

  - name: "string_24_current"
    level: 2
    address: 7036
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "A"

  - name: "running_state"
    level: 2
    address: 13000
    data_type: U16
    decoded:
      0x0000: "Running"
      0x0040: "Running"
      0x0041: "Off-grid charge"
      0x0200: "Update Failed"
      0x0400: "Running in main mode"
      0x0800: "Running in forced mode"
      0x1000: "Running in off-grid mode"
      0x1111: "Uninitialized"
      # rest todo

  - name: "state_power_generated_from_pv"
    level: 2
    address: 13001
    data_type: U16
    mask: 1

  - name: "state_battery_charging"
    group: has_battery
    level: 2
    address: 13001
    data_type: U16
    mask: 2

  - name: "state_battery_discharging"
    group: has_battery
    level: 2
    address: 13001
    data_type: U16
    mask: 4

  - name: "state_load_active"
    level: 2
    address: 13001
    data_type: U16
    mask: 8

  - name: "state_feed_into_grid"
    group: is_master
    level: 2
    address: 13001
    data_type: U16
    mask: 16

  - name: "state_import_from_grid"
    group: is_master
    level: 2
    address: 13001
    data_type: U16
    mask: 32

  - name: "state_power_generated_from_load"
    level: 2
    address: 13001
    data_type: U16
    mask: 128

  - name: "daily_pv_generation"
    level: 1
    address: 13002
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "total_pv_generation"
    level: 0
    address: 13003
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"
    # Energy we have exported back to the grid today

  - name: "daily_pv_export"
    group: is_master
    level: 1
    address: 13005
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kWh"
    # Energy we have exported back to the grid since last reset (if any)

  - name: "total_pv_export"
    group: is_master
    level: 2
    address: 13006
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "load_power_hybrid"
    level: 1
    address: 13008
    data_type: S32
    unit_of_measurement: "W"

  - name: "export_power_hybrid"
    level: 1
    address: 13010
    data_type: S32
    unit_of_measurement: "W"

  - name: "daily_battery_charge_from_pv"
    group: has_battery
    level: 1
    address: 13012
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "total_battery_charge_from_pv"
    group: has_battery
    level: 1
    address: 13013
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "co2_reduction"
    level: 2
    address: 13015
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kg"

  - name: "daily_direct_energy_consumption"
    level: 1
    address: 13017
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "total_direct_energy_consumption"
    level: 2
    address: 13018
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "battery_voltage"
    group: has_battery
    level: 2
    address: 13020
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "V"

  - name: "battery_current"
    group: has_battery
    level: 2
    address: 13021
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "battery_power"
    group: has_battery
    level: 1
    address: 13022
    data_type: U16
    unit_of_measurement: "W"

  - name: "battery_level"
    group: has_battery
    level: 1
    address: 13023
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "%"

  - name: "battery_state_of_health"
    group: has_battery
    level: 2
    address: 13024
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "%"

  - name: "battery_temperature"
    group: has_battery
    level: 2
    address: 13025
    data_type: S16
    accuracy: 0.1
    unit_of_measurement: "°C"

  - name: "daily_battery_discharge_energy"
    group: has_battery
    level: 1
    address: 13026
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "total_battery_discharge_energy"
    group: has_battery
    level: 0
    address: 13027
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "self_consumption_of_day"
    level: 1
    address: 13029
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "%"

  - name: "grid_state"
    level: 1
    address: 13030
    data_type: U16
    decoded:
      0xAA: "Off-grid"
      0x55: "On-grid"

  - name: "phase_a_current"
    level: 2
    address: 13031
    data_type: S16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "phase_b_current"
    level: 2
    address: 13032
    data_type: S16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "phase_c_current"
    level: 2
    address: 13033
    data_type: S16
    accuracy: 0.1
    unit_of_measurement: "A"

  - name: "total_active_power_2"
    level: 3
    address: 13034
    data_type: S32
    unit_of_measurement: "W"
    # Note: This seems to produce the exact same value as the other total_active_power.

  - name: "daily_imported_energy"
    group: is_master
    level: 1
    address: 13036
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "total_imported_energy"
    group: is_master
    level: 0
    address: 13037
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "battery_capacity"
    group: has_battery
    level: 1
    address: 13039
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "daily_battery_charge_energy"
    group: has_battery
    level: 1
    address: 13040
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "total_battery_charge_energy"
    group: has_battery
    level: 0
    address: 13041
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "drm_state"
    level: 2
    address: 13043
    data_type: U16

  - name: "daily_exported_energy"
    group: is_master
    level: 1
    address: 13045
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "total_exported_energy"
    group: is_master
    level: 0
    address: 13046
    data_type: U32
    accuracy: 0.1
    unit_of_measurement: "kWh"

  - name: "inverter_alarm"
    level: 3
    address: 13050
    data_type: U32
    accuracy: 0.1

  - name: "grid-side_fault"
    level: 3
    address: 13052
    data_type: U32
    accuracy: 0.1

  - name: "system_fault1"
    level: 3
    address: 13054
    data_type: U32
    accuracy: 0.1

  - name: "system_fault2"
    level: 3
    address: 13056
    data_type: U32
    accuracy: 0.1

  - name: "dc-side_fault"
    level: 3
    address: 13058
    data_type: U32
    accuracy: 0.1

  - name: "permanent_fault"
    level: 3
    address: 13060
    data_type: U32
    accuracy: 0.1

  - name: "bdc-side_fault"
    level: 3
    address: 13062
    data_type: U32
    accuracy: 0.1

  - name: "bdc-side_permanent_fault"
    level: 3
    address: 13064
    data_type: U32
    accuracy: 0.1

  - name: "battery_fault"
    group: has_battery
    level: 3
    address: 13066
    data_type: U32
    accuracy: 0.1

  - name: "battery_alarm"
    group: has_battery
    level: 3
    address: 13068
    data_type: U32
    accuracy: 0.1

  - name: "bms_alarm"
    level: 3
    address: 13070
    data_type: U32

  - name: "bms_protection"
    level: 3
    address: 13072
    data_type: U32

  - name: "bms_fault1"
    level: 3
    address: 13074
    data_type: U32

  - name: "bms_fault2"
    level: 3
    address: 13076
    data_type: U32

  - name: "bms_alarm2"
    level: 3
    address: 13078
    data_type: U32

  - name: "bms_status"
    level: 3
    address: 13100
    data_type: U16
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "max_charging_current"
    group: has_battery
    level: 3
    address: 13101
    data_type: U16
    unit_of_measurement: "A"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "max_discharging_current"
    group: has_battery
    level: 3
    address: 13102
    data_type: U16
    unit_of_measurement: "A"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "warning"
    level: 3
    address: 13103
    data_type: U16
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "protection"
    level: 3
    address: 13104
    data_type: U16
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "fault1"
    level: 3
    address: 13105
    data_type: U16
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "fault2"
    level: 3
    address: 13106
    data_type: U16
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "soc"
    level: 2
    address: 13107
    data_type: U16
    unit_of_measurement: "%"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "soh"
    level: 2
    address: 13108
    data_type: U16
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "battery_current"
    group: has_battery
    level: 3
    address: 13109
    data_type: U16
    unit_of_measurement: "A"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "battery_voltage"
    group: has_battery
    level: 3
    address: 13110
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "V"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]
  - name: "cycle_count"
    level: 3
    address: 13111
    data_type: U16
    accuracy: 0.01
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "average_cell_voltage"
    level: 3
    address: 13112
    data_type: U16
    unit_of_measurement: "V"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "max_cell_voltage"
    level: 3
    address: 13113
    data_type: U16
    unit_of_measurement: "V"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "min_cell_voltage"
    level: 3
    address: 13114
    data_type: U16
    unit_of_measurement: "V"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "battery_pack_voltage"
    group: has_battery
    level: 3
    address: 13115
    data_type: U16
    unit_of_measurement: "V"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "average_cell_temp"
    level: 3
    address: 13116
    data_type: S16
    unit_of_measurement: "°C"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "max_cell_temp"
    level: 3
    address: 13117
    data_type: S16
    unit_of_measurement: "°C"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

  - name: "min_cell_temp"
    level: 3
    address: 13118
    data_type: S16
    unit_of_measurement: "°C"
    models:
      [
        "SH5K-20",
        "SH3K6",
        "SH4K6",
        "SH5K-V13",
        "SH5K-30",
        "SH3K6-30",
        "SH4K6-30",
      ]

hold:
  - name: "year"
    level: 3
    address: 5000
    data_type: U16

  - name: "month"
    level: 3
    address: 5001
    data_type: U16

  - name: "day"
    level: 3
    address: 5002
    data_type: U16

  - name: "hour"
    level: 3
    address: 5003
    data_type: U16

  - name: "minute"
    level: 3
    address: 5004
    data_type: U16

  - name: "second"
    level: 3
    address: 5005
    data_type: U16

  - name: "start_stop"
    level: 3
    address: 5006
    data_type: U16
    decoded:
      0xCF: "Start"
      0xCE: "Stop"

  - name: "power_limitation_switch"
    level: 3
    address: 5007
    data_type: U16
    decoded:
      0xAA: "Enable"
      0x55: "Disable"

  - name: "power_limitation_setting"
    level: 3
    address: 5008
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "%"

  - name: "export_power_limitation"
    level: 3
    address: 5010
    data_type: U16
    models:
      [
        "SG5KTL-MT",
        "SG6KTL-MT",
        "SG8KTL-M",
        "SG10KTL-M",
        "SG10KTL-MT",
        "SG12KTL-M",
        "SG15KTL-M",
        "SG17KTL-M",
        "SG20KTL-M",
      ]
    decoded:
      0xAA: "Enable"
      0x55: "Disable"

  - name: "export_power_limitation_value"
    level: 3
    address: 5011
    data_type: U16
    models:
      [
        "SG5KTL-MT",
        "SG6KTL-MT",
        "SG8KTL-M",
        "SG10KTL-M",
        "SG10KTL-MT",
        "SG12KTL-M",
        "SG15KTL-M",
        "SG17KTL-M",
        "SG20KTL-M",
      ]

  - name: "current_transformer_output_current"
    level: 3
    address: 5012
    data_type: U16
    unit_of_measurement: "A"
    models:
      [
        "SG5KTL-MT",
        "SG6KTL-MT",
        "SG8KTL-M",
        "SG10KTL-M",
        "SG10KTL-MT",
        "SG12KTL-M",
        "SG15KTL-M",
        "SG17KTL-M",
        "SG20KTL-M",
      ]

  - name: "current_transformer_range"
    level: 3
    address: 5013
    data_type: U16
    unit_of_measurement: "A"
    models:
      [
        "SG5KTL-MT",
        "SG6KTL-MT",
        "SG8KTL-M",
        "SG10KTL-M",
        "SG10KTL-MT",
        "SG12KTL-M",
        "SG15KTL-M",
        "SG17KTL-M",
        "SG20KTL-M",
      ]

  - name: "current_transformer"
    level: 3
    address: 5014
    data_type: U16
    models:
      [
        "SG5KTL-MT",
        "SG6KTL-MT",
        "SG8KTL-M",
        "SG10KTL-M",
        "SG10KTL-MT",
        "SG12KTL-M",
        "SG15KTL-M",
        "SG17KTL-M",
        "SG20KTL-M",
      ]
    decoded:
      0: "Internal"
      1: "External"

  - name: "export_power_limitation_percentage"
    group: has_battery
    level: 3
    address: 5015
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "%"
    models:
      [
        "SG5KTL-MT",
        "SG6KTL-MT",
        "SG8KTL-M",
        "SG10KTL-M",
        "SG10KTL-MT",
        "SG12KTL-M",
        "SG15KTL-M",
        "SG17KTL-M",
        "SG20KTL-M",
      ]

  - name: "installed_pv_power"
    level: 2
    address: 5016
    data_type: U16
    accuracy: 0.01
    unit_of_measurement: "KW"
    models:
      [
        "SG5KTL-MT",
        "SG6KTL-MT",
        "SG8KTL-M",
        "SG10KTL-M",
        "SG10KTL-MT",
        "SG12KTL-M",
        "SG15KTL-M",
        "SG17KTL-M",
        "SG20KTL-M",
      ]

  - name: "power_factor_setting"
    level: 3
    address: 5019
    data_type: U16
    accuracy: 0.001

  - name: "scheduling_achieve_active_overload"
    level: 3
    address: 5020
    data_type: U16
    models:
      [
        "SG33CX",
        "SG40CX",
        "SG50CX",
        "SG75CX",
        "SG110CX",
        "SG136TX",
        "SG250HX",
        "SG30CX",
        "SG36CX-US",
        "SG60CX-US",
        "SG250HX-US",
        "SG250HX-IN",
        "SG225HX",
        "SG250HX",
        "SG25CX-SA",
        "SG100CX",
        "SG3.0RT",
        "SG4.0RT",
        "SG5.0RT",
        "SG5.0RS",
        "SG6.0RT",
        "SG7.0RT",
        "SG8.0RT",
        "SG10RT",
        "SG12RT",
        "SG15RT",
        "SG17RT",
        "SG20RT",
      ]
    decoded:
      0xAA: "Enable"
      0x55: "Disable"

  - name: "night_svg_switch"
    level: 3
    address: 5035
    data_type: U16
    models:
      [
        "SG3.0RT",
        "SG4.0RT",
        "SG5.0RT",
        "SG5.0RS",
        "SG6.0RT",
        "SG7.0RT",
        "SG8.0RT",
        "SG10RT",
        "SG12RT",
        "SG15RT",
        "SG17RT",
        "SG20RT",
        "SG80KTL-M",
        "SG125HV-20",
        "SG33CX",
        "SG40CX",
        "SG50CX",
        "SG110CX",
        "SG136TX",
        "SG250HX",
        "SG30CX",
        "SG36CX-US",
        "SG60CX-US",
        "SG250HX-US",
        "SG250HX-IN",
        "SG225HX",
        "SG250HX",
        "SG25CX-SA",
        "SG100CX",
        "SG75CX",
      ]
    decoded:
      0xAA: "Enable"
      0x55: "Disable"

  - name: "reactive_power_adjustment_mode"
    level: 3
    address: 5036
    data_type: U16
    decoded:
      0x55: "Off"
      0xA1: "Power factor setting"
      0xA2: "Reactive power percentage setting"
      0xA3: "Enable Q(P)"
      0xA4: "Enable Q(U)"

  - name: "reactive_power_percentage_setting"
    level: 3
    address: 5037
    data_type: S16
    accuracy: 0.1
    unit_of_measurement: "%"

  - name: "power_limitation_adjustment"
    level: 3
    address: 5039
    data_type: U16
    accuracy: 0.1
    unit_of_measurement: "kW"

  - name: "reactive_power_adjustment"
    level: 3
    address: 5040
    data_type: S16
    accuracy: 100
    unit_of_measurement: "var"

  - name: "pid_recovery"
    level: 3
    address: 5041
    data_type: U16
    models:
      [
        "SG5KTL-MT",
        "SG6KTL-MT",
        "SG8KTL-M",
        "SG10KTL-M",
        "SG10KTL-MT",
        "SG12KTL-M",
        "SG15KTL-M",
        "SG17KTL-M",
        "SG20KTL-M",
        "SG3.0RT",
        "SG4.0RT",
        "SG5.0RT",
        "SG5.0RS",
        "SG6.0RT",
        "SG7.0RT",
        "SG8.0RT",
        "SG10RT",
        "SG12RT",
        "SG15RT",
        "SG17RT",
        "SG20RT",
        "SG80KTL-M",
        "SG125HV",
        "SG125HV-20",
        "SG80KTL",
        "SG33CX",
        "SG40CX",
        "SG50CX",
        "SG100CX、SG75CX",
        "SG110CX",
        "SG136TX",
        "SG250HX",
        "SG30CX",
        "SG36CX-US",
        "SG60CX-US",
        "SG250HX-US",
        "SG250HX-IN",
        "SG25CX-SA",
        "SG225HX",
      ]
    decoded:
      0xAA: "Enable"
      0x55: "Disable"

  - name: "anti_pid"
    level: 3
    address: 5042
    data_type: U16
    models:
      [
        "SG125HV",
        "SG125HV-20",
        "SG250HX",
        "SG250HX-US",
        "SG250HX-IN",
        "SG136TX",
        "SG100CX-JP",
        "SG225HX",
      ]
    decoded:
      0xAA: "Enable"
      0x55: "Disable"

  - name: "fullday_pid_suppression"
    level: 3
    address: 5043
    data_type: U16
    models: ["SG250HX", "SG250HX-US", "SG250HX-IN", "SG225HX"]
    decoded:
      0xAA: "Enable"
      0x55: "Disable"

  - name: "start_stop_2"
    level: 3
    address: 13000
    data_type: U16
    decoded:
      0xCF: "Start"
      0xCE: "Stop"

  - name: ems_mode_selection
    level: 3
    address: 13050
    data_type: U16
    decoded:
      0xCF: "Start"
      0xCE: "Stop"

  - name: battery_forced_charge_discharge_cmd
    # group: has_battery
    # ToDo: this is set to a non zero value, although the inverter does not have a battery.
    # We want to disable this via has_battery, but if we but it in the group,
    # it will prevent the entire group from being disabled.
    # Note: Doesn't seem urgent as this is level 3.
    level: 3
    address: 13051
    data_type: U16
    decoded:
      0xAA: "Forced Charge"
      0xBB: "Forced Discharge"
      0xCC: "Stop"

  - name: battery_forced_charge_discharge_power
    group: has_battery
    level: 2
    address: 13052
    data_type: U16
    unit_of_measurement: W
    models: ["SH.*RS"] # Note: ".*" will trigger regex matching

  - name: battery_forced_charge_discharge_power
    group: has_battery
    level: 2
    address: 13052
    data_type: U16
    unit_of_measurement: "%"
    models: ["SH.*RT"] # Note: ".*" will trigger regex matching

  - name: Max_SoC
    level: 3
    address: 13058
    data_type: U16
    unit_of_measurement: "%"
    accuracy: 0.1

  - name: Min_SoC
    level: 3
    address: 13059
    data_type: U16
    unit_of_measurement: "%"
    accuracy: 0.1

  - name: export_power_limit
    level: 3
    address: 13074
    data_type: U16
    unit_of_measurement: "W"

  - name: "start_charging_power"
    group: has_battery
    address: 13084
    level: 3
    accuracy: 10
    data_type: U16
    unit_of_measurement: "W"
    models: ["SH10RT", "SH8.0RT", "SH8.0RT-20", "SH6.0RT", "SH5.0RT"]

  - name: "start_discharging_power"
    group: has_battery
    address: 13085
    level: 3
    accuracy: 10
    data_type: U16
    unit_of_measurement: "W"
    models: ["SH10RT", "SH8.0RT", "SH8.0RT-20", "SH6.0RT", "SH5.0RT"]

  - name: "energy_meter_comm"
    address: 13086
    level: 3
    data_type: U16
    decoded:
      0xAA: "Enabled"
      0x55: "Disabled"
    models: ["SH10RT", "SH8.0RT", "SH8.0RT-20", "SH6.0RT", "SH5.0RT"]

  - name: "export_power_limitation"
    address: 13087
    level: 3
    data_type: U16
    decoded:
      0xAA: "Enabled"
      0x55: "Disabled"
    models: ["SH10RT", "SH8.0RT", "SH8.0RT-20", "SH6.0RT", "SH5.0RT"]

  - name: "soc_reserve"
    address: 13100
    level: 3
    data_type: U16
    unit_of_measurement: "%"
    models: ["SH10RT", "SH8.0RT", "SH8.0RT-20", "SH6.0RT", "SH5.0RT"]

  - name: battery_max_charge_power
    # group: has_battery
    # ToDo: this is set to a non zero value, although the inverter does not have a battery.
    # We want to disable this via has_battery, but if we but it in the group,
    # it will prevent the entire group from being disabled.
    # Note: Doesn't seem urgent as this is level 3.
    address: 33047
    level: 3
    data_type: U16
    unit_of_measurement: "W"
    accuracy: 10

  - name: battery_max_discharge_power
    # group: has_battery
    # ToDo: this is set to a non zero value, although the inverter does not have a battery.
    # We want to disable this via has_battery, but if we but it in the group,
    # it will prevent the entire group from being disabled.
    # Note: Doesn't seem urgent as this is level 3.
    address: 33048
    level: 3
    data_type: U16
    unit_of_measurement: "W"
    accuracy: 10

  - name: battery_capacity_2
    group: has_battery
    address: 33049
    level: 1
    data_type: U16
    unit_of_measurement: "kWh"
    accuracy: 0.01
    models_exclude: ["SH8.0RT-20"]

  - name: battery_charge_start_power
    group: has_battery
    address: 33149
    level: 3
    data_type: U16
    unit_of_measurement: "W"
    accuracy: 10

  - name: battery_charge_stop_power
    group: has_battery
    address: 33150
    level: 3
    data_type: U16
    unit_of_measurement: "W"
    accuracy: 10

  - name: master_slave_mode
    address: 33500
    level: 2
    data_type: U16
    decoded:
      0xAA: "Enabled"
      0x55: "Disabled"

  - name: master_slave_role
    address: 33501
    level: 2
    data_type: U16
    decoded:
      0xA0: "Master"
      0xA1: "Slave 1"
      0xA2: "Slave 2"
      0xA3: "Slave 3"
      0xA4: "Slave 4"

  - name: slave_count
    address: 33502
    level: 2
    data_type: U16
