---
# lovelace_gen
title: Server Status
path: serverstatus
panel: true
icon: mdi:server-network

cards:
  - type: custom:layout-card
    layout: auto
    max_columns: 3
    rtl: true
    cards:
      - type: vertical-stack
        style: !include ../includes/style.yaml
        cards:
          - type: custom:decluttering-card
            template: time-card
          - type: custom:gap-card
            height: 10
      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:decluttering-card
            template: markdown-header
            variables:
              - header: pveTBSH
          - type: custom:decluttering-card
            template: entities-no-header
            variables:
              - entities:
                  - entity: sensor.pvetbsh_uptime
                    name: Server Uptime
                    icon: mdi:server
                  - type: section
                  - entity: binary_sensor.pvetbsh_vmtbsh01_running
                    name: vmTBSH01 - Running
                    icon: mdi:server
                  - entity: binary_sensor.pvetbsh_vmtbsh02_running
                    name: vmTBSH02 - Running
                    icon: mdi:server
          - type: horizontal-stack
            cards:
              - entity: sensor.pvetbsh_system_cpu_idle
                max: 100
                min: 0
                name: CPU Idle
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'
              - entity: sensor.pvetbsh_ram_used_percent
                max: 100
                min: 0
                name: RAM Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'
              - entity: sensor.pvetbsh_disk_used_percent
                max: 100
                min: 0
                name: HDD Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'

      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:decluttering-card
            template: markdown-header
            variables:
              - header: piServ
          - type: custom:decluttering-card
            template: entities-no-header
            variables:
              - entities:
                  - entity: sensor.piserv_uptime
                    name: Server Uptime
                    icon: mdi:server
                  - type: section
                  - binary_sensor.servicestatus_pihole
                  - switch.pihole_switch
                  - type: section
          - type: horizontal-stack
            cards:
              - entity: sensor.piserv_cpu_used
                max: 100
                min: 0
                name: CPU Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'
              - entity: sensor.piserv_ram_used_percent
                max: 100
                min: 0
                name: RAM Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'
              - entity: sensor.piserv_disk_used_percent
                max: 100
                min: 0
                name: HDD Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'

      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:decluttering-card
            template: markdown-header
            variables:
              - header: TBSH01
          - type: custom:decluttering-card
            template: entities-no-header
            variables:
              - entities:
                  - entity: sensor.tbsh01_uptime
                    name: Server Uptime
                    icon: mdi:server
                  - entity: sensor.tbsh01_version
                    name: Docker Version
                  - sensor.tbsh01_containers_total
                  - sensor.tbsh01_containers_running
                  - sensor.tbsh01_containers_paused
                  - sensor.tbsh01_containers_stopped
                  - sensor.tbsh01_images_total
                  - entity: sensor.tbsh01_containers_active
                    type: custom:secondaryinfo-entity-row
                    name: Docker Containers Running
                    icon: mdi:docker
                    secondary_info: 'CPU Used: [[ sensor.tbsh01_containers_cpu_used.state ]]%, Mem Used: [[ sensor.tbsh01_containers_ram_used.state ]]MiB'
          - type: custom:auto-entities
            show_empty: true
            card:
              show_header_toggle: false
              title:
              type: entities
              style: |
                .card-content div {
                    margin: 0 !important;
                }
                #states {
                  padding-top: 0px !important;
                  padding-bottom: 0px !important;
                }
                .secondary {
                  color: darkgray !important;
                  margin-left: 2px !important;
                }
            filter:
              include:
                - entity_id: 'binary_sensor.tbsh01_ha_dockermon*'
                  options:
                    type: custom:multiple-entity-row
                    show_state: false
                    entities:
                      - attribute: memory
                        name: Mem
                      - attribute: network_rx_total
                        name: NetRX
                      - attribute: network_tx_total
                        name: NetTX
                    secondary_info:
                      attribute: status
                      name:
              sort:
                method: name
          - type: horizontal-stack
            cards:
              - entity: sensor.tbsh01_cpu_used
                max: 100
                min: 0
                name: CPU Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'
              - entity: sensor.tbsh01_ram_used_percent
                max: 100
                min: 0
                name: RAM Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'
              - entity: sensor.tbsh01_disk_used_percent
                max: 100
                min: 0
                name: HDD Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'

      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:decluttering-card
            template: markdown-header
            variables:
              - header: vmTBSH01
          - type: custom:decluttering-card
            template: entities-no-header
            variables:
              - entities:
                  - entity: sensor.vmtbsh01_uptime
                    name: Server Uptime
                    icon: mdi:server
                  - entity: sensor.vmtbsh01_containers_active
                    type: custom:secondaryinfo-entity-row
                    name: Docker Containers Running
                    icon: mdi:docker
                    secondary_info: 'CPU Used: [[ sensor.vmtbsh01_containers_cpu_used.state ]]%, Mem Used: [[ sensor.vmtbsh01_containers_ram_used.state ]]MiB'
          - type: custom:auto-entities
            show_empty: true
            card:
              show_header_toggle: false
              title:
              type: entities
              style: |
                .card-content div {
                    margin: 0 !important;
                }
                #states {
                  padding-top: 0px !important;
                  padding-bottom: 0px !important;
                }
                .secondary {
                  color: darkgray !important;
                  margin-left: 2px !important;
                }
            filter:
              include:
                - entity_id: 'binary_sensor.vmtbsh01_ha_dockermon*'
                  options:
                    type: custom:multiple-entity-row
                    show_state: false
                    entities:
                      - attribute: memory
                        name: Mem
                      - attribute: network_rx_total
                        name: NetRX
                      - attribute: network_tx_total
                        name: NetTX
                    secondary_info:
                      attribute: status
                      name:
              sort:
                method: name

          - type: horizontal-stack
            cards:
              - entity: sensor.vmtbsh01_cpu_used
                max: 100
                min: 0
                name: CPU Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'
              - entity: sensor.vmtbsh01_ram_used_percent
                max: 100
                min: 0
                name: RAM Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'
              - entity: sensor.vmtbsh01_disk_used_percent
                max: 100
                min: 0
                name: HDD Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'

      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:decluttering-card
            template: markdown-header
            variables:
              - header: vmTBSH02
          - type: custom:decluttering-card
            template: entities-no-header
            variables:
              - entities:
                  - entity: sensor.vmtbsh02_uptime
                    name: Server Uptime
                    icon: mdi:server
                  - entity: sensor.vmtbsh02_containers_active
                    type: custom:secondaryinfo-entity-row
                    name: Docker Containers Running
                    icon: mdi:docker
                    secondary_info: 'CPU Used: [[ sensor.vmtbsh02_containers_cpu_used.state ]]%, Mem Used: [[ sensor.vmtbsh02_containers_ram_used.state ]]MiB'
          - type: custom:auto-entities
            show_empty: true
            card:
              show_header_toggle: false
              title:
              type: entities
              style: |
                .card-content div {
                    margin: 0 !important;
                }
                #states {
                  padding-top: 0px !important;
                  padding-bottom: 0px !important;
                }
                .secondary {
                  color: darkgray !important;
                  margin-left: 2px !important;
                }
            filter:
              include:
                - entity_id: 'binary_sensor.vmtbsh02_ha_dockermon*'
                  options:
                    type: custom:multiple-entity-row
                    show_state: false
                    entities:
                      - attribute: memory
                        name: Mem
                      - attribute: network_rx_total
                        name: NetRX
                      - attribute: network_tx_total
                        name: NetTX
                    secondary_info:
                      attribute: status
                      name:
              sort:
                method: name
          - type: horizontal-stack
            cards:
              - entity: sensor.vmtbsh02_cpu_used
                max: 100
                min: 0
                name: CPU Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'
              - entity: sensor.vmtbsh02_ram_used_percent
                max: 100
                min: 0
                name: RAM Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'
              - entity: sensor.vmtbsh02_disk_used_percent
                max: 100
                min: 0
                name: HDD Used
                severity: { green: 0, red: 80, yellow: 30 }
                theme: default
                type: gauge
                unit: '%'
